<!DOCTYPE html>

<div ng-controller="EventTableBasicController as vm"
        ng-init="active[vm.getActiveTab()]= true">

      <div class="panel panel-blue">
        <div class="panel-heading">EventCreation Settings</div>
        <div class="panel-body pan">
            <div class="col-md-12">
            <form action="" novalidate name="editstudent" class="form-horizontal">
            <div class="form-body pal">

            <div class="row">
                <div class="col-md-4">

                  <div  class="form-group">
                    <label for="inputevent" class="control-label">Events</label>
                    <div class="input-icon right">
<!--                      <select id="inputclass" type="text" name="class" ng-model="vm.theevent" ng-change="vm.setEvent(vm.theevent)"  class="form-control EventCreation">
                        <option ng-repeat="g in vm.events" ng-selected="{{(g.Description === vm.classes[vm.nowChoice].Description) && 'selected' || 'not' }}"  value="{{g.Description}}">{{g.Description}}</option>
                      </select>
-->

                            <i data-hover="tooltip" data-original-title="Correct" 
                                ng-show="editevent.inputevent.$dirty" 
                                ng-class="editevent.inputevent.$invalid ? 'glyphicon-remove' : 'glyphicon-ok' " class="glyphicon tooltips"></i>
                              <input id="inputevent" type="text" placeholder="Pick Event" 
                                name="InputEvent" 
                                ng-model="vm.colsubkey" 
                                minLength="2" 
                                maxLength="80" 
                                ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 1500, 'blur': 0 } }" class="form-control">

                    </div>

                        <div class="row">
                              <div ng-class="{'has-error': editevent.inputevent.$invalid, 'has-success': !editevent.inputevent.$invalid}" class="form-group">
                                <label for="input_event" class="control-label">Event</label>
                                <div class="input-icon right">
                                    <i data-hover="tooltip" 
                                        data-original-title="Correct" 
                                        ng-show="editevent.inputevent.$dirty" 
                                        ng-class="editevent.inputevent.$invalid ? 'glyphicon-remove' : 'glyphicon-ok' " 
                                        class="glyphicon tooltips"></i>
                                  <input id="input_event" type="text" 
                                    placeholder="Event" 
                                    name="inputevent" 
                                    ng-model="vm.colsubkey" 
                                    ng-change="vm.getColDefs(vm.colsubkey)" 
                                    minLength="2" maxLength="30" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 1500, 'blur': 0 } }" class="form-control">
                                </div>
                                <div style="color:maroon" role="alert" ng-messages="editevent.inputevent.$error" class="has-error">
                                  <div ng-message="required">You did not enter a field</div>
                                  <div ng-message="minlength">Your field is too short</div>
                                  <div ng-message="maxlength">Your field is too long</div>
                                </div>
                              </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6">
                            <ui-select tagging tagging-label="('new')" 
                                ng-model="vm.colsubkey" 
                                theme="select2" 
                                ng-disabled="disabled" 
                                style="width: 300px;" 
                                title="Choose an event">
                  <ui-select-match allow-clear placeholder="Select or add the event...">{{$select.selected.col}}</ui-select-match>
                              <ui-select-choices 
                repeat="colkeyitem.col as colkeyitem in vm.colsubkeys| filter: $select.search ">
                                <small>
                        Name: <span ng-bind-html="colkeyitem.col | highlight: $select.search"></span>                    <hr style="margin-top: 0.2em; margin-bottom: 0.2em; border-top-color: #ef6c00"/>
                                </small>
                              </ui-select-choices>
                            </ui-select>
                          </div>
                          <div class="col-md-6">
                            <button type="button" ng-click="vm.saveState()" class="btn btn-default btn-sm mix-link">Set as {{vm.colsubkey}}</button>
                          </div>
                        </div>


                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="inputlimit" class="control-label">Limit</label>
                    <div class="input-icon right">
                      <select id="inputlimit" type="text" name="limit" ng-model="vm.limit" ng-change="vm.setLimit(vm.limit)" class="form-control EventCreation">
                        <option ng-repeat="lim in vm.limits" ng-selected="lim == vm.limit"  
                            value="{{lim}}">{{lim}}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">

                </div>
            </div>
        </div>
        </form>
        </div>
        </div>
        <div class="panel-footer"></div>
      </div>

    <uib-tabset type="pills" >
      <uib-tab 
            id="tab-event" 
            heading="Event Creation"
            active="active.event"
             select="vm.setActiveTab('event'); eventtabShown = !eventtabShown" deselect="eventtabShown = !eventtabShown"
            >

       <div class="panel panel-blue">
        <div class="panel-heading">Settings</div>
        <div class="panel-body pan">

              <div class="row">
                  <div class="col-md-12">
                    <div class="col-md-1">
                        <button id="save" type="button" class="btn btn-success" 
                            ng-click="vm.saveState()">Save</button>
                    </div>
                    <div class="col-md-1">
                        <button id="restore" type="button" class="btn btn-success" 
                            ng-click="vm.restoreState()">Restore</button>                      
                    </div>
                    <div class="col-md-2">
                        <button ng-click="vm.refreshtheEvent()" 
                                class="btn btn-blue btn-default EventCreation">Attendee List</button>
                    </div>
                    <div class="col-md-8"></div>
                  </div>
              </div>

              <div class="row" >
                  <div class="col-md-12">
                   <div ui-grid="vm.gridOptions" ng-style="{height: (30*11)+140+'px'}"
                        ui-grid-pagination ui-grid-cellNav ui-grid-auto-resize 
                        ui-grid-resize-columns ui-grid-pinning 
                        ui-grid-selection ui-grid-move-columns  
                        ui-grid-exporter ui-grid-grouping
                        ui-grid-save-state 
                        class="mygrid" ng-if="eventtabShown">
                   </div>
                </div>
                </div>
        </div>
        <div class="panel-footer"></div>
      </div>
        
      </uib-tab>
      <uib-tab 
            id="tab-attendhist" 
            heading="Event History"
            active="active.eventhistory"
            select="vm.setActiveTab('eventhistory');vm.getEventCreationHistory()">
       <div class="panel panel-blue">
        <div class="panel-heading">HistorySettings</div>
        <div class="panel-body pan">
          <div class="col-lg-12">
              <div class="row">
                <button ng-click="vm.getEventCreationHistory()" class="btn btn-blue btn-default EventCreation">Refresh List</button>
              </div>
              <div class="row">
                <div class="col-md-12">
                    <div class="col-md-1">MondayOfWeek</div>
                    <div class="col-md-1">Name</div>
                    <div class="col-md-1">Rank</div>
                </div>

<!--                <div class="col-md-12" ng-repeat="student in vm.data.EventCreationhistory">
                    <div class="col-md-1">{{student.MondayOfWeek}}</div>
                    <div class="col-md-1">{{student.firstname}} {{student.lastname}}</div>
                    <div class="col-md-1">{{student.rank}}</div>
                </div>
-->                  
              </div>
          </div>
        </div>
        <div class="panel-footer"></div>
      </div>


      </uib-tab>
    </uib-tabset>
</div>
