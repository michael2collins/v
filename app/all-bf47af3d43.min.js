"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(window,angular,$,_,tinymce,Stripe){function authrun($rootScope,$location,$cookieStore,$http,$log,UserServices,StudentServices,$window,$cookies,Idle){$log.debug("authrun entered"),$(document).ready(function(){$log.debug("fixing for drag-drop"),window.jQuery.event.props.push("dataTransfer"),$log.debug(window.jQuery.event.props),"Notification"in window&&($log.debug("onload permission check b4:",$window.Notification.permission),"denied"!==$window.Notification.permission&&$window.Notification.requestPermission().then(function(result){return"denied"===result?void $log.debug("Permission wasn't granted. Allow a retry."):"default"===result?void $log.debug("The permission request was dismissed."):void 0}))}),Idle.unwatch();var huh3=$cookies.get("globals")||{};$log.debug("authrun globals orig",huh3),_.isEmpty(huh3.currentUser)||($http.defaults.headers.common.Authorization=huh3.currentUser.authdata,$log.debug("in currentUser")),$rootScope.$on("$locationChangeStart",function(event,next,current){$log.debug("check login on location change",$location.path());var huh=$cookies.get("globals")||{};$cookies.get("slim_session")||{};huh3=_.isEmpty(huh)?null:JSON.parse(huh),$log.debug("authrun globals on $locationChangeStart",huh,huh3);var restrictedPage=$.inArray($location.path(),["/page-signin","/page-signup","/change-pwd","/reset-pwd","/forgot-pwd","/page-lock-screen","/stripe-onboard"])===-1,thekey=UserServices.isapikey();$log.debug("check userservices isapikey",thekey),restrictedPage&&!thekey&&($log.debug("restricted and not logged in"),Idle.unwatch(),$location.path("/page-signin")),null!==huh3&&thekey&&($http.defaults.headers.common.Authorization=huh3.currentUser.authdata,$log.debug("in currentUser"),stripeConfig(StudentServices,$log,$rootScope),Idle.watch())})}function stripeConfig(StudentServices,$log,$rootScope){var path="../v1/stripepub";StudentServices.getStripepub(path).then(function(data){$log.debug("getStripepub returned",data),$rootScope.stripe=Stripe(data.stripepub)},function(error){$log.debug("Caught an error getStripepub:",error)})}function routeConfig($routeProvider,$locationProvider){$routeProvider.when("/main",{templateUrl:"templates/states/main.html"}).when("/page-signin",{templateUrl:"templates/states/page-signin.html"}).when("/page-signup",{templateUrl:"templates/states/page-signup.html"}).when("/change-pwd",{templateUrl:"templates/states/change-pwd.html"}).when("/reset-pwd",{templateUrl:"templates/states/reset-pwd.html"}).when("/forgot-pwd",{templateUrl:"templates/states/forgot-pwd.html"}).when("/page-lock-screen",{templateUrl:"templates/states/page-lock-screen.html",controller:"PageLockScreenController"}).when("/layout-left-sidebar",{templateUrl:"templates/states/layout-left-sidebar.html"}).when("/table-basic-students",{templateUrl:"templates/states/table-basic-students.html"}).when("/form-layouts-newstudent",{templateUrl:"templates/states/form-layouts-newstudent.html"}).when("/form-layouts-editstudent/id/:id",{templateUrl:"templates/states/form-layouts-editstudent.html"}).when("/form-layouts-editstudent/id/:id/myclass/:myclass",{templateUrl:"templates/states/form-layouts-editstudent.html"}).when("/table-basic-attendance",{templateUrl:"templates/states/table-basic-attendance.html"}).when("/table-basic-eventcreation",{templateUrl:"templates/states/table-basic-eventcreation.html"}).when("/table-basic-testcandidates",{templateUrl:"templates/states/table-basic-testcandidates.html"}).when("/table-basic-rptbuilder",{templateUrl:"templates/states/table-basic-rptbuilder.html"}).when("/table-basic-schedule",{templateUrl:"templates/states/table-basic-schedule.php"}).when("/table-basic-program",{templateUrl:"templates/states/table-basic-program.php"}).when("/table-basic-htmltemplate",{templateUrl:"templates/states/table-basic-htmltemplate.php"}).when("/table-basic-testtype",{templateUrl:"templates/states/table-basic-testtype.php"}).when("/stripe-onboard",{templateUrl:"templates/states/stripe_onboard.php"}).when("/table-basic-classpgm",{templateUrl:"templates/states/table-basic-classpgm.php"}).when("/table-basic-classrank",{templateUrl:"templates/states/table-basic-classrank.php"}).when("/table-basic-classtest",{templateUrl:"templates/states/table-basic-classtest.php"}).when("/table-basic-basic",{templateUrl:"templates/states/table-basic-basic.php"}).when("/table-basic-paymenttracking",{templateUrl:"templates/states/table-basic-paymenttracking.php"}).when("/form-layouts-paymenttracking/id/:id",{templateUrl:"templates/states/table-basic-paymenttracking.php"}).when("/table-basic-rank",{templateUrl:"templates/states/table-basic-ranks.php"}).when("/table-basic-class",{templateUrl:"templates/states/table-basic-class.php"}).otherwise({redirectTo:"/page-signin"}),$locationProvider.html5Mode(!1)}angular.module("ng-admin",["ng-admin.core","ngRoute","ui.grid","ui.utils","ui.mask","ui.bootstrap","ui-notification","lvl.directives.dragdrop","toggle-switch","ngMessages","ngCookies","ui.grid.pagination","ui.grid.cellNav","ui.grid.edit","ui.grid.autoResize","ui.grid.selection","ui.grid.resizeColumns","ui.grid.pinning","ui.grid.moveColumns","ui.grid.exporter","ui.grid.importer","ui.grid.grouping","ui.grid.saveState","ui.select","iso.directives","ngSanitize","angularFileUpload","akoenig.deckgrid","color.picker","angularMoment","textAngular","appFilereader","angularSpectrumColorpicker","ui.bootstrap.dropdownToggle","angular-loading-bar","ngAnimate","ui.tinymce","ngmodel.format","ngIdle"]).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("")}]).constant("_",window._).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var expression,options,tinyInstance;attrs.id||attrs.$set("id","uiTinymce"+generatedIds++),options={setup:function(ed){ed.on("init",function(args){ngModel.$render()}),ed.on("ExecCommand",function(e){ed.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply()}),ed.on("KeyUp",function(e){console.log(ed.isDirty()),ed.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply()})},mode:"exact",elements:attrs.id},expression=attrs.uiTinymce?scope.$eval(attrs.uiTinymce):{},angular.extend(options,uiTinymceConfig,expression),setTimeout(function(){tinymce.init(options)}),ngModel.$render=function(){tinyInstance||(tinyInstance=tinymce.get(attrs.id)),tinyInstance&&tinyInstance.setContent(ngModel.$viewValue||"")}}}}]).config(function(NotificationProvider){NotificationProvider.setOptions({delay:1e4,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"left",positionY:"bottom"})}).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.parentSelector="#loading-bar-container",cfpLoadingBarProvider.includeSpinner=!1,cfpLoadingBarProvider.includeBar=!0,cfpLoadingBarProvider.latencyThreshold=100}]).config(["modelFormatConfig",function(modelFormatConfig){modelFormatConfig.number={formatter:function(args){var modelValue=args.$modelValue,filter=args.$filter;return filter("number")(modelValue)},parser:function(args){var val=parseInt(args.$viewValue.replace(/[^0-9\-]/g,""),10);return isNaN(val)?void 0:val},isEmpty:function(value){return!value.$modelValue},keyDown:function(args){var event=args.$event;global.keyHelper.smallKeyBoard(event)||global.keyHelper.numberKeyBoard(event)||global.keyHelper.functionKeyBoard(event)||minus(event)||(event.stopPropagation(),event.preventDefault())}}}]).config(function(IdleProvider,KeepaliveProvider,TitleProvider){IdleProvider.idle(1200),IdleProvider.keepalive(!1),IdleProvider.timeout(300),IdleProvider.windowInterrupt("focus"),TitleProvider.enabled(!0)}).run(function($rootScope){$rootScope._=window._}).config(["$provide",function($provide){$provide.decorator("$log",["$delegate",function($delegate){var $log,enabled=!0;return $log={debugEnabled:function(flag){enabled=!!flag}},["log","warn","info","error","debug"].forEach(function(methodName){$log[methodName]=function(){if(enabled){var logger=$delegate;logger[methodName].apply(logger,arguments)}}}),$log}])}]).run(["$log",function($log){$log.debugEnabled(!1)}]).config(routeConfig).run(authrun);var minus=function(event){var which=event.which;return 45==which||189==which};routeConfig.$inject=["$routeProvider","$locationProvider"],authrun.$inject=["$rootScope","$location","$cookieStore","$http","$log","UserServices","StudentServices","$window","$cookies","Idle"]}(window,window.angular,window.$,window._,window.tinymce,window.Stripe),function(window,angular){angular.module("ng-admin.core",[])}(window,window.angular),angular.module("ng-admin").directive("imageloaded",[function(){return{restrict:"A",link:function(scope,element,attrs){var cssClass=attrs.loadedclass;element.bind("load",function(e){angular.element(element).addClass(cssClass)})}}}]).directive("img",function(){return{restrict:"E",link:function(scope,element,attrs){element.error(function(){var w=element.width(),h=element.height();w<=100&&(w=400),h<=200&&(h=600);var url="//placehold.it/"+w+"x"+h+"/cccccc/ffffff&text=Image Not Uploaded!";element.prop("src",url),element.css("border","double 3px #cccccc")})}}}),function(){angular.module("ng-admin").directive("ngDropzone",function($parse,$compile){return{link:function($scope,element,attributes){$(attributes.$$element).dropzone({url:"http://www.torrentplease.com/dropzone.php",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:5,init:function(){this.on("success",function(file,json){}),this.on("addedfile",function(file){$scope.$apply(function(){})}),this.on("drop",function(file){})}})}}})}(),function(window,angular){angular.module("ng-admin").directive("datepickerPopup",function(){return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){controller.$formatters.shift()}}}).directive("ngMenu",function($parse,$compile){return{link:function($scope,element,attributes){$scope._menu={status:[],collapse:{},hover:[]},$scope._menu.mouseleave=function(){for(var j=0;j<$scope._menu.hover.length;j++)$scope._menu.hover[j]=""},$scope._menu.mouseover=function(i){for(var j=0;j<$scope._menu.hover.length;j++)$scope._menu.hover[j]="";$scope._menu.hover[i]="nav-hover"},$scope._menu.collapse=function(i){$scope._menu.status[i]=!$scope._menu.status[i];var current=attributes.$$element.find("a[index="+i+"]");current.parent("li").addClass("active").siblings().removeClass("active").children("ul").each(function(){$scope._menu.status[$(this).attr("index")]=!0}),current.hasClass("btn-fullscreen")&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},attributes.$$element.find("li").children("a").each(function(index,value){$scope._menu.status[index]=!0,$(this).attr({"ng-click":"_menu.collapse("+index+")",index:index}),$(">ul",$(this).parent("li")).attr({"uib-collapse":"_menu.status["+index+"]",index:index})}),$(">li",attributes.$$element).each(function(index,value){$scope._menu.hover[index]="",$(this).attr({"ng-mouseleave":"_menu.mouseleave()","ng-mouseover":"_menu.mouseover("+index+")","ng-class":"_menu.hover["+index+"]"})}),element.html($compile(element.html())($scope))}}}).directive("itemsDrag",function(){var $=angular.element,uid=function(){var id=0;return function(){return 0===arguments[0]&&(id=0),id++}}(),eventDrag=function(el){var eventObject={title:$.trim(el.text()),id:uid()};el.data("eventObject",eventObject),el.draggable({zIndex:999,revert:!0,revertDuration:0})};return{link:function(scope,element,attrs){element.draggable(),eventDrag(element),scope.$on("$destroy",function(){element.off("**")})}}})}(window,window.angular),function(window,angular){angular.module("ng-admin").directive("ngTab",function($parse,$compile){return{link:function(scope,element,attrs){element.click(function(e){e.preventDefault()})}}}).directive("myCustomDropdown",function(){return{template:'<select class="ui-grid-filter-select ui-grid-filter-input-0" ng-model="colFilter.term" ng-options="option.value as option.value for option in colFilter.options track by option.value"></select>'}}).directive("myCustomDropdownid",function(){return{template:'<select class="ui-grid-filter-select ui-grid-filter-input-0" ng-model="colFilter.term" ng-options="option.id as option.value for option in colFilter.options track by option.id"></select>'}}).directive("zoom",function($window){function link(scope,element,attrs){var frame,image,zoomlvl,fWidth,fHeight,rect,rootDoc,offsetL,offsetT,xPosition,yPosition,pan;scope.$watch("$viewContentLoaded",function(){frame=angular.element(document.querySelector("#"+scope.frame))[0],image=angular.element(document.querySelector("#"+scope.img))[0],zoomlvl=void 0===scope.zoomlvl?"2.5":scope.zoomlvl}),scope.trackMouse=function($event){fWidth=frame.clientWidth,fHeight=frame.clientHeight,rect=frame.getBoundingClientRect(),rootDoc=frame.ownerDocument.documentElement,offsetT=rect.top+$window.pageYOffset-rootDoc.clientTop,offsetL=rect.left+$window.pageXOffset-rootDoc.clientLeft,xPosition=($event.pageX-offsetL)/fWidth*100,yPosition=($event.pageY-offsetT)/fHeight*100,pan=xPosition+"% "+yPosition+"% 0",image.style.transformOrigin=pan},element.on("mouseover",function(event){image.style.transform="scale("+zoomlvl+")"}),element.on("mouseout",function(event){image.style.transform="scale(1)"})}return{restrict:"EA",scope:{src:"@src",frame:"@frame",img:"@img",zoomlvl:"@zoomlvl"},template:['<div id="{{ frame }}" class="zoomPanFrame" >','<img id="{{ img }}" class="zoomPanImage" ng-src= "{{ src }}" ng-mousemove="trackMouse($event)"></img>',"</div>"].join(""),link:link}}).directive("sbLoad",["$parse",function($parse){return{restrict:"A",link:function(scope,elem,attrs){var fn=$parse(attrs.sbLoad);elem.on("load",function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}])}(window,window.angular),function(){angular.module("ng-admin").directive("ngThumbupload",["$window",function($window){var helper={support:!(!$window.FileReader||!$window.CanvasRenderingContext2D),isFile:function(item){return angular.isObject(item)&&item instanceof $window.File},isImage:function(file){var type="|"+file.type.slice(file.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(type)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(scope,element,attributes){function onLoadFile(event){var img=new Image;img.onload=onLoadImage,img.src=event.target.result}function onLoadImage(){var im=this,width=params.width||im.width/im.height*params.height,height=params.height||im.height/im.width*params.width;canvas.attr({width:width,height:height}),canvas[0].getContext("2d").drawImage(im,0,0,width,height)}if(helper.support){var params=scope.$eval(attributes.ngThumbupload);if(helper.isFile(params.file)&&helper.isImage(params.file)){var canvas=element.find("canvas"),reader=new FileReader;reader.onload=onLoadFile,reader.readAsDataURL(params.file)}}}}}])}(),function(window,angular,navigator){angular.module("ngmodel.format",[]).constant("modelFormatConfig",{currency:{formatter:function(args){var modelValue=args.$modelValue,filter=args.$filter,attrs=args.$attrs,$eval=args.$eval,val=filter("currency")(modelValue);return attrs.prefixed&&$eval(attrs.prefixed)?val:val.substr(1)},parser:function(args){var viewValue=args.$viewValue,num=viewValue.replace(/[^0-9.]/g,""),result=parseFloat(num,10);return isNaN(result)?void 0:parseFloat(result.toFixed(2))},isEmpty:function(value){return!value.$modelValue},keyDown:function(args){var event=args.$event,viewValue=args.$viewValue;args.$modelValue;global.keyHelper.smallKeyBoard(event)||global.keyHelper.numberKeyBoard(event)||global.keyHelper.functionKeyBoard(event)||global.keyHelper.currencyKeyBoard(event,viewValue)||global.keyHelper.floatKeyBoard(event,viewValue)||(event.stopPropagation(),event.preventDefault())}},digit:{formatter:function(args){return args.$modelValue},parser:function(args){return args.$viewValue?args.$viewValue.replace(/[^0-9]/g,""):void 0},isEmpty:function(value){return!value.$modelValue},keyDown:function(args){var event=args.$event;global.keyHelper.smallKeyBoard(event)||global.keyHelper.numberKeyBoard(event)||global.keyHelper.functionKeyBoard(event)||(event.stopPropagation(),event.preventDefault())}},"int":{formatter:function(args){var modelValue=args.$modelValue,filter=args.$filter;return filter("number")(modelValue)},parser:function(args){var val=parseInt(args.$viewValue.replace(/[^0-9]/g,""),10);return isNaN(val)?void 0:val},isEmpty:function(value){return!value.$modelValue},keyDown:function(args){var event=args.$event;global.keyHelper.smallKeyBoard(event)||global.keyHelper.numberKeyBoard(event)||global.keyHelper.functionKeyBoard(event)||(event.stopPropagation(),event.preventDefault())}},"float":{formatter:function(args){var modelValue=args.$modelValue,filter=args.$filter;return filter("number")(modelValue)},parser:function(args){var val=parseFloat(args.$viewValue.replace(/[^0-9.]/g,"")),ENOB=3,tempNum=Math.pow(10,ENOB);return isNaN(val)?void 0:Math.round(val*tempNum)/tempNum},isEmpty:function(value){return!value.$modelValue},keyDown:function(args){var event=args.$event,viewValue=args.$viewValue;global.keyHelper.smallKeyBoard(event)||global.keyHelper.numberKeyBoard(event)||global.keyHelper.functionKeyBoard(event)||global.keyHelper.floatKeyBoard(event,viewValue)||(event.stopPropagation(),event.preventDefault())}},"boolean":{formatter:function(args){var modelValue=args.$modelValue;if(!angular.isUndefined(modelValue))return modelValue.toString()},parser:function(args){var viewValue=args.$viewValue;if(!angular.isUndefined(viewValue))return"true"===viewValue.trim()},isEmpty:function(value){return angular.isUndefined(value)}}}).directive("modelFormat",["modelFormatConfig","$filter","$parse",function(modelFormatConfig,$filter,$parse){return{require:"ngModel",link:function(scope,element,attrs,ctrl){var config=modelFormatConfig[attrs.modelFormat]||{},parseFuction=function(funKey){if(attrs[funKey]){var func=$parse(attrs[funKey]);return function(args){return func(scope,args)}}return config[funKey]},formatter=parseFuction("formatter"),parser=parseFuction("parser"),isEmpty=parseFuction("isEmpty"),keyDown=parseFuction("keyDown"),getModelValue=function(){return $parse(attrs.ngModel)(scope)};keyDown&&element.bind("blur",function(){element.val(formatter({$modelValue:getModelValue(),$filter:$filter,$attrs:attrs,$eval:scope.$eval}))}).bind("keydown",function(event){keyDown({$event:event,$viewValue:element.val(),$modelValue:getModelValue(),$attrs:attrs,$eval:scope.$eval,$ngModelCtrl:ctrl})}),ctrl.$parsers.push(function(viewValue){return parser({$viewValue:viewValue,$attrs:attrs,$eval:scope.$eval})}),ctrl.$formatters.push(function(value){return formatter({$modelValue:value,$filter:$filter,$attrs:attrs,$eval:scope.$eval})}),ctrl.$isEmpty=function(value){return isEmpty({$modelValue:value,$attrs:attrs,$eval:scope.$eval})}}}}]).directive("checkBoxToArray",[function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var value=scope.$eval(attrs.checkBoxToArray);ctrl.$parsers.push(function(viewValue){var modelValue=ctrl.$modelValue?angular.copy(ctrl.$modelValue):[];return viewValue===!0&&modelValue.indexOf(value)===-1&&modelValue.push(value),viewValue!==!0&&modelValue.indexOf(value)!=-1&&modelValue.splice(modelValue.indexOf(value),1),modelValue.sort()}),ctrl.$formatters.push(function(modelValue){return modelValue&&modelValue.indexOf(value)!=-1}),ctrl.$isEmpty=function($modelValue){return!$modelValue||0===$modelValue.length}}}}]);var smallKeyBoard=function(event){var which=event.which;return which>=96&&which<=105},numberKeyBoard=function(event){var which=event.which;return which>=48&&which<=57&&!event.shiftKey},functionKeyBoard=function(event){var which=event.which;return which<=40||46===which||navigator.platform.indexOf("Mac")>-1&&event.metaKey||navigator.platform.indexOf("Win")>-1&&event.ctrlKey},currencyKeyBoard=function(event,viewValue){var which=event.which;return viewValue.toString().indexOf("$")===-1&&52===which&&event.shiftKey},floatKeyBoard=function(event,viewValue){var which=event.which;return[188].indexOf(which)!=-1||(190===which||110===which)&&viewValue.toString().indexOf(".")===-1};global.keyHelper={smallKeyBoard:smallKeyBoard,numberKeyBoard:numberKeyBoard,functionKeyBoard:functionKeyBoard,currencyKeyBoard:currencyKeyBoard,floatKeyBoard:floatKeyBoard}}(window,window.angular,window.navigator),function(window,angular){angular.module("ng-admin").directive("ngPrint",function(){function link(scope,element,attrs){if(element.on("click",function(){var elemToPrint=document.getElementById(attrs.printElementId);elemToPrint&&printElement(elemToPrint)}),window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){mql.matches||afterPrint()})}window.onafterprint=afterPrint}function afterPrint(){printSection.innerHTML=""}function printElement(elem){var domClone=elem.cloneNode(!0);printSection.innerHTML="",printSection.appendChild(domClone),window.print()}var printSection=document.getElementById("printSection");return printSection||(printSection=document.createElement("div"),printSection.id="printSection",document.body.appendChild(printSection)),{link:link,restrict:"A"}})}(window,window.angular),function(){angular.module("ng-admin").directive("scrollSpy",function($window){return{restrict:"A",controller:function($scope){$scope.spies=[],this.addSpy=function(spyObj){$scope.spies.push(spyObj)}},link:function(scope,elem,attrs){function toggleChevron(e){$(e.target).prev(".panel-heading").find("i.indicator").toggleClass("glyphicon-chevron-left glyphicon-chevron-down")}$("#accordion1").on("hidden.bs.collapse",toggleChevron),$("#accordion1").on("shown.bs.collapse",toggleChevron),$(".scrollspy-example").slimScroll({height:"200",railVisible:!0,alwaysVisible:!0})}}}).directive("spy",function($location,$anchorScroll){return{restrict:"A",require:"^scrollSpy",link:function(scope,elem,attrs,affix){elem.click(function(){$location.hash(attrs.spy),$anchorScroll()}),affix.addSpy({id:attrs.spy,"in":function(){elem.addClass("active")},out:function(){elem.removeClass("active")}})}}})}(),function(window,angular){angular.module("ng-admin").directive("uiGridEditDatepicker",["$timeout","$document","uiGridConstants","uiGridEditConstants",function($timeout,$document,uiGridConstants,uiGridEditConstants){return{template:function(element,attrs){var html='<div class="datepicker-wrapper" ><input type="text" uib-datepicker-popup datepicker-append-to-body="true" is-open="isOpen" ng-model="datePickerValue" ng-change="changeDate($event)" popup-placement="auto top"/></div>';return html},require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){$scope.datePickerValue=new Date($scope.row.entity[$scope.col.field]),$scope.isOpen=!0;var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1],onWindowClick=function(evt){var classNamed=angular.element(evt.target).attr("class");if(classNamed){var inDatepicker=classNamed.indexOf("datepicker-calendar")>-1;inDatepicker||"INPUT"===evt.target.nodeName||$scope.stopEdit(evt)}else $scope.stopEdit(evt)},onCellClick=function onCellClick(evt){angular.element(document.querySelectorAll(".ui-grid-cell-contents")).off("click",onCellClick),$scope.stopEdit(evt)};$scope.changeDate=function(evt){$scope.row.entity[$scope.col.field]=$scope.datePickerValue,$scope.stopEdit(evt)},$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){uiGridCtrl.grid.api.cellNav?uiGridCtrl.grid.api.cellNav.on.navigate($scope,function(newRowCol,oldRowCol){$scope.stopEdit()}):angular.element(document.querySelectorAll(".ui-grid-cell-contents")).on("click",onCellClick),angular.element(window).on("click",onWindowClick)}),$scope.$on("$destroy",function(){angular.element(window).off("click",onWindowClick)}),$scope.stopEdit=function(evt){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)},$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)}if(uiGridCtrl&&uiGridCtrl.grid.api.cellNav)evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,null!==uiGridCtrl.cellNav.handleKeyDown(evt)&&$scope.stopEdit(evt);else switch(evt.keyCode){case uiGridConstants.keymap.ENTER:case uiGridConstants.keymap.TAB:evt.stopPropagation(),evt.preventDefault(),$scope.stopEdit(evt)}return!0})}}}}}])}(window,window.angular),angular.module("notifyme",[]).factory("NotifyMe",function(){console.log("NotifyMe entered");var notifyme=this;return function(root,definition){"function"==typeof define&&define.amd?define([],definition):root.NotifyMe=definition()}(notifyme,function(){function extend(base,extension){var extended={};for(var key in base)base.hasOwnProperty(key)&&(extended[key]=base[key]);for(var key in extension)extension.hasOwnProperty(key)&&(extension[key].constructor===Object?extended[key]=extend(base[key],extension[key]):extended[key]=extension[key]);return extended}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function generateTag(){return[s4()+s4(),s4(),s4(),s4(),s4()+s4()+s4()].join("-")}function NotifyMe(title,options){return console.log("NotifyMe constructor",title,options),this instanceof NotifyMe?(this.title=title,this.options=extend(defaultOptions,options||{}),void(this.options.tag=generateTag())):new NotifyMe(title,options)}var defaultOptions={icon:"http://us.cdn2.123rf.com/168nwm/dxinerz/dxinerz1506/dxinerz150601488/41355464-bell-notification-call-icon-vector-image-can-also-be-used-for-education-academics-and-science-suitab.jpg",lang:"en-US",onclick:function(){},onclose:function(){},onerror:function(){}};return NotifyMe.permissionGranted=!1,NotifyMe.requestPermission=function(){return console.log("NotifyMe requestPermission entered"),new Promise(function(resolve,reject){try{window.Notification?Notification.requestPermission().then(function(permission){console.log("requestPermission",permission),"denied"===permission?reject("Permission issue.  Permission is:",permission):(NotifyMe.permissionGranted=!0,resolve())}):(console.log("notification not supported"),reject("notification not supported"))}catch(e){console.log("notification requestPermission error",e)}})},NotifyMe.prototype.launch=function(){return console.log("NotifyMe launch entered"),NotifyMe.permissionGranted?(this.notification=new Notification(this.title,this.options),this.notification.onclick=this.options.onclick,this.notification.onerror=this.options.onerror,this.notification.onclose=this.options.onclose,Promise.resolve(this.notification)):NotifyMe.requestPermission().then(this.launch.bind(this))["catch"](console.warn.bind(console))},NotifyMe}),{launch:function(title,options){notifyme.NotifyMe(title,options).launch()}}}),!function(a,b){var c=a.module("angularSpectrumColorpicker",[]);!function(b){c.directive("spectrumColorpicker",function(){return{restrict:"EA",require:"ngModel",scope:{fallbackValue:"=",disabled:"=?",format:"=?",options:"=?",triggerId:"@?",palette:"=?",onChange:"&?",onShow:"&?",onHide:"&?",onMove:"&?",onBeforeShow:"&?",onChangeOptions:"=?",onShowOptions:"=?",onHideOptions:"=?",onMoveOptions:"=?"},replace:!0,templateUrl:"directive.html",link:function(b,c,d,e){function f(a){var c=a;return c&&(c=a.toString(b.format)),c}function g(c){a.isFunction(b.onChange)&&b.onChange({color:c})}function h(c){var d=b.fallbackValue;c?d=f(c):a.isUndefined(b.fallbackValue)&&(d=c),e.$setViewValue(d),g(d)}var i=c.find("input"),j=function(a){b.$evalAsync(function(){h(a)})},k=function(){return i.spectrum("toggle"),!1},l={color:e.$viewValue},m={};a.forEach({change:"onChange",move:"onMove",hide:"onHide",show:"onShow"},function(c,d){var e=b[c+"Options"];m[d]=function(d){return(!e||e.update)&&j(d),"change"!==c&&a.isFunction(b[c])?b[c]({color:f(d)}):null}}),a.isFunction(b.onBeforeShow)&&(m.beforeShow=function(a){return b.onBeforeShow({color:f(a)})}),b.palette&&(m.palette=b.palette);var n=a.extend({},l,b.options,m);b.triggerId&&a.element(document.body).on("click","#"+b.triggerId,k),e.$render=function(){i.spectrum("set",e.$viewValue||""),g(e.$viewValue)},n.color&&(i.spectrum("set",n.color||""),h(n.color)),i.spectrum(n),b.$on("$destroy",function(){b.triggerId&&a.element(document.body).off("click","#"+b.triggerId,k)}),c.on("$destroy",function(){i.spectrum("destroy")}),a.isDefined(n.disabled)&&(b.disabled=!!n.disabled),b.$watch("disabled",function(a){i.spectrum(a?"disable":"enable")}),b.$watch("palette",function(a){i.spectrum("option","palette",a)})}}})}(),a.module("angularSpectrumColorpicker").run(["$templateCache",function(a){a.put("directive.html",'<span><input class="input-small"></span>')}])}(window.angular),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function($document,$location){var openElement=null,_closeMenu=angular.noop;return{restrict:"CA",link:function(scope,element,attrs){scope.$watch("$location.path",function(){_closeMenu()}),element.parent().bind("click",function(){_closeMenu()}),element.bind("click",function(event){var elementWasOpen=element===openElement;event.preventDefault(),event.stopPropagation(),openElement&&_closeMenu(),elementWasOpen||element.hasClass("disabled")||element.prop("disabled")||(element.parent().addClass("open"),openElement=element,_closeMenu=function(event){event&&(event.preventDefault(),event.stopPropagation()),$document.unbind("click",_closeMenu),element.parent().removeClass("open"),_closeMenu=angular.noop,openElement=null},$document.bind("click",_closeMenu))})}}}]),function(window,angular){"Use Strict";function registerTextAngularTool(name,toolDefinition){if(!name||""===name||taTools.hasOwnProperty(name))throw"textAngular Error: A unique name is required for a Tool Definition";if(toolDefinition.display&&(""===toolDefinition.display||0===angular.element(toolDefinition.display).length)||!toolDefinition.display&&!toolDefinition.buttontext&&!toolDefinition.iconclass)throw'textAngular Error: Tool Definition for "'+name+'" does not have a valid display/iconclass/buttontext value';taTools[name]=toolDefinition}var textAngular=angular.module("textAngular",["ngSanitize","colorpicker.module","ui.bootstrap.dropdownToggle"]);textAngular.value("taOptions",{toolbar:[["blockFormat","pre","quote","fontName","fontSize","bold","italics","underline","strikeThrough","fontColor","backgroundColor","alignment","ul","ol","outdent","indent"],["insertImage","insertLink","unlink","insertHorizontalRule"],["redo","undo","clear","html"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function($element){},htmlEditorSetup:function($element){}}});var taTools={};textAngular.constant("taRegisterTool",registerTextAngularTool),textAngular.value("taTools",taTools),textAngular.config(["taRegisterTool",function(taRegisterTool){
angular.forEach(taTools,function(value,key){delete taTools[key]}),taRegisterTool("html",{buttontext:"Toggle HTML",action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var _retActiveStateFunction=function(q){return function(){return this.$editor().queryFormatBlockState(q)}},headerAction=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(h){taRegisterTool(h.toLowerCase(),{buttontext:h.toUpperCase(),action:headerAction,activeState:_retActiveStateFunction(h.toLowerCase())})}),taRegisterTool("p",{buttontext:"P",action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),taRegisterTool("blockFormat",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-default dropdown-toggle' type='button' ng-disabled='showHtml()'><span>{{active}} </span></button><ul class='dropdown-menu'><li ng-repeat='o in options'><button class='checked-dropdown' type='button' ng-click='action(o.html)'><i ng-if='o.active' class='fa fa-check'></i>{{o.name}}</button></li></ul></span>",action:function(html){""!==html&&this.$editor().wrapSelection("formatBlock",html)},options:[{name:"Header 1 (h1)",code:"h1",html:"<H1>"},{name:"Header 2 (h2)",code:"h2",html:"<H2>"},{name:"Header 3 (h3)",code:"h3",html:"<H3>"},{name:"Header 4 (h4)",code:"h4",html:"<H4>"},{name:"Header 5 (h5)",code:"h5",html:"<H5>"},{name:"Header 6 (h6)",code:"h6",html:"<H6>"},{name:"Paragraph (p)",code:"p",html:"<P>"}],active:"Format Text",setActive:function(html){angular.forEach(this.options,function(option){html===option.html?(this.active=option.name,option.active=!0):option.active=!1})},getActive:function(){var format=document.queryCommandValue("formatBlock");return selected="",angular.forEach(this.options,function(option){option.code===format&&(selected=option.html)}),selected}}),taRegisterTool("pre",{buttontext:"pre",action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),taRegisterTool("ul",{iconclass:"fa fa-list-ul",action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return document.queryCommandState("insertUnorderedList")}}),taRegisterTool("ol",{iconclass:"fa fa-list-ol",action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return document.queryCommandState("insertOrderedList")}}),taRegisterTool("quote",{iconclass:"fa fa-quote-right",action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),taRegisterTool("indent",{iconclass:"fa fa-indent",action:function(){return this.$editor().wrapSelection("indent",null)}}),taRegisterTool("outdent",{iconclass:"fa fa-outdent",action:function(){return this.$editor().wrapSelection("outdent",null)}}),taRegisterTool("fontName",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-default dropdown-toggle' type='button' ng-disabled='showHtml()'><span>{{active}} </span></button><ul class='dropdown-menu'><li ng-repeat='o in options'><button class='checked-dropdown' style='font-family: {{o.css}}' type='button' ng-click='action(o.css)'><i ng-if='o.active' class='fa fa-check'></i>{{o.name}}</button></li></ul></span>",action:function(font){""!==font&&this.$editor().wrapSelection("fontName",font)},options:[{name:"Sans-Serif",css:"Arial, Helvetica, sans-serif"},{name:"Serif",css:"'times new roman', serif"},{name:"Wide",css:"'arial black', sans-serif"},{name:"Narrow",css:"'arial narrow', sans-serif"},{name:"Comic Sans MS",css:"'comic sans ms', sans-serif"},{name:"Courier New",css:"'courier new', monospace"},{name:"Garamond",css:"garamond, serif"},{name:"Georgia",css:"georgia, serif"},{name:"Tahoma",css:"tahoma, sans-serif"},{name:"Trebuchet MS",css:"'trebuchet ms', sans-serif"},{name:"Helvetica",css:"'Helvetica Neue', Helvetica, Arial, sans-serif"},{name:"Verdana",css:"verdana, sans-serif"},{name:"Proxima Nova",css:"proxima_nova_rgregular"}],active:"Font Family",setActive:function(font){angular.forEach(this.options,function(option){font===option.css?(this.active=option.name,option.active=!0):option.active=!1})},getActive:function(){var font=document.queryCommandValue("fontName");return""===font?"Arial, Helvetica, sans-serif":font}}),taRegisterTool("fontSize",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-default dropdown-toggle' type='button' ng-disabled='showHtml()'><i class='fa fa-font'></i><i class='fa fa-caret-down'></i></button><ul class='dropdown-menu'><li ng-repeat='o in options'><button class='checked-dropdown' style='font-size: {{o.css}}' type='button' ng-click='action(o.value)'><i ng-if='o.active' class='fa fa-check'></i> {{o.name}}</button></li></ul></span>",action:function(size){if(""!==size)return this.$editor().wrapSelection("fontSize",size)},options:[{name:"Extra Small",css:"xx-small",value:"1"},{name:"Small",css:"x-small",value:"2"},{name:"Medium",css:"small",value:"3"},{name:"Large",css:"medium",value:"4"},{name:"Extra Large",css:"large",value:"5"},{name:"Huge",css:"x-large",value:"6"}],setActive:function(font){"string"!=typeof font&&(font=String(font)),angular.forEach(this.options,function(option){option.active=font===option.value})},getActive:function(){var font=document.queryCommandValue("fontSize");return""===font?3:font}}),taRegisterTool("undo",{iconclass:"fa fa-undo",action:function(){return this.$editor().wrapSelection("undo",null)}}),taRegisterTool("redo",{iconclass:"fa fa-repeat",action:function(){return this.$editor().wrapSelection("redo",null)}}),taRegisterTool("bold",{iconclass:"fa fa-bold",action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return document.queryCommandState("bold")},commandKeyCode:98}),taRegisterTool("italics",{iconclass:"fa fa-italic",action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return document.queryCommandState("italic")},commandKeyCode:105}),taRegisterTool("underline",{iconclass:"fa fa-underline",action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return document.queryCommandState("underline")},commandKeyCode:117}),taRegisterTool("strikeThrough",{iconclass:"fa fa-strikethrough",action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),taRegisterTool("alignment",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-default dropdown-toggle' type='button' ng-disabled='showHtml()'><span><i class='fa fa-align-left'></i></span></button><ul class='dropdown-menu inline-opts'><li ng-repeat='o in options'><button type='button' ng-click='action(o.command)'><i class='fa fa-align-{{o.icon}}'></i></button></li></ul></span>",action:function(alignment){if(""!==alignment)return this.$editor().wrapSelection(alignment,null)},options:[{icon:"left",command:"justifyLeft"},{icon:"center",command:"justifyCenter"},{icon:"right",command:"justifyRight"}],active:"left",setActive:function(alignment){angular.forEach(this.options,function(option){alignment===option.command&&(this.active=option.icon)})},getActive:function(){return!document.queryCommandValue("justifyLeft")||document.queryCommandState("justifyRight")||document.queryCommandState("justifyCenter")?document.queryCommandState("justifyRight")?"justifyRight":document.queryCommandState("justifyCenter")?"justifyCenter":"justifyLeft":"justifyLeft"}}),taRegisterTool("justifyLeft",{iconclass:"fa fa-align-left",action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="left"===commonElement.css("text-align")||"left"===commonElement.attr("align")||"right"!==commonElement.css("text-align")&&"center"!==commonElement.css("text-align")&&!document.queryCommandState("justifyRight")&&!document.queryCommandState("justifyCenter")),result=result||document.queryCommandState("justifyLeft")}}),taRegisterTool("justifyRight",{iconclass:"fa fa-align-right",action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="right"===commonElement.css("text-align")),result=result||document.queryCommandState("justifyRight")}}),taRegisterTool("justifyCenter",{iconclass:"fa fa-align-center",action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(commonElement){var result=!1;return commonElement&&(result="center"===commonElement.css("text-align")),result=result||document.queryCommandState("justifyCenter")}}),taRegisterTool("insertHorizontalRule",{iconclass:"fa fa-minus",action:function(){return this.$editor().wrapSelection("insertHorizontalRule",null)}}),taRegisterTool("fontColor",{display:"<span class='bar-btn-dropdown'><button type='button' colorpicker colorpicker-text-editor='true' colorpicker-parent='true' class='btn btn-default' ng-disabled='showHtml()'> <i class='fa fa-magic'></i><i class='fa fa-caret-down'></i></button></span>",action:function(color){if(""!==color)return this.$editor().wrapSelection("foreColor",color)}}),taRegisterTool("backgroundColor",{display:"<span class='bar-btn-dropdown'><button type='button' colorpicker colorpicker-text-editor='true' colorpicker-parent='true' class='btn btn-default' ng-disabled='showHtml()'> <i class='fa fa-magic'></i><i class='fa fa-caret-down'></i></button></span>",action:function(color){if(""!==color)return this.$editor().wrapSelection("backColor",color)}}),taRegisterTool("clear",{iconclass:"fa fa-ban",action:function(deferred,restoreSelection){this.$editor().wrapSelection("removeFormat",null);var _ranges=[];if(this.$window.rangy&&this.$window.rangy.getSelection&&1===(_ranges=this.$window.rangy.getSelection().getAllRanges()).length){var possibleNodes=angular.element(_ranges[0].commonAncestorContainer),removeListElements=function(list){list=angular.element(list);var prevElement=list;angular.forEach(list.children(),function(liElem){var newElem=angular.element("<p></p>");newElem.html(angular.element(liElem).html()),prevElement.after(newElem),prevElement=newElem}),list.remove()};angular.forEach(possibleNodes.find("ul"),removeListElements),angular.forEach(possibleNodes.find("ol"),removeListElements);var $editor=this.$editor(),recursiveRemoveClass=function recursiveRemoveClass(node){node=angular.element(node),node[0]!==$editor.displayElements.text[0]&&node.removeAttr("class"),angular.forEach(node.children(),recursiveRemoveClass)};angular.forEach(possibleNodes,recursiveRemoveClass),"li"!==possibleNodes[0].tagName.toLowerCase()&&"ol"!==possibleNodes[0].tagName.toLowerCase()&&"ul"!==possibleNodes[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","<p>")}else this.$editor().wrapSelection("formatBlock","<p>");restoreSelection()}}),taRegisterTool("insertImage",{iconclass:"fa fa-picture-o",action:function(){var imageLink;if(imageLink=prompt("Please enter an image URL to insert","http://"),""!==imageLink&&"http://"!==imageLink)return this.$editor().wrapSelection("insertImage",imageLink)}}),taRegisterTool("insertLink",{iconclass:"fa fa-link",action:function(){var urlLink;if(urlLink=prompt("Please enter an URL to insert","http://"),""!==urlLink&&"http://"!==urlLink)return this.$editor().wrapSelection("createLink",urlLink)},activeState:function(commonElement){return!!commonElement&&"A"===commonElement[0].tagName}}),taRegisterTool("unlink",{iconclass:"fa fa-unlink",action:function(){return this.$editor().wrapSelection("unlink",null)},activeState:function(commonElement){return!!commonElement&&"A"===commonElement[0].tagName}})}]),textAngular.directive("textAngular",["$compile","$timeout","taOptions","taSanitize","textAngularManager","$window",function($compile,$timeout,taOptions,taSanitize,textAngularManager,$window){return{require:"?ngModel",scope:{},restrict:"EA",link:function(scope,element,attrs,ngModel){var _keydown,_keyup,_keypress,_mouseup,_focusin,_focusout,_originalContents,_toolbars,_serial=Math.floor(1e16*Math.random()),_name=attrs.name?attrs.name:"textAngularEditor"+_serial;angular.extend(scope,angular.copy(taOptions),{wrapSelection:function(command,opt){try{document.execCommand(command,!1,opt)}catch(e){}scope.displayElements.text[0].focus()},showHtml:!1}),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),attrs.taTextEditorClass&&(scope.classes.textEditor=attrs.taTextEditorClass),attrs.taHtmlEditorClass&&(scope.classes.htmlEditor=attrs.taHtmlEditorClass),attrs.taTextEditorSetup&&(scope.setup.textEditorSetup=scope.$parent.$eval(attrs.taTextEditorSetup)),attrs.taHtmlEditorSetup&&(scope.setup.htmlEditorSetup=scope.$parent.$eval(attrs.taHtmlEditorSetup)),_originalContents=element[0].innerHTML,element[0].innerHTML="",scope.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>")},scope.setup.htmlEditorSetup(scope.displayElements.html),scope.setup.textEditorSetup(scope.displayElements.text),scope.displayElements.html.attr({id:"taHtmlElement","ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),scope.displayElements.text.attr({id:"taTextElement",contentEditable:"true","ng-hide":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),element.append(scope.displayElements.text),element.append(scope.displayElements.html),scope.displayElements.forminput.attr("name",_name),element.append(scope.displayElements.forminput),attrs.tabindex&&(element.removeAttr("tabindex"),scope.displayElements.text.attr("tabindex",attrs.tabindex),scope.displayElements.html.attr("tabindex",attrs.tabindex)),attrs.placeholder&&(scope.displayElements.text.attr("placeholder",attrs.placeholder),scope.displayElements.html.attr("placeholder",attrs.placeholder)),attrs.taDisabled&&(scope.displayElements.text.attr("ta-readonly","disabled"),scope.displayElements.html.attr("ta-readonly","disabled"),scope.disabled=scope.$parent.$eval(attrs.taDisabled),scope.$parent.$watch(attrs.taDisabled,function(newVal){scope.disabled=newVal,scope.disabled?element.addClass(scope.classes.disabled):element.removeClass(scope.classes.disabled)})),$compile(scope.displayElements.text)(scope),$compile(scope.displayElements.html)(scope),element.addClass("ta-root"),scope.displayElements.text.addClass("ta-text ta-editor "+scope.classes.textEditor),scope.displayElements.html.addClass("ta-html ta-editor "+scope.classes.textEditor),scope._actionRunning=!1;var _savedSelection=!1;if(scope.startAction=function(){if(scope._actionRunning=!0,$window.rangy&&$window.rangy.saveSelection)return _savedSelection=$window.rangy.saveSelection(),function(){_savedSelection&&$window.rangy.restoreSelection(_savedSelection)}},scope.endAction=function(){scope._actionRunning=!1,_savedSelection&&$window.rangy.removeMarkers(_savedSelection),_savedSelection=!1,scope.updateSelectedStyles(),scope.showHtml||scope.updateTaBindtaTextElement()},_focusin=function(){element.addClass(scope.classes.focussed),_toolbars.focus()},scope.displayElements.html.on("focus",_focusin),scope.displayElements.text.on("focus",_focusin),_focusout=function(e){return scope._actionRunning||document.activeElement===scope.displayElements.html[0]||document.activeElement===scope.displayElements.text[0]||(element.removeClass(scope.classes.focussed),_toolbars.unfocus(),$timeout(function(){element.triggerHandler("blur")},0)),e.preventDefault(),!1},scope.displayElements.html.on("blur",_focusout),scope.displayElements.text.on("blur",_focusout),scope.queryFormatBlockState=function(command){return command.toLowerCase()===document.queryCommandValue("formatBlock").toLowerCase()},scope.switchView=function(){scope.showHtml=!scope.showHtml,scope.showHtml?$timeout(function(){return scope.displayElements.html[0].focus()},100):$timeout(function(){return scope.displayElements.text[0].focus()},100)},attrs.ngModel){var _firstRun=!0;ngModel.$render=function(){if(_firstRun){_firstRun=!1;var _initialValue=scope.$parent.$eval(attrs.ngModel);void 0!==_initialValue&&null!==_initialValue||!_originalContents||""===_originalContents||ngModel.$setViewValue(_originalContents)}scope.displayElements.forminput.val(ngModel.$viewValue),document.activeElement!==scope.displayElements.html[0]&&document.activeElement!==scope.displayElements.text[0]&&(scope.html=ngModel.$viewValue||"")}}else scope.displayElements.forminput.val(_originalContents),scope.html=_originalContents;if(scope.$watch("html",function(newValue,oldValue){newValue!==oldValue&&(attrs.ngModel&&ngModel.$setViewValue(newValue),scope.displayElements.forminput.val(newValue))}),attrs.taTargetToolbars)_toolbars=textAngularManager.registerEditor(_name,scope,attrs.taTargetToolbars.split(","));else{var _toolbar=angular.element('<div text-angular-toolbar name="textAngularToolbar'+_serial+'">');attrs.taToolbar&&_toolbar.attr("ta-toolbar",attrs.taToolbar),attrs.taToolbarClass&&_toolbar.attr("ta-toolbar-class",attrs.taToolbarClass),attrs.taToolbarGroupClass&&_toolbar.attr("ta-toolbar-group-class",attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&_toolbar.attr("ta-toolbar-button-class",attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&_toolbar.attr("ta-toolbar-active-button-class",attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&_toolbar.attr("ta-focussed-class",attrs.taFocussedClass),element.prepend(_toolbar),$compile(_toolbar)(scope.$parent),_toolbars=textAngularManager.registerEditor(_name,scope,["textAngularToolbar"+_serial])}scope.$on("$destroy",function(){textAngularManager.unregisterEditor(_name)}),scope._bUpdateSelectedStyles=!1,scope.updateSelectedStyles=function(){var _ranges;$window.rangy&&$window.rangy.getSelection&&1===(_ranges=$window.rangy.getSelection().getAllRanges()).length&&_ranges[0].commonAncestorContainer.parentNode!==scope.displayElements.text[0]?_toolbars.updateSelectedStyles(angular.element(_ranges[0].commonAncestorContainer.parentNode)):_toolbars.updateSelectedStyles(),scope._bUpdateSelectedStyles&&$timeout(scope.updateSelectedStyles,200)},_keydown=function(){scope._bUpdateSelectedStyles||(scope._bUpdateSelectedStyles=!0,scope.$apply(function(){scope.updateSelectedStyles()}))},scope.displayElements.html.on("keydown",_keydown),scope.displayElements.text.on("keydown",_keydown),_keyup=function(){scope._bUpdateSelectedStyles=!1},scope.displayElements.html.on("keyup",_keyup),scope.displayElements.text.on("keyup",_keyup),_keypress=function(event){scope.$apply(function(){if(_toolbars.sendKeyCommand(event))return scope._bUpdateSelectedStyles||scope.updateSelectedStyles(),event.preventDefault(),!1})},scope.displayElements.html.on("keypress",_keypress),scope.displayElements.text.on("keypress",_keypress),_mouseup=function(){scope._bUpdateSelectedStyles=!1,scope.$apply(function(){scope.updateSelectedStyles()})},scope.displayElements.html.on("mouseup",_mouseup),scope.displayElements.text.on("mouseup",_mouseup)}}}]).directive("taBind",["taSanitize","$timeout","taFixChrome",function(taSanitize,$timeout,taFixChrome){return{require:"ngModel",scope:{},link:function(scope,element,attrs,ngModel){var _isContentEditable=void 0!==element.attr("contenteditable")&&element.attr("contenteditable"),_isInputFriendly=_isContentEditable||"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase(),_isReadonly=!1,_compileHtml=function(){if(_isContentEditable)return element[0].innerHTML;if(_isInputFriendly)return element.val();throw"textAngular Error: attempting to update non-editable taBind"};scope.$parent["updateTaBind"+(attrs.id||"")]=function(){_isReadonly||ngModel.$setViewValue(_compileHtml())},_isInputFriendly&&(element.on("paste cut",function(){_isReadonly||$timeout(function(){ngModel.$setViewValue(_compileHtml())},0)}),_isContentEditable?(element.on("keyup",function(){_isReadonly||ngModel.$setViewValue(_compileHtml())}),element.on("blur",function(){var val=_compileHtml();""===val&&element.attr("placeholder")&&element.addClass("placeholder-text"),_isReadonly||ngModel.$setViewValue(_compileHtml()),ngModel.$render()}),element.attr("placeholder")&&(element.addClass("placeholder-text"),element.on("focus",function(){element.removeClass("placeholder-text"),ngModel.$render()}))):element.on("change blur",function(){_isReadonly||ngModel.$setViewValue(_compileHtml())}));var _sanitize=function(unsafe){return ngModel.$oldViewValue=taSanitize(taFixChrome(unsafe),ngModel.$oldViewValue)};ngModel.$parsers.push(_sanitize),ngModel.$formatters.push(_sanitize),ngModel.$render=function(){if(document.activeElement!==element[0]){var val=ngModel.$viewValue||"";_isContentEditable?(""===val&&element.attr("placeholder")&&element.hasClass("placeholder-text")?element[0].innerHTML=element.attr("placeholder"):element[0].innerHTML=val,_isReadonly||element.find("a").on("click",function(e){return e.preventDefault(),!1})):"textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()?element[0].innerHTML=val:element.val(val)}},attrs.taReadonly&&(_isReadonly=scope.$parent.$eval(attrs.taReadonly),_isReadonly?("textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()||element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable")):"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true"),scope.$parent.$watch(attrs.taReadonly,function(newVal,oldVal){oldVal!==newVal&&(newVal?("textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()||element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable")):"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true"),_isReadonly=newVal)}))}}}]).factory("taFixChrome",function(){var taFixChrome=function(html){for(var $html=angular.element("<div>"+html+"</div>"),spans=angular.element($html).find("span"),s=0;s<spans.length;s++){var span=angular.element(spans[s]);span.attr("style")&&span.attr("style").match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(span.attr("style",span.attr("style").replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,"")),span.attr("style")&&""!==span.attr("style")||(span.next().length>0&&"BR"===span.next()[0].tagName&&span.next().remove(),span.replaceWith(span[0].innerHTML)))}var result=$html[0].innerHTML.replace(/style="[^"]*?(line-height: 1.428571429;|color: inherit; line-height: 1.1;)[^"]*"/gi,"");return result!==$html[0].innerHTML&&($html[0].innerHTML=result),$html[0].innerHTML};return taFixChrome}).factory("taSanitize",["$sanitize",function($sanitize){function getByAttribute(element,attribute){var resultingElements=[],childNodes=element.children();return childNodes.length&&angular.forEach(childNodes,function(child){resultingElements=resultingElements.concat(getByAttribute(angular.element(child),attribute))}),element.attr(attribute)&&resultingElements.push(element),resultingElements}return function(unsafe,oldsafe){var unsafeElement=angular.element("<div>"+unsafe+"</div>");angular.forEach(getByAttribute(unsafeElement,"align"),function(element){element.css("text-align",element.attr("align")),element.removeAttr("align")}),unsafe=unsafeElement[0].innerHTML;var safe;try{safe=$sanitize(unsafe)}catch(e){safe=oldsafe||""}return safe}}]).directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function($compile,textAngularManager,taOptions,taTools,taToolExecuteAction,$window){return{scope:{name:"@"},restrict:"EA",link:function(scope,element,attrs){if(!scope.name||""===scope.name)throw"textAngular Error: A toolbar requires a name";angular.extend(scope,angular.copy(taOptions)),attrs.taToolbar&&(scope.toolbar=scope.$parent.$eval(attrs.taToolbar)),attrs.taToolbarClass&&(scope.classes.toolbar=attrs.taToolbarClass),attrs.taToolbarGroupClass&&(scope.classes.toolbarGroup=attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&(scope.classes.toolbarButton=attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&(scope.classes.toolbarButtonActive=attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),scope.disabled=!0,scope.focussed=!1,element[0].innerHTML="",element.addClass("ta-toolbar "+scope.classes.toolbar),scope.$watch("focussed",function(){scope.focussed?element.addClass(scope.classes.focussed):element.removeClass(scope.classes.focussed)}),setupToolElement=function(toolDefinition,toolScope){var toolElement;if(toolElement=toolDefinition&&toolDefinition.display?angular.element(toolDefinition.display):angular.element("<button type='button'>"),toolElement.addClass(scope.classes.toolbarButton),toolElement.attr("name",toolScope.name),toolElement.attr("unselectable","on"),toolElement.attr("ng-disabled","isDisabled()"),toolElement.attr("tabindex","-1"),toolElement.attr("ng-click","executeAction()"),toolElement.attr("ng-class","displayActiveToolClass(active)"),toolElement.on("mousedown",function(e){return e.preventDefault(),!1}),toolDefinition&&!toolDefinition.display&&!toolScope._display&&(toolElement[0].innerHTML="",toolDefinition.buttontext&&(toolElement[0].innerHTML=toolDefinition.buttontext),toolDefinition.iconclass)){var icon=angular.element("<i>"),content=toolElement[0].innerHTML;icon.addClass(toolDefinition.iconclass),toolElement[0].innerHTML="",toolElement.append(icon),content&&""!==content&&toolElement.append("&nbsp;"+content)}return toolScope._lastToolDefinition=angular.copy(toolDefinition),$compile(toolElement)(toolScope)},scope.tools={},scope._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1}};var defaultChildScope={$window:$window,$editor:function(){return scope._parent},isDisabled:function(){return this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(active){return active?scope.classes.toolbarButtonActive:""},executeAction:taToolExecuteAction};angular.forEach(scope.toolbar,function(group){groupElement=angular.element("<div>"),groupElement.addClass(scope.classes.toolbarGroup),angular.forEach(group,function(tool){scope.tools[tool]=angular.extend(scope.$new(!0),taTools[tool],defaultChildScope,{name:tool}),scope.tools[tool].$element=setupToolElement(taTools[tool],scope.tools[tool]),groupElement.append(scope.tools[tool].$element)}),element.append(groupElement)}),scope.updateToolDisplay=function(key,_newTool,forceNew){var toolInstance=scope.tools[key];if(toolInstance){if(toolInstance._lastToolDefinition&&!forceNew&&(_newTool=angular.extend({},toolInstance._lastToolDefinition,_newTool)),null===_newTool.buttontext&&null===_newTool.iconclass&&null===_newTool.display)throw'textAngular Error: Tool Definition for updating "'+key+'" does not have a valid display/iconclass/buttontext value';null===_newTool.buttontext&&delete _newTool.buttontext,null===_newTool.iconclass&&delete _newTool.iconclass,null===_newTool.display&&delete _newTool.display,toolElement=setupToolElement(_newTool,toolInstance),toolInstance.$element.replaceWith(toolElement),toolInstance.$element=toolElement}},textAngularManager.registerToolbar(scope),scope.$on("$destroy",function(){textAngularManager.unregisterToolbar(scope.name)})}}}]).service("taToolExecuteAction",["$q",function($q){return function(editor){void 0!==editor&&(this.$editor=function(){return editor});var deferred=$q.defer(),promise=deferred.promise,_editor=this.$editor();promise["finally"](function(){_editor.endAction.call(_editor)});var result;try{result=this.action(deferred,_editor.startAction())}catch(any){}(result||void 0===result)&&deferred.resolve()}}]).service("textAngularManager",["taToolExecuteAction",function(taToolExecuteAction){var toolbars={},editors={};return{registerEditor:function(name,scope,targetToolbars){if(!name||""===name)throw"textAngular Error: An editor requires a name";if(!scope)throw"textAngular Error: An editor requires a scope";if(editors[name])throw'textAngular Error: An Editor with name "'+name+'" already exists';var _toolbars=[];return angular.forEach(targetToolbars,function(_name){toolbars[_name]&&_toolbars.push(toolbars[_name])}),editors[name]={scope:scope,toolbars:targetToolbars,_registerToolbar:function(toolbarScope){this.toolbars.indexOf(toolbarScope.name)>=0&&_toolbars.push(toolbarScope)},editorFunctions:{disable:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!0})},enable:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!1})},focus:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope._parent=scope,toolbarScope.disabled=!1,toolbarScope.focussed=!0})},unfocus:function(){angular.forEach(_toolbars,function(toolbarScope){toolbarScope.disabled=!0,toolbarScope.focussed=!1})},updateSelectedStyles:function(rangyRange){angular.forEach(_toolbars,function(toolbarScope){angular.forEach(toolbarScope.tools,function(toolScope){if(toolScope.activeState&&(toolScope.active=toolScope.activeState(rangyRange)),toolScope.setActive){var active=toolScope.getActive();toolScope.setActive(active)}})})},sendKeyCommand:function(event){var result=!1;return(event.ctrlKey||event.metaKey)&&angular.forEach(taTools,function(tool,name){if(tool.commandKeyCode&&tool.commandKeyCode===event.which)for(var _t=0;_t<_toolbars.length;_t++)if(void 0!==_toolbars[_t].tools[name]){taToolExecuteAction.call(_toolbars[_t].tools[name],scope),result=!0;break}}),result}}},editors[name].editorFunctions},retrieveEditor:function(name){return editors[name]},unregisterEditor:function(name){delete editors[name]},registerToolbar:function(scope){if(!scope)throw"textAngular Error: A toolbar requires a scope";if(!scope.name||""===scope.name)throw"textAngular Error: A toolbar requires a name";if(toolbars[scope.name])throw'textAngular Error: A toolbar with name "'+scope.name+'" already exists';toolbars[scope.name]=scope,angular.forEach(editors,function(_editor){_editor._registerToolbar(scope)})},retrieveToolbar:function(name){return toolbars[name]},retrieveToolbarsViaEditor:function(name){var result=[],_this=this;return angular.forEach(this.retrieveEditor(name).toolbars,function(name){result.push(_this.retrieveToolbar(name))}),result},unregisterToolbar:function(name){delete toolbars[name]},updateToolsDisplay:function(newTaTools){var _this=this;angular.forEach(newTaTools,function(_newTool,key){_this.updateToolDisplay(key,_newTool)})},resetToolsDisplay:function(){var _this=this;angular.forEach(taTools,function(_newTool,key){_this.resetToolDisplay(key)})},updateToolDisplay:function(toolKey,_newTool){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.updateToolbarToolDisplay(toolbarKey,toolKey,_newTool)})},resetToolDisplay:function(toolKey){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.resetToolbarToolDisplay(toolbarKey,toolKey)})},updateToolbarToolDisplay:function(toolbarKey,toolKey,_newTool){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';toolbars[toolbarKey].updateToolDisplay(toolKey,_newTool)},resetToolbarToolDisplay:function(toolbarKey,toolKey){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';
toolbars[toolbarKey].updateToolDisplay(toolKey,taTools[toolKey],!0)},refreshEditor:function(name){if(!editors[name])throw'textAngular Error: No Editor with name "'+name+'" exists';editors[name].scope.updateTaBindtaTextElement(),editors[name].scope.$$phase||editors[name].scope.$digest()}}}])}(window,window.angular),function(window,angular,undefined){function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}var index,chars,match,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else if(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag),chars=!1)),chars){index=html.indexOf("<");var text=index<0?html:html.substring(0,index);html=index<0?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(NON_ALPHANUMERIC_REGEXP,function(value){var c=value.charCodeAt(0);return c<=159||173==c||c>=1536&&c<=1540||1807==c||6068==c||6069==c||c>=8204&&c<=8207||c>=8232&&c<=8239||c>=8288&&c<=8303||65279==c||c>=65520&&c<=65535?"&#"+c+";":value}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function validStyles(styleAttr){var result="",styleArray=styleAttr.split(";");return angular.forEach(styleArray,function(value){var v=value.split(":");if(2==v.length){var key=trim(angular.lowercase(v[0])),value=trim(angular.lowercase(v[1]));("color"===key&&(value.match(/^rgb\([0-9%,\. ]*\)$/i)||value.match(/^rgba\([0-9%,\. ]*\)$/i)||value.match(/^hsl\([0-9%,\. ]*\)$/i)||value.match(/^hsla\([0-9%,\. ]*\)$/i)||value.match(/^#[0-9a-f]{3,6}$/i)||value.match(/^[a-z]*$/i))||"text-align"===key&&("left"===value||"right"===value||"center"===value||"justify"===value))&&(result+=key+": "+value+";")}}),result}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;("style"===lkey&&""!==(value=validStyles(value))||validAttrs[lkey]===!0&&(uriAttrs[lkey]!==!0||uriValidator(value,isImage)))&&(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(_chars){ignore||out(encodeEntities(_chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap"),validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,trim=function(){return String.prototype.trim?function(value){return angular.isString(value)?value.trim():value}:function(value){return angular.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&(html.push('target="'),html.push(target),html.push('" ')),html.push('href="'),html.push(url),html.push('">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]==match[3]&&(url="mailto:"+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(){"Use Strict";var appFilereader=angular.module("appFilereader",[]);appFilereader.directive("appFilereader",function($q){var slice=Array.prototype.slice;return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){ngModel&&(ngModel.$render=function(){},element.bind("change",function(e){function readFile(file){var deferred=$q.defer(),reader=new FileReader;return reader.onload=function(e){deferred.resolve(e.target.result)},reader.onerror=function(e){deferred.reject(e)},reader.readAsDataURL(file),deferred.promise}var element=e.target;element.value&&(element.disabled=!0,$q.all(slice.call(element.files,0).map(readFile)).then(function(values){element.multiple?ngModel.$setViewValue(values):ngModel.$setViewValue(values.length?values[0]:null),element.value=null,element.disabled=!1}))}))}}})}(),angular.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(elem){var matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector;return matchesSelector.bind(elem)("I")?elem.parentNode:elem},getOffset:function(elem){for(var x=0,y=0,scrollX=0,scrollY=0;elem&&!isNaN(elem.offsetLeft)&&!isNaN(elem.offsetTop);)x+=elem.offsetLeft,y+=elem.offsetTop,scrollX+=elem.scrollLeft,scrollY+=elem.scrollTop,elem=elem.offsetParent;return{top:y,left:x,scrollX:scrollX,scrollY:scrollY}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}}]}}).factory("Color",["Helper",function(Helper){return{value:{h:1,s:1,b:1,a:1},rgb:function rgb(){var rgb=this.toRGB();return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")"},rgba:function(){var rgb=this.toRGB();return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(r,g,b,a){r/=255,g/=255,b/=255;var H,S,V,C;return V=Math.max(r,g,b),C=V-Math.min(r,g,b),H=0===C?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0===C?0:C/V,{h:H||1,s:S,b:V,a:a||1}},setColor:function(val){val=val.toLowerCase();for(var key in Helper.stringParsers)if(Helper.stringParsers.hasOwnProperty(key)){var parser=Helper.stringParsers[key],match=parser.re.exec(val),values=match&&parser.parse(match);parser.space||"rgba";if(values)return this.value=this.RGBtoHSB.apply(null,values),!1}},setHue:function(h){this.value.h=1-h},setSaturation:function(s){this.value.s=s},setLightness:function(b){this.value.b=1-b},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(h,s,b,a){h||(h=this.value.h,s=this.value.s,b=this.value.b),h*=360;var R,G,B,X,C;return h=h%360/60,C=b*s,X=C*(1-Math.abs(h%2-1)),R=G=B=b-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],{r:Math.round(255*R),g:Math.round(255*G),b:Math.round(255*B),a:a||this.value.a}},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return"#"+(1<<24|parseInt(rgb.r,10)<<16|parseInt(rgb.g,10)<<8|parseInt(rgb.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(Helper){var slider={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},pointer={};return{getSlider:function(){return slider},getLeftPosition:function(event){return Math.max(0,Math.min(slider.maxLeft,slider.left+((event.pageX||pointer.left)-pointer.left)))},getTopPosition:function(event){return Math.max(0,Math.min(slider.maxTop,slider.top+((event.pageY||pointer.top)-pointer.top)))},setSlider:function(event){var target=Helper.closestSlider(event.target),targetOffset=Helper.getOffset(target);slider.knob=target.children[0].style,slider.left=event.pageX-targetOffset.left-window.pageXOffset+targetOffset.scrollX,slider.top=event.pageY-targetOffset.top-window.pageYOffset+targetOffset.scrollY,pointer={left:event.pageX,top:event.pageY}},setSaturation:function(event){slider={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(event)},setHue:function(event){slider={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(event)},setAlpha:function(event){slider={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(event)},setKnob:function(top,left){slider.knob.top=top+"px",slider.knob.left=left+"px"}}}]).directive("colorpicker",["$document","$compile","$timeout","Color","Slider","Helper",function($document,$compile,$timeout,Color,Slider,Helper){return{require:"?ngModel",restrict:"A",link:function($scope,elem,attrs,ngModel){function setTemplate(){return textEditor?'<div><div class="pickerVal">{{selectedColor}}</div><div class="addHex"><button type="button" ng-click="customColor()" class="btn btn-primary">Add HEX value</button></div></div>':withInput?'<input type="text" name="colorpicker-input">':""}var sliderAlpha,thisFormat=attrs.colorpicker?attrs.colorpicker:"hex",position=angular.isDefined(attrs.colorpickerPosition)?attrs.colorpickerPosition:"bottom",fixedPosition=!!angular.isDefined(attrs.colorpickerFixedPosition)&&attrs.colorpickerFixedPosition,target=angular.isDefined(attrs.colorpickerParent)?elem.parent():angular.element(document.body),withInput=!!angular.isDefined(attrs.colorpickerWithInput)&&attrs.colorpickerWithInput,textEditor=!!angular.isDefined(attrs.colorpickerTextEditor)&&attrs.colorpickerTextEditor,inputTemplate=setTemplate(),template='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+inputTemplate+'<button class="close close-colorpicker">&times;</button></div></div>',colorpickerTemplate=angular.element(template),pickerColor=Color,sliderHue=colorpickerTemplate.find("colorpicker-hue"),sliderSaturation=colorpickerTemplate.find("colorpicker-saturation"),colorpickerPreview=colorpickerTemplate.find("colorpicker-preview"),pickerColorPointers=colorpickerTemplate.find("i");if($scope.customColor=function(){var newColor;newColor=prompt("Please enter a HEX value","#"),""!==newColor&&(elem.val(newColor),$scope.action(newColor))},$compile(colorpickerTemplate)($scope),withInput){var pickerColorInput=colorpickerTemplate.find("input");pickerColorInput.on("mousedown",function(){event.stopPropagation()}).on("keyup",function(event){var newColor=this.value;elem.val(newColor),ngModel&&$scope.$apply(ngModel.$setViewValue(newColor)),event.stopPropagation(),event.preventDefault()}),elem.on("keyup",function(){pickerColorInput.val(elem.val())})}var bindMouseEvents=function(){$document.on("mousemove",mousemove),$document.on("mouseup",mouseup)};"rgba"===thisFormat&&(colorpickerTemplate.addClass("alpha"),sliderAlpha=colorpickerTemplate.find("colorpicker-alpha"),sliderAlpha.on("click",function(event){Slider.setAlpha(event),mousemove(event)}).on("mousedown",function(event){Slider.setAlpha(event),bindMouseEvents()})),sliderHue.on("click",function(event){Slider.setHue(event),mousemove(event)}).on("mousedown",function(event){Slider.setHue(event),bindMouseEvents()}),sliderSaturation.on("click",function(event){Slider.setSaturation(event),mousemove(event)}).on("mousedown",function(event){Slider.setSaturation(event),bindMouseEvents()}),fixedPosition&&colorpickerTemplate.addClass("colorpicker-fixed-position"),colorpickerTemplate.addClass("colorpicker-position-"+position),target.append(colorpickerTemplate),ngModel&&(ngModel.$render=function(){elem.val(ngModel.$viewValue)},$scope.$watch(attrs.ngModel,function(){update()})),elem.on("$destroy",function(){colorpickerTemplate.remove()});var previewColor=function(){try{colorpickerPreview.css("backgroundColor",pickerColor[thisFormat]())}catch(e){colorpickerPreview.css("backgroundColor",pickerColor.toHex())}sliderSaturation.css("backgroundColor",pickerColor.toHex(pickerColor.value.h,1,1,1)),"rgba"===thisFormat&&(sliderAlpha.css.backgroundColor=pickerColor.toHex()),textEditor&&$timeout(function(){$scope.selectedColor=pickerColor.toHex()})},mousemove=function(event){var left=Slider.getLeftPosition(event),top=Slider.getTopPosition(event),slider=Slider.getSlider();Slider.setKnob(top,left),slider.callLeft&&pickerColor[slider.callLeft].call(pickerColor,left/100),slider.callTop&&pickerColor[slider.callTop].call(pickerColor,top/100),previewColor();var newColor=pickerColor[thisFormat]();return elem.val(newColor),ngModel&&$scope.$apply(ngModel.$setViewValue(newColor)),withInput&&pickerColorInput.val(newColor),textEditor&&($scope.selectedColor=newColor),!1},mouseup=function mouseup(){$document.off("mousemove",mousemove),$document.off("mouseup",mouseup),textEditor&&$scope.action($scope.selectedColor)},update=function(){pickerColor.setColor(elem.val()),pickerColorPointers.eq(0).css({left:100*pickerColor.value.s+"px",top:100-100*pickerColor.value.b+"px"}),pickerColorPointers.eq(1).css("top",100*(1-pickerColor.value.h)+"px"),pickerColorPointers.eq(2).css("top",100*(1-pickerColor.value.a)+"px"),previewColor()},getColorpickerTemplatePosition=function(){var positionValue,positionOffset=Helper.getOffset(elem[0]);return angular.isDefined(attrs.colorpickerParent)&&(positionOffset.left=0,positionOffset.top=0),"top"===position?positionValue={top:positionOffset.top-147,left:positionOffset.left}:"right"===position?positionValue={top:positionOffset.top,left:positionOffset.left+126}:"bottom"===position?positionValue={top:positionOffset.top+elem[0].offsetHeight+2,left:positionOffset.left}:"left"===position&&(positionValue={top:positionOffset.top,left:positionOffset.left-150}),{top:positionValue.top+"px",left:positionValue.left+"px"}};elem.on("click",function(){update(),colorpickerTemplate.addClass("colorpicker-visible").css(getColorpickerTemplatePosition())}),colorpickerTemplate.on("mousedown",function(event){event.stopPropagation(),event.preventDefault()});var hideColorpickerTemplate=function(){colorpickerTemplate.hasClass("colorpicker-visible")&&colorpickerTemplate.removeClass("colorpicker-visible")};colorpickerTemplate.find("button").on("click",function(){hideColorpickerTemplate()}),$document.on("mousedown",function(){hideColorpickerTemplate()})}}}]),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function($document,$location){var openElement=null,_closeMenu2=angular.noop;return{restrict:"CA",link:function(scope,element,attrs){scope.$watch("$location.path",function(){_closeMenu2()}),element.parent().bind("click",function(){_closeMenu2()}),element.bind("click",function(event){var elementWasOpen=element===openElement;event.preventDefault(),event.stopPropagation(),openElement&&_closeMenu2(),elementWasOpen||element.hasClass("disabled")||element.prop("disabled")||(element.parent().addClass("open"),openElement=element,_closeMenu2=function(event){event&&(event.preventDefault(),event.stopPropagation()),$document.unbind("click",_closeMenu2),element.parent().removeClass("open"),_closeMenu2=angular.noop,openElement=null},$document.bind("click",_closeMenu2))})}}}]),function(){function AttendanceServices($http,$q,$log){function getActiveTab(){return activeTab}function setActiveTab(thetab){activeTab=thetab}function setapikey(key){apikey=key}function refreshAttendances(path){return $log.debug("refreshAttendances service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getAttendanceHistory(path){return $log.debug("getAttendanceHistory service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getAttendanceSum(path){return $log.debug("getAttendanceSum service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getDOW(){var path="../v1/DOW";$log.debug("getDOW service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getSchedule(path){$log.debug("getSchedule service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getSchedules(path){$log.debug("getSchedules service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getClasses(path){$log.debug("getClasses service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function setStudentReadyNextRank(path,readyness,theclass){$log.debug("setStudentReadyNextRank before put :",path,readyness,theclass);var dta={readyness:readyness,theclass:theclass},request=$http({method:"PUT",url:path,data:dta});return request.then(handleSuccess,handleError)}function removeSchedule(thedata,path){$log.debug("removeSchedule data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateAttendance(path,thedata){$log.debug("updateAttendance data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateSchedule(path,thedata){$log.debug("updateSchedule data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):null}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response,response.error),response.error===!0||null===response.data?($log.debug("attendanceServices error returned",response),response.message="attendanceServices error returned",$q.reject(response)):response.data}var apikey,activeTab="Attendance Information",service={setapikey:setapikey,refreshAttendances:refreshAttendances,getAttendanceHistory:getAttendanceHistory,setStudentReadyNextRank:setStudentReadyNextRank,getDOW:getDOW,getSchedule:getSchedule,getSchedules:getSchedules,getClasses:getClasses,updateAttendance:updateAttendance,updateSchedule:updateSchedule,removeSchedule:removeSchedule,setActiveTab:setActiveTab,getActiveTab:getActiveTab,getAttendanceSum:getAttendanceSum};return service}angular.module("ng-admin").factory("AttendanceServices",AttendanceServices),AttendanceServices.$inject=["$http","$q","$log"]}(),function(window,angular){function CalendarServices($http,$q,$log,$window,moment){function setapikey(key){apikey=key}function setOkNotify(input){notifyvlu=input}function getOkNotify(){return notifyvlu}function setIntervalValue(input){intervalValue=input}function getIntervalValue(){return intervalValue}function schedToCal(path,thedata){$log.debug("schedToCal data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function clearCal(path){$log.debug("clearCal  before delete :");var request=$http({method:"DELETE",url:path});return request.then(handleSuccess,handleError)}function transferCal(path,thedata){$log.debug("transferCal data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getAgeRangeList(path){$log.debug("getAgeRangeList service entered"),$log.debug("path",path);var request=$http({method:"GET",url:path,ignoreLoadingBar:!0});return request.then(handleSuccess,handleError)}function gettasknamelist(path){$log.debug("gettasknamelist service entered"),$log.debug("path",path);var request=$http({method:"GET",url:path,ignoreLoadingBar:!0});return request.then(handleSuccess,handleError)}function getinstructorlist(path){return $log.debug("getinstructorlist service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function setNotifyList(list){$log.debug("entered setnotifylist",list),notifylist=list}function getNotifyList(notify){return timeCleaner(notify),notifylist}function displaytime(){return moment(checktime).format("MM/DD/YYYY hh:mm A")+" "+moment(checktime).tz("America/New_York").format("Z z")}function elseSendNotification(title,options){console.log("fallback notify"),alert(title+": "+options.body)}function sendWindowNotification(title,options,optionssyn){console.log("in window");try{$window.Notification.requestPermission().then(function(permission){return console.log("requestPermission",permission),"granted"===permission?new $window.Notification(title,optionssyn):(console.log("fallback notify from incognito"),void alert(title+": "+options.body))})}catch(e){console.log("notification requestPermission error",e)}}function sendMozNotification(title,options,optionssyn){return console.log("in moz"),$window.navigator.mozNotification.createNotification(title,optionssyn.body,optionssyn.icon).show()}function sendNotification(title,options,optionssyn){return"Notification"in $window?sendWindowNotification(title,options,optionssyn):"mozNotification"in $window.navigator?sendMozNotification(title,options,optionssyn):elseSendNotification(title,options),sendNotification(title,options,optionssyn)}function mynotify(msg){$log.debug("notify entered",msg);var title=msg.title,str="check calendar for: "+msg.title+" at: "+msg.start,iconstr="https://vdojo.villaris.us/images/notifyicon.jpg";sendNotification(title,{body:str,icon:iconstr,lang:"en-US",tag:generateTag(),onclick:function(){console.log("On Click Triggered")},onerror:function(){console.log("On Error Triggered")},onclose:function(){console.log("On Close Triggered")}},{body:str,icon:iconstr,lang:"en-US",tag:generateTag(),onclick:function(){console.log("On Click Triggered")},onerror:function(){console.log("On Error Triggered")},onclose:function(){console.log("On Close Triggered")}})}function generateTag(){return[s4()+s4(),s4(),s4(),s4(),s4()+s4()+s4()].join("-")}function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function timeCleaner(notify){okNotify=notify,checktime=moment();for(var iter=0,len=notifylist.length;iter<len;iter++)moment(checktime)<=moment(notifylist[iter].start).add(intervalValue/1e3,"seconds")&&moment(checktime)>moment(notifylist[iter].start)&&($log.debug("intervalChecker: found in interval",checktime,okNotify,intervalValue,notifylist[iter]),okNotify===!0&&($log.debug("going to notify",notifylist[iter]),mynotify(notifylist[iter])),notifylist[iter].remove=!0),notifylist[iter].remove=!1;for(var niter=0,nlen=notifylist.length;niter<nlen;niter++)"undefined"!=typeof notifylist[niter]&&(moment(checktime)>moment(notifylist[niter].start).add(intervalValue/1e3,"seconds")||notifylist[niter].remove===!0)&&notifylist.splice(niter,1)}function getCurrentEvent(){return currentCalendarEvent}function setCurrentEvent(event){$log.debug("setCurrentEvent",event),currentCalendarEvent=event}function getCalendarEvents(path){return $log.debug("getCalendarEvents service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getUsers(path){return $log.debug("getUsers service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function saveCalendarEvent(path,thedata){$log.debug("saveCalendarEvent data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removeCalendarEvent(path,thedata){$log.debug("removeCalendarEvent data before delete :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateTasknamelist(path,thedata){$log.debug("updatetasknamelist data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removeTasknamelist(path,thedata){$log.debug("removeTasknamelist data before delete :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):null}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response),response.data}var apikey,currentCalendarEvent,okNotify,checktime,notifyvlu,notifylist=[],intervalValue=5e3,service={setapikey:setapikey,saveCalendarEvent:saveCalendarEvent,getCalendarEvents:getCalendarEvents,getUsers:getUsers,removeCalendarEvent:removeCalendarEvent,updateTasknamelist:updateTasknamelist,removeTasknamelist:removeTasknamelist,gettasknamelist:gettasknamelist,getinstructorlist:getinstructorlist,setCurrentEvent:setCurrentEvent,getCurrentEvent:getCurrentEvent,setNotifyList:setNotifyList,getNotifyList:getNotifyList,displaytime:displaytime,getIntervalValue:getIntervalValue,setIntervalValue:setIntervalValue,setOkNotify:setOkNotify,getOkNotify:getOkNotify,schedToCal:schedToCal,clearCal:clearCal,transferCal:transferCal,getAgeRangeList:getAgeRangeList};return service}angular.module("ng-admin").factory("CalendarServices",CalendarServices),CalendarServices.$inject=["$http","$q","$log","$window","moment"]}(window,window.angular),function(){function ClassServices(_,$http,$q,$log){function updateProgram(path,thedata){$log.debug("updateProgram data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getPrograms(path){$log.debug("getPrograms service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getClassTypes(path){$log.debug("getClassTypes service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeProgram(thedata,path){$log.debug("removeProgram data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateClass(path,thedata){$log.debug("updateClass data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getBasics(path){$log.debug("getBasics service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeBasic(thedata,path){$log.debug("removeBasic data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateBasic(path,thedata){$log.debug("updateBasic data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getAllRanks(path){$log.debug("getRanks service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeRank(thedata,path){$log.debug("removeRank data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateRank(path,thedata){$log.debug("updateRank data before post :",thedata);var request=$http({
method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getRankGroups(path){$log.debug("getRankGroups service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getClasses(path){$log.debug("getClasses service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getRankTypes(path){$log.debug("getRankTypes service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeClass(thedata,path){$log.debug("removeClass data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getRanks(path){$log.debug("getRanks service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getClassPgms(path){$log.debug("getClassPgms service entered",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeClassPgm(thedata,path){$log.debug("removeClassPgm data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateClassPgm(path,thedata){$log.debug("updateClassPgm data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function setapikey(key){apikey=key}function setxlist(mylist){xlistnew=mylist,$log.debug("setxlist",xlistnew)}function setClassSearchResult(result){$log.debug("ClassServices.setClassSearchResult entered",result),searchResult=result}function getClassSearchResult(){return $log.debug("ClassServices.getClassSearchResult entered",searchResult),searchResult}function distinctAge(){var request=$http({method:"get",url:"../v1/classages",params:{action:"get"}});return request.then(handleSuccess,handleError)}function distinctPgm(){var request=$http({method:"get",url:"../v1/classpgms",params:{action:"get"}});return request.then(handleSuccess,handleError)}function distinctCat(){var request=$http({method:"get",url:"../v1/classcats",params:{action:"get"}});return request.then(handleSuccess,handleError)}function getcat2(catquery){for(var results=[],i=0;i<xlistnew.studentclasslist.length;i++)xlistnew.studentclasslist[i].classcat===catquery&&results.push(xlistnew.studentclasslist[i]);return results}function getclass2(catquery){for(var results=[],i=0;i<xlistnew.studentclasslist.length;i++)xlistnew.studentclasslist[i]["class"]===catquery&&results.push(xlistnew.studentclasslist[i]);return results}function getClassPgm(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudentClass(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function updateStudentClass(path,studentclass){$log.debug("vm.data before put :",studentclass);var request=$http({method:"PUT",url:path,data:studentclass});return request.then(handleSuccess,handleError)}function setStudentClass(path,mystudent,myclassid,mypgmid){$log.debug("service set student class :"+myclassid),$log.debug("service set student pgm :"+mypgmid);var mydata={mystudent:mystudent,myclassid:myclassid,mypgmid:mypgmid};$log.debug("service set studentx class mydata:"+JSON.stringify({data:mydata})+" sent to:"+path);var request=$http({method:"PUT",url:path,data:mydata});return request.then(handleSuccess,handleError)}function getStudentClassPicture(classpicturepath){var request=$http({method:"get",url:classpicturepath});return request.then(handleSuccess,handleError)}function getStudentClassPictureList(classpicturepath){var request=$http({method:"get",url:classpicturepath});return request.then(handleSuccess,handleError)}function getStudentClassList(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudentClassStatuses(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function addStudentRegistration(path,thedata){$log.debug("addStudentRegistration data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removeStudentRegistration(path,thedata){$log.debug("removeStudentRegistration data before post :",path,thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getPayersPartial(input){$log.debug("getPayersPartial service entered:",input);var params={input:input};return $http.get("../v1/payerpartial",{params:params}).then(function(response){return $log.debug("getPayersPartial service success:"),$log.debug(response.data),response.data})}function getPayerList(path){return $log.debug("getPayerList service entered",path),$http.get(path).then(handleSuccess,handleError)}function getFamily(path){return $log.debug("getFamily service entered",path),$http.get(path).then(handleSuccess,handleError)}function getListPrices(path){return $log.debug("getListPrices service entered",path),$http.get(path).then(handleSuccess,handleError)}function getPaymentplan(path){return $log.debug("getPaymentplan service entered",path),$http.get(path).then(handleSuccess,handleError)}function getPaymentplans(path){return $log.debug("getPaymentplans service entered",path),$http.get(path).then(handleSuccess,handleError)}function getPaymenttypes(path){return $log.debug("getPaymenttypes service entered",path),$http.get(path).then(handleSuccess,handleError)}function updatePaymentPlan(path,thedata){$log.debug("updatePaymentPlan data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removePaymentPlan(path,thedata){$log.debug("removePaymentPlan data before post :",path,thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getPaymentpays(path){return $log.debug("getPaymentpays service entered",path),$http.get(path).then(handleSuccess,handleError)}function getPayerpayments(path){return $log.debug("getPayerpayments service entered",path),$http.get(path).then(handleSuccess,handleError)}function updatePaymentPay(path,thedata){$log.debug("updatePaymentPay data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removePaymentPay(path,thedata){$log.debug("removePaymentPay data before post :",path,thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removePayer(path,thedata){$log.debug("removePayer data before post :",path,thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getClassRanks(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeClassRank(thedata,path){$log.debug("removeClassRank data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateClassRank(path,thedata){$log.debug("updateClassRank data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getTesttypes(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeTesttype(thedata,path){$log.debug("removeTesttype data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateTesttype(path,thedata){$log.debug("updateTesttype data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getClassTests(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeClassTest(thedata,path){$log.debug("removeClassTest data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateClassTest(path,thedata){$log.debug("updateClassTest data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getTemplates(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeTemplate(thedata,path){$log.debug("removeTemplate data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateTemplate(path,thedata){$log.debug("updateTemplate data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):$q.reject("An unknown error occurred in ClassServices.")}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response.data),response.data}var apikey,xlistnew=[],searchResult={},service={setapikey:setapikey,setxlist:setxlist,getclass2:getclass2,distinctCat:distinctCat,distinctPgm:distinctPgm,distinctAge:distinctAge,getcat2:getcat2,getStudentClassList:getStudentClassList,getStudentClassPicture:getStudentClassPicture,getStudentClassPictureList:getStudentClassPictureList,getStudentClassStatuses:getStudentClassStatuses,updateStudentClass:updateStudentClass,getStudentClass:getStudentClass,getClassPgm:getClassPgm,addStudentRegistration:addStudentRegistration,removeStudentRegistration:removeStudentRegistration,setStudentClass:setStudentClass,setClassSearchResult:setClassSearchResult,getPayersPartial:getPayersPartial,getPayerList:getPayerList,getFamily:getFamily,getListPrices:getListPrices,getPaymentplan:getPaymentplan,getPaymentplans:getPaymentplans,getPaymenttypes:getPaymenttypes,updatePaymentPlan:updatePaymentPlan,removePaymentPlan:removePaymentPlan,getClassSearchResult:getClassSearchResult,getPaymentpays:getPaymentpays,getPayerpayments:getPayerpayments,updatePaymentPay:updatePaymentPay,removePaymentPay:removePaymentPay,removePayer:removePayer,getPrograms:getPrograms,getClassTypes:getClassTypes,updateProgram:updateProgram,removeProgram:removeProgram,getClasses:getClasses,getRankTypes:getRankTypes,getRanks:getRanks,updateClass:updateClass,removeClass:removeClass,getBasics:getBasics,updateBasic:updateBasic,removeBasic:removeBasic,getAllRanks:getAllRanks,getRankGroups:getRankGroups,updateRank:updateRank,removeRank:removeRank,getClassPgms:getClassPgms,updateClassPgm:updateClassPgm,removeClassPgm:removeClassPgm,getClassRanks:getClassRanks,updateClassRank:updateClassRank,removeClassRank:removeClassRank,getTesttypes:getTesttypes,updateTesttype:updateTesttype,removeTesttype:removeTesttype,getClassTests:getClassTests,updateClassTest:updateClassTest,removeClassTest:removeClassTest,getTemplates:getTemplates,updateTemplate:updateTemplate,removeTemplate:removeTemplate};return service}angular.module("ng-admin").factory("ClassServices",ClassServices),ClassServices.$inject=["_","$http","$q","$log"]}(),function(){function EventServices($http,$q,$log){function getActiveTab(){return activeTab}function setActiveTab(thetab){activeTab=thetab}function setapikey(key){apikey=key}function getEventNames(path){return $log.debug("getEventNames service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getEventDetails(path){return $log.debug("getEventDetails service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getEventSource(path){return $log.debug("getEventSource service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getColDefs(path){return $log.debug("getColDefs service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getColDefList(path){return $log.debug("getColDefList service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function setColDefs(path,thedata){$log.debug("setColDefs service entered before post:",thedata),$log.debug("path",path);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function createEvent(path,thedata){$log.debug("createEvent data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateEvent(path,thedata){$log.debug("updateEvent data before post :",thedata);var request=$http({method:"PUT",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("EventServices failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):$q.reject("An unknown error occurred.")}function handleSuccess(response){return $log.debug("EventServices success:"),$log.debug(response),response.data}var apikey,activeTab="Event Information",service={setapikey:setapikey,getEventSource:getEventSource,getColDefs:getColDefs,getColDefList:getColDefList,getEventNames:getEventNames,getEventDetails:getEventDetails,setColDefs:setColDefs,createEvent:createEvent,updateEvent:updateEvent,setActiveTab:setActiveTab,getActiveTab:getActiveTab};return service}angular.module("ng-admin").factory("EventServices",EventServices),EventServices.$inject=["$http","$q","$log"]}(),function(){function FlashService($rootScope){function initService(){function clearFlashMessage(){var flash=$rootScope.flash;flash&&(flash.keepAfterLocationChange?flash.keepAfterLocationChange=!1:delete $rootScope.flash)}$rootScope.$on("$locationChangeStart",function(){clearFlashMessage()})}function Success(message,keepAfterLocationChange){$rootScope.flash={message:message,type:"success",keepAfterLocationChange:keepAfterLocationChange}}function Err(message,keepAfterLocationChange){$rootScope.flash={message:message,type:"error",keepAfterLocationChange:keepAfterLocationChange}}var service={};return service.Success=Success,service.Err=Err,initService(),service}angular.module("ng-admin").factory("FlashService",FlashService),FlashService.$inject=["$rootScope"]}(),function(){function PaymentServices(_,$http,$log,$q){function setapikey(key){apikey=key}function getStudentPayment(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function updateStudentPayment(path,StudentPayment){$log.debug("enter updateStudentPayment before put :",StudentPayment);var request=$http({method:"PUT",url:path,data:StudentPayment});return request.then(handleSuccess,handleError)}function setStudentPayment(path,mystudent,myclassid,mypgmid){$log.debug("service set student class :"+myclassid),$log.debug("service set student pgm :"+mypgmid);var mydata={mystudent:mystudent,myclassid:myclassid,mypgmid:mypgmid};$log.debug("service set studentx class mydata:"+JSON.stringify({data:mydata})+" sent to:"+path);var request=$http({method:"PUT",url:path,data:mydata});return request.then(handleSuccess,handleError)}function getStudentPaymentList(path){var request=$http({method:"GET",url:path});return request.then(handleSuccess,handleError)}function getClassPayList(path){var request=$http({method:"GET",url:path});return request.then(handleSuccess,handleError)}function createPayer(path,thedata){$log.debug("createPayer data before :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):null}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response),response.data.error===!0?$q.reject(response.data.message):response.data}var apikey,service={setapikey:setapikey,getStudentPaymentList:getStudentPaymentList,updateStudentPayment:updateStudentPayment,createPayer:createPayer,getStudentPayment:getStudentPayment,setStudentPayment:setStudentPayment,getClassPayList:getClassPayList};return service}angular.module("ng-admin").factory("PaymentServices",PaymentServices),PaymentServices.$inject=["_","$http","$log","$q"]}(),function(){function StatsServices($http,$q,$log){function setapikey(key){apikey=key}function getStudentStats(thedata){$log.debug("getStudentStats data before post :",thedata);var path="../v1/studentstats",request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getStudentStatsMonths(thedata){$log.debug("getStudentStatsMonths data before post :",thedata);var path="../v1/studentstatsmonths",request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):$q.reject("An unknown error occurred.")}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response.data),response}var apikey,service={getStudentStats:getStudentStats,getStudentStatsMonths:getStudentStatsMonths,setapikey:setapikey};return service}angular.module("ng-admin").factory("StatsServices",StatsServices),StatsServices.$inject=["$http","$q","$log"]}(),function(){function StudentServices($http,$q,$log){function getActiveTab(){return activeTab}function setActiveTab(thetab,thecaller){$log.debug("StudentServices setActiveTab called",thetab,thecaller),activeTab=thetab}function setapikey(key){apikey=key}function getstudentPicFile(){return $log.debug("getStuPicfile: "+picFile),picFile}function setTheStudent(student){theStudent=student}function getTheStudent(){return $log.debug("getTheStudent",theStudent),theStudent}function refreshStudents(input){var params={input:input};return $http.get("../v1/studentnames",{params:params}).then(function(response){return $log.debug("refreshStudents service success:"),$log.debug(response.data),response.data})}function getPayerStudent(path,thedata){var request=$http({method:"get",url:path,params:thedata});return request.then(handleSuccess,handleError)}function getInvoices(path,thedata){var request=$http({method:"get",url:path,params:thedata});return request.then(handleSuccess,handleError)}function getPayments(path,thedata){var request=$http({method:"get",url:path,params:thedata});return request.then(handleSuccess,handleError)}function calcInvoice(path,thedata){var request=$http({method:"get",url:path,params:thedata});return request.then(handleSuccess,handleError)}function removeInvoice(thedata){$log.debug("removeInvoice data before post :",thedata);var path="../v1/invoice",request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateInvoice(path,thedata){$log.debug("updateInvoice data before post :",thedata);var request=$http({method:"PUT",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function addInvoice(path,thedata){$log.debug("addInvoice data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function emailInvoice(path,thedata){$log.debug("emailInvoice data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function refreshEmails(input){var params={input:input},request=$http({method:"get",url:"../v1/emails",params:params});return request.then(handleSuccess,handleError)}function getEmailViews(input){var params={input:input},request=$http({method:"get",url:"../v1/emailview",params:params});return request.then(handleSuccess,handleError)}function getRankPartial(input,ranktype){$log.debug("getRankPartial service entered:",input,ranktype);var params={input:input,ranktype:ranktype};return $http.get("../v1/rankpartial",{params:params}).then(function(response){return $log.debug("getRankPartial service success:"),$log.debug(response.data),response.data})}function getRank(ranktype){$log.debug("getRank service entered:",ranktype);var params={ranktype:ranktype};return $http.get("../v1/rank",{params:params}).then(function(response){return $log.debug("getRank service success:"),$log.debug(response.data),response.data})}function getstudentPicFiles(path){$log.debug("getStuPicfiles ");var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function renameStudentPicFile(path,student,oldpicfile){$log.debug("renameStudentPicFile "),$log.debug(student),$log.debug("pic"),$log.debug(oldpicfile),$log.debug("path"),$log.debug(path),student.oldpicfile=oldpicfile;var request=$http({method:"PUT",url:path,data:student});return request.then(handleSuccess,handleError)}function saveStudentPic(student,picnm){$log.debug("saveStudentPic :",student,picnm),student.picnm=picnm;var path="../v1/pic",request=$http({method:"PUT",url:path,data:student});return request.then(handleSuccess,handleError)}function setstudentPicFile(pic){$log.debug("setStuPicfile: "+pic),picFile=pic}function getAllStudents(path){$log.debug("getAllStudents service entered");var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getUserPrefCols(path){$log.debug("getUserPrefCols service entered with path:",path);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function createUserPrefCols(path,thedata){$log.debug("createUserPrefCols data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getStudentHistory(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudent(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function createStudent(path,thedata){$log.debug("createStudent data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function addStudentRank(thedata){$log.debug("addStudentRank data before post :",thedata);var path="../v1/studentrank",request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removeStudentRank(thedata){$log.debug("removeStudentRank data before post :",thedata);var path="../v1/studentrank",request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):$q.reject("An unknown error occurred.")}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response.data),response.data}function updateStudent(path,students){$log.debug("updateStudent vm.data before put :",students);var request=$http({method:"PUT",url:path,data:students});return request.then(handleSuccess,handleError)}function getAllZips(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getContactTypeCounts(){var path="../v1/contacttypes",request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudentLists(path){$log.debug("StudentServices getStudentLists entered",apikey);var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getRankList(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudentRanks(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStudentRankTypes(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getNotifications(path){var request=$http({method:"get",url:path,ignoreLoadingBar:!0});return request.then(handleSuccess,handleError)}function removeNotification(thedata){$log.debug("removeNotification data before post :",thedata);var path="../v1/notification",request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getEmailcount(path){var request=$http({method:"get",url:path,ignoreLoadingBar:!0});return request.then(handleSuccess,handleError)}function getEmailLists(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeEmailList(thedata,path){$log.debug("removeEmailList data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateEmailList(path,thedata){$log.debug("updateEmailList data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function sendEmail(path,thedata){$log.debug("send email data before post :",path,thedata);var request=$http({method:"POST",url:path,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removeEmailView(thedata,path){$log.debug("removeEmailView data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateEmailView(path,thedata){$log.debug("updateEmailView data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function payStripeInvoice(path,thedata){$log.debug("payStripeInvoice data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function setsession(path,thedata){var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function storeusercred(path,thedata){var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getStripe(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function getStripepub(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}function removeStripe(path){var request=$http({method:"get",url:path});return request.then(handleSuccess,handleError)}var apikey,picFile="",theStudent="",activeTab=1,service={setapikey:setapikey,getAllStudents:getAllStudents,getAllZips:getAllZips,getStudentLists:getStudentLists,getStudentHistory:getStudentHistory,getRankList:getRankList,getStudentRanks:getStudentRanks,addStudentRank:addStudentRank,removeStudentRank:removeStudentRank,getStudentRankTypes:getStudentRankTypes,updateStudent:updateStudent,getStudent:getStudent,getstudentPicFile:getstudentPicFile,getstudentPicFiles:getstudentPicFiles,setstudentPicFile:setstudentPicFile,renameStudentPicFile:renameStudentPicFile,getRankPartial:getRankPartial,getRank:getRank,setTheStudent:setTheStudent,getTheStudent:getTheStudent,setActiveTab:setActiveTab,getContactTypeCounts:getContactTypeCounts,getActiveTab:getActiveTab,createStudent:createStudent,getUserPrefCols:getUserPrefCols,refreshStudents:refreshStudents,createUserPrefCols:createUserPrefCols,saveStudentPic:saveStudentPic,getNotifications:getNotifications,removeNotification:removeNotification,sendEmail:sendEmail,refreshEmails:refreshEmails,getEmailcount:getEmailcount,updateEmailList:updateEmailList,removeEmailList:removeEmailList,getEmailLists:getEmailLists,getEmailViews:getEmailViews,removeEmailView:removeEmailView,updateEmailView:updateEmailView,getPayerStudent:getPayerStudent,getInvoices:getInvoices,updateInvoice:updateInvoice,addInvoice:addInvoice,emailInvoice:emailInvoice,removeInvoice:removeInvoice,calcInvoice:calcInvoice,getPayments:getPayments,payStripeInvoice:payStripeInvoice,setsession:setsession,storeusercred:storeusercred,getStripe:getStripe,getStripepub:getStripepub,removeStripe:removeStripe};return service}angular.module("ng-admin").factory("StudentServices",StudentServices),StudentServices.$inject=["$http","$q","$log"]}(),function(window,angular){function TemplateServices($http,$q,$log,$window){function setapikey(key){apikey=key}function createtemplate(path,thedata){$log.debug("createtemplate data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function removetemplate(path,thedata){$log.debug("removetemplate data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateTemplate(path,thedata){$log.debug("updateTemplate data before put :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function gettemplateDetails(path){return $log.debug("gettemplateDetails service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function gettemplateNames(path){return $log.debug("gettemplateNames service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):null}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response,response.error),response.error===!0||null===response.data?($log.debug("templateServices error returned",response),response.message="templateServices error returned",$q.reject(response)):response.data}var apikey,service={setapikey:setapikey,gettemplateDetails:gettemplateDetails,gettemplateNames:gettemplateNames,createtemplate:createtemplate,removetemplate:removetemplate,updateTemplate:updateTemplate};return service}angular.module("ng-admin").factory("TemplateServices",TemplateServices),TemplateServices.$inject=["$http","$q","$log","$window"]}(window,window.angular),function(){function TestingServices($http,$q,$log,$window){function setGrid(input,api,thedate,thestart,thelayout){thisgrid=input,thisapi=api,testDate=thedate,testTime=thestart,thisrptlayout=thelayout}function setsrcGrid(input,api,thedate,thestart){thissrcgrid=input,thissrcapi=api,testDate=thedate,testTime=thestart}function getGrid(){return thisgrid}function getsrcGrid(){return thissrcgrid}function getGridApi(){return thisapi}function getsrcGridApi(){return thissrcapi}function getTestDate(){return testDate}function getRptLayout(){return thisrptlayout}function getTestTime(){return testTime}function setapikey(key){apikey=key}function getTestTypes(path){return $log.debug("getTestTypes service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getGeneralColDefs(path){return $log.debug("getGeneralColDefs service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function createtestcandidate(path,thedata){$log.debug("createtestcandidate data before post :",thedata);var request=$http({method:"POST",url:path,data:{
thedata:thedata}});return request.then(handleSuccess,handleError)}function removetestcandidate(path,thedata){$log.debug("removetestcandidate data before delete :",thedata);var request=$http({method:"DELETE",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateTesting(path,thedata){$log.debug("updateTesting data before put :",thedata);var request=$http({method:"PUT",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updatetestcandidate(path){return $log.debug("updatetestcandidate service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function promotetestcandidate(path,thedata){$log.debug("promotetestcandidate data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function getTestDates(path){return $log.debug("getTestDates service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function gettestcandidateDetails(path){return $log.debug("gettestcandidateDetails service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function gettestcandidateNames(path){return $log.debug("gettestcandidateNames service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function gettestcandidateList(path){return $log.debug("gettestcandidateList service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function handleError(response){return $log.debug("failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):null}function handleSuccess(response){return $log.debug(" success:"),$log.debug(response),response.data}var apikey,thisgrid,thisapi,thissrcgrid,thissrcapi,thisrptlayout,testDate,testTime,service={setapikey:setapikey,getTestTypes:getTestTypes,gettestcandidateDetails:gettestcandidateDetails,gettestcandidateList:gettestcandidateList,gettestcandidateNames:gettestcandidateNames,createtestcandidate:createtestcandidate,removetestcandidate:removetestcandidate,updatetestcandidate:updatetestcandidate,promotetestcandidate:promotetestcandidate,updateTesting:updateTesting,getTestDates:getTestDates,setGrid:setGrid,getGrid:getGrid,getGridApi:getGridApi,setsrcGrid:setsrcGrid,getsrcGrid:getsrcGrid,getsrcGridApi:getsrcGridApi,getRptLayout:getRptLayout,getTestDate:getTestDate,getTestTime:getTestTime,getGeneralColDefs:getGeneralColDefs};return service}angular.module("ng-admin").factory("TestingServices",TestingServices),TestingServices.$inject=["$http","$q","$log","$window"]}(),function(window,angular){function UserServices($http,$q,$log,$rootScope,$cookieStore,$cookies,_){function getUserOptions(path){$log.debug("getUserOptions service entered"),$log.debug("path",path);var request=$http({method:"GET",url:path,ignoreLoadingBar:!0});return request.then(handleSuccess,handleError)}function setUserOptions(path,thedata){$log.debug("setUserOptions data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function setapikey(key){return apikey=key}function getapikey(){return apikey}function isapikey(){var cookiecheck=$cookies.getObject("globals");return"undefined"!=typeof cookiecheck&&("undefined"!=typeof apikey?apikey.length>0:(setapikey(cookiecheck.currentUser.authdata),$http.defaults.headers.common.Authorization=cookiecheck.currentUser.authdata,apikey.length>0))}function forgotpassword(path){return $log.debug("forgotpassword service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function resetpassword(path){return $log.debug("resetpassword service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function changepassword(newpassword,oldpassword,username,email){var path="/v1/changepassword";$log.debug("changepasswordpassword service entered"),$log.debug("path",path);var data={username:username,newpassword:newpassword,oldpassword:oldpassword,email:email},request=$http({method:"POST",url:path,data:{thedata:data}});return request.then(handleLogin,handleError)}function Login(username,password){var path="/v1/login",data={username:username,password:password};$log.debug("UserServices login entered:",username,password,path,data);var request=$http({method:"POST",url:path,data:{thedata:data}});return request.then(handleLogin,handleError)}function SetCredentials(username,password,apiKey){$log.debug("SetCredentials entered",username,apiKey),setapikey(apiKey);var authdata=apiKey;$rootScope.globals={currentUser:{username:username,authdata:authdata}};var creds={currentUser:{username:username,authdata:authdata}},expireDate=new Date;expireDate.setDate(expireDate.getDate()+1),$http.defaults.headers.common.Authorization=authdata,$log.debug("SetCredentials globals",creds),$cookies.putObject("globals",creds,{path:"/",domain:"villaris.us",secure:!0,expires:expireDate}),$log.debug("SetCredentials exit",$cookies.getObject("globals"))}function ResetCredentials(username,apiKey){$log.debug("ResetCredentials entered",username,apiKey),setapikey(apiKey);var authdata=apiKey;$rootScope.globals={currentUser:{username:username,authdata:authdata}},$http.defaults.headers.common.Authorization=authdata,$cookieStore.put("globals",$rootScope.globals)}function ClearCredentials(){$log.debug("ClearCredentials entered"),$rootScope.globals={},$cookieStore.remove("globals"),$http.defaults.headers.common.Authorization="",setapikey("")}function getUserNames(path){return $log.debug("getUserNames service entered"),$log.debug("path",path),$http.get(path).then(handleSuccess,handleError)}function getUserDetails(){if($log.debug("getUserDetails service entered",userdetails),_.isEmpty(userdetails)&&isapikey()){var cookiecheck=$cookies.getObject("globals"),usernm=cookiecheck.currentUser.username;$log.debug("getUserDetails service refresh user",usernm);var path="../v1/userdetails?usernm="+usernm;return getUserNames(path).then(function(data){return $log.debug("userServices getUserNames returned data"),$log.debug(data),userdetails.username=data.username,userdetails.firstname=data.firstname,userdetails.lastname=data.lastname,userdetails.userid=data.userid,userdetails.email=data.email,userdetails.school=data.school,userdetails.pictureurl=data.pictureurl,userdetails},function(error){return $log.debug("Caught an error getUserDetails refresh user , going to notify:",error),$q.reject(error)})}return $q.resolve(userdetails)}function createUser(path,thedata){$log.debug("createUser data before post :",thedata);var request=$http({method:"POST",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function updateUser(path,thedata){$log.debug("updateUser data before post :",thedata);var request=$http({method:"PUT",url:path,data:{thedata:thedata}});return request.then(handleSuccess,handleError)}function handleError(response){return $log.debug("UserServices failure:"),$log.debug(response),$log.debug("status",response.status),$log.debug("config",response.config),angular.isObject(response.data)&&response.data.message?$q.reject(response.data.message):$q.reject("An unknown error occurred.")}function handleSuccess(response){return $log.debug("UserServices success:"),$log.debug(response),response.data}function handleLogin(response){return $log.debug("UserServices handleLogin success:"),userdetails.username=response.data.username,userdetails.firstname=response.data.firstname,userdetails.lastname=response.data.lastname,userdetails.email=response.data.email,userdetails.pictureurl=response.data.pictureurl,userdetails.school=response.data.school,$log.debug(response),response.data}var apikey,userdetails={},service={Login:Login,SetCredentials:SetCredentials,ResetCredentials:ResetCredentials,ClearCredentials:ClearCredentials,getUserNames:getUserNames,getUserDetails:getUserDetails,createUser:createUser,updateUser:updateUser,setapikey:setapikey,getapikey:getapikey,isapikey:isapikey,setUserOptions:setUserOptions,getUserOptions:getUserOptions,forgotpassword:forgotpassword,resetpassword:resetpassword,changepassword:changepassword};return service}angular.module("ng-admin").factory("UserServices",UserServices),UserServices.$inject=["$http","$q","$log","$rootScope","$cookieStore","$cookies","_"]}(window,window.angular,window._);var studentpick={};!function(window,angular,$){function MainController($scope,UserServices,CalendarServices,StudentServices,ClassServices,Notification,$uibModal,uiGridConstants,$q,$log,$interval,$timeout,Idle,Title,$location,$cookies,$window){function padLeft(nr,n,str){return new Array(n-String(nr).length+1).join(str||"0")+nr}function showTimeout(){return vm.showTimeoutv}function intervalChecker(){$log.debug("main controller intervalChecker entered");var thedelay=CalendarServices.getIntervalValue();islogin(),$timeout(intervalChecker,1e3*thedelay)}function getUserOptions(){$log.debug("getUserOptions entered");var path="../v1/useroptions";return UserServices.getUserOptions(path).then(function(data){if($log.debug("main controller service getUserOptions returned:",data),("undefined"==typeof data.options||data.options.error===!0)&&"undefined"!=typeof data){var themsg={message:data.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3};return Notification.error(themsg),$q.reject(data)}try{vm.userOptions=JSON.parse(data.options),vm.okNotify=!!vm.userOptions.notify&&vm.userOptions.notify,vm.mydelay=vm.userOptions.delay?vm.userOptions.delay:30,$scope.idle=vm.userOptions.idle?vm.userOptions.idle:5,$scope.timeout=vm.userOptions.timeout?vm.userOptions.timeout:5,Title.setAsIdle($scope.idle),Idle.setIdle($scope.idle),Idle.setTimeout($scope.timeout),Idle.watch(),CalendarServices.setIntervalValue(vm.mydelay),CalendarServices.setOkNotify(vm.okNotify)}catch(e){return $log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack),Notification.error(e.message),$q.reject(data)}return vm.userOptions},function(error){return $log.debug("Caught an error getUserOptions, going to notify:",error),vm.userOptions=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function openSettings(){var thisModal=vm;thisModal.animationsEnabled=!0,thisModal.modalInstance=void 0,thisModal.retvlu="",thisModal.modalInstance=$uibModal.open({animation:thisModal.animationsEnabled,templateUrl:"templates/states/user-settings.html",controller:"ModalUserSettingsInstanceController as vm",size:"md",windowClass:"my-modal-popup",resolve:{classname:function(){return $log.debug("return from open"),thisModal.retvlu}}}),thisModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),thisModal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})}function newEmail(){var emailModal=vm;emailModal.animationsEnabled=!0,emailModal.modalInstance=void 0,emailModal.retvlu="",emailModal.modalInstance=$uibModal.open({animation:emailModal.animationsEnabled,templateUrl:"templates/states/email.html",controller:"ModalEmailInstanceController as vm",size:"md",scope:$scope,windowClass:"my-modal-popup",resolve:{myinitial:function(){return{}},contactform:function(){return $scope.contactform}}}),emailModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),emailModal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})}function openEmail(){var emailModal=vm;emailModal.animationsEnabled=!0,emailModal.modalInstance=void 0,emailModal.retvlu="",emailModal.modalInstance=$uibModal.open({animation:emailModal.animationsEnabled,templateUrl:"templates/states/emaillist.html",controller:"ModalEmailListInstanceController as vm",size:"lg",windowClass:"my-modal-popup",resolve:{classname:function(){return $log.debug("return from open"),emailModal.retvlu}}}),emailModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),emailModal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})}function islogin(){if($log.debug("islogin main controller"),vm.isok=UserServices.isapikey(),vm.userdta={},vm.isok){$log.debug("setting apikey for services in main controller");var thekey=UserServices.getapikey();CalendarServices.setapikey(thekey),StudentServices.setapikey(thekey),UserServices.setapikey(thekey),$q.all([gettheTasknamelist().then(function(){$log.debug("gettheTasknamelist returned")}),getEmailCount().then(function(){$log.debug("getEmailCount returned")}),getTNotifications().then(function(){$log.debug("getNotifications returned")})]).then(function(){$log.debug("getAll stats done returned"),setAlertCount()})}}function setAlertCount(){vm.alertcount=vm.teststudents.length+vm.newstudents.length+vm.overduestudents.overdue.length+vm.noshowstudents.noshow.length+vm.thisTasknamelist.length}function clearNewStudents(){$log.debug("clearNewStudents entered");for(var i=0;i<vm.newstudents.length;i++)removeNotification(vm.newstudents[i].id)}function clearTestStudents(){$log.debug("clearTestStudents entered");for(var i=0;i<vm.teststudents.length;i++)removeNotification(vm.teststudents[i].id)}function clearOverdueStudents(){$log.debug("clearOverdueStudents entered")}function clearNoshowStudents(){$log.debug("clearNoshowStudents entered")}function gettheTasknamelist(){$log.debug("gettheTasknamelist entered");var refreshpath="../v1/tasknamelist";return CalendarServices.gettasknamelist(refreshpath).then(function(data){return $log.debug("gettasknamelists returned data"),$log.debug(data),vm.thisTasknamelist=data.tasknamelist,vm.thisTasknamelist},function(error){return $log.debug("Caught an error gettheTasknamelist, going to notify:",error),vm.thisTasknamelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getUserDetails(){return $log.debug("getUserDetails entered"),UserServices.getUserDetails().then(function(data){return $log.debug("main controller service getuserdetails returned:",data),islogin(),vm.userdta=data,vm.myuser=data.userid,vm.userdta},function(error){return $log.debug("Caught an error getUserDetails, going to notify:",error),vm.userdta=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function getTNotifications(){$log.debug("getNotifications entered");var path="../v1/notification";return StudentServices.getNotifications(path).then(function(data){if($log.debug("service getNotifications returned:",data),"undefined"!=typeof data.NotificationList&&data.error===!1){$log.debug("NotificationList",data.NotificationList),vm.newstudents=[],vm.teststudents=[];for(var i=0;i<data.NotificationList.length;i++){var newstu={},teststu={};"newstudent"===data.NotificationList[i].type&&(newstu={id:data.NotificationList[i].id,type:data.NotificationList[i].type,notifkey:data.NotificationList[i].notifkey,value:data.NotificationList[i].value,firstname:data.NotificationList[i].firstname,lastname:data.NotificationList[i].lastname,contactid:data.NotificationList[i].contactid},vm.newstudents.push(newstu)),"readytotest"===data.NotificationList[i].type&&(teststu={id:data.NotificationList[i].id,type:data.NotificationList[i].type,notifkey:data.NotificationList[i].notifkey,value:data.NotificationList[i].value,firstname:data.NotificationList[i].firstname,lastname:data.NotificationList[i].lastname,contactid:data.NotificationList[i].contactid},vm.teststudents.push(teststu))}}else"undefined"!=typeof data&&Notification.error({message:"undefined"!=typeof data.message?data.message:"error NotificationList",delay:5e3});vm.overduestudents={overdue:[{id:1,firstname:"first1",lastname:"last1"},{id:2,firstname:"first2",lastname:"last2"}]},vm.noshowstudents={noshow:[{id:1,firstname:"first1",lastname:"last1"},{id:2,firstname:"first2",lastname:"last2"}]},setAlertCount()},function(error){return $log.debug("Caught an error getNotifications, going to notify:",error),vm.notifications=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function getEmailCount(){$log.debug("getEmailCount entered");var path="../v1/emailcount";return StudentServices.getEmailcount(path).then(function(data){return $log.debug("getEmailCount returned data"),$log.debug(data),"undefined"!=typeof vm.emailcount&&vm.emailcount.error!==!0||"undefined"==typeof data?void(vm.emailcount=data.emailcount[0].count>0?data.emailcount[0].count:""):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getEmailLists:",error),vm.emailcount="",vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function removeNotification(id){$log.debug("removeNotification entered");var thedata={id:id};return StudentServices.removeNotification(thedata).then(function(data){$log.debug("service removeNotification returned:",data),getTNotifications()},function(error){return $log.debug("Caught an error removeNotification, going to notify:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function isokf(){return vm.isok=UserServices.isapikey(),vm.isok}function loadPageHeader(){$log.debug("loadPageHeader entered")}function loadTopbar(){$log.debug("loadTopbar"),$("[data-toggle='offcanvas']").on("click",function(){return $("#sidebar-wrapper").toggleClass("active"),!1}),$("#setting-toggle").click(function(){$log.debug("mobile toggle"),$(".topbar-main").toggle()})}function loadSidebar(){$log.debug("loadSidebar"),$(".sidebar-fixed #sidebar-wrapper #sidebar").slimScroll({height:$(window).height()-100,width:"250px",size:"10px",railVisible:!0,alwaysVisible:!0,color:"gray",railColor:"gray",wheelStep:5}),$(window).scroll(function(){$(this).scrollTop()>50?$("body").hasClass("topbar-fixed")||$(".sidebar-fixed #sidebar-wrapper").css("top","0px"):$("body").hasClass("topbar-fixed")||$(".sidebar-fixed #sidebar-wrapper").css("top","50px")}),$("#menu-toggle").toggle(function(){$log.debug("menu-toggle"),$("#wrapper").hasClass("right-sidebar")?($("body").addClass("right-side-collapsed"),$(".navbar-header").addClass("logo-collapsed")):($(this).find("i").removeClass("icon-arrow-left").addClass("icon-arrow-right"),$("body").addClass("left-side-collapsed"),$(".navbar-header").addClass("logo-collapsed"),$(".sidebar-fixed #sidebar-wrapper #sidebar").slimScroll({destroy:!0}),$("#sidebar").css("height","auto"),$("#sidebar").css("width","55px"),$("#sidebar").css("overflow","initial"),$("#sidebar .menu-scroll").css("overflow","initial"),$("body").removeClass("sidebar-fixed"))},function(){$("#wrapper").hasClass("right-sidebar")?($("body").removeClass("right-side-collapsed"),$(".navbar-header").removeClass("logo-collapsed")):($(this).find("i").removeClass("icon-arrow-right").addClass("icon-arrow-left"),$("body").removeClass("left-side-collapsed"),$(".navbar-header").removeClass("logo-collapsed"),$("body").addClass("sidebar-fixed"),$(".sidebar-fixed #sidebar-wrapper #sidebar").slimScroll({height:$(window).height()-50,width:"250px",wheelStep:5}),$("#sidebar .menu-scroll").css("overflow","hidden"))}),$("#wrapper").hasClass("right-sidebar")?$("ul#side-menu li").hover(function(){$("body").hasClass("right-side-collapsed")&&$(this).addClass("nav-hover")},function(){$("body").hasClass("right-side-collapsed")&&$(this).removeClass("nav-hover")}):$("ul#side-menu li").hover(function(){$("body").hasClass("left-side-collapsed")&&$(this).addClass("nav-hover")},function(){$("body").hasClass("left-side-collapsed")&&$(this).removeClass("nav-hover")})}var vm=this;vm.loadTopbar=loadTopbar,vm.loadSidebar=loadSidebar,vm.loadPageHeader=loadPageHeader,vm.clearNewStudents=clearNewStudents,vm.clearTestStudents=clearTestStudents,vm.clearOverdueStudents=clearOverdueStudents,vm.clearNoshowStudents=clearNoshowStudents,vm.getEmailCount=getEmailCount,vm.newEmail=newEmail,vm.openEmail=openEmail,vm.isokf=isokf,vm.userdta={},vm.myuser,vm.message,vm.data,vm.thisTasknamelist=[],vm.alertcount,vm.newstudents=[],vm.teststudents=[],vm.overduestudents=[],vm.noshowstudents=[],vm.emailcount="",vm.userOptions={},vm.okNotify,vm.mydelay,vm.showTimeout=showTimeout,vm.showTimeoutv=!1,vm.openSettings=openSettings,vm.origtitle="V Dojo",Title.store(vm.origtitle),Title.idleMessage(vm.origtitle),$scope.$on("IdleStart",function(){$log.debug("IdleStart"),Title.original(),$scope.$apply()}),$scope.$on("IdleEnd",function(){$log.debug("IdleEnd"),Title.restore(),vm.showTimeoutv=!1,$scope.$apply()}),$scope.$on("IdleWarn",function(e,countdown){$log.debug("IdleWarn",countdown),$scope.remaining={totalSeconds:countdown},$scope.remaining.minutes=Math.floor(countdown/60),$scope.remaining.seconds=padLeft(countdown-60*$scope.remaining.minutes,2),$scope.minutes=$scope.remaining.minutes,$scope.seconds=$scope.remaining.seconds,Title.setAsIdle(countdown),Title.idleMessage("Timeout in {{minutes}}:{{seconds}} "),Title.timedOutMessage("Whoops you've pretimedout"),vm.showTimeoutv=!0,$scope.$apply()}),$scope.$on("IdleTimeout",function(){$log.debug("IdleTimeout"),Title.setAsTimedOut(),Idle.setIdle(30),Idle.setTimeout(30),vm.showTimeoutv=!1,UserServices.ClearCredentials(),$scope.$apply(),$location.path("/page-lock-screen")}),$scope.$on("Keepalive",function(){$log.debug("Keepalive")}),$scope.$on("$destroy",function(){$log.debug("main dismissed"),$log.debugEnabled(!1)}),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("routechange in main for success"),vm.data=$.fn.Data.get(current.originalPath),vm.isok&&(getUserOptions(),getUserDetails(),getEmailCount()),intervalChecker()}),$.fn.Data.Portlet("app.js")}function AppController($scope,$routeParams,UserServices,AttendanceServices,CalendarServices,TestingServices,EventServices,TemplateServices,StudentServices,PaymentServices,ClassServices,StatsServices,$cookies,$cookieStore,$log,Notification,$q,$window,$interval,$controller,$rootScope,moment,$timeout,CalUtil,Idle){function conversiondateopen($event){vm.status.opened=!0}function openSchedule(){$.fn.Data.slideDown(),vm.open=!1,vm.close=!0}function closeSchedule(){$.fn.Data.slideDown(),vm.open=!0,vm.close=!1}function activate(){$log.debug("app.js activate entered"),vm.textcolor=CalUtil.getColorByBgColor(vm.mycolor),CalUtil.calActivate(),$("#eventPickDiv").button().on("click",function(){var somevlu=$("#eventpick").val();$log.debug("click pick is",somevlu,vm.studentpick2,studentpick,$("#studentpick").val()),vm.studentpick2=studentpick,adialog.dialog("open")}),adialog=CalUtil.aDialog(vm),eventDrag=CalUtil.EventDrag(),getUserDetails().then(function(){$log.debug("activate getUserDetails returned",vm.userdta),islogin(),todos(),gettheTasknamelist(),$("select[name='forUser']").unbind("change").bind("change",function(){var u=$(this).val();$log.debug("reset cal",vm.forUser,u),vm.forUser=u,$("#calendar").fullCalendar("destroy"),getEventList(vm.forUser).then(function(){$log.debug("refetch",vm.events),initCalendar()})["catch"](function(e){$log.debug("resetCalendar error in activate",e)})}),getInstructorList().then(function(){$log.debug("returned from getInstructorList")}),getAgeRangeList().then(function(){$log.debug("returned from getAgeRangeList")}),getTestTypes().then(function(){$log.debug("returned from getTesttypes")}),getEventList("ALL").then(function(){initCalendar(),vm.okNotify=CalendarServices.getOkNotify(),vm.notifylist=CalendarServices.getNotifyList(vm.okNotify),intervalChecker()})["catch"](function(e){$log.debug("getEventList error in activate",e)})})}function getAgeRangeList(){var path="../v1/ageranges";return CalendarServices.getAgeRangeList(path).then(function(data){return $log.debug("getAgeRangeList returned data"),$log.debug(data.agerangelist),vm.agerangelist=data.agerangelist,vm.agerangelist})}function schedToCal(){$log.debug("schedToCal entered");var thedata={calendarscheduleDate:vm.ConversionDate},path="../v1/calendarschedule";return CalendarServices.schedToCal(path,thedata).then(function(data){$log.debug("service schedToCal returned:",data),$("#calendar").fullCalendar("destroy"),getEventList(vm.forUser).then(function(){$log.debug("refetch",vm.events),initCalendar()})["catch"](function(e){$log.debug("resetCalendar error in activate",e)})},function(error){return $log.debug("Caught an error schedToCal, going to notify:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function clearCal(){$log.debug("clearCal entered");var path="../v1/calendarschedule";return CalendarServices.clearCal(path).then(function(data){$log.debug("service clearCal returned:",data),$("#calendar").fullCalendar("destroy"),getEventList(vm.forUser).then(function(){$log.debug("refetch",vm.events),initCalendar()})["catch"](function(e){$log.debug("resetCalendar error in activate",e)})},function(error){return $log.debug("Caught an error clearCal, going to notify:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function transferCal(){$log.debug("transferCal entered");var thedata={calendarscheduleDate:vm.ConversionDate},path="../v1/schedulecalendar";return CalendarServices.transferCal(path,thedata).then(function(data){$log.debug("service transferCal returned:",data),$("#calendar").fullCalendar("destroy"),getEventList(vm.forUser).then(function(){$log.debug("refetch",vm.events),initCalendar()})["catch"](function(e){$log.debug("transferCal error in activate",e)})},function(error){return $log.debug("Caught an error transferCal, going to notify:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function popinit(){$log.debug("popinit entered"),vm.thisevent=CalendarServices.getCurrentEvent()}function eventopen(calEvent){CalUtil.eventopen(calEvent,studentpick,vm,CalendarServices)}function displayTime(){return CalendarServices.displaytime()}function setstudent(mystudent){$log.debug("set vm student",mystudent,studentpick),studentpick="NULL"===mystudent.ID?{ID:"NULL",FirstName:"Not picked",LastName:"yet",FullName:"Not picked yet"}:mystudent}function setStudentFromPick(item){$log.debug("setstudentfrompick",item),$("#eventpick").val(item.FullName),studentpick=item,$("#studentpick").val(item)}function calsave(screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,updateflag,theevent,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick){$log.debug("save cal",screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,updateflag,theevent,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick);var reminderCheck;reminderCheck=void 0===reminderCheckbox?0:1===reminderCheckbox?1:0===reminderCheckbox?0:reminderCheckbox[0].checked?1:0,$log.debug("check reminderCheck",reminderCheck,$("input#reminderCheckbox:checked"));var eventData;if($log.debug("isTitle",title),updateflag&&null!==theevent){theevent.title=title,theevent.startd=moment(startd,"MM/DD/YYYY").tz("America/New_York").format("MM/DD/YYYY"),$log.debug("theevent startd set",theevent.startd);var tststr=startd+" "+start.toString();$log.debug("theevent start and startd combine",start,tststr);var tstd=moment(tststr,"MM/DD/YYYY hh:mm A z");theevent.start=tstd,$log.debug("theevent start set",tststr,tstd,theevent.start),tststr=startd+" "+end.toString(),tstd=moment(tststr,"MM/DD/YYYY hh:mm A z"),theevent.end=tstd,$log.debug("theevent end set",tststr,tstd,theevent.end),theevent.reminderInterval=reminderInterval,theevent.userpick=userpick,theevent.reminderCheckbox=reminderCheck,theevent.className=eventclass,theevent.color=color,theevent.textcolor=textcolor,theevent.eventtype=eventtype,theevent.contactid=contactid,theevent.eventid=eventid,theevent.eventpick=eventpick,theevent.typepick=typepick,theevent.agerpick=agerpick,theevent.classpick=classpick,saveCalendarEvent(theevent),$("#calendar").fullCalendar("updateEvent",theevent)}updateflag!==!0&&title&&($log.debug("updateflag not true",startd,start,end,eventid,contactid),eventData={title:title.val(),startd:startd,start:start,end:end,reminderInterval:reminderInterval.val(),userpick:userpick.val(),reminderCheckbox:reminderCheckbox.val(),className:eventclass.val(),color:color.val(),textcolor:textcolor.val(),eventtype:eventtype.val(),eventid:eventid.val(),contactid:contactid.val(),eventpick:eventpick.val(),typepick:typepick.val(),agerpick:agerpick.val(),classpick:classpick.val()},$log.debug("isTitle yes",eventData),$("#calendar").fullCalendar("renderEvent",eventData,!0))}function saveCalendarEvent(theEvent){var updpath="../v1/saveCalendarEvent";$log.debug("about saveCalendarEvent ",theEvent,updpath);var rep="undefined"!=typeof theEvent.userpick&&""!==theEvent.userpick?theEvent.userpick.toString().replace("number:",""):vm.myuser,thedata={title:theEvent.title,id:theEvent.id,startd:theEvent.startd,start:theEvent.start,end:theEvent.end,contactid:theEvent.contactid,reminder:theEvent.reminderCheckbox,reminderInterval:theEvent.reminderInterval,userpick:rep,color:theEvent.backgroundColor,textcolor:theEvent.textColor,eventtype:theEvent.eventtype,classname:theEvent.className,eventpick:theEvent.eventpick,typepick:theEvent.typepick,agerpick:theEvent.agerpick,classpick:theEvent.classpick};return $log.debug("about saveCalendarEvent data",thedata),CalendarServices.saveCalendarEvent(updpath,thedata).then(function(data){return $log.debug("saveCalendarEvent returned data"),$log.debug(data),vm.neweventid=data.new_eventid,$log.debug("saveCalendarEvent newevent",vm.neweventid),vm.events=data.events,$log.debug(vm.events),$log.debug(data.message),vm.message=data.message,getEventList(vm.forUser).then(function(zdata){$log.debug("saveCalendarEvent getEventList returned",zdata)},function(error){return $log.debug("Caught an error saveCalendarEvent getEventList after update:",error),vm.events=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.events})["catch"](function(e){throw $log.debug("saveCalendarEvent failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function updateTasknamelist(taskname,taskstatus){var updpath="../v1/updatetasknamelist",thedata={taskname:taskname,taskstatus:taskstatus};return $log.debug("about updateTasknamelist ",thedata,updpath),CalendarServices.updateTasknamelist(updpath,thedata).then(function(data){return $log.debug("updateTasknamelist returned data"),$log.debug(data),vm.thisTasknamelist=data,$log.debug(vm.thisTasknamelist),$log.debug(vm.thisTasknamelist.message),vm.message=vm.thisTasknamelist.message,gettheTasknamelist().then(function(zdata){$log.debug("gettheTasknamelist returned",zdata)},function(error){return $log.debug("Caught an error gettheTasknamelist after update:",error),vm.tasknamelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisTasknamelist})["catch"](function(e){throw $log.debug("updateTasknamelist failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function removeTasknamelist(taskname){var updpath="../v1/removetasknamelist",thedata={taskname:taskname};return $log.debug("about removeTasknamelist ",thedata,updpath),CalendarServices.removeTasknamelist(updpath,thedata).then(function(data){return $log.debug("removeTasknamelist returned data"),$log.debug(data),$log.debug(data),vm.message=data.message,gettheTasknamelist().then(function(zdata){$log.debug("gettheTasknamelist returned",zdata)},function(error){return $log.debug("Caught an error gettheTasknamelist after update:",error),vm.tasknamelist=[],vm.message=error,Notification.error({
message:error,delay:5e3}),$q.reject(error)}),vm.thisTasknamelist})["catch"](function(e){throw $log.debug("removeTasknamelist failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getStudent(path){return StudentServices.getStudent(path).then(function(data){return $log.debug("getStudent returned data"),$log.debug(data),data},function(error){return $log.debug("getStudent",error),Notification.error({message:error,delay:5e3}),error})}function removeCalendarEvent(eventid){var updpath="../v1/removeCalendarEvent",thedata={eventid:eventid};return $log.debug("about removeCalendarEvent ",thedata,updpath),CalendarServices.removeCalendarEvent(updpath,thedata).then(function(data){return $log.debug("removeCalendarEvent returned data"),$log.debug(data),$log.debug(data),vm.message=data.message,getEventList(vm.forUser).then(function(zdata){$log.debug("removeCalendarEvent getEventList returned",zdata)},function(error){return $log.debug("Caught an error removeCalendarEvent getEventList:",error),vm.tasknamelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.events})["catch"](function(e){throw $log.debug("removeCalendarEvent  failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getUserDetails(){return $log.debug("getUserDetails entered"),UserServices.getUserDetails().then(function(data){return $log.debug("service getuserdetails returned:",data),vm.userdta=data,vm.myuser=data.userid,vm.userdta},function(error){return $log.debug("Caught an error getUserDetails, going to notify:",error),vm.userdta=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getUserList(){$log.debug("getUserList entered");var refreshpath="../v1/getuserlist";return CalendarServices.getUsers(refreshpath).then(function(data){return $log.debug("getUsers returned data"),$log.debug(data),vm.thisUserlist=data.users,vm.thisUserlist},function(error){return $log.debug("Caught an error getUserList, going to notify:",error),vm.thisUserlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getClassList(){$log.debug("getClassList entered");var path="../v1/class";return ClassServices.getClasses(path).then(function(data){$log.debug("getClasses returned data"),$log.debug(data),vm.classList=data.Classlist},function(error){return $log.debug("Caught an error getClassList:",error),vm.classList=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function gettheTasknamelist(){$log.debug("gettheTasknamelist entered");var refreshpath="../v1/tasknamelist";return CalendarServices.gettasknamelist(refreshpath).then(function(data){return $log.debug("gettasknamelists returned data"),$log.debug(data),vm.thisTasknamelist=data.tasknamelist,vm.thisTasknamelist},function(error){return $log.debug("Caught an error gettheTasknamelist, going to notify:",error),vm.thisTasknamelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getInstructorList(){$log.debug("getInstructorList entered");var refreshpath="../v1/instructorlist";return CalendarServices.getinstructorlist(refreshpath).then(function(data){if($log.debug("getinstructorlist returned data"),$log.debug(data),vm.instructorlist=data.instructorlist,"undefined"!=typeof data.instructorlist)for(var i=0;i<data.instructorlist.length;i++)i>vm.colorlist.length?(vm.instructorlist[i].backgroundcolor=vm.colorlist[vm.colorlist.length],vm.instructorlist[i].textcolor=vm.colorlisthex[vm.colorlist.length]):(vm.instructorlist[i].backgroundcolor=vm.colorlist[i],vm.instructorlist[i].textcolor=vm.colorlisthex[i]);return vm.instructorlist},function(error){return $log.debug("Caught an error getinstructorlist, going to notify:",error),vm.thisTasknamelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getTestTypes(){$log.debug("getTestTypes entered");var refreshpath="../v1/testtypes";return TestingServices.getTestTypes(refreshpath).then(function(data){if($log.debug("getTestTypes returned data"),$log.debug(data),vm.testtypelist=data.testtypelist,"undefined"!=typeof data.testtypelist)for(var i=0;i<data.testtypelist.length;i++)i>vm.colorlist.length?(vm.testtypelist[i].backgroundcolor=vm.colorlist[vm.colorlist.length],vm.testtypelist[i].textcolor=vm.colorlisthex[vm.colorlist.length]):(vm.testtypelist[i].backgroundcolor=vm.colorlist[i],vm.testtypelist[i].textcolor=vm.colorlisthex[i]),vm.eventtypeOptions.push(vm.testtypelist[i].testdescription);return vm.testtypelist},function(error){return $log.debug("Caught an error getTestTypes, going to notify:",error),vm.testtypelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getEventList(qparm){var refreshpath="../v1/getEventList?username="+qparm;return $log.debug("getEventList entered",qparm,refreshpath),CalendarServices.getCalendarEvents(refreshpath).then(function(data){if($log.debug("getCalendarEvents returned data"),$log.debug(data,_typeof(data.events)),"undefined"!=typeof data.events){for(var i=0;i<data.events.length;i++){$log.debug("reformat dates",data.events[i]);({title:data.events[i].title,time:data.events[i].start,theevent:data.events[i],id:data.events[i].id});data.events[i].end=moment(CalUtil.convertToMoment(data.events[i].end)),data.events[i].start=moment(CalUtil.convertToMoment(data.events[i].start)),data.events[i].startd=moment(data.events[i].startd,"YYYY-MM-DD")}vm.events=data.events}else vm.events={};return $log.debug(vm.events),CalendarServices.setNotifyList(vm.events),$("#calendar").fullCalendar("renderEvents",vm.events,!0),vm.events},function(error){return $log.debug("Caught an error getEventList, going to notify:",error),vm.events=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function intervalChecker(){$log.debug("appc intervalChecker entered");var mydelay=CalendarServices.getIntervalValue(),myoknotify=CalendarServices.getOkNotify();vm.notifylist=CalendarServices.getNotifyList(myoknotify),$timeout(intervalChecker,1e3*mydelay)}function islogin(){if($log.debug("islogin"),vm.isok=UserServices.isapikey(),vm.isok){$log.debug("setting apikey for services");var thekey=UserServices.getapikey();CalendarServices.setapikey(thekey),TestingServices.setapikey(thekey),EventServices.setapikey(thekey),TemplateServices.setapikey(thekey),StudentServices.setapikey(thekey),PaymentServices.setapikey(thekey),ClassServices.setapikey(thekey),UserServices.setapikey(thekey),StatsServices.setapikey(thekey),vm.filterstat=filterstat;var getdatestr="startdate";$q.all([getUserList().then(function(){$log.debug("getUserList returned")}),getClassList().then(function(){$log.debug("getClassList returned")}),getStudentStatsMonths(getdatestr).then(function(){$log.debug("getStudentStatsMonths returned")}),getStudentStats(getdatestr).then(function(){$log.debug("getStudentStats returned")})]).then(function(){$log.debug("getAll stats done returned")})}}function filterstat(val){var pass=!1;return pass="Inactive"===val.category&&"ContactType"===val.type&&"inactivedate"===val.datetype&&val.summaryvalue<0}function initCalendar(){CalUtil.initCalendar(vm,vm.forUser)}function settextcolor(){vm.textcolor=CalUtil.getColorByBgColor(vm.mycolor),$log.debug("settextcolor",vm.mycolor,vm.textcolor)}function getYType(index){switch(index){case 0:return"Student";case 1:return"BlackBelt";case 2:return"Net";case 3:return"Break";case 4:return"Injured";default:return""}}function getYStatus(index){switch(index){case 0:return"Active";case 1:return"Active";case 2:return"Net";case 3:return"NotActive";case 4:return"NotActive";default:return""}}function todos(){setTimeout(function(){$("#todos-list-sort").sortable(),$("#todos-list-sort").disableSelection(),$("#todos-list-add").click(function(){return updateTasknamelist($("#todos-list-input").val(),"0"),$("[data-hover='tooltip']").tooltip(),!1})})}function gety(x,seriesIndex){$log.debug("gety:",x,seriesIndex);var retvl=[];if("Net"!==getYType(seriesIndex)){var d2_1a=contentForGraph(vm.studentstats,"month","summaryvalue","ContactType",getYType(seriesIndex),getYStatus(seriesIndex));$log.debug("gety d2_1a",d2_1a,x);for(var iter=0,len=d2_1a.length;iter<len;iter++)for(var diter=0,dlen=d2_1a[iter].length;diter<dlen;diter++)if(d2_1a[iter][diter].month===x){$log.debug("d2_1a content",d2_1a[iter][diter].details);var dta={item:{firstname:d2_1a[iter][diter].details.firstname,lastname:d2_1a[iter][diter].details.lastname,contactid:d2_1a[iter][diter].details.contactid,fulldate:d2_1a[iter][diter].details.fulldate}};retvl.push(dta)}}else retvl="no text";return $log.debug("gety x",JSON.stringify(retvl)),JSON.stringify(retvl)}function genGraph(){setTimeout(function(){$.animateNumber.numberStepFactories.separator(",");try{var d2_1=datToGraph(vm.studentstats,"month","summaryvalue","ContactType",getYType(0)),d2_2=datToGraph(vm.studentstats,"month","summaryvalue","ContactType",getYType(1)),d2_3=datToGraph(vm.studentstats,"month","summaryvalue","ContactType",getYType(3)),d2_4=datToGraph(vm.studentstats,"month","summaryvalue","ContactType",getYType(4));Object.defineProperty(Array.prototype,"SumArray",{value:function(arr){var sumx,sumy,sum=[];if(null!==arr&&this.length===arr.length){for(var i=0;i<arr.length;i++)sumy=parseFloat(this[i][1])+parseFloat(arr[i][1]),sumx=this[i][0],sum.push([sumx,sumy]);return sum}return this}});var d2_sum=d2_1.SumArray(d2_2).SumArray(d2_3).SumArray(d2_4);$.plot("#line-chart-spline",[{data:d2_1,label:"Student",color:"#2ecc71"},{data:d2_2,label:"BlackBelt",color:"#3498db"},{data:d2_sum,label:"Net",color:"#aaaadd"},{data:d2_3,label:"Break",color:"#e74c3c"},{data:d2_4,label:"Injured",color:"#ffce54"}],{series:{lines:{show:!1},splines:{show:!0,tension:.4,lineWidth:2,fill:0},points:{show:!0,radius:4}},grid:{borderColor:"#ffffff",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:function(label,xval,yval,flotItem){var xy=JSON.parse(gety(xval,flotItem.seriesIndex));$log.debug("xy",xy,xval,yval,getYType(flotItem.seriesIndex));var xx="";if("no text"!==xy)for(var iter=0,len=xy.length;iter<len;iter++)xx=xx+'<div class="row col-md-12"> name:'+xy[iter].item.firstname+" "+xy[iter].item.lastname+" <br/> id: "+xy[iter].item.contactid+" on: "+xy[iter].item.fulldate+"</div>";return $log.debug("xx",xx),xx+="Count:"+yval},shifts:{x:-30,y:-50},defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0,legend:{backgroundOpacity:.5,noColumns:5,container:"#line-chart-spline-legend",labelBoxBorderColor:"white",position:"ne"}});var d6_1=[39],d6_2=[41],d6_3=[20];$.plot("#traffice-sources-chart",[{data:d6_1,label:"Ages 4-7",color:"#e74c3c"},{data:d6_2,label:"Ages 8-12",color:"#2ecc71"},{data:d6_3,label:"Ages 13-17",color:"#3498db"}],{series:{pie:{show:!0}},grid:{hoverable:!0,clickable:!0}});var d7=[["Jan",200],["Feb",178],["Mar",130],["Apr",150],["May",220],["Jun",320]];$.plot("#new-customer-chart",[{data:d7,color:"#01b6ad"}],{series:{bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0});var d8_1=[["Jan",80],["Feb",76],["Mar",110],["Apr",90],["May",123],["Jun",150],["Jul",170]],d8_2=[["Jan",70],["Feb",49],["Mar",70],["Apr",60],["May",86],["Jun",100],["Jul",150]];$.plot("#internet-speed-chart",[{data:d8_1,label:"Adults",color:"#c0392b"},{data:d8_2,label:"Children",color:"#2ecc71"}],{series:{lines:{show:!1},splines:{show:!0,tension:.4,lineWidth:2,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0});var d9_1=[["Jan",67],["Feb",91],["Mar",36],["Apr",150],["May",28],["Jun",123],["Jul",38]],d9_2=[["Jan",59],["Feb",49],["Mar",45],["Apr",94],["May",76],["Jun",22],["Jul",31]];$.plot("#area-chart-spline-db",[{data:d9_1,label:"Adults",color:"#ffce54"},{data:d9_2,label:"Children",color:"#B33F93"}],{series:{lines:{show:!1},splines:{show:!0,tension:.4,lineWidth:2,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!0},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0}),$("#my-calendar").zabuto_calendar({language:"en"})}catch(e){$log.debug(e.message,"from",e.stack)}},500)}function datToGraph(data,x,y,type,category){for(var res=[],iter=0,len=data.length;iter<len;iter++){var d=[];d[0]=data[iter][x],d[1]=data[iter][y],data[iter].type===type&&data[iter].category===category&&res.push(d)}return res}function contentForGraph(data,x,y,type,category,status){$log.debug("contentForGraph:",data,x,y,type,category,status);for(var res=[],iter=0,len=data.length;iter<len;iter++){var d=[];d[0]=data[iter][x],d[1]=data[iter].details;for(var dta,dtaarr=[],diter=0,dlen=d[1].length;diter<dlen;diter++)$log.debug("diter",d[1][diter]),dta={item:diter,month:d[0],details:{lastname:d[1][diter].details.lastname,firstname:d[1][diter].details.firstname,contactid:d[1][diter].details.contactid,fulldate:d[1][diter].details.fulldate}},dtaarr.push(dta);"Active"===status&&data[iter].type===type&&data[iter].category===category&&($log.debug("contentIf found:",dtaarr,data[iter].type,data[iter].category),res.push(dtaarr)),"NotActive"===status&&data[iter].type===type&&data[iter].classstatus===category&&($log.debug("contentIf found:",dtaarr,data[iter].type,data[iter].category),res.push(dtaarr))}return $log.debug("contentForGraph res:",res),res}function getStudentStats(datestr){$log.debug("getStudentStats entered");var myTime="1970/01/01",oraFormat="YYYY-MM-DD HH:mm:ss",thedata={thecategory:"ContactType",timeint:11,thedate:datestr,thedateearly:moment(myTime,"YYYY/MM/DD").format(oraFormat),thedatelate:moment(new Date).format(oraFormat)};return StatsServices.getStudentStats(thedata).then(function(response){return $log.debug("stats success:"),$log.debug(response),"undefined"!=typeof response.data&&response.data.error!==!0||"undefined"==typeof response.data.message?(response.data.studentstats.timeint=response.data.thedata.timeint,vm.studentstats=response.data.studentstats,vm.studentstatsdetails=response.data.detailslist,mergedata(),genGraph(),response):(Notification.error({message:response.data.message,delay:5e3}),$q.reject(response.data))},function(response){return angular.isObject(response.data)&&response.data.message||(response={data:{message:"getStudentStats An unknown error occurred"}}),$log.debug(" getStudentStats error",response.data.message),Notification.error({message:response.data.message,delay:5e3}),$q.reject(response)})}function getStudentStatsMonths(datetype){$log.debug("getStudentStatsMonths entered");var myTime="1970/01/01",oraFormat="YYYY-MM-DD HH:mm:ss",thedata={thedate:datetype,thedateearly:moment(myTime,"YYYY/MM/DD").format(oraFormat),thedatelate:moment(new Date).format(oraFormat)};return StatsServices.getStudentStatsMonths(thedata).then(function(data){$log.debug("getStudentStatsMonths returned data",data)},function(error){return $log.debug(" getStudentStatsMonths error",error),Notification.error({message:error,delay:5e3}),$q.reject(error)})}function mergedata(){for(var iter=0,len=vm.studentstats.length;iter<len;iter++){vm.studentstats[iter].details=[];for(var diter=0,lend=vm.studentstatsdetails.length;diter<lend;diter++)if(vm.studentstats[iter].month===vm.studentstatsdetails[diter].month&&vm.studentstats[iter].type===vm.studentstatsdetails[diter].type&&("Inactive"===vm.studentstats[iter].category||"Injured"===vm.studentstats[iter].category?vm.studentstats[iter].classstatus===vm.studentstatsdetails[diter].category:vm.studentstats[iter].datetype===vm.studentstatsdetails[diter].datetype&&vm.studentstats[iter].category===vm.studentstatsdetails[diter].category)){var dta={iter:diter,details:vm.studentstatsdetails[diter]};vm.studentstats[iter].details.push(dta)}}}function refreshStudents(theinput){return StudentServices.refreshStudents(theinput).then(function(data){return $log.debug("controller refreshStudents returned data"),$log.debug(data),vm.refreshstudentlist=data,$log.debug("controller refreshstudentlist service data",vm.refreshstudentlist),vm.refreshstudentlist})}var vm=this;vm.data={},vm.userdta={},vm.header={layout_menu:"",layout_topbar:"",animation:"",header_topbar:"static",boxed:""},vm.getStudentStats=getStudentStats,vm.getEventList=getEventList,vm.updateTasknamelist=updateTasknamelist,vm.removeTasknamelist=removeTasknamelist,vm.gettheTasknamelist=gettheTasknamelist,vm.getInstructorList=getInstructorList(),vm.getTestTypes=getTestTypes,vm.getStudentStatsMonths=getStudentStatsMonths,vm.islogin=islogin,vm.notifylist=[],vm.isok,vm.forUser="ALL",vm.myuser,vm.forUsers={userlist:[{user:"ALL"},{user:"MINE"}]},vm.thisTasknamelist=[],vm.instructorlist=[],vm.testtypelist=[],vm.message,vm.loading=!1,vm.loadAttempted=!1,vm.neweventid,vm.eventStartd,vm.eventStart,vm.eventStarttz,vm.eventEnd,vm.eventStart,vm.eventEnd,vm.eventEndtz,vm.reminderCheckbox,vm.eventid,vm.eventTitle,vm.studentstats,vm.studentstatsdetails,vm.listOfTimes=[],vm.myj={},vm.reminderInterval,vm.thisUserlist={},vm.userpick,vm.classList={},vm.classpick,vm.typepick,vm.eventtypeOptions=["event","ClassSchedule","movie"],vm.agerangelist={},vm.agerpick="",vm.initTime=moment(),vm.checktime,vm.checktimestr,vm.displayTime=displayTime,vm.mycolor="#"+Math.floor(16777215*Math.random()).toString(16),vm.settextcolor=settextcolor,vm.studentpick2={},vm.events=[],vm.colorlist=["maroon","red","orange","yellow","olive","purple","fuchsia","lime","green","navy","blue","aqua","teal","silver","black"],vm.colorlisthex=["#fff","#000","#000","#000","#fff","#fff","#000","#000","#fff","#fff","#fff","#000","#000","#fff","#fff"],vm.setStudentFromPick=setStudentFromPick,vm.setstudent=setstudent,vm.eventopen=eventopen,vm.getStudent=getStudent,vm.disable=void 0,vm.refreshStudents=refreshStudents,vm.refreshstudentlist=[],vm.reminderOptions=["15 min","1 hour","1 day"],vm.popinit=popinit,vm.calsave=calsave,vm.eventDrag=eventDrag,vm.saveCalendarEvent=saveCalendarEvent,vm.removeCalendarEvent=removeCalendarEvent,vm.conversiondateopen=conversiondateopen,vm.openSchedule=openSchedule,vm.closeSchedule=closeSchedule,vm.schedToCal=schedToCal,vm.clearCal=clearCal,vm.transferCal=transferCal,vm.status={opened:!1},vm.conversiondate="",vm.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate","MM/dd/yyyy"],vm.bdateformat=vm.formats[4],vm.open=!0,vm.close=!1;var adialog,eventDrag;$scope.data={},$scope.header={layout_menu:"",layout_topbar:"",animation:"",header_topbar:"static",boxed:""},$.fn.Data.Portlet("app.js"),$scope.$on("$destroy",function(){$log.debug("app dismissed"),$log.debugEnabled(!1)}),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("routechange in app for success"),islogin(),vm.header.animation="fadeInUp",setTimeout(function(){vm.header.animation=""},100),vm.data=$.fn.Data.get(current.originalPath),$log.debug("data in $routeChangeSuccess",vm.data),-1==$.inArray(current.originalPath,["/page-lock-screen","/page-signup","/page-signin","/reset-pwd","/change-pwd","/forget-pwd"])?(activate(),$("body>.default-page").show(),$("body>.extra-page").hide()):window.scrollTo(0,0),vm.header.boxed="",vm.header.layout_topbar="",vm.header.layout_menu="",vm.header.header_topbar="","/layout-left-sidebar"===current.originalPath?($log.debug("left sidebar entered"),vm.header.boxed="",vm.header.layout_topbar="",vm.header.layout_menu="",vm.header.header_topbar="",$("#wrapper").removeClass("right-sidebar"),$("body").removeClass("left-side-collapsed"),$("body").removeClass("layout-boxed"),$("body > .default-page").removeClass("container"),$("#topbar .navbar-header").removeClass("logo-collapsed"),$("body").addClass("sidebar-fixed"),$(".sidebar-fixed #sidebar-wrapper #sidebar").slimScroll({height:$(window).height()-50,width:"250px",wheelStep:5}),$("body").removeClass("right-side-collapsed"),$("body").removeClass("container")):"/"===current.originalPath?($log.debug("/ path entered"),$("body").removeAttr("id")):($log.debug("else path entered"),vm.header.boxed="",vm.header.layout_topbar="",vm.header.layout_menu="",vm.header.header_topbar="",$("#wrapper").removeClass("right-sidebar"),$("body").removeClass("left-side-collapsed"),$("body").removeClass("right-side-collapsed"),$("body").removeClass("layout-boxed"),$("body #page-wrapper").removeClass("animated"),$("body > .default-page").removeClass("container"),$("#topbar .navbar-header").removeClass("logo-collapsed"),$("body").addClass("sidebar-fixed"),$(".sidebar-fixed #sidebar-wrapper #sidebar").slimScroll({height:$(window).height()-50,width:"250px",wheelStep:5})),$log.debug("exit routechangesucess")}),$scope.$on("$routeChangeError",function(event,current,previous){$log.debug("routechange in app for error"),$log.debug("originalPath"),$log.debug(current.originalPath)}),$(document).ready(function(){$("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(event){event.preventDefault(),event.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open")}),$("#external-events div.external-event").each(function(){CalUtil.EventDrag($(this)),$log.debug("external-events after drag",$(this))}),$("#todos-list-sort > li > label.external-event").each(function(){CalUtil.EventDrag($(this)),$log.debug("todos external-events after drag",$(this))}),$("#calendar").fullCalendar("destroy"),getEventList(vm.forUser).then(function(){$log.debug("refetch",vm.events),initCalendar()})["catch"](function(e){$log.debug("resetCalendar error in activate",e)})})}angular.module("ng-admin").controller("AppController",AppController).controller("MainController",MainController),AppController.$inject=["$scope","$routeParams","UserServices","AttendanceServices","CalendarServices","TestingServices","EventServices","TemplateServices","StudentServices","PaymentServices","ClassServices","StatsServices","$cookies","$cookieStore","$log","Notification","$q","$window","$interval","$controller","$rootScope","moment","$timeout","CalUtil"],MainController.$inject=["$scope","UserServices","CalendarServices","StudentServices","ClassServices","Notification","$uibModal","uiGridConstants","$q","$log","$interval","$timeout","Idle","Title","$location","$cookies","$window"]}(window,window.angular,window.$),function(){function ChangepwdController($scope,$log,$routeParams,FlashService,Notification,UserServices,$q,$location){function compare(repass){$log.debug("compare",repass),vm.isconfirm=vm.password==repass}function changepwd(){$log.debug("controller register function entered"),vm.dataLoading=!0;var thedata={username:vm.userdta.username,confirm_password:vm.confirm_password,password:vm.password,oldpassword:vm.oldpassword},path="/v1/changepassword";return $log.debug("controller register thedata:",thedata),vm.dataLoading=!0,UserServices.createUser(path,thedata).then(function(data){return $log.debug("register returned data"),$log.debug(data),Notification.success({message:"Change successful",delay:5e3}),$location.path("/#"),data},function(error){return $log.debug("Caught an error , going to notify:",error),FlashService.Err(error),$q.reject(error)})["finally"](function(){vm.dataLoading=!1})}var vm=this;vm.changepwd=changepwd,vm.compare=compare,vm.dataLoading,vm.password,vm.oldpassword,vm.isconfirm,vm.confirm_password,vm.userdta=UserServices.getUserDetails(),$log.debug("enter ChangepwdController",vm.userdta),vm.re=/^[a-zA-Z]\w{3,14}$/}angular.module("ng-admin").controller("ChangepwdController",ChangepwdController),ChangepwdController.$inject=["$scope","$log","$routeParams","FlashService","Notification","UserServices","$q","$location"]}(),function(window,angular,$,Stripe){function CardViewInstanceController($log,$uibModalInstance,$window,$scope,StudentServices,Notification,$q,$uibModal,selectedRow,$filter){function cardsuccess(data){$("#status").text("Success!"),$("#properties").empty();for(var key in data)if(data.hasOwnProperty(key)){var text=key+": "+data[key];$("#properties").append('<li class="data">'+text+"</li>")}}function carderror(){$("#status").text("Failed!"),$(".line").text("")}function cancel(){$uibModalInstance.dismiss("cancel")}$log.debug("selectedRow",selectedRow);var vm=this;vm.cancel=cancel,vm.carderror=carderror,vm.cardsuccess=cardsuccess,vm.selectedRow=selectedRow,vm.stripe={},vm.desc=selectedRow.payfor,vm.amt=selectedRow.amt,vm.invoice=selectedRow.invoice,vm.thisInvoice={},$scope.selectedRow=selectedRow,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("CardViewInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("CardViewInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("creditcardview-controller.js"),$.cardswipe({firstLineOnly:!1,success:vm.cardsuccess,parsers:["visa","mastercard","amex","discover","generic"],error:vm.carderror,debug:!0})}angular.module("ng-admin").controller("CardViewInstanceController",CardViewInstanceController),CardViewInstanceController.$inject=["$log","$uibModalInstance","$window","$scope","StudentServices","Notification","$q","$uibModal","selectedRow","$filter"]}(window,window.angular,window.$,window.Stripe),function(){angular.module("ng-admin").controller("DashboardBlogController",function($scope,$routeParams){var d2=($.animateNumber.numberStepFactories.separator(","),[["Jan 1",93],["Jan 3",78],["Jan 5",47],["Jan 7",35],["Jan 9",48],["Jan 11",26],["Jan 13",49],["Jan 15",96],["Jan 17",54],["Jan 19",99],["Jan 21",92],["Jan 23",43]]);$.plot("#site-stats-chart",[{data:d2,color:"#01b6ad"}],{series:{bars:{align:"left",lineWidth:0,show:!0,barWidth:.4,fill:.9}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0})})}(),function(){angular.module("ng-admin").controller("DashboardShoppingController",function($scope,$routeParams){var comma_separator_number_step=$.animateNumber.numberStepFactories.separator(","),d1=[["Jan",200],["Feb",120],["Mar",199],["Apr",157],["May",163],["Jun",192],["Jul",130],["Aug",126],["Sep",206]];$.plot("#sp-chart-orders",[{data:d1,color:"#5cb85c"}],{series:{lines:{show:!0,fill:!0,fillColor:{colors:[{opacity:0},{opacity:.2}]}},points:{show:!0,radius:4}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0}),$(".dial").knob({draw:function(){$(this.i).val(this.cv+"%")},fgColor:"#B8BEC8"}),$({value:0}).animate({value:$(".ls-chart input").attr("rel")},{duration:5e3,easing:"swing",step:function(){$(".ls-chart input").val(Math.ceil(this.value)).trigger("change")}}),$({value:0}).animate({value:$(".ao-chart input").attr("rel")},{duration:5e3,easing:"swing",step:function(){$(".ao-chart input").val(Math.ceil(this.value)).trigger("change")}}),$("#revenue-number").animateNumber({number:3579.95,numberStep:comma_separator_number_step},5e3),$("#tax-number").animateNumber({number:295.35,numberStep:comma_separator_number_step},5e3),$("#shipping-number").animateNumber({number:30,numberStep:comma_separator_number_step},5e3),$("#quantity-number").animateNumber({number:14,numberStep:comma_separator_number_step},5e3),$("#ls-number").animateNumber({number:252983,numberStep:comma_separator_number_step},5e3),$("#ao-number").animateNumber({number:6320,numberStep:comma_separator_number_step},5e3),$(".dial").css("top",0)})}(),function(window,$){$.fn.Data=function(){};var $this=$.fn.Data;$.fn.Data.pages={"/":{title:"Dashboard",breadcrumb:["Dashboard"]},"/main":{title:"Dashboard",breadcrumb:["Dashboard"]},"/form-layouts-newlead":{title:"Form Layouts",breadcrumb:["Form","Form Layouts"]},"/form-layouts-newpayment":{title:"Form Layouts",breadcrumb:["Form","Form Layouts"]},"/form-layouts-newstudent":{title:"Form Layouts",breadcrumb:["Form","Form Layouts"]},"/form-layouts-editstudent":{title:"Edit Student",breadcrumb:["Student","Edit Student"]},"/form-layouts-newtest":{title:"Form Layouts",breadcrumb:["Form","Form Layouts"]},"/form-layouts-newweek":{title:"Form Layouts",breadcrumb:["Form","Form Layouts"]},"/table-basic-students":{title:"Student List",breadcrumb:["Students","Student List"]},"/table-basic-leads":{title:"Table Basic",breadcrumb:["Table","Table Basic"]},"/table-basic-attendance":{title:"Attendance",breadcrumb:["Students","Attendance"]},"/table-basic-schedule":{title:"Class Schedule",breadcrumb:["Manage Studio","Class Schedule"]},"/table-basic-program":{title:"Program Maintenance",breadcrumb:["Manage Studio","Class Schedule"]},"/table-basic-htmltemplate":{title:"Email Template Maintenance",breadcrumb:["Manage Studio","Email Template"]},"/table-basic-testtype":{title:"Test type Maintenance",breadcrumb:["Manage Studio","Test Type"]},"/stripe-onboard":{title:"Onboard with Stripe for payments",breadcrumb:["Manage Studio","Stripe Onboard"]},"/table-basic-classpgm":{title:"Class Program Maintenance",breadcrumb:["Manage Studio","Class Program"]},"/table-basic-classrank":{title:"Class Rank Maintenance",breadcrumb:["Manage Studio","Class Rank"]},"/table-basic-classtest":{title:"Class Test Maintenance",breadcrumb:["Manage Studio","Class Test"]},"/table-basic-rptbuilder":{title:"Report Builder",breadcrumb:["Manage Studio","Report Builder"]},"/table-basic-class":{title:"Class Maintenance",breadcrumb:["Manage Studio","Class Schedule"]},"/table-basic-eventcreation":{title:"Event Creation",breadcrumb:["Students","Event Creation"]},"/table-basic-testcandidates":{title:"Test Creation",breadcrumb:["Testing","Test Creation"]},"/table-basic-paymenttracking":{title:"Payment Tracking",breadcrumb:["Manage Studio","Payment Tracking"]},"/layout-left-sidebar":{title:"Layout Left Sidebar",breadcrumb:["Layout","Layout Left Sidebar"]},"/page-404":{title:"Page 404",breadcrumb:["Page","Page 404"]},"/page-500":{title:"Page 500",breadcrumb:["Page","Page 500"]},"/page-blank":{title:"Page Blank",breadcrumb:["Page","Page Blank"]},"/page-fullcalendar":{title:"Page Fullcalendar",breadcrumb:["Page","Page Fullcalendar"]},"/page-lock-screen":{title:"Page Lock Screen",breadcrumb:["Page","Page Lock Screen"]},"/page-signin":{title:"Page Signin",breadcrumb:["Page","Page Signin "]},"/page-signup":{title:"Page Signup",breadcrumb:["Page","Page Signup "]}},$.fn.Data.get=function(id){if(id&&$this.pages[id])return $this.pages[id]},$.fn.Data.slideDown=function(){$(".portlet >.portlet-header>.tools>i").click()},$.fn.Data.Portlet=function(src){$(".portlet").each(function(index,element){var me=$(this);$(">.portlet-header>.tools>i",me).hasClass("fa-chevron-init")&&($(">.portlet-body",me).slideUp("fast"),$(">.portlet-header>.tools>i",me).removeClass("fa-chevron-init")),$(">.portlet-header>.tools>i",me).off("click").click(function(e){$(this).hasClass("fa-chevron-up")?($(">.portlet-body",me).slideUp("fast"),$(this).removeClass("fa-chevron-up").addClass("fa-chevron-down")):$(this).hasClass("fa-chevron-down")?($(">.portlet-body",me).slideDown("fast"),$(this).removeClass("fa-chevron-down").addClass("fa-chevron-up")):$(this).hasClass("fa-cog")||($(this).hasClass("fa-refresh")?($(">.portlet-body",me).addClass("wait"),setTimeout(function(){$(">.portlet-body",me).removeClass("wait")},1e3)):$(this).hasClass("fa-times")&&me.remove());
})})}}(window,window.$),function(window,angular,$,tinymce){function ModalEmailInstanceController($log,$uibModalInstance,StudentServices,$window,Notification,uiGridConstants,$scope,$q,contactform,_,moment,myinitial){function tagTransform(newTag){var item={FirstName:newTag,LastName:"unknown",FullName:newTag,email:newTag,ID:"unknown"};return item}function getName(){var name;return name="undefined"!=typeof $scope.eventResult.item?$scope.eventResult.item[0].FullName:""}function messageChange(value){$log.debug("messageChange entered",value)}function addTo(){$scope.inputEmail=angular.copy($scope.eventResult)}function addCC(){$scope.inputCC=angular.copy($scope.eventResult)}function addBCC(){$scope.inputBCC=angular.copy($scope.eventResult)}function setEmailFromPick(item){$scope.eventResult={item:item}}function refreshemails(theinput){return $log.debug("refreshemails",theinput),StudentServices.refreshEmails(theinput).then(function(data){return $log.debug("controller refreshemails returned data"),$log.debug(data),$scope.refreshemaillist=data,$scope.refreshemaillist})}function submitForm(){if($scope.submitted=!0,$scope.submitButtonDisabled=!0,$scope.form.contactform.$valid){var emailto="",emailcc="",emailbcc="",emailusers=[];if("undefined"!=typeof $scope.inputEmail.item){for(var i=0;i<$scope.inputEmail.item.length;i++)emailto+=$scope.inputEmail.item[i].email+";";for(var i=0;i<$scope.inputEmail.item.length;i++)emailusers.push({ID:$scope.inputEmail.item[i].ID})}if("undefined"!=typeof $scope.inputCC.item){for(var i=0;i<$scope.inputCC.item.length;i++)emailcc+=$scope.inputCC.item[i].email+";";for(var i=0;i<$scope.inputCC.item.length;i++)emailusers.push({ID:$scope.inputCC.item[i].ID})}if("undefined"!=typeof $scope.inputBCC.item){for(var i=0;i<$scope.inputBCC.item.length;i++)emailbcc+=$scope.inputBCC.item[i].email+";";for(var i=0;i<$scope.inputBCC.item.length;i++)emailusers.push({ID:$scope.inputBCC.item[i].ID})}var path="../v1/email",uniqcontacts=_.uniq(emailusers,!1,function(p){return p.ID}),thedata={emailHead:{_subject:$scope.input.Subject,_to:emailto,_cc:emailcc,_bcc:emailbcc,_date:moment(),contacts:uniqcontacts,inout:"out"},emailBody:{body:$scope.input.Message}};return $log.debug("about sendEmail ",thedata,path),StudentServices.sendEmail(path,thedata).then(function(data){$log.debug("sendEmail returned data"),$log.debug(data),data.error?($scope.submitButtonDisabled=!1,$scope.resultMessage=data.message,$scope.result="bg-danger"):($scope.submitButtonDisabled=!0,$scope.resultMessage=data.message,$scope.result="bg-success")})["catch"](function(e){throw $log.debug("sendEmail failure:"),$log.debug("error",e),$scope.message=e,$scope.resultMessage="Failed  Please fill out all the fields.",$scope.submitButtonDisabled=!1,$scope.result="bg-danger",Notification.error({message:e,delay:5e3}),e})}$scope.resultMessage="Failed: Please fill out all the fields.",$scope.result="bg-danger",$scope.submitButtonDisabled=!1}function cancel(){$uibModalInstance.dismiss("cancel")}if($scope.myinitial=myinitial,$scope.cancel=cancel,$scope.form={},$scope.submitForm=submitForm,$scope.refreshemails=refreshemails,$scope.setEmailFromPick=setEmailFromPick,$scope.messageChange=messageChange,$scope.getName=getName,$scope.tagTransform=tagTransform,$scope.addTo=addTo,$scope.addCC=addCC,$scope.addBCC=addBCC,$scope.stuff="mike",$scope.message="",$scope.result="hidden",$scope.resultMessage="",$scope.inputEmail=[],$scope.inputCC=[],$scope.inputBCC=[],$scope.input={Subject:"",Message:""},$scope.submitButtonDisabled=!1,$scope.refreshemaillist=[],$scope.eventResult="",$scope.emailpick=[],0!==Object.keys(myinitial).length){var item=tagTransform(myinitial.from);$scope.emailpick.push(item),setEmailFromPick([item]),"reply"===myinitial.emailtype?(addTo(),$scope.input.Subject="Re: "+myinitial.subject):"forward"===myinitial.emailtype?$scope.input.Subject="Fw: "+myinitial.subject:$scope.input.Subject=myinitial.subject,$scope.input.Message="On "+myinitial.emaildate+" "+myinitial.from+" wrote: ",$scope.input.Message+='<p style="padding-left: 30px;">'+myinitial.body+"</p>"}$scope.tinymceOptions={resize:!0,width:"100%",height:200,selector:"textarea",theme:"modern",plugins:"print preview fullpage  searchreplace autolink directionality  visualblocks visualchars fullscreen image code link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount   imagetools    contextmenu colorpicker textpattern help",toolbar1:"formatselect | bold italic strikethrough forecolor backcolor | link image | code | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat",relative_urls:!1,remove_script_host:!1,template_replace_values:{name:getName},templates:"../v1/emailtemplates",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","//www.tinymce.com/css/codepen.min.css"],image_title:!0,automatic_uploads:!0,images_upload_url:"../v1/imageuploader.php"},$scope.submitted=!1,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalEmailInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalEmailInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("Email-controller.js")}angular.module("ng-admin").controller("ModalEmailInstanceController",ModalEmailInstanceController),ModalEmailInstanceController.$inject=["$log","$uibModalInstance","StudentServices","$window","Notification","uiGridConstants","$scope","$q","contactform","_","moment","myinitial"]}(window,window.angular,window.$,window.tinymce),function(window,angular,$){function ModalEmailListInstanceController($log,$uibModalInstance,StudentServices,$window,Notification,uiGridConstants,$scope,iddropdownFilter,$uibModal,Util,$q,moment){function openEmail(selected){var emailModal=vm;emailModal.item=selected,emailModal.animationsEnabled=!0,emailModal.modalInstance=void 0,emailModal.retvlu="",emailModal.modalInstance=$uibModal.open({animation:emailModal.animationsEnabled,templateUrl:"templates/states/emailview.html",controller:"ModalEmailViewInstanceController as vm",size:"lg",windowClass:"my-modal-popup",resolve:{item:function(){return $log.debug("resolve item",emailModal.item),emailModal.item}}}),emailModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),emailModal.retvlu=retvlu},function(){getEmailList(),$log.info("Modal dismissed at: "+new Date)})}function getEmailList(){$log.debug("getEmailList entered");var path="../v1/emaillist";return StudentServices.getEmailLists(path).then(function(data){$log.debug("getEmailLists returned data"),$log.debug(data);for(var i=0;i<data.EmailList.length;i++)moment(data.EmailList[i].emaildate||moment()).isBefore(moment().subtract(1,"days").endOf("day"))?data.EmailList[i].datef=moment(data.EmailList[i].emaildate||moment()).format("MMM DD, YYYY"):data.EmailList[i].datef=moment(data.EmailList[i].emaildate||moment()).format("HH:mm");vm.gridOptions.data=data.EmailList},function(error){return $log.debug("Caught an error getEmailLists:",error),vm.gridOptions.data={},vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,enableSorting:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"id",displayName:"Open",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.openEmail(row.entity)" role="button" class="btn btn-blue" style="padding:  0px 14px;"  ><i class="fa fa-folder-open-o"></i>&nbsp; Open</a></span></div>'},{field:"status",displayName:"Status",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.listStatus,filter:{options:vm.listStatus}},{field:"from",displayName:"From",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!0},{field:"emailto",displayName:"To",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!0},{field:"subject",displayName:"Subject",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!0},{field:"firstname",displayName:"First Name",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!0},{field:"lastname",displayName:"Last Name",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!0},{field:"emaildate",displayName:"rawDate",visible:!1,headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!1,sort:{direction:uiGridConstants.DESC,priority:1}},{field:"datef",displayName:"Date",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,enableFiltering:!1},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeEmailList(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateEmailList(rowEntity,"Update")})}}}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeEmailList(input){$log.debug("removeEmailList entered",input);var path="../v1/emaillist",thedata={id:input.id},data={};return data.EmailListExistsList={},StudentServices.removeEmailList(thedata,path).then(function(data){return $log.debug("removeEmailList returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getEmailList().then(function(zdata){$log.debug("getEmailList returned",zdata)},function(error){return $log.debug("Caught an error getEmailList after remove:",error),vm.thisEmailList=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.EmailListFKExists=data.EmailListExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeEmailList failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function updateEmailList(rowEntity,updatetype){var updpath="../v1/emaillist",thedata={id:rowEntity.id,status:rowEntity.status};return $log.debug("about updateEmailList ",thedata,updpath,updatetype),StudentServices.updateEmailList(updpath,thedata).then(function(data){return $log.debug("updateEmailList returned data"),$log.debug(data),vm.thisEmailList=data,$log.debug(vm.thisEmailList),$log.debug(vm.thisEmailList.message),vm.message=vm.thisEmailList.message,"undefined"!=typeof vm.thisEmailList&&vm.thisEmailList.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getEmailList().then(function(zdata){$log.debug("getEmailList returned",zdata)},function(error){return $log.debug("Caught an error getEmailList after remove:",error),vm.thisEmailList=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisEmailList):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateEmailList failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function cancel(){$uibModalInstance.dismiss("cancel")}var vm=this;vm.cancel=cancel,vm.removeEmailList=removeEmailList,vm.updateEmailList=updateEmailList,vm.openEmail=openEmail,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.gridLength={},vm.initialLength=10,vm.rowheight=50,vm.headerheight=140,vm.getGridLength=getGridLength,vm.EmailList={},vm.thisEmailList=[],vm.listStatus=[{id:"read",value:"read",order:1},{id:"new",value:"new",order:2}],setGridLength(vm.initialLength),setgridOptions(),getEmailList(),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalEmailListInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalEmailListInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("emaillist-controller.js")}angular.module("ng-admin").controller("ModalEmailListInstanceController",ModalEmailListInstanceController),ModalEmailListInstanceController.$inject=["$log","$uibModalInstance","StudentServices","$window","Notification","uiGridConstants","$scope","iddropdownFilter","$uibModal","Util","$q","moment"]}(window,window.angular,window.$),function(window,angular,$){function ModalEmailViewInstanceController($log,$uibModalInstance,StudentServices,$window,Notification,$scope,Util,$q,$sce,moment,$uibModal,item){function getEmailView(item){$log.debug("getEmailView entered");var input=item.id;return StudentServices.getEmailViews(input).then(function(data){return $log.debug("getEmailViews returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),vm.data=data.EmailView[0],vm.data.body=$sce.trustAsHtml(data.EmailView[0].body),moment(vm.data.emaildate||moment()).isBefore(moment().subtract(1,"days").endOf("day"))?vm.data.datef=moment(vm.data.emaildate||moment()).format("MMM DD, YYYY"):vm.data.datef=moment(vm.data.emaildate||moment()).format("HH:mm"),vm.data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getEmailViews:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function removeEmailView(input){$log.debug("removeEmailView entered",input);var path="../v1/emailview",thedata={id:input.id},data={};return data.EmailViewExistsList={},StudentServices.removeEmailView(thedata,path).then(function(data){return $log.debug("removeEmailView returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getEmailView().then(function(zdata){$log.debug("getEmailView returned",zdata)},function(error){return $log.debug("Caught an error getEmailView after remove:",error),vm.thisEmailView=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.EmailViewFKExists=data.EmailViewExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeEmailView failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function updateEmailView(input){var updpath="../v1/emailview",thedata={id:input.id,status:input.status};return $log.debug("about updateEmailView ",thedata,updpath),StudentServices.updateEmailView(updpath,thedata).then(function(data){return $log.debug("updateEmailView returned data"),$log.debug(data),vm.thisEmailView=data,$log.debug(vm.thisEmailView),$log.debug(vm.thisEmailView.message),vm.message=vm.thisEmailView.message,"undefined"!=typeof vm.thisEmailView&&vm.thisEmailView.error!==!0||"undefined"==typeof data?(getEmailView(vm.data).then(function(zdata){$log.debug("getEmailView returned",zdata)},function(error){return $log.debug("Caught an error getEmailView after remove:",error),vm.thisEmailView=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisEmailView):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateEmailView failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function eforward(){$log.debug("eforward entered"),newEmail("forward")}function ereply(){$log.debug("ereply entered"),newEmail("reply")}function newEmail(newtype){var emailModal=vm;vm.data.emailtype=newtype,emailModal.animationsEnabled=!0,emailModal.modalInstance=void 0,emailModal.retvlu="",emailModal.modalInstance=$uibModal.open({animation:emailModal.animationsEnabled,templateUrl:"templates/states/email.html",controller:"ModalEmailInstanceController as vm",size:"md",scope:$scope,windowClass:"my-modal-popup",resolve:{myinitial:function(){return vm.data},contactform:function(){return $scope.contactform}}}),emailModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),emailModal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})}function markRead(){$log.debug("markRead entered"),vm.data.status="read",updateEmailView(vm.data)}function markUnread(){$log.debug("markUnread entered"),vm.data.status="new",updateEmailView(vm.data)}function cancel(){$uibModalInstance.dismiss("cancel")}$log.debug("item",item);var vm=this;vm.cancel=cancel,vm.removeEmailView=removeEmailView,vm.updateEmailView=updateEmailView,vm.ereply=ereply,vm.eforward=eforward,vm.markRead=markRead,vm.markUnread=markUnread,vm.data=item,vm.thisEmailView=[],getEmailView(item),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalEmailViewInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalEmailViewInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("emailview-controller.js")}angular.module("ng-admin").controller("ModalEmailViewInstanceController",ModalEmailViewInstanceController),ModalEmailViewInstanceController.$inject=["$log","$uibModalInstance","StudentServices","$window","Notification","$scope","Util","$q","$sce","moment","$uibModal","item"]}(window,window.angular,window.$),function(){function ForgotpwdController($scope,$log,$routeParams,$location,FlashService,UserServices,$q){function forgotpwd(){$log.debug("controller forgotpwd function entered",pagevm.username);var path="../v1/forgotpassword?username="+pagevm.username;return pagevm.dataLoading=!0,UserServices.forgotpassword(path).then(function(data){return $log.debug("UserServices returned data"),$log.debug(data),pagevm.apiKey=data.apiKey,alert("Check your email for reset information"),$location.path("/"),data},function(error){return $log.debug("Caught an error UserServices, going to notify:",error),UserServices.SetCredentials("","",""),FlashService.Err(error),$q.reject(error)})["finally"](function(){pagevm.dataLoading=!1})}var pagevm=this;pagevm.forgotpwd=forgotpwd,pagevm.username,pagevm.dataLoading,pagevm.apiKey,$log.debug("enter ForgotpwdController"),$log.debug("username",pagevm.username),function(){UserServices.ClearCredentials()}()}angular.module("ng-admin").controller("ForgotpwdController",ForgotpwdController),ForgotpwdController.$inject=["$scope","$log","$routeParams","$location","FlashService","UserServices","$q"]}(),function(){angular.module("ng-admin").controller("FormComponentsController",function($scope,$routeParams){$.fn.Data.Portlet("form-components.js"),setTimeout(function(){$('input[name="daterangepicker-default"]').daterangepicker(),$('input[name="daterangepicker-date-time"]').daterangepicker({timePicker:!0,timePickerIncrement:30,format:"MM/DD/YYYY h:mm A"}),$(".reportrange").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},startDate:moment().subtract("days",29),endDate:moment()},function(start,end){$(".reportrange span").html(start.format("MMMM D, YYYY")+" - "+end.format("MMMM D, YYYY"))}),$(".reportrange span").html(moment().subtract("days",29).format("MMMM D, YYYY")+" - "+moment().format("MMMM D, YYYY")),$(".datepicker-default").datepicker(),$(".datepicker-years").datepicker({startView:1,minViewMode:2}),$(".input-daterange").datepicker({format:"dd-mm-yyyy"}),$(".datepicker-inline").datepicker({format:"dd-mm-yyyy",startView:2,minViewMode:1}),$(".datetimepicker-default").datetimepicker(),$(".datetimepicker-disable-date").datetimepicker({pickDate:!1}),$(".datetimepicker-disable-time").datetimepicker({pickTime:!1}),$(".datetimepicker-start").datetimepicker(),$(".datetimepicker-end").datetimepicker(),$(".datetimepicker-start").on("change.dp",function(e){$(".datetimepicker-end").data("DateTimePicker").setStartDate(e.date)}),$(".datetimepicker-end").on("change.dp",function(e){$(".datetimepicker-start").data("DateTimePicker").setEndDate(e.date)}),$(".timepicker-default").timepicker(),$(".timepicker-24hr").timepicker({autoclose:!0,minuteStep:1,showSeconds:!0,showMeridian:!1}),$(".clockface-default").clockface(),$(".clockface-component").clockface({format:"HH:mm",trigger:"manual"}),$("#btn-clockface-component").click(function(e){e.stopPropagation(),$(".clockface-component").clockface("toggle")}),$(".clockface-inline").clockface({format:"H:mm"}).clockface("show","14:30"),$(".colorpicker-default").colorpicker(),$(".colorpicker-rgba").colorpicker(),$(".colorpicker-component").colorpicker({format:"hex"}).on("changeColor",function(ev){$(".colorpicker-component span i").css("color",ev.color.toHex()),$(".colorpicker-component input").val(ev.color.toHex())}),$("#date").mask("99/99/9999"),$("#phone").mask("(999) 999-9999"),$("#product-key").mask("(aa) 99-999"),setTimeout(function(){$(".make-switch").bootstrapSwitch()},50)},100)})}(),function(window,angular){function FormLayoutsControllerEditStudent(StudentServices,$scope,$rootScope,$routeParams,$log,$location,Notification,ClassServices,_,$q,$uibModal){function openPhoto(){var photoModal=vmstudent;photoModal.dataToPass=vmstudent.students,photoModal.animationsEnabled=!0,photoModal.modalInstance=void 0,photoModal.retvlu="",photoModal.modalInstance=$uibModal.open({animation:photoModal.animationsEnabled,templateUrl:"templates/states/photos/photo.html",controller:"ModalPicUploadController",controllerAs:"vmpicmodal",size:"md",windowClass:"my-modal-popup",resolve:{dataToPass:function(){return $log.debug("resolve datatopass",photoModal.dataToPass),photoModal.dataToPass}}}),photoModal.modalInstance.opened.then(function(success){$log.debug("photoModal ui opened:",success)},function(error){$log.debug("photoModal ui failed to open, reason : ",error)}),photoModal.modalInstance.rendered.then(function(success){$log.debug("photomodal ui rendered:",success)},function(error){$log.debug("photoModal ui failed to render, reason : ",error)}),photoModal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),activate(),photoModal.retvlu=retvlu},function(error){$log.debug("photomodal ui failed to result, reason : ",error),$log.info("Modal dismissed at: "+new Date),activate()})}function dateopen($event){vmstudent.status.opened=!0}function rankremove(ranktype){$log.debug("rankremove entered",ranktype),removeStudentRank(ranktype)}function activate(){return $log.debug("about activate editstudent "),getStudent().then(function(){$log.debug("activated EditStudent view");var thetab=StudentServices.getActiveTab();$log.debug("activate the active tab",thetab),vmstudent.active=thetab,"undefined"!=typeof vmstudent.students.ID&&(getStudentRanks(vmstudent.students.ID),getStudentRankTypes(vmstudent.students.ID))},function(error){return $log.debug("activate editstudent",error),Notification.error({message:error,delay:5e3}),error})}function getRankPartial(theinput){return StudentServices.getRankPartial(theinput,vmstudent.ranktypepick).then(function(data){return $log.debug("controller getRankPartial returned data",theinput,vmstudent.ranktypepick),$log.debug(data),vmstudent.ranklist=data,$log.debug("controller getRankPartial service data",vmstudent.ranklist),vmstudent.ranklist})}function getRank(theinput){return StudentServices.getRank(vmstudent.ranktypepick).then(function(data){return $log.debug("controller getRank returned data",theinput,vmstudent.ranktypepick),$log.debug(data),vmstudent.ranklist=data,$log.debug("controller getRank service data",vmstudent.ranklist),vmstudent.ranklist})}function getBirthday(bday){return $log.debug("bday"),$log.debug(bday),new Date(bday)}function getStudent(){return StudentServices.getStudent(vmstudent.path).then(function(data){return $log.debug("getStudent returned data"),$log.debug(data),vmstudent.students=data,$log.debug(vmstudent.students.message),vmstudent.message=vmstudent.students.message,"undefined"!=typeof vmstudent.students&&vmstudent.students.error!==!0||"undefined"==typeof data?(Notification.success({message:vmstudent.message,delay:5e3}),StudentServices.setTheStudent(data),$log.debug("studen pic url",vmstudent.students.pictureurl),_.isEmpty(vmstudent.students.pictureurl)?($log.debug("empty picture"),vmstudent.students.pictureurldecache="missingstudentpicture.png"):vmstudent.students.pictureurldecache=vmstudent.students.pictureurl+"?decache="+Math.random(),$log.debug("get Birthday:",vmstudent.students.Birthday),_.isEmpty(vmstudent.students.Birthday)?vmstudent.students.Birthday=getBirthday(new Date):vmstudent.students.Birthday=getBirthday(vmstudent.students.Birthday),$log.debug("studen pic url decache",vmstudent.students.pictureurldecache),vmstudent.students):(Notification.error({message:vmstudent.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("getStudent",error),Notification.error({message:error,delay:5e3}),error})}function getStudentRanks(studentid){if("undefined"==typeof studentid)return{};$log.debug("getStudentRanks entered",studentid);var thepath=encodeURI("../v1/studentrank?ContactID="+studentid);return StudentServices.getStudentRanks(thepath).then(function(data){return $log.debug("getStudentRanks returned data"),$log.debug(data,data.studentranklist),"undefined"!=typeof data.studentranklist&&data.error===!1?($log.debug("studentranklist",data.studentranklist),vmstudent.studentranks=data.studentranklist):(vmstudent.studentranks={},"undefined"!=typeof data.studentranklist&&Notification.error({message:"undefined"!=typeof data.message?data.message:"error getstudentranks",delay:5e3})),vmstudent.studentranks},function(error){return $log.debug("getStudentRanks",error),Notification.error({message:error,delay:5e3}),error})}function getStudentRankTypes(studentid){if("undefined"==typeof studentid)return{};$log.debug("getStudentRankTypes entered",studentid);var thepath=encodeURI("../v1/ranktypeexcluded?ContactID="+studentid);return StudentServices.getStudentRankTypes(thepath).then(function(data){return $log.debug("getStudentRankTypes returned data"),$log.debug(data,data.ranktypelist),"undefined"!=typeof data.ranktypelist&&data.error===!1?($log.debug("studentranktypelist",data.ranktypelist),vmstudent.RankTypeList=data.ranktypelist):(vmstudent.RankTypeList={},"undefined"!=typeof data.ranktypelist&&Notification.error({message:"undefined"!=typeof data.message?data.message:"error ranktypelist",delay:5e3})),vmstudent.RankTypeList},function(error){return $log.debug("getStudentRankTypes",error),Notification.error({message:error,delay:5e3}),error})}function addStudentRank(){$log.debug("addStudentRank entered",vmstudent.rankpick,vmstudent.ranktypepick);var thedata={ContactID:vmstudent.students.ID,currentrank:vmstudent.rankpick,ranktype:vmstudent.ranktypepick};return StudentServices.addStudentRank(thedata).then(function(data){return $log.debug("addStudentRank returned data"),$log.debug(data),getStudentRanks(vmstudent.students.ID),data})["catch"](function(e){throw $log.debug("addStudentRank failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function removeStudentRank(ranktype){$log.debug("removeStudentRank entered",vmstudent.students.ID,ranktype);var thedata={ContactID:vmstudent.students.ID,ranktype:ranktype};return StudentServices.removeStudentRank(thedata).then(function(data){return $log.debug("removeStudentRank returned data"),$log.debug(data),getStudentRanks(vmstudent.students.ID),getStudentRankTypes(vmstudent.students.ID),data})["catch"](function(e){throw $log.debug("removeStudentRank failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function updateStudentRank(item){$log.debug("about updateStudentRank ",item);var thepath="../v1/studentrank",thedata={ContactID:item.ContactID,ranktype:item.ranktype,currentrank:item.currentrank};return StudentServices.updateStudentRank(thepath,thedata).then(function(data){$log.debug("updateStudentRank returned data:"),$log.debug(data),getStudentRanks(item.ContactID)},function(error){return $log.debug("updateStudent",error),Notification.error({message:error,delay:5e3}),error})}function updateStudent(){return $log.debug("about updateStudent ",vmstudent.students),$log.debug("with Birthday",vmstudent.students.Birthday),StudentServices.updateStudent(vmstudent.path,vmstudent.students).then(function(data){$log.debug("updateStudent returned data: goto",vmstudent.path),$log.debug(data),vmstudent.students=data,getStudent()},function(error){return $log.debug("updateStudent",error),Notification.error({message:error,delay:5e3}),error})}function setStudentPIC(pic){$log.debug("about setStudentPIC ",encodeURI(pic)),vmstudent.students.pictureurl=encodeURI(pic),$log.debug("about setStudentPIC ",vmstudent.students),updateStudent()}function getAllZips(){return StudentServices.getAllZips(vmstudent.zippath).then(function(data){return $log.debug("getAllZips returned data"),$log.debug(data),vmstudent.zipList=data,vmstudent.zipList},function(error){return $log.debug("getAllZips",error),Notification.error({message:error,delay:5e3}),error})}function getStudentLists(){return StudentServices.getStudentLists(vmstudent.sListPath).then(function(data){return $log.debug("controller getStudentLists returned data"),$log.debug(data),vmstudent.StudentList=data,vmstudent.StudentList},function(error){return $log.debug("getStudentLists ",error),Notification.error({message:error,delay:5e3}),error})}function getRankList(){return StudentServices.getRankList(vmstudent.rankListPath).then(function(data){return $log.debug("getRankList returned data"),$log.debug(data),vmstudent.RanksList=data,vmstudent.RanksList},function(error){return $log.debug("getRankList ",error),Notification.error({message:error,delay:5e3}),error})}function setHeight(){$("#form-layouts-editstudent ul.nav-pills li a").live("click",function(){$log.debug("set height");var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<vmstudent.menu_h&&$(tab_id).css("height","960px")})}function setLists(){vmstudent.genders=["Female","Male","Unknown"]}function setActiveTab(activeTab,thecaller){$log.debug("set activetab as:",activeTab,thecaller),StudentServices.setActiveTab(activeTab,thecaller)}function getActiveTab(){var atab=StudentServices.getActiveTab();return $log.debug("get activetab is:",atab),atab}var vmstudent=this,$=angular.element;vmstudent.isCollapsed=!0,vmstudent.getStudent=getStudent,vmstudent.getAllZips=getAllZips,vmstudent.getStudentLists=getStudentLists,vmstudent.getRankList=getRankList,vmstudent.updateStudent=updateStudent,vmstudent.updateStudentRank=updateStudentRank,vmstudent.addStudentRank=addStudentRank,vmstudent.removeStudentRank=removeStudentRank,vmstudent.setStudentPIC=setStudentPIC,vmstudent.rankremove=rankremove,vmstudent.getRankPartial=getRankPartial,vmstudent.getStudentRankTypes=getStudentRankTypes,vmstudent.RankTypeList=[],vmstudent.getRank=getRank,vmstudent.ranklist=[],
vmstudent.Rankslist=[],vmstudent.rankpick,vmstudent.ranktypepick,vmstudent.disabled,vmstudent.studentrank={},vmstudent.students=[],vmstudent.genders=[],vmstudent.zipList=[],vmstudent.concat="",vmstudent.ContactTypeList=[],vmstudent.CurrentRankList=[],vmstudent.CurrentReikiRankList=[],vmstudent.StudentSchoolList=[],vmstudent.studentranks=[],vmstudent.GuiSizeList=[],vmstudent.ShirtSizeList=[],vmstudent.BeltSizeList=[],vmstudent.instructorTitleList=[],vmstudent.studentclass={},vmstudent.getBirthday=getBirthday,vmstudent.dateopen=dateopen,vmstudent.students.pictureurldecache=void 0,vmstudent.setActiveTab=setActiveTab,vmstudent.getActiveTab=getActiveTab,vmstudent.openPhoto=openPhoto,vmstudent.active=[],vmstudent.menu_h=$("#sidebar").height(),vmstudent.setHeight=setHeight,vmstudent.path="../v1/students/"+$routeParams.id,vmstudent.zippath="../v1/zips",vmstudent.sListPath="../v1/studentlists",vmstudent.rankListPath="../v1/ranklist",$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("editstudent started")}),$scope.$on("$destroy",function(){$log.debug("editstudent dismissed"),$log.debugEnabled(!1)}),$log.debug("Routeparam is:"),$log.debug($routeParams.id),vmstudent.status={opened:!1},setLists(),getAllZips(),getStudentLists(),getRankList(),activate(),$.fn.Data.Portlet("form-layouts-editstudent.js"),vmstudent.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate","MM/dd/yyyy"],vmstudent.bdateformat=vmstudent.formats[4]}angular.module("ng-admin").controller("FormLayoutsControllerEditStudent",FormLayoutsControllerEditStudent),FormLayoutsControllerEditStudent.$inject=["StudentServices","$scope","$rootScope","$routeParams","$log","$location","Notification","ClassServices","_","$q","$uibModal"]}(window,window.angular),function(){angular.module("ng-admin").controller("FromLayoutsController",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts-newlead ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FromLayoutsController",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts-newpayment ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FormLayoutsControllerNewStudent",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts-newstudent ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FromLayoutsController",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts-newtest ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FromLayoutsController",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts-newweek ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FromLayoutsController",function($scope,$routeParams){var menu_h=$("#sidebar").height();$("#form-layouts ul.nav-pills li a").live("click",function(){var tab_id=$(this).attr("href"),tab_h=$(tab_id).height();tab_h<menu_h&&$(tab_id).css("height","960px")})})}(),function(){angular.module("ng-admin").controller("FormValidationController",function($scope,$routeParams){function randomNumber(min,max){return Math.floor(Math.random()*(max-min+1)+min)}$("#btn-valdation-text").live("click",function(){var form=$("#form-validation-text");form.find(".form-group").addClass("has-error")}),$("#btn-valdation-text-horizontal").live("click",function(){var form=$("#form-valdation-text-horizontal");form.find(".form-group").addClass("has-error")}),$("#captchaOperation").html([randomNumber(1,100),"+",randomNumber(1,200),"="].join(" ")),$("#form-register").validate({errorElement:"span",errorClass:"help-block",rules:{firstname:{required:!0,minlength:2},lastname:{required:!0,minlength:2},email:{required:!0,email:!0},password:{required:!0,minlength:5},confirmPassword:{required:!0,minlength:5,equalTo:"#password"},zipcode:{required:!0},city:{required:!0}},messages:{firstname:{required:"Please specify your first name",minlength:"Your first name must consist of at least 2 characters"},lastname:{required:"Please specify your last name",minlength:"Your last name must consist of at least 2 characters"},email:"Please enter a valid email address",password:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long"},confirmPassword:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long",equalTo:"Please enter the same password as above"},zipcode:{required:"Please provide a Zip Code"},city:{required:"Please provide a City"}},highlight:function(element){$(element).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(element){$(element).closest(".form-group").removeClass("has-error")},submitHandler:function(){alert("Register Successful!")}}),$("#advance-form").validate({errorElement:"span",errorClass:"help-block",rules:{username:{required:!0,minlength:2},country:{required:!0},email:{required:!0,email:!0},website:{required:!0},phoneNumber:{required:!0},password:{required:!0,minlength:5},confirmPassword:{required:!0,minlength:5,equalTo:"#password1"},zipCode:{required:!0},city:{required:!0},ages:{required:!0}},messages:{username:{required:"Please enter a username",minlength:"Your username must consist of at least 2 characters"},country:{required:"Please enter a country"},email:"Please enter a valid email address",website:"The input is not a valid URL",phoneNumber:{required:"The value can contain only digits"},password:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long"},confirmPassword:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long",equalTo:"Please enter the same password as above"},zipCode:{required:"Please provide a Zip Code"}},highlight:function(element){$(element).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(element){$(element).closest(".form-group").removeClass("has-error")},submitHandler:function(){alert("Submit Successful!")}})})}(),function(){function ModalNewPayerController($log,$uibModal,$location){function openmodal(){vmnewPayermodal.modalInstance=$uibModal.open({animation:vmnewPayermodal.animationsEnabled,templateUrl:"newPayer.html",controller:"ModalNewPayerInstanceController as vmnew",size:"sm",resolve:{classname:function(){return $log.debug("return from open"),vmnewPayermodal.thisPayer}}}),vmnewPayermodal.modalInstance.result.then(function(thisPayer){$log.debug("search modalInstance result thisPayer:",thisPayer),vmnewPayermodal.thisPayer=thisPayer},function(){$log.info("Modal dismissed at: "+new Date)})}var vmnewPayermodal=this;vmnewPayermodal.animationsEnabled=!0,vmnewPayermodal.openmodal=openmodal,vmnewPayermodal.modalInstance=void 0,vmnewPayermodal.thisPayer="",$log.debug("ModalNewPayerController entered ")}function ModalNewPayerInstanceController($log,$uibModalInstance,PaymentServices,$window,Notification){function submit(){$log.debug("hit submit"),createPayer().then(function(){$log.debug("createPayer ready to close",vmnew.thisPayer),$uibModalInstance.close(vmnew.thisPayer)})["catch"](function(e){})}function cancel(){$uibModalInstance.dismiss("cancel")}function createPayer(){$log.debug("about createPayer ",vmnew);var path="../v1/payer",thedata={payerName:vmnew.payerName};return PaymentServices.createPayer(path,thedata).then(function(data){return $log.debug("createPayer returned data"),$log.debug(data),vmnew.thisPayer=data,$log.debug(vmnew.thisPayer),$log.debug(vmnew.thisPayer.message),vmnew.message=vmnew.thisPayer.message,Notification.success({message:vmnew.message,delay:5e3}),vmnew.thisPayer})["catch"](function(e){throw $log.debug("createPayer failure:"),$log.debug("error",e),vmnew.message=e,Notification.error({message:e,delay:5e3}),e})}var vmnew=this;$log.debug("modal newPayer entered"),$log.debug(vmnew),vmnew.submit=submit,vmnew.cancel=cancel,vmnew.thisPayer="",vmnew.message=""}angular.module("ng-admin").controller("ModalNewPayerController",ModalNewPayerController).controller("ModalNewPayerInstanceController",ModalNewPayerInstanceController),ModalNewPayerController.$inject=["$log","$uibModal"],ModalNewPayerInstanceController.$inject=["$log","$uibModalInstance","PaymentServices","$window","Notification"]}(),function(){function ModalNewStudentController($log,$uibModal,$location){function openmodal(){vmnewstudentmodal.modalInstance=$uibModal.open({animation:vmnewstudentmodal.animationsEnabled,templateUrl:"newStudent.html",controller:"ModalNewStudentInstanceController as vmnew",size:"sm",resolve:{classname:function(){return $log.debug("return from open"),vmnewstudentmodal.thisstudent}}}),vmnewstudentmodal.modalInstance.result.then(function(thisstudent){$log.debug("search modalInstance result thisstudent:",thisstudent),vmnewstudentmodal.thisstudent=thisstudent},function(){$log.info("Modal dismissed at: "+new Date)})}var vmnewstudentmodal=this;vmnewstudentmodal.animationsEnabled=!0,vmnewstudentmodal.openmodal=openmodal,vmnewstudentmodal.modalInstance=void 0,vmnewstudentmodal.thisstudent="",$log.debug("ModalNewStudentController entered ")}function ModalNewStudentInstanceController($log,$uibModalInstance,StudentServices,$window,Notification){function submit(){$log.debug("hit submit"),createStudent().then(function(){$log.debug("createstudent ready to close",vmnew.thisstudent),$uibModalInstance.close(vmnew.thisstudent)})["catch"](function(e){})}function cancel(){$uibModalInstance.dismiss("cancel")}function createStudent(){return $log.debug("about createStudent ",vmnew),StudentServices.createStudent(vmnew.path,vmnew).then(function(data){$log.debug("createStudent returned data"),$log.debug(data),vmnew.thisstudent=data,$log.debug(vmnew.thisstudent),$log.debug(vmnew.thisstudent.message),vmnew.message=vmnew.thisstudent.message;var url="./#/form-layouts-editstudent/id/"+vmnew.thisstudent.student_id;return $log.debug(url),$window.location.href=url,vmnew.thisstudent})["catch"](function(e){throw $log.debug("createStudent failure:"),$log.debug("error",e),vmnew.message=e,Notification.error({message:e,delay:5e3}),e})}var vmnew=this;$log.debug("modal newstudent entered"),$log.debug(vmnew),vmnew.path="../v1/newstudent",vmnew.submit=submit,vmnew.cancel=cancel,vmnew.thisstudent="",vmnew.message=""}angular.module("ng-admin").controller("ModalNewStudentController",ModalNewStudentController).controller("ModalNewStudentInstanceController",ModalNewStudentInstanceController),ModalNewStudentController.$inject=["$log","$uibModal"],ModalNewStudentInstanceController.$inject=["$log","$uibModalInstance","StudentServices","$window","Notification"]}(),function(){angular.module("ng-admin").controller("Page404Controller",function($scope,$routeParams){$("body>.default-page").hide(),$("body>.extra-page").html($(".page-content").html()).show(),$("body").attr("id","error-page")})}(),function(){angular.module("ng-admin").controller("Page500Controller",function($scope,$routeParams){$("body>.default-page").hide(),$("body>.extra-page").html($(".page-content").html()).show(),$("body").attr("id","error-page")})}(),function(){angular.module("ng-admin").controller("PageFullcalendarController",function($scope,$routeParams){var eventDrag=function(el){var eventObject={title:$.trim(el.text())};el.data("eventObject",eventObject),el.draggable({zIndex:999,revert:!0,revertDuration:0})};$("#external-events div.external-event").each(function(){eventDrag($(this))}),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},editable:!0,droppable:!0,drop:function(date,allDay){var originalEventObject=$(this).data("eventObject"),copiedEventObject=$.extend({},originalEventObject);copiedEventObject.start=date,copiedEventObject.allDay=allDay,$("#calendar").fullCalendar("renderEvent",copiedEventObject,!0),$("#drop-remove").is(":checked")&&$(this).remove()}});var addEvent=function(name){name=0===name.length?"Untitled Event":name;var html=$('<div class="external-event label label-default">'+name+"</div>");$("#event-block").append(html),eventDrag(html)};$("#event-add").on("click",function(){var name=$("#event-name").val();addEvent(name)})})}(),function(window,angular,$){function PageLockScreenController($scope,$log,$routeParams,$location,UserServices,AttendanceServices,CalendarServices,EventServices,StudentServices,PaymentServices,ClassServices,TestingServices,TemplateServices,$q){function init(){$log.debug("PageLockScreenController init entered"),$("body").attr("id","lock-screen")}var pagevm=this;pagevm.init=init,init(),function(){UserServices.ClearCredentials()}()}angular.module("ng-admin").controller("PageLockScreenController",PageLockScreenController),PageLockScreenController.$inject=["$scope","$log","$routeParams","$location","UserServices","AttendanceServices","CalendarServices","EventServices","StudentServices","PaymentServices","ClassServices","TestingServices","TemplateServices","$q"]}(window,window.angular,window.$),function(window,angular,$){function PageSigninController($scope,$log,$routeParams,$location,FlashService,UserServices,AttendanceServices,CalendarServices,EventServices,StudentServices,PaymentServices,ClassServices,TestingServices,TemplateServices,$cookieStore,$q){function login(){return $log.debug("controller login function entered",pagevm.username,pagevm.password),pagevm.dataLoading=!0,UserServices.Login(pagevm.username,pagevm.password).then(function(data){return $log.debug("UserServices login returned data"),$log.debug(data,data.error),data.error===!0?($log.debug("UserServices error returned",data.error),UserServices.SetCredentials("","",""),AttendanceServices.setapikey(""),CalendarServices.setapikey(""),EventServices.setapikey(""),StudentServices.setapikey(""),PaymentServices.setapikey(""),ClassServices.setapikey(""),UserServices.setapikey(""),TestingServices.setapikey(""),TemplateServices.setapikey(""),FlashService.Err(data.message),$q.reject(data)):(pagevm.apiKey=data.apiKey,UserServices.SetCredentials(pagevm.username,pagevm.password,pagevm.apiKey),AttendanceServices.setapikey(pagevm.apiKey),CalendarServices.setapikey(pagevm.apiKey),EventServices.setapikey(pagevm.apiKey),StudentServices.setapikey(pagevm.apiKey),PaymentServices.setapikey(pagevm.apiKey),ClassServices.setapikey(pagevm.apiKey),UserServices.setapikey(pagevm.apiKey),TestingServices.setapikey(pagevm.apiKey),TemplateServices.setapikey(pagevm.apiKey),$("body>.default-page").show(),$("body>.extra-page").html($(".page-content").html()).hide(),$("body").attr("id",""),$location.path("/main"),data)},function(error){return $log.debug("Caught an error UserServices, going to notify:",error),UserServices.SetCredentials("","",""),AttendanceServices.setapikey(""),CalendarServices.setapikey(""),EventServices.setapikey(""),StudentServices.setapikey(""),PaymentServices.setapikey(""),ClassServices.setapikey(""),UserServices.setapikey(""),TestingServices.setapikey(""),TemplateServices.setapikey(""),FlashService.Err(error),$q.reject(error)})["finally"](function(){pagevm.dataLoading=!1})}var pagevm=this;pagevm.login=login,pagevm.username,pagevm.password,pagevm.dataLoading,pagevm.apiKey,pagevm.save,$log.debug("enter PageSigninController"),$log.debug("username",pagevm.username),function(){UserServices.ClearCredentials()}(),$("body").attr("id","signin-page")}angular.module("ng-admin").controller("PageSigninController",PageSigninController),PageSigninController.$inject=["$scope","$log","$routeParams","$location","FlashService","UserServices","AttendanceServices","CalendarServices","EventServices","StudentServices","PaymentServices","ClassServices","TestingServices","TemplateServices","$cookieStore","$q"]}(window,window.angular,window.$),function(){function PageSignupController($scope,$log,$routeParams,FlashService,UserServices,$q,$location){function compare(repass){$log.debug("compare",repass),vm.isconfirm=vm.password==repass}function register(){$log.debug("controller register function entered"),vm.dataLoading=!0;var thedata={username:vm.username,confirm_password:vm.confirm_password,firstname:vm.firstname,lastname:vm.lastname,email:vm.email,password:vm.password},path="/v1/register";return $log.debug("controller register thedata:",thedata),vm.dataLoading=!0,UserServices.createUser(path,thedata).then(function(data){return $log.debug("register returned data"),$log.debug(data),FlashService.Success("Registration successful",!0),$location.path("/page-signin"),data},function(error){return $log.debug("Caught an error Registration, going to notify:",error),FlashService.Err(error),$q.reject(error)})["finally"](function(){vm.dataLoading=!1})}var vm=this;vm.register=register,vm.compare=compare,vm.dataLoading,vm.firstname,vm.username,vm.lastname,vm.email,vm.password,vm.isconfirm,vm.confirm_password,$log.debug("enter PageSignupController"),vm.re=/^[a-zA-Z]\w{3,14}$/}angular.module("ng-admin").controller("PageSignupController",PageSignupController),PageSignupController.$inject=["$scope","$log","$routeParams","FlashService","UserServices","$q","$location"]}(),function(window,angular,$){function PaymentViewInstanceController($log,$uibModalInstance,$window,$scope,StudentServices,Notification,$q,$uibModal,selectedRow,$filter){function cancel(){$uibModalInstance.dismiss("cancel")}function email(){var updpath="../v1/paymentemail",thedata={amt:vm.selectedRow.inv_amt,invdate:vm.selectedRow.invdate,paymentdate:vm.selectedRow.npdate,invstatus:vm.selectedRow.inv_status,paymentstatus:vm.selectedRow.npstatus,paymentid:vm.selectedRow.paymentid,invoice:vm.selectedRow.invoice,updatetype:"EmailPaid",payerEmail:vm.selectedRow.payer_email,payerid:vm.selectedRow.payerid,payerfirstname:vm.selectedRow.npfirst_name,payerlastname:vm.selectedRow.nplast_name,txn_id:vm.selectedRow.txn_id,ipn_track_id:vm.selectedRow.ipn_track_id,num_cart_items:vm.selectedRow.num_cart_items,shipping:0,nptype:vm.selectedRow.nptype,mc_currency:vm.selectedRow.mc_currency,item_name1:vm.selectedRow.item_name1,mc_gross_1:vm.selectedRow.mc_gross_1,quantity1:vm.selectedRow.quantity1,item_name2:vm.selectedRow.item_name2,mc_gross_2:vm.selectedRow.mc_gross_2,quantity2:vm.selectedRow.quantity2,item_name3:vm.selectedRow.item_name3,mc_gross_3:vm.selectedRow.mc_gross_3,quantity3:vm.selectedRow.quantity3,item_name4:vm.selectedRow.item_name4,mc_gross_4:vm.selectedRow.mc_gross_4,quantity4:vm.selectedRow.quantity4,item_name5:vm.selectedRow.item_name5,mc_gross_5:vm.selectedRow.mc_gross_5,quantity5:vm.selectedRow.quantity5,payment_gross:vm.selectedRow.payment_gross};return $log.debug("about emailInvoice ",thedata,updpath,"Add"),StudentServices.emailInvoice(updpath,thedata).then(function(data){return $log.debug("emailInvoice returned data"),$log.debug(data),vm.thisInvoice=data,$log.debug(vm.thisInvoice),$log.debug(vm.thisInvoice.message),vm.message=vm.thisInvoice.message,"undefined"!=typeof vm.thisInvoice&&vm.thisInvoice.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),vm.thisInvoice):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("email failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}$log.debug("selectedRow",selectedRow);var vm=this;vm.cancel=cancel,vm.email=email,vm.selectedRow=selectedRow,vm.thisInvoice={},$scope.selectedRow=selectedRow,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("PaymentViewInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("PaymentViewInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("paymentview-controller.js")}angular.module("ng-admin").controller("PaymentViewInstanceController",PaymentViewInstanceController),PaymentViewInstanceController.$inject=["$log","$uibModalInstance","$window","$scope","StudentServices","Notification","$q","$uibModal","selectedRow","$filter"]}(window,window.angular,window.$),function(window,angular,$){function ModalPromotionInstanceController($log,$uibModalInstance,TestingServices,$window,Notification,uiGridConstants,$scope,$q){function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function setSelectedArray(inputArray){if($log.debug("setSelectedArray entered",inputArray),vm.selectedStudents=[],!(inputArray.length>0))return void(vm.selected=!1);vm.selected=!0;for(var i=0,len=inputArray.length;i<len;i++){var info={ContactID:inputArray[i].contactID,studentname:inputArray[i].FirstName+" "+inputArray[i].LastName,FirstName:inputArray[i].FirstName,LastName:inputArray[i].LastName,rankType:inputArray[i].ranktype,nextClass:inputArray[i].nextClass,classcat:inputArray[i].classcat,agecat:inputArray[i].agecat,BeltSize:inputArray[i].BeltSize,ContactType:inputArray[i].ContactType,CurrentRank:inputArray[i].CurrentRank,RankAchievedInTest:inputArray[i].RankAchievedInTest,ReadyForNextRank:inputArray[i].ReadyForNextRank,address:inputArray[i].address,age:inputArray[i].age,birthday:inputArray[i].birthday,city:inputArray[i].city,contactpictureurl:inputArray[i].contactpictureurl,daysAttended:inputArray[i].daysAttended,daysSinceLastTest:inputArray[i].daysSinceLastTest,email:inputArray[i].email,lastpromoted:inputArray[i].lastpromoted,parent:inputArray[i].parent,phone:inputArray[i].phone,state:inputArray[i].state,zip:inputArray[i].zip,AttendPromoteTarget:inputArray[i].AttendPromoteTarget,DurationPromoteTarget:inputArray[i].DurationPromoteTarget,"class":inputArray[i]["class"],rankForNextClass:inputArray[i].rankForNextClass,ranklistForNextClass:inputArray[i].ranklistForNextClass,ageForNextClass:inputArray[i].ageForNextClass,promote:inputArray[i].promote,recommendedClass:inputArray[i].recommendedClass,recommendedClassid:inputArray[i].recommendedClassid,recommendedPgmid:inputArray[i].recommendedPgmid,recommendedClassnm:inputArray[i].recommendedClassnm,recommendedPgmnm:inputArray[i].recommendedPgmnm,classWas:inputArray[i].classWas,pgmWas:inputArray[i].pgmWas,crid:inputArray[i].crid,cpid:inputArray[i].cpid,changeClass:inputArray[i].changeClass};vm.selectedStudents.push(info)}$log.debug("setarray",vm.selectedStudents)}function promote(){$log.debug("hit promote"),vm.rptgridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN);var path="../v1/testcandidatepromotion",thedata={testDate:vm.testDate.slice(0,10),selectedStudents:vm.selectedStudents};return $log.debug("about promotetestcandidate ",thedata,path),TestingServices.promotetestcandidate(path,thedata).then(function(data){return $log.debug("promotetestcandidate returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?void Notification.success({message:vm.message,delay:5e3}):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("promotetestcandidate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function cancel(){$uibModalInstance.dismiss("cancel")}var vm=this;vm.promote=promote,vm.cancel=cancel,vm.message="",vm.selectedStudents=[],vm.thiscoldef={},vm.testcandidate,vm.headerheight=140,vm.initialLength=10,vm.rowheight=25,vm.getGridLength=getGridLength,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalPromotionInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalPromotionInstanceController dismissed"),$log.debugEnabled(!1)}),setGridLength(vm.initialLength),vm.rptgridOptionsnew=TestingServices.getGrid(),vm.rptgridApi=TestingServices.getGridApi(),vm.testDate=TestingServices.getTestDate(),vm.testTime=TestingServices.getTestTime(),$log.debug("TestDate:",vm.testDate),$.fn.Data.Portlet("promotion-controller.js"),vm.rptgridOptionsnew.onRegisterApi=function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.rptgridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.selection.on.rowSelectionChanged($scope,function(row){var msg="grid row selected "+row.entity;$log.debug(msg);var selectedStudentarr=this.grid.api.selection.getSelectedRows();$log.debug("selected",selectedStudentarr),setSelectedArray(selectedStudentarr)}),gridApi.selection.on.rowSelectionChangedBatch($scope,function(rows){$log.debug("grid batch");var selectedStudentarr=this.grid.api.selection.getSelectedRows();$log.debug("batch selected",selectedStudentarr),setSelectedArray(selectedStudentarr)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){$log.debug("rowEntity"),$log.debug(rowEntity),$log.debug("Column: "+colDef.name+" newValue: "+newValue+" oldValue: "+oldValue)})}}angular.module("ng-admin").controller("ModalPromotionInstanceController",ModalPromotionInstanceController),ModalPromotionInstanceController.$inject=["$log","$uibModalInstance","TestingServices","$window","Notification","uiGridConstants","$scope","$q"]}(window,window.angular,window.$),function(){function ResetpwdController($scope,$log,$routeParams,$location,FlashService,UserServices,$q){function compare(repass){$log.debug("compare",repass),pagevm.isconfirm=pagevm.password==repass}function resetpwd(){$log.debug("controller resetpwd function entered",pagevm.username,pagevm.password),$log.debug("token",$routeParams.token),pagevm.dataLoading=!0;var path=encodeURI("../v1/resetpassword?user="+pagevm.username+"&token="+$routeParams.token+"&newpassword="+pagevm.password+"&email="+pagevm.email);return UserServices.resetpassword(path).then(function(data){return $log.debug("UserServices resetpwd returned data"),$log.debug(data),pagevm.apiKey=data.api_Key,UserServices.ResetCredentials(data.username,data.api_key),$("body>.default-page").show(),$("body>.extra-page").html($(".page-content").html()).hide(),$("body").attr("id",""),FlashService.Success("Password reset complete"),$location.path("/"),data},function(error){return $log.debug("Caught an error UserServices resetpwd, going to notify:",error),UserServices.SetCredentials("","",""),UserServices.setapikey(""),FlashService.Err(error),$q.reject(error)})["finally"](function(){pagevm.dataLoading=!1})}var pagevm=this;pagevm.resetpwd=resetpwd,pagevm.compare=compare,pagevm.username,pagevm.password,pagevm.email,pagevm.confirm_password,pagevm.dataLoading,pagevm.apiKey,pagevm.isconfirm,$log.debug("enter ResetpwdController"),$log.debug("username",pagevm.username),$log.debug("password",pagevm.password),$log.debug("confirm_password",pagevm.confirm_password),pagevm.re=/^[a-zA-Z]\w{3,14}$/,function(){UserServices.ClearCredentials()}()}angular.module("ng-admin").controller("ResetpwdController",ResetpwdController),ResetpwdController.$inject=["$scope","$log","$routeParams","$location","FlashService","UserServices","$q"]}(),function(window,angular,pdfMake){function RptBuilderController($routeParams,$log,TestingServices,CalendarServices,$location,$window,$q,$scope,$route,Notification,uiGridConstants,uiGridGroupingConstants,$timeout,moment,UserServices,TemplateServices,AttendanceServices,textAngularManager,$uibModal,_){function refresHtml(){$log.debug("refresHtml called"),vm.htmlcontentdata.htmlcontentall="",vm.htmlcontentdata.htmlcontentall+="undefined"!=typeof vm.htmlcontentdata.htmlcontentheader?vm.htmlcontentdata.htmlcontentheader:"",vm.htmlcontentdata.htmlcontentall+="undefined"!=typeof vm.htmlcontentdata.htmlcontent?vm.htmlcontentdata.htmlcontent:"",vm.htmlcontentdata.htmlcontentall+="undefined"!=typeof vm.htmlcontentdata.htmlcontentfooter?vm.htmlcontentdata.htmlcontentfooter:""}function htmlcontentsubmit(){$log.debug("Submit triggered")}function htmlcontentclear(){$log.debug("clear"),vm.htmlcontentdata={orightml:' <h2>Try me!</h2><p>textAngular is a super cool WYSIWYG Text Editor directive for AngularJS</p><p><b>Features:</b></p><ol><li>Automatic Seamless Two-Way-Binding</li><li>Super Easy <b>Theming</b> Options</li><li style="color: green;">Simple Editor Instance Creation</li><li>Safely Parses Html for Custom Toolbar Icons</li><li class="text-danger">Doesn&apos;t Use an iFrame</li><li>Works with Firefox, Chrome, and IE9+</li></ol><p><b>Code at GitHub:</b> <a href="https://github.com/fraywing/textAngular">Here</a> </p>'},vm.refresHtml()}function setHeaderLogo(){vm.htmlcontentheader={orightml:' <table class="noborders"><colgroup><col width="33.3%"><col width="33.3%"><col width="33.3%"></colgroup><tbody> <tr><td >Left</td><td>Center</td><td>Right</td></tr> <tr><td>Left</td><td> <img src="'+vm.headerimages[0]+'"/></td><td>Right</td></tr></tbody></table>'},vm.htmlcontentdata.htmlcontentheader=vm.htmlcontentheader.orightml,$log.debug("setheaderlogo entered",vm.htmlcontentheader.orightml),vm.refresHtml()}function setFooterLogo(){vm.htmlcontentfooter={orightml:' <table class="noborders"><colgroup><col width="33.3%"><col width="33.3%"><col width="33.3%"></colgroup><tbody> <tr><td >Left</td><td>Center</td><td>Right</td></tr> <tr><td>Left</td><td> <img src="'+vm.footerimages[0]+'"/></td><td>Right</td></tr></tbody></table>'},vm.htmlcontentdata.htmlcontentfooter=vm.htmlcontentfooter.orightml,$log.debug("setfooterlogo entered",vm.htmlcontentfooter.orightml),vm.refresHtml()}function setBodyImage(){vm.htmlcontentbody={orightml:' <img src="'+vm.bodyimages[0]+'"/>'},vm.htmlcontentdata.htmlcontentbody=vm.htmlcontentbody.orightml,$log.debug("setBodyImage entered",vm.htmlcontentbody.orightml),vm.refresHtml()}function setBackgroundImage(){var rptwidth=792,rptheight=600;rptwidth=vm.pagewidthpx,rptheight=vm.pageheightpx,vm.htmlbackground={background:[{image:vm.backgroundimages[0],width:rptwidth,height:rptheight}]},$log.debug("setBackgroundImage entered",vm.htmlbackground),vm.refresHtml()}function htmlcontentreset(){$log.debug("reset"),vm.htmlcontentdata.htmlcontent=vm.htmlcontentdata.orightml}function htmlcontenttestPaste($html){return $log.debug("Hit Paste",arguments),"<p>Jackpot</p>"}function calcsizes(){var shortside,longside;switch(vm.pagewidthpx=0,vm.pageheightpx=0,vm.pageSize){case"LETTER":shortside=8.5*vm.dpi,longside=11*vm.dpi;break;case"EXECUTIVE":shortside=7.25*vm.dpi,longside=10.5*vm.dpi;break;case"FOLIO":shortside=8*vm.dpi,longside=13*vm.dpi;break;case"LEGAL":shortside=8.5*vm.dpi,longside=14*vm.dpi;break;case"TABLOID":shortside=11*vm.dpi,longside=17*vm.dpi}switch(vm.pageOrientation){case"landscape":vm.pagewidthpx=longside,vm.pageheightpx=shortside;break;case"portrait":vm.pagewidthpx=shortside,vm.pageheightpx=longside}}function activate(){getTemplateNames("").then(function(){$log.debug("activate eventdetails fetched")})}function getBase64Image(img){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),image=new Image;image.src=img,canvas.width=image.width,canvas.height=image.height,ctx.drawImage(image,0,0);var dataURL=canvas.toDataURL("image/png");return dataURL.replace(/^data:image\/(png|jpg);base64,/,"")}function getCertificateText(certdata,students){var textout=[];return"YMCA"==students.rankType&&(textout=[{text:"YMCA Program",style:["ymcaheader"]},{text:"This is to certify that\n",style:["smalllines","spread"]},{text:students.studentname+"\n",style:["mediumlines","ymcabotfiller"]},{text:"Has successfully completed an eight week Martial Arts Program in the\nart of Shaolin Kempo Karate and Jiu-Jitsu.\n\n",
style:["smalllines","spread"]},{text:"Dated this "+certdata.certDate+" at the MetroWest YMCA\n",style:["smalllines","spread"]}]),"AdultKarate"!=students.rankType&&"ChildrenKarate"!=students.rankType&&"BlackBelt"!=students.rankType||(textout=[{text:"",style:["topfiller"]},{text:"This is to certify that\n",style:["smalllines","spread"]},{text:students.studentname+"\n",style:["mediumlines","botfiller"]},{text:"Has successfully demonstrated the required level of ability and\nknowledge in the art of Shaolin Kempo Karate and Jiu-Jitsu and\n"+certdata.program+"\n",style:["smalllines","spread"]},{text:students.nextRank+"\n",style:["biglines","bigtop"]},{text:"Dated this "+certdata.certDate+" at "+certdata.school+"\n",style:["smalllines","spread"]}]),textout}function getCertificateSignatures(certdata,students){var textout=[];return textout=[{width:70,text:""},{stack:[{text:"",marginTop:57},{text:certdata.instructor1+"\n",marginLeft:40-1.5*certdata.instructor1.length/2,style:"signature"},{text:certdata.title1.length>0?certdata.title1:" ",marginLeft:40-1.5*certdata.title1.length/2,style:"signature"},{text:"",marginTop:38},{text:certdata.instructor2+"\n",marginLeft:40-1.5*certdata.instructor2.length/2,style:"signature"},{text:certdata.title2.length>0?certdata.title2:" ",marginLeft:40-1.5*certdata.title2.length/2,style:"signature"}]},{width:190,text:""},{stack:[{text:"",marginTop:57},{text:certdata.instructor3+"\n",marginLeft:50-1.5*certdata.instructor3.length/2+1.5*certdata.instructor1.length/2,style:"signature"},{text:certdata.title3.length>0?certdata.title3:" ",marginLeft:50-1.5*certdata.title3.length/2+1.5*certdata.title1.length/2,style:"signature"},{text:"",marginTop:38},{text:certdata.instructor4+"\n",marginLeft:50-1.5*certdata.instructor4.length/2+1.5*certdata.instructor2.length/2,style:"signature"},{text:certdata.title4.length>0?certdata.title4:" ",marginLeft:50-1.5*certdata.title4.length/2+1.5*certdata.title2.length/2,style:"signature"}]}]}function getContent(students,certdata){$log.debug("getContent entered",students,certdata);for(var pagebreak,contentdtl=[],certtext=[],columns=[],i=0;i<students.length;i++)certtext=getCertificateText(certdata,students[i]),columns=getCertificateSignatures(certdata,students[i]),pagebreak=i<students.length-1?{pageBreak:"before",text:""}:{},contentdtl.push([certtext,"{",columns,"}",pagebreak]);return contentdtl}function createCertificate(){var rptwidth=792,rptheight=600,testImageDataUrl="data:image/png;base64,"+getBase64Image("images/logos/StudioDiplomaTemplate.png"),program="and is therefore awarded the rank of";$log.debug("testers",vm.testdatelist),$log.debug("titles",vm.instructorlist),$log.debug("title1",_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester1})),$log.debug("school",vm.userdta);var students=vm.selectedStudents,certdata={certDate:vm.testdatelist.testdate,school:vm.userdta.school,program:program,instructor1:vm.testdatelist.tester1,instructor2:vm.testdatelist.tester2,instructor3:vm.testdatelist.tester3,instructor4:vm.testdatelist.tester4,title1:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester1}).instructortitle,title2:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester2}).instructortitle,title3:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester3}).instructortitle,title4:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester4}).instructortitle},thecontent=getContent(students,certdata);$log.debug("thecontent",thecontent,"json",JSON.stringify(thecontent));var docDefinition={pageOrientation:"landscape",pageMargins:[40,60,40,0],pageSize:"LETTER",background:[{image:testImageDataUrl,width:rptwidth,height:rptheight}],content:thecontent,styles:{bigtop:{margin:[0,0,0,0]},topfiller:{margin:[0,40]},botfiller:{margin:[0,5]},ymcabotfiller:{margin:[0,12]},spread:{margin:[0,5]},signature:{width:150,fontSize:12},smalllines:{fontSize:18,alignment:"center",width:rptwidth,lineHeight:1.5},extrasmalllines:{fontSize:10,alignment:"center",width:rptwidth},mediumlines:{fontSize:35,bold:!0,alignment:"center",width:rptwidth},ymcaheader:{fontSize:25,bold:!0,margin:[270,45,0,20],width:rptwidth},biglines:{fontSize:23,bold:!0,alignment:"center",width:rptwidth},header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]},tableExample:{alignment:"center"},tableHeader:{bold:!0,fontSize:13,color:"black"}},defaultStyle:{}},myJsonString=JSON.stringify(docDefinition);$log.debug("doc json",myJsonString);new Date;pdfMake.createPdf(docDefinition).open()}function getTemplateNames(templatepartial){$log.debug("getTemplateNames entered");var path=encodeURI("../v1/templatenames?templatepartial="+templatepartial);return $log.debug("gettemplateNames path:",path),TemplateServices.gettemplateNames(path).then(function(data){$log.debug("gettemplateNames returned data"),$log.debug(data),vm.templatelist=data.templatelist},function(error){return $log.debug("Caught an error getTemplateNames:",error),vm.templatelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function gettemplateDetails(templateSelected){$log.debug("gettemplateDetails entered:",templateSelected.templatename);var messagetxt,path=encodeURI("../v1/templatedetails?templatename="+templateSelected.templatename);return $log.debug("gettemplateDetails path:",path),TemplateServices.gettemplateDetails(path).then(function(data){$log.debug("gettemplateDetails returned data"),$log.debug(data),"undefined"!=typeof data.templatedetails&&data.templatedetails.length>0?(vm.templatedetails=data.templatedetails[0],$log.debug("details",data.templatedetails[0]),vm.htmlcontentdata.htmlcontentheader="NULL"===vm.templatedetails.htmlheader?"":vm.templatedetails.htmlheader,vm.htmlcontentdata.htmlcontent="NULL"===vm.templatedetails.htmlbody?"":vm.templatedetails.htmlbody,vm.htmlcontentdata.htmlcontentfooter="NULL"===vm.templatedetails.htmlfooter?"":vm.templatedetails.htmlfooter,vm.mycontentheader=vm.templatedetails.parsedheader,vm.mycontent=vm.templatedetails.parsedbody,vm.mycontentfooter=vm.templatedetails.parsedfooter,vm.headerimages[0]="NULL"===vm.templatedetails.headerimage?"":vm.templatedetails.headerimage,vm.footerimages[0]="NULL"===vm.templatedetails.footerimage?"":vm.templatedetails.footerimage,vm.backgroundimages[0]="NULL"===vm.templatedetails.backgroundimage?"":vm.templatedetails.backgroundimage,vm.maxHeaderHeight=vm.templatedetails.maxHeaderHeight,vm.maxFooterHeight=vm.templatedetails.maxFooterHeight,vm.pageMarginL=vm.templatedetails.pageMarginLeft,vm.pageMarginR=vm.templatedetails.pageMarginRight,vm.pageMarginT=vm.templatedetails.pageMarginTop,vm.pageMarginB=vm.templatedetails.pageMarginBottom,vm.pageSize=vm.templatedetails.pageSize,vm.pageOrientation=vm.templatedetails.pageOrientation,vm.templatename=vm.templatedetails.templatename,vm.pagebreak=vm.templatedetails.pagebreak,messagetxt="templateDetails obtained",Notification.success({message:messagetxt,delay:5e3})):(messagetxt="No templates found",Notification.warning({message:messagetxt,delay:5e3}))},function(error){return $log.debug("Caught an error gettemplateDetails:",error),vm.templatedetails=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function removetemplate(templatename){var path="../v1/template",thedata={templatename:templatename};return $log.debug("about removetemplate ",path,thedata,vm.templatename),TemplateServices.removetemplate(path,thedata).then(function(data){return $log.debug("removetemplate returned data"),$log.debug(data,data.error),data.error===!0?($log.debug("removetemplate error returned",data.error),$q.reject(data)):(vm.templatedetails=data,$log.debug(vm.templatedetails),$log.debug(vm.templatedetails.message),vm.message=vm.templatedetails.message,Notification.success({message:vm.message,delay:5e3}),void getTemplateNames("").then(function(zdata){$log.debug("activate gettemplateNames fetched",zdata)},function(error){return $log.debug("Caught an error gettemplateDetails after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}))})["catch"](function(e){throw $log.debug("removetemplate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function updatetemplate(templatename){var saveSelectedStudents=vm.selectedStudents;vm.selectedStudents=[],pdfForElement("convertthis"),vm.selectedStudents=saveSelectedStudents;var path="../v1/templateupdate",thedata=setPDFdata(templatename);return $log.debug("about updatetemplate ",thedata,path),TemplateServices.updateTemplate(path,thedata).then(function(data){return $log.debug("updatetemplate returned data"),$log.debug(data,data.error),data.error===!0?($log.debug("updateTemplate error returned",data.error),$q.reject(data)):(vm.templatedetails=data,$log.debug(vm.templatedetails),$log.debug(vm.templatedetails.message),void(vm.message=vm.templatedetails.message))})["catch"](function(e){throw $log.debug("updatetemplate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function setPDFdata(templatename){var thedata={htmlheader:void 0===vm.htmlcontentdata.htmlcontentheader?"":vm.htmlcontentdata.htmlcontentheader,htmlbody:void 0===vm.htmlcontentdata.htmlcontent?"":vm.htmlcontentdata.htmlcontent,htmlfooter:void 0===vm.htmlcontentdata.htmlcontentfooter?"":vm.htmlcontentdata.htmlcontentfooter,parsedheader:void 0===vm.mycontentheader?"":vm.mycontentheader,parsedbody:void 0===vm.mycontent?"":vm.mycontent,parsedfooter:void 0===vm.mycontentfooter?"":vm.mycontentfooter,headerimage:null===vm.headerimages?"":vm.headerimages[0],footerimage:null===vm.footerimages?"":vm.footerimages[0],backgroundimage:null===vm.backgroundimages?"":vm.backgroundimages[0],maxHeaderHeight:void 0===vm.maxHeaderHeight?0:vm.maxHeaderHeight,maxFooterHeight:void 0===vm.maxFooterHeight?0:vm.maxFooterHeight,pageMarginLeft:void 0===vm.pageMarginL?0:vm.pageMarginL,pageMarginRight:void 0===vm.pageMarginR?0:vm.pageMarginR,pageMarginTop:void 0===vm.pageMarginT?0:vm.pageMarginT,pageMarginBottom:void 0===vm.pageMarginB?0:vm.pageMarginB,pageSize:void 0===vm.pageSize?"LETTER":vm.pageSize,pageOrientation:void 0===vm.pageOrientation?"portrait":vm.pageOrientation,templateName:templatename,pagebreak:vm.pagebreak};return thedata}function createtemplate(templatename){if(vm.selected===!1){var error="no rows selected for template";return void Notification.error({message:error,delay:5e3})}var saveSelectedStudents=vm.selectedStudents;vm.selectedStudents=[],pdfForElement("convertthis"),vm.selectedStudents=saveSelectedStudents;var path="../v1/template",thedata=setPDFdata(templatename);return $log.debug("about createtemplate ",path,thedata,vm.templateName),TemplateServices.createtemplate(path,thedata).then(function(data){return $log.debug("createtemplate returned data"),$log.debug(data),"undefined"!=typeof data?(vm.templatedetails=data,$log.debug(vm.templatedetails),$log.debug(vm.templatedetails.message),vm.message=vm.templatedetails.message,Notification.success({message:vm.message,delay:5e3})):Notification.success({message:"Not created",delay:5e3}),getTemplateNames(templatename).then(function(zdata){$log.debug("activate gettemplateNames fetched",zdata)},function(error){return $log.debug("Caught an error gettemplateNames after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.templatedetails})["catch"](function(e){throw $log.debug("createtemplate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getStyles(){var styles={tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:13,color:"black"},dashed:{dash:{length:5}},bigtop:{margin:[0,0,0,0]},topfiller:{margin:[0,40]},botfiller:{margin:[0,5]},ymcabotfiller:{margin:[0,12]},spread:{margin:[0,5]},signature:{width:150,fontSize:12},smalllines:{fontSize:18,alignment:"center",width:vm.pagewidthpx,lineHeight:1.5},extrasmalllines:{fontSize:10,alignment:"center",width:vm.pagewidthpx},mediumlines:{fontSize:35,bold:!0,alignment:"center",width:vm.pagewidthpx},ymcaheader:{fontSize:25,bold:!0,margin:[270,45,0,20],width:vm.pagewidthpx},biglines:{fontSize:23,bold:!0,alignment:"center",width:vm.pagewidthpx},header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]}};return styles}function substitute(content,students,pagebreak,certdata){var tmp,obj,contentdtl=[];if("undefined"!=typeof students&&students.length>0)for(var i=0;i<students.length;i++){$log.debug("process student:",students[i]),pagebreak=i<students.length-1&&"student"==vm.pagebreak?{pageBreak:"before",text:""}:{},$log.debug("types",content.length,"undefined"==typeof pagebreak?"undefined":_typeof(pagebreak)),tmp=content,tmp=tmp.replace(/{agecat}/g,students[i].agecat),tmp=tmp.replace(/{classcat}/g,students[i].classcat),tmp=tmp.replace(/{nclass}/g,students[i].nclass),tmp=tmp.replace(/{pgrmcat}/g,students[i].pgrmcat),tmp=tmp.replace(/{nextClass}/g,students[i].nextClass),tmp=tmp.replace(/{age}/g,students[i].age),tmp=tmp.replace(/{birthday}/g,students[i].birthday),tmp=tmp.replace(/{phone}/g,students[i].phone),tmp=tmp.replace(/{parent}/g,students[i].parent),tmp=tmp.replace(/{zip}/g,students[i].zip),tmp=tmp.replace(/{city}/g,students[i].city),tmp=tmp.replace(/{state}/g,students[i].state),tmp=tmp.replace(/{address}/g,students[i].address),tmp=tmp.replace(/{email}/g,students[i].email),tmp=tmp.replace(/{beltsize}/g,students[i].BeltSize),tmp=tmp.replace(/{daysAttended}/g,students[i].daysAttended),tmp=tmp.replace(/{daysSinceLastTest}/g,students[i].daysSinceLastTest),tmp=tmp.replace(/{lastPromoted}/g,students[i].lastpromoted),tmp=tmp.replace(/{FirstName}/g,students[i].FirstName),tmp=tmp.replace(/{LastName}/g,students[i].LastName),tmp=tmp.replace(/{classwas}/g,students[i].classWas),tmp=tmp.replace(/{pgmwas}/g,students[i].pgmWas),tmp=tmp.replace(/{studentname}/g,students[i].studentname),tmp=tmp.replace(/{nextRank}/g,students[i].RankAchievedInTest),tmp=tmp.replace(/{certDate}/g,moment(certdata.certDate).format("MMM DD, YYYY")),tmp=tmp.replace(/{teststarttime}/g,moment(certdata.teststarttime).format("hh:mm A")),tmp=tmp.replace(/{testfee}/g,certdata.testfee),tmp=tmp.replace(/{school}/g,certdata.school),tmp=tmp.replace(/{program}/g,certdata.program),tmp=tmp.replace(/{instructor1}/g,certdata.instructor1),tmp=tmp.replace(/{instructor2}/g,certdata.instructor2),tmp=tmp.replace(/{instructor3}/g,certdata.instructor3),tmp=tmp.replace(/{instructor4}/g,certdata.instructor4),tmp=tmp.replace(/{title1}/g,certdata.title1),tmp=tmp.replace(/{title2}/g,certdata.title2),tmp=tmp.replace(/{title3}/g,certdata.title3),tmp=tmp.replace(/{title4}/g,certdata.title4);try{obj=JSON.parse("["+tmp+"]")}catch(e){$log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack)}contentdtl.push([obj,pagebreak])}else contentdtl=[content];return contentdtl}function doPDF(){pdfForElement("convertthis").open()}function genPDF(templatename){var mycontent=vm.mycontent,mycontentheader=vm.mycontentheader,mycontentfooter=vm.mycontentfooter,students=vm.selectedStudents,program="and is therefore awarded the rank of",testfee=25,certdata={certDate:vm.testdatelist.testdate,teststarttime:vm.testdatelist.starttime,testendtime:vm.testdatelist.endtime,school:vm.userdta.school,program:program,testfee:testfee,instructor1:vm.testdatelist.tester1,instructor2:vm.testdatelist.tester2,instructor3:vm.testdatelist.tester3,instructor4:vm.testdatelist.tester4,title1:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester1}).instructortitle,title2:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester2}).instructortitle,title3:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester3}).instructortitle,title4:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester4}).instructortitle};$log.debug("after parsehmtl",mycontent,students,"undefined"==typeof students?"undefined":_typeof(students),students.length);var tmp,obj,pagebreak,contentdtl=[];contentdtl=substitute(mycontent,students,pagebreak,certdata);try{tmp=mycontentheader,obj=JSON.parse("["+tmp+"]"),mycontentheader=obj,tmp=mycontentfooter,obj=JSON.parse("["+tmp+"]"),mycontentfooter=obj}catch(e){$log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack)}var background;if(void 0!==_typeof(vm.backgroundimages[0])&&""!==vm.backgroundimages[0]){calcsizes();var rptwidth=vm.pagewidthpx,rptheight=vm.pageheightpx;background={image:vm.backgroundimages[0],width:rptwidth,height:rptheight}}else background="";var docDefinition={pageOrientation:vm.pageOrientation,pageMargins:[vm.pageMarginL,vm.pageMarginT,vm.pageMarginR,vm.pageMarginB],pageSize:vm.pageSize,header:mycontentheader,content:contentdtl,footer:mycontentfooter,styles:getStyles()};docDefinition.background=background;var myJsonString=JSON.stringify(docDefinition);$log.debug("doc json",myJsonString),pdfMake.createPdf(docDefinition).open()}function pdfForElement(id){function ParseContainer(cnt,e,p,styles,parseType){var elements=[],children=e.childNodes;if(0!==children.length)for(var i=0;i<children.length;i++)p=ParseElement(elements,children[i],p,parseType,styles);if(0!==elements.length)for(var i=0;i<elements.length;i++)cnt.push(elements[i]);return p}function parseColor(color){var hexRegex=new RegExp("^#([0-9a-f]{3}|[0-9a-f]{6})$"),rgbRegex=new RegExp("^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$"),nameRegex=new RegExp("^[a-z]+$");if(hexRegex.test(color))return color;if(rgbRegex.test(color)){for(var decimalColors=rgbRegex.exec(color).slice(1),i=0;i<3;i++){var decimalValue=parseInt(decimalColors[i],10);decimalValue>255&&(decimalValue=255);var hexString="0"+decimalValue.toString(16);hexString=hexString.slice(-2),decimalColors[i]=hexString}return"#"+decimalColors.join("")}return nameRegex.test(color)?color:(console.error('Could not parse color "'+color+'"'),color)}function ComputeStyle(o,styles){$log.debug("computestyle in",styles,o);for(var i=0;i<styles.length;i++){var st=styles[i].trim().toLowerCase().split(":");if(2===st.length)switch(st[1]=st[1].trim(),$log.debug("has a style",st[0],st[1],o),st[0]){case"padding-left":o.margin=[parseInt(st[1],10),0,0,0];break;case"padding-right":o.margin=[0,0,parseInt(st[1],10),0];break;case"font-size":o.fontSize=parseInt(st[1],10);break;case"style":o.style=st[1];break;case"text-align":switch(st[1]){case"right":o.alignment="right";break;case"center":o.alignment="center";break;case"justify":o.alignment="justify"}break;case"font-weight":switch(st[1]){case"bold":o.bold=!0}break;case"text-decoration":switch(st[1]){case"underline":o.decoration="underline";break;case"line-through":o.decoration="lineThrough"}break;case"font-style":switch(st[1]){case"italic":o.italics=!0}break;case"margin-bottom":o.marginBottom=parseInt(st[1],10);break;case"margin-top":o.marginTop=parseInt(st[1],10);break;case"margin-left":o.marginLeft=parseInt(st[1],10);break;case"margin-right":o.marginRight=parseInt(st[1],10);break;case"color":o.color=parseColor(st[1]);break;case"background-color":o.background=parseColor(st[1])}1===st.length&&($log.debug("has a class",st[0],o),o.style=st[0])}$log.debug("computestyle done",o)}function ParseElement(cnt,e,p,parseType,styles){var classes=[];if(styles||(styles=[]),e.getAttribute){var nodeStyle=e.getAttribute("style");nodeStyle&&nodeStyle.split(";").forEach(function(nodeStyle){var tmp=nodeStyle.replace(/\s/g,"");styles.push(tmp)});var nodeColor=e.getAttribute("color");nodeColor&&styles.push("color: "+nodeColor);var nodeSize=e.getAttribute("size");if(nodeSize){var fs=13;switch(nodeSize){case"1":fs=8;break;case"2":fs=10;break;case"3":fs=13;break;case"4":fs=16;break;case"5":fs=18;break;case"6":fs=24;break;case"7":fs=32}styles.push("font-size: "+fs)}var nodeClass=e.getAttribute("class");nodeClass&&(classes=nodeClass.toLowerCase().trim().split(" "),classes.forEach(function(nodeClass){"undefined"!=typeof classStyles[nodeClass]?classStyles[nodeClass].forEach(function(style){styles.push(style)}):styles.push(nodeClass)}))}switch($log.debug("parseelement",e,e.nodename),e.nodeName.toLowerCase()){case"#text":if(sl=e.textContent.replace(/\n/g,""),$log.debug("in text",sl,"len",sl.length),sl.length>0){var t={text:e.textContent.replace(/\n/g,"")};styles&&ComputeStyle(t,styles),Array.isArray(p.text)?p.text.push(t):$log.debug("skipping text",p),$log.debug("in text",e.textContent,p)}break;case"a":case"b":case"u":case"em":case"i":case"ins":case"del":case"strike":case"strong":p=ParseContainer(cnt,e,p,styles.concat(elementStyles[e.nodeName.toLowerCase()]),parseType);break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":p=CreateParagraph(),"header"!==parseType&&"footer"!==parseType&&(p.marginBottom=4,p.marginTop=10),p=ParseContainer(cnt,e,p,styles.concat(elementStyles[e.nodeName.toLowerCase()]),parseType),cnt.push(p);break;case"blockquote":var st=create("stack");st.margin=[20,0,0,0],p=ParseContainer(st.stack,e,p,styles,parseType),cnt.push(st);break;case"span":p=ParseContainer(cnt,e,p,styles,parseType);break;case"hr":$log.debug("hr found",e.className);var c,xlen;xlen=pctlen?vm.pagewidthpx*pctlen/100-vm.pageMarginR-vm.pageMarginL:vm.pagewidthpx-vm.pageMarginR-vm.pageMarginL,c="dashed"===e.className?{marginTop:10,canvas:[{type:"line",x1:0+vm.pageMarginL,y1:10,x2:xlen,y2:10,dash:{length:5},lineWidth:2}]}:{marginTop:10,canvas:[{type:"line",x1:0+vm.pageMarinL,y1:10,x2:xlen,y2:10,lineWidth:2}]},cnt.push(c);break;case"br":p=CreateParagraph(),cnt.push(p);break;case"table":var t=create("table",{headerRows:1,widths:[],body:[]}),border=e.getAttribute("border"),isBorder=!1,borderclass="",borderclasses=[],mlayouts=[];if(border)1==parseInt(border)&&(isBorder=!0);else if(borderclass=e.getAttribute("class"),borderclass.length>0){borderclasses=borderclass.trim().toLowerCase().split(" ");for(var i=0,len=borderclasses.length;i<len;i++)"undefined"!=typeof borderclassStyles[borderclasses[i]]&&borderclassStyles[borderclasses[i]].forEach(function(layout){mlayouts.push(layout)});mlayouts.length>0?t.layout=mlayouts[0]:t.layout="noBorders"}else t.layout="noBorders";var colwcalc=e.getElementsByTagName("col");if(colwcalc)for(var iter=0;iter<colwcalc.length;iter++){var tmp=colwcalc[iter].width.replace(/\%/g,"")*(vm.pagewidthpx-vm.pageMarginL-vm.pageMarginR)/vm.pagewidthpx;t.table.widths.push(tmp+"%")}if(p=ParseContainer(t.table.body,e,p,styles,parseType),!colwcalc){var widths=e.getAttribute("widths");if(widths)for(var w=widths.split(","),k=0;k<w.length;k++)t.table.widths.push(w[k]);else if(0!==t.table.body.length&&0!==t.table.body[0].length)for(var k=0;k<t.table.body[0].length;k++)t.table.widths.push("*")}"undefined"!=typeof t.table.marginLeft?delete t.table.marginLeft:"","undefined"!=typeof t.table.marginRight?delete t.table.marginRight:"","undefined"!=typeof t.table.marginTop?delete t.table.marginTop:"","undefined"!=typeof t.table.marginBottom?delete t.table.marginBottom:"";var mlen,marg=[];if(styles.length>0){var st=create("stack");st.stack.push(t);for(var iter=0;iter<styles.length;iter++)marg=styles[iter].split(":"),marg[0].includes("margin")&&"undefined"!=typeof marginConversion[marg[0]]&&(mlen=parseInt(marg[1],10),st[marginConversion[marg[0]]]=mlen);cnt.push(st)}else cnt.push(t);break;case"tbody":p=ParseContainer(cnt,e,p,styles,parseType);break;case"tr":var row=[];p=ParseContainer(row,e,p,styles,parseType),cnt.push(row);break;case"td":p=create("text");var st=create("stack");st.stack.push(p);var rspan=e.getAttribute("rowspan");rspan&&(st.rowSpan=parseInt(rspan,10));var cspan=e.getAttribute("colspan");cspan&&(st.colSpan=parseInt(cspan,10)),p=ParseContainer(st.stack,e,p,[],parseType),cnt.push(st);break;case"div":$log.debug("div found");var mlen,st=create("stack"),marg=[];if(styles.length>0)for(var iter=0;iter<styles.length;iter++)marg=styles[iter].split(":"),marg[0].includes("margin")&&"undefined"!=typeof marginConversion[marg[0]]&&(mlen=parseInt(marg[1],10),st[marginConversion[marg[0]]]=mlen),"width"===marg[0]&&marg[1].includes("%")&&(pctlen=parseInt(marg[1],10));p=ParseContainer(st.stack,e,p,[],parseType),cnt.push(st);break;case"li":$log.debug("li found"),p=CreateParagraph(),p.lineHeight=1.25;var st={stack:[]};st.stack.push(p),ComputeStyle(st.stack,styles),st.stack.styles=styles,p=ParseContainer(st.stack,e,p,styles,parseType),cnt.push(st);break;case"ol":case"ul":$log.debug(e.nodeName,cnt,e,p);var list=create(e.nodeName.toLowerCase());ComputeStyle(list,styles),p=ParseContainer(list[e.nodeName.toLowerCase()],e,p,styles,parseType),list.margin=[20,0,0,0],cnt.push(list);break;case"font":$log.debug("font found"),p=CreateParagraph();var st={stack:[]};st.stack.push(p),ComputeStyle(st,styles),p=ParseContainer(st.stack,e,p,styles,parseType),cnt.push(st);break;case"p":$log.debug("p found"),p=create("text"),p.lineHeight=1.25;var stackP=create("stack");stackP.stack.push(p),ComputeStyle(stackP,styles),p=ParseContainer(stackP.stack,e,p,[],parseType),cnt.push(stackP);break;case"img":var match,regex=/([\w-]*)\s*:\s*([^;]*)/g,imageSize={},maxResolution={};if("header"===parseType?maxResolution={width:.333*vm.pagewidthpx,height:vm.maxHeaderHeight}:"footer"===parseType&&(maxResolution={width:.333*vm.pagewidthpx,height:vm.maxFooterHeight}),$log.debug("img settings",e.width,e.height,e.clientWidth,e.clientHeight,e.naturalWidth,e.naturalHeight),e.getAttribute("style"))for(;null!==(match=regex.exec(e.getAttribute("style")));)imageSize[match[1]]=parseInt(match[2].trim(),10);else imageSize={width:e.width,height:e.height};if(imageSize.width>maxResolution.width){var scaleByWidth=maxResolution.width/imageSize.width;imageSize.width*=scaleByWidth,imageSize.height*=scaleByWidth}if(imageSize.height>maxResolution.height){var scaleByHeight=maxResolution.height/imageSize.height;imageSize.width*=scaleByHeight,imageSize.height*=scaleByHeight}$log.debug("img settings if scaled",imageSize),cnt.push({image:e.src,width:imageSize.width,height:imageSize.height});break;default:$log.debug("Parsing for node "+e.nodeName+" not found");var defaultText=create("text",e.textContent.replace(/\n/g,""));ComputeStyle(defaultText,styles),p||(p={},p.text=[]),p.text.push(defaultText)}return p}function ParseHtml(cnt,htmlText,parseType){var rsb1=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi),rsb2=new RegExp(/<span class="rangySelectionBoundary" id="selectionBoundary_\d+_\d+">[^<>]+?<\/span>/gi),rsb3=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi);if($(htmlText).length>0){for(var html=$(htmlText.replace(/\t/g,"").replace(/\n/g,"").replace(rsb1,"").replace(rsb2,"").replace(rsb3,"")),p=CreateParagraph(),i=0;i<html.length;i++)ParseElement(cnt,html.get(i),p,parseType,[]);return $log.debug("parsehmtl",p,cnt),cnt}return cnt}function CreateParagraph(){var p={text:[]};return p}function create(name,content){var o={};return content=content||[],o[name]=content,o}var sl,parseType,students=vm.selectedStudents,elementStyles={b:["font-weight:bold"],strong:["font-weight:bold"],u:["text-decoration:underline"],em:["font-style:italic"],i:["font-style:italic"],h1:["font-size:36","font-weight:bold"],h2:["font-size:30","font-weight:bold"],h3:["font-size:24","font-weight:bold"],h4:["font-size:18"],h5:["font-size:14"],h6:["font-size:12"],a:["color:blue","text-decoration:underline"],strike:["text-decoration:line-through"],del:["color:red","text-decoration:line-through"],ins:["color:green","text-decoration:underline"]},classStyles={"delete":["color:red","text-decoration:line-through"],insert:["color:green","text-decoration:underline"]},regBoarder='\t{ \thLineWidth: function (i, node) { \t\treturn (i === 0 || i === node.table.body.length) ? 2 : 1; \t}, \tvLineWidth: function (i, node) { \t\treturn (i === 0 || i === node.table.widths.length) ? 2 : 1; \t}, \thLineColor: function (i, node) { \t\treturn (i === 0 || i === node.table.body.length) ? "black" : "gray"; \t}, \tvLineColor: function (i, node) { \t\treturn (i === 0 || i === node.table.widths.length) ? "black" : "gray"; \t} }',zebra={fillColor:function(i,node){return i%2===0?"#CCCCCC":null}},borderclassStyles={"table-noborders":["noBorders"],"table-bordered":[regBoarder],"table-striped":[zebra],"table-headerlineonly":["headerLineOnly"],"table-lighthorizontallines":["lightHorizontalLines"]},marginConversion={"margin-left":"marginLeft","margin-right":"marginRight","margin-top":"marginTop","margin-bottom":"marginBottom"},content=[],headercontent=[],footercontent=[];parseType="body";var mycontent=ParseHtml(content,vm.htmlcontentdata.htmlcontent,parseType);vm.mycontent=JSON.stringify(mycontent),parseType="header";var mycontentheader=ParseHtml(headercontent,vm.htmlcontentdata.htmlcontentheader,parseType);vm.mycontentheader=JSON.stringify(mycontentheader),parseType="footer";var mycontentfooter=ParseHtml(footercontent,vm.htmlcontentdata.htmlcontentfooter,parseType);vm.mycontentfooter=JSON.stringify(mycontentfooter),$log.debug("header",mycontentheader),$log.debug("footer",mycontentfooter),$log.debug("after parsehmtl",mycontent,students,"undefined"==typeof students?"undefined":_typeof(students),students.length);var tmp,obj,pagebreak,contentdtl=[];if("undefined"!=typeof students&&students.length>0)for(var i=0;i<students.length;i++){$log.debug("process student:",students[i]),pagebreak=i<students.length-1&&"student"==vm.pagebreak?{pageBreak:"before",text:""}:{},$log.debug("types",mycontent.length,"undefined"==typeof pagebreak?"undefined":_typeof(pagebreak)),tmp=JSON.stringify(mycontent[0]);for(var j=1;j<mycontent.length;j++)$log.debug("mycon j",JSON.stringify(mycontent[j])),tmp=tmp+","+JSON.stringify(mycontent[j]);tmp=tmp.replace(/{FirstName}/g,students[i].studentname);try{obj=JSON.parse("["+tmp+"]")}catch(e){$log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack)}contentdtl.push([obj,pagebreak])}else contentdtl=[mycontent];var pctlen,background;if(null!==vm.backgroundimages)if(void 0!==_typeof(vm.backgroundimages[0])&&""!==vm.backgroundimages[0]){calcsizes();var rptwidth=vm.pagewidthpx,rptheight=vm.pageheightpx;background={image:vm.backgroundimages[0],width:rptwidth,height:rptheight}}else background="";else background="";var docDefinition={pageOrientation:vm.pageOrientation,pageMargins:[vm.pageMarginL,vm.pageMarginT,vm.pageMarginR,vm.pageMarginB],pageSize:vm.pageSize,header:mycontentheader,content:contentdtl,footer:mycontentfooter,styles:{tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:13,color:"black"},dashed:{dash:{length:5}},bigtop:{margin:[0,0,0,0]},topfiller:{margin:[0,40]},botfiller:{margin:[0,5]},ymcabotfiller:{margin:[0,12]},spread:{margin:[0,5]},signature:{width:150,fontSize:12},smalllines:{fontSize:18,alignment:"center",width:vm.pagewidthpx,lineHeight:1.5},extrasmalllines:{fontSize:10,alignment:"center",width:vm.pagewidthpx},mediumlines:{fontSize:35,bold:!0,alignment:"center",width:vm.pagewidthpx},ymcaheader:{fontSize:25,bold:!0,margin:[270,45,0,20],width:vm.pagewidthpx},biglines:{fontSize:23,bold:!0,alignment:"center",width:vm.pagewidthpx},header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]}}};docDefinition.background=background;var myJsonString=JSON.stringify(docDefinition);return $log.debug("doc json",myJsonString),pdfMake.createPdf(docDefinition)}function encodeImageFileAsURL(fileid,fileoutid){var filesSelected=document.getElementById(fileid).files;if(filesSelected.length>0){var fileToLoad=filesSelected[0],fileReader=new FileReader;fileReader.onload=function(fileLoadedEvent){var srcData=fileLoadedEvent.target.result,newImage=document.createElement("img");newImage.src=srcData,document.getElementById(fileoutid).innerHTML=newImage.outerHTML,
alert("Converted Base64 version is "+document.getElementById(fileoutid).innerHTML)},fileReader.readAsDataURL(fileToLoad)}}var vm=this;vm.doPDF=doPDF,vm.createCertificate=createCertificate,vm.calcsizes=calcsizes,vm.genPDF=genPDF,vm.limit=0,vm.limits=[10,20,50,100,200,500,5e3],vm.data=[],vm.state={},vm.thiscoldef="",vm.colkey="testcandidate",vm.colsubkey="",vm.colsubkeys=[],vm.coldeflist=[],vm.testcandidatetmp,vm.gcolumns=[],vm.loading=!0,vm.loadAttempted=!1,vm.gridOptions={},vm.resgridApi,vm.gridApi,vm.resgridOptions={},vm.selectedStudents=[],vm.TestCandidateSelected="",vm.testcandidatenames=[],vm.instructorlist=[],vm.testcandidate="",vm.ContactID="",vm.selected=!1,vm.testname,vm.testtype,vm.userdta,vm.htmlcontentdisabled=!1,vm.htmlcontentcanEdit=!0,vm.htmlcontentsubmit=htmlcontentsubmit,vm.htmlcontentreset=htmlcontentreset,vm.htmlcontentclear=htmlcontentclear,vm.getTemplateNames=getTemplateNames,vm.gettemplateDetails=gettemplateDetails,vm.updatetemplate=updatetemplate,vm.removetemplate=removetemplate,vm.createtemplate=createtemplate,vm.setHeaderLogo=setHeaderLogo,vm.setFooterLogo=setFooterLogo,vm.setBodyImage=setBodyImage,vm.setBackgroundImage=setBackgroundImage,vm.htmlcontenttestPaste=htmlcontenttestPaste,vm.templatedetails="",vm.templatename="",vm.templatelist=[],vm.htmlcontentname="",vm.htmlcontentwebsite="",vm.encodeImageFileAsURL=encodeImageFileAsURL,vm.refresHtml=refresHtml,vm.bodyimages=[],vm.headerimages=[],vm.footerimages=[],vm.backgroundimages=[],vm.htmlbackground=[],vm.pageSizes=["EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID"],vm.pageSize="LETTER",vm.pageOrientations=["landscape","portrait"],vm.pageOrientation="portrait",vm.pagebreaks=["none","student"],vm.pagebreak,vm.pageMarginL=10,vm.pageMarginT=10,vm.pageMarginR=10,vm.pageMarginB=10,vm.pageMargins=[vm.pageMarginL,vm.pageMarginT,vm.pageMarginR,vm.pageMarginB],vm.pagewidthpx=0,vm.pageheightpx=0,vm.dpi=72,vm.maxHeaderHeight=200,vm.maxFooterHeight=200,vm.mycontentheader,vm.mycontent,vm.mycontentfooter,vm.checklistcoldef,vm.promopostcard,vm.beltlabelcoldef,vm.tcsrccoldef,vm.tclistcoldef,vm.tempres,vm.htmlcontentheader={orightml:"             <h2>Header</h2>             "},vm.htmlcontentfooter={orightml:"             <h4>Footer</h4>             "},vm.htmlcontentdata={orightml:"             <p>textAngular is a super cool WYSIWYG Text Editor directive for AngularJS</p>"+textAngularManager.getVersion().substring(1)+'<p><b>Features:</b></p>             <ol>             <li>Automatic Seamless Two-Way-Binding</li>             <li>Super Easy <b>Theming</b> Options</li>             <li style="color: green;">Simple Editor Instance Creation</li>             <li>Safely Parses Html for Custom Toolbar Icons</li>             <li class="text-danger">Doesn&apos;t Use an iFrame</li><li>Works with Firefox, Chrome, and IE9+</li></ol>             '},vm.htmlcontentdata.htmlcontentheader=vm.htmlcontentheader.orightml,vm.htmlcontentdata.htmlcontent=vm.htmlcontentdata.orightml,vm.htmlcontentdata.htmlcontentfooter=vm.htmlcontentfooter.orightml,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("rptbuilder-controller started")}),$scope.$on("$destroy",function(){$log.debug("rptbuilder-controller dismissed"),$log.debugEnabled(!1)}),activate(),refresHtml()}angular.module("ng-admin").controller("RptBuilderController",RptBuilderController).config(function($provide){$provide.decorator("taOptions",["taRegisterTool","taToolFunctions","$uibModal","$log","$window","$delegate",function(taRegisterTool,taToolFunctions,$uibModal,$log,$window,taOptions){function createTable(tableParams){if(angular.isNumber(tableParams.row)&&angular.isNumber(tableParams.col)&&tableParams.row>0&&tableParams.col>0){var colWidth,col,row,table="<div  style='margin-bottom: "+tableParams.tblMarginB+"px; margin-top: "+tableParams.tblMarginT+"px; margin-left: "+tableParams.tblMarginL+"px; margin-right: "+tableParams.tblMarginR+"px; '><table class='table "+(tableParams.style?"table-"+tableParams.style:"")+"'>";if("vars"===tableParams.style){colWidth=100/varlist.length,col="<col width='"+colWidth+"%' >";for(var idxCol=0;idxCol<varlist.length;idxCol++)table+=col}else{colWidth=100/tableParams.col,col="<col width='"+colWidth+"%' >";for(var idxCol=0;idxCol<tableParams.col;idxCol++)table+=col}for(var idxRow=0;idxRow<tableParams.row;idxRow++){if(row="<tr>","SampleText"===tableParams.style)for(var idxCol=0;idxCol<tableParams.col;idxCol++)row+="<td>Sample Cell</td>";else if("vars"===tableParams.style)for(var v=0;v<varlist.length;v++)row+="<td>{"+varlist[v].value+"}</td>";else for(var idxCol=0;idxCol<tableParams.col;idxCol++)row+="<td></td>";table+=row+"</tr>"}return table+"</table>"}}function createImage(imageParams){$log.debug("createImage entered",imageParams);for(var images=[],iter=0;iter<imageParams.bodyimages.length;iter++)images[iter]=' <img height="'+imageParams.height+'"  width="'+imageParams.width+'" src="'+imageParams.bodyimages[iter]+'"/>';return images}var varlist=[{name:"Student Name",value:"studentname"},{name:"First Name",value:"FirstName"},{name:"Last Name",value:"LastName"},{name:"Certificate Date",value:"certDate"},{name:"Next Rank",value:"nextRank"},{name:"Test Start Time",value:"teststarttime"},{name:"Test Fee",value:"testfee"},{name:"Belt Size",value:"beltsize"},{name:"Class Was",value:"classwas"},{name:"Program Was",value:"pgmwas"},{name:"daysAttended",value:"daysAttended"},{name:"daysSinceLastTest",value:"daysSinceLastTest"},{name:"lastPromoted",value:"lastPromoted"},{name:"email",value:"email"},{name:"address",value:"address"},{name:"state",value:"state"},{name:"city",value:"city"},{name:"zip",value:"zip"},{name:"parent",value:"parent"},{name:"phone",value:"phone"},{name:"birthday",value:"birthday"},{name:"age category",value:"agecat"},{name:"class category",value:"classcat"},{name:"class",value:"nclass"},{name:"Program category",value:"pgrmcat"},{name:"next class",value:"nextClass"},{name:"Instructor 1",value:"instructor1"},{name:"Instructor 2",value:"instructor2"},{name:"Instructor 3",value:"instructor3"},{name:"Instructor 4",value:"instructor4"},{name:"Instructor Title1",value:"title1"},{name:"Instructor Title2",value:"title2"},{name:"Instructor Title3",value:"title3"},{name:"Instructor Title4",value:"title4"}];return taOptions.toolbar=[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","charcount"]],taOptions.disableSanitizer=!0,taRegisterTool("insertTable",{iconclass:"fa fa-table",tooltiptext:"Insert table",action:function(deferred){var textAngular=this,savedSelection=rangy.saveSelection();return $uibModal.open({templateUrl:"templates/states/textblocktable.html",windowClass:"modal-window-sm",backdrop:"static",keyboard:!1,controller:["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.newtable={},$scope.newtable.tblMarginL=25,$scope.newtable.tblMarginR=25,$scope.newtable.tblMarginT=5,$scope.newtable.tblMarginB=5,$scope.tablestyles=[{name:"Bordered",value:"bordered"},{name:"Striped",value:"striped"},{name:"HeaderlineOnly",value:"HeaderlineOnly"},{name:"LightHorizontalLines",value:"LightHorizontalLines"},{name:"Striped",value:"striped"},{name:"Borderd Striped",value:"striped table-bordered"}],$scope.samplestyles=[{name:"SampleText",value:"sampletext"},{name:"Vars",value:"vars"}],$scope.tblInsert=function(){$uibModalInstance.close($scope.newtable)},$scope.tblCancel=function(){$uibModalInstance.dismiss("cancel")}}],size:"sm"}).result.then(function(result){rangy.restoreSelection(savedSelection),textAngular.$editor().wrapSelection("insertHTML",createTable(result)),deferred.resolve()},function(){rangy.restoreSelection(savedSelection),deferred.resolve()}),!1}}),taOptions.toolbar[1].push("insertTable"),taRegisterTool("VInsertImage",{iconclass:"fa fa-picture-o",tooltiptext:"Insert Image",action:function(deferred){var textAngular=this,savedSelection=rangy.saveSelection();return $uibModal.open({templateUrl:"templates/states/textblockimage.html",windowClass:"modal-window-sm",backdrop:"static",keyboard:!1,controller:["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.vm={},$scope.vm.height=100,$scope.vm.width=100,$scope.vm.imagelist=[],$scope.vm.bodyimages=[],$scope.imgLoadedCallback=function(event){$log.debug("imgLoadedCallback entered",event),$scope.vm.imagelist.push({data:event.target.currentSrc,naturalHeight:event.target.naturalHeight,naturalWidth:event.target.naturalWidth})},$scope.tblInsert=function(){$uibModalInstance.close($scope.vm)},$scope.tblCancel=function(){$uibModalInstance.dismiss("cancel")}}],size:"lg"}).result.then(function(result){rangy.restoreSelection(savedSelection),textAngular.$editor().wrapSelection("insertHTML",createImage(result)),deferred.resolve()},function(){rangy.restoreSelection(savedSelection),deferred.resolve()}),!1}}),taOptions.toolbar[1].push("VInsertImage"),taRegisterTool("fontSize",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-dark btn-plugin dropdown-toggle' style='margin-top: 5px;' type='button' ng-disabled='showHtml()'><i class='fa fa-text-height'></i><i class='fa fa-caret-down'></i></button><ul class='dropdown-menu plugin-dropdown-menu'><li ng-repeat='o in options'><button class='btn btn-blue checked-dropdown' style='font-size: {{o.css}};' type='button' ng-click='action($event, o.value)'><i ng-if='o.active' class='fa fa-check'></i> {{o.name}}</button></li></ul></span>",action:function(event,size){return event.stopPropagation&&(event.stopPropagation(),$("body").trigger("click")),this.$editor().wrapSelection("fontSize",parseInt(size))},options:[{name:"xx-small",css:"xx-small",value:1},{name:"x-small",css:"x-small",value:2},{name:"small",css:"small",value:3},{name:"medium",css:"medium",value:4},{name:"large",css:"large",value:5},{name:"x-large",css:"x-large",value:6},{name:"xx-large",css:"xx-large",value:7}]}),taOptions.toolbar[1].push("fontSize"),taRegisterTool("fontName",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-dark btn-plugin dropdown-toggle' style='margin-top: 5px;' type='button' ng-disabled='showHtml()'><i class='fa fa-font'></i><i class='fa fa-caret-down'></i></button><ul class='dropdown-menu plugin-dropdown-menu'><li ng-repeat='o in options'><button class='checked-dropdown' style='font-family: {{o.css}};' type='button' ng-click='action($event, o.css)'><i ng-if='o.active' class='fa fa-check'></i>{{o.name}}</button></li></ul></span>",action:function(event,font){return event.stopPropagation&&(event.stopPropagation(),$("body").trigger("click")),this.$editor().wrapSelection("fontName",font)},options:[{name:"Sans-Serif",css:"Arial, Helvetica, sans-serif"},{name:"Serif",css:"'times new roman', serif"},{name:"Wide",css:"'arial black', sans-serif"},{name:"Garamond",css:"garamond, serif"},{name:"Georgia",css:"georgia, serif"},{name:"Tahoma",css:"tahoma, sans-serif"},{name:"Trebuchet MS",css:"'trebuchet ms', sans-serif"},{name:"Helvetica",css:"'Helvetica Neue', Helvetica, Arial, sans-serif"},{name:"Verdana",css:"verdana, sans-serif"},{name:"Proxima Nova",css:"proxima_nova_rgregular"}]}),taOptions.toolbar[1].push("fontName"),taRegisterTool("vars",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-dark btn-plugin dropdown-toggle' style='margin-top: 5px;' type='button' ng-disabled='showHtml()'>Vars {} <i class='fa fa-caret-down'></i></button><ul class='dropdown-menu plugin-dropdown-menu'><li ng-repeat='o in options'><button class='btn  checked-dropdown' type='button' ng-click='action($event, false, o.value)'><i ng-if='o.active' class='fa fa-check'></i> {{o.name}}</button></li></ul></span>",action:function(event,restoreSelection,size){return event.stopPropagation&&(event.stopPropagation(),$("body").trigger("click"),this.$editor().wrapSelection("inserthtml","{"+size+"}")),!1},options:varlist}),taOptions.toolbar[1].push("vars"),taRegisterTool("insertHRdashed",{iconclass:"ti-line-dashed",tooltiptext:"Insert Dashed Line",action:function(){this.$editor().wrapSelection("insertHtml",'<div><hr class="dashed" /></div>',"true")}}),taOptions.toolbar[1].push("insertHRdashed"),taRegisterTool("insertHRsolid",{iconclass:"ti-arrows-horizontal",tooltiptext:"Insert Solid Line",action:function(){this.$editor().wrapSelection("inserthorizontalrule","false",null)}}),taOptions.toolbar[1].push("insertHRsolid"),taRegisterTool("backgroundColor",{display:"<div spectrum-colorpicker ng-model='color' on-change='!!color && action(color)' format='\"hex\"' options='options'></div>",action:function(color){var me=this;return this.$editor().wrapSelection?this.$editor().wrapSelection("backColor",color):void setTimeout(function(){me.action(color)},100)},options:{replacerClassName:"fa fa-paint-brush",showButtons:!1},color:"#fff"}),taOptions.toolbar[1].push("backgroundColor"),taRegisterTool("fontColor",{display:"<spectrum-colorpicker trigger-id='{{trigger}}' ng-model='color' on-change='!!color && action(color)' format='\"hex\"' options='options'></spectrum-colorpicker>",action:function(color){var me=this;return this.$editor().wrapSelection?this.$editor().wrapSelection("foreColor",color):void setTimeout(function(){me.action(color)},100)},options:{replacerClassName:"fa fa-font",showButtons:!1},color:"#000"}),taOptions.toolbar[1].push("fontColor"),taOptions}])}),RptBuilderController.$inject=["$routeParams","$log","TestingServices","CalendarServices","$location","$window","$q","$scope","$route","Notification","uiGridConstants","uiGridGroupingConstants","$timeout","moment","UserServices","TemplateServices","AttendanceServices","textAngularManager","$uibModal","_"]}(window,window.angular,window.pdfMake),function(window,angular,_){function StripeTableBasicController($log,$q,$scope,$interval,$routeParams,$location,$cookies,StudentServices,Notification,moment,iddropdownFilter,Util){function setsession(){$log.debug("setsession entered");var path="../v1/setsession",thedata={csrfstate:vm.send_state,auth_session:vm.auth_session};return StudentServices.setsession(path,thedata).then(function(data){$log.debug("setsession returned data"),$log.debug(data)},function(error){return $log.debug("Caught an error setsession:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function activate(){getStripe().then(function(){$log.debug("getStripe activate done")},function(error){return $q.reject(error)})}function removeStripe(){$log.debug("removeStripe entered");var path="../v1/revokestripe";return StudentServices.removeStripe(path).then(function(data){return $log.debug("removeStripe returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getStripe().then(function(zdata){$log.debug("getStripe returned",zdata)},function(error){return $log.debug("Caught an error getStripe after remove:",error),vm.stripedata=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("removeStripe failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function getStripe(){$log.debug("getStripe entered");var path="../v1/stripe";return StudentServices.getStripe(path).then(function(data){return $log.debug("getStripes returned data"),$log.debug(data),vm.stripedata=data.StripeList,vm.stripedata},function(error){return $log.debug("Caught an error getStripes:",error),vm.stripedata=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}var vm=this,$=angular.element;vm.getStripe=getStripe,vm.removeStripe=removeStripe,vm.Stripe={},vm.stripedata=[],vm.rankTypes=[],vm.thisStripe=[],"vdojo.villaris.us"===$location.$$host?(vm.client_id="ca_Cgc6QSWZsRjvzsGTm6yalB9b8L8YEJrD",vm.redirectURI="https://vdojo.villaris.us/v1/storeusercred"):(vm.client_id="ca_Cgc6TWOkSRaJ3uagt0TJMsCXRXN3AtFJ",vm.redirectURI="https://vdojotest.villaris.us/v1/storeusercred"),vm.send_state=Util.uuidv4(),vm.stripe_code=$routeParams.code,vm.stripe_error=$routeParams.error,vm.stripe_error_description=$routeParams.error_description,vm.auth_session=$cookies.get("slim_session"),vm.csrfcheckstate={},vm.stripe_scope=$routeParams.scope,vm.stripe_state=$routeParams.state,setsession().then(function(){$log.debug("setsession done")},function(error){return $q.reject(error)}),$log.debug("Routeparam is:"),$log.debug($routeParams.code,$routeParams.scope,$routeParams.state),$log.debug("location is:",$location),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("stripe-onboard started")}),$scope.$on("$destroy",function(){$log.debug("stripe-onboard dismissed"),$log.debugEnabled(!1)}),activate(),$.fn.Data.Portlet("stripe-onboard.js")}angular.module("ng-admin").controller("StripeTableBasicController",StripeTableBasicController),StripeTableBasicController.$inject=["$log","$q","$scope","$interval","$routeParams","$location","$cookies","StudentServices","Notification","moment","iddropdownFilter","Util"]}(window,window.angular,window._),function(){function StudentClassController($scope,$rootScope,$routeParams,$log,$http,$location,$timeout,ClassServices,Notification,$q,$controller){function getClassSearchResult(){$log.debug("search finish, get result"),vmclass.studentclass=ClassServices.getClassSearchResult()}function activate(){$log.debug("class activate"),$q.all([getStudentClassList().then(function(){$log.debug("getStudentClassList ready"),getStudentClassStatuses(),$log.debug("listnew in activate",vmclass.xlistnew)})["catch"](function(e){$log.debug("getStudentClassList error in activate",e)}),getStudentClazzList().then(function(){$log.debug("getStudentClazzList ready")})["catch"](function(e){$log.debug("getStudentClassList error in activate",e)}),ClassServices.distinctCat().then(function(data){$log.debug("distinctCat get:",data),vmclass.classcategories=data.classcatlist,$log.debug("distinctCat in activate",vmclass.classcategories)})["catch"](function(e){$log.debug("distinctCat error in activate",e)}),ClassServices.distinctAge().then(function(data){$log.debug("distinctAge get:",data),vmclass.agecategories=data.agecatlist,$log.debug("distinctAge in activate",vmclass.agecategories)})["catch"](function(e){$log.debug("distinctAge error",e)}),ClassServices.distinctPgm().then(function(data){$log.debug("distinctPgm get:",data),vmclass.pgmcategories=data.pgmcatlist,$log.debug("distinctPgm in activate",vmclass.pgmcategories)})["catch"](function(e){$log.debug("distinctPgm error",e)})]).then(function(){$log.debug("studentclass activation done returned")})}function clearSelect(){vmclass.categorys="",vmclass.pgms="",vmclass.ages="",concatset(),$scope.$emit("iso-option",{filter:"*"})}function clearCatSelect(){vmclass.categorys="",concatset()}function clearPgmSelect(){vmclass.pgms="",concatset()}function clearAgeSelect(){vmclass.ages="",concatset()}function ageset(addition){vmclass.ages="."+addition,concatset()}function catset(addition){vmclass.categorys="."+addition,concatset()}function pgmset(addition){vmclass.pgms="."+addition,concatset()}function concatset(){vmclass.concat=vmclass.ages+vmclass.categorys+vmclass.pgms}function getClassPgm(myclassid,mypgmid){var path="../v1/studentclass/myclass/"+myclassid+"/mypgm/"+mypgmid;return ClassServices.getClassPgm(path).then(function(data){return $log.debug("getClassPgm returned data",data),vmclass.studentclass=data,vmclass.classpictureurl=data.pictureurl,vmclass.studentclass},function(error){return $log.debug("getStudentClass ",error),Notification.error({message:error,delay:5e3}),error})}function getStudentClass(){return ClassServices.getStudentClass(vmclass.path).then(function(data){return $log.debug("getStudentClass returned data",data),vmclass.studentclass=data,vmclass.classpictureurl=data.pictureurl,vmclass.studentclass},function(error){return $log.debug("getStudentClass ",error),Notification.error({message:error,delay:5e3}),error})}function getStudentClazzList(){$log.debug("getStudentClazzList entered:"+$routeParams.id);var path="../v1/studentclasslist/"+$routeParams.id;return ClassServices.getStudentClassList(path).then(function(data){vmclass.studentclazzlist=data.studentclasslist;for(var iter=0,len=vmclass.studentclazzlist.length;iter<len;iter++)vmclass.studentclazzlist[iter].payerList={payerName:vmclass.studentclazzlist[iter].payerName,payerid:vmclass.studentclazzlist[iter].payerid,primaryContact:vmclass.studentclazzlist[iter].primaryContact};return $log.debug("studentclazzlist returned data",vmclass.studentclazzlist),vmclass.studentclazzlist},function(error){return $log.debug("getStudentClass ",error),Notification.error({message:error,delay:5e3}),error})}function getPayersPartial(theinput){return $log.debug("getPayers entered"),ClassServices.getPayersPartial(theinput).then(function(data){return $log.debug("controller getPayersPartial returned data",theinput),$log.debug(data.payerlist),vmclass.payers=data.payerlist,vmclass.payers})}function getStudentClassList(){return ClassServices.getStudentClassList(vmclass.classlistpath).then(function(data){return $log.debug("getStudentClassList returned data"),$log.debug(data),vmclass.xlistnew=data,ClassServices.setxlist(vmclass.xlistnew),vmclass.xlistnew},function(error){return $log.debug("getStudentClassList ",error),Notification.error({message:error,delay:5e3}),error})}function getStudentClassStatuses(){return ClassServices.getStudentClassStatuses(vmclass.classstatuspath).then(function(data){return $log.debug("getStudentClassStatuses returned data"),$log.debug(data),vmclass.classstatuses=data,vmclass.classstatuses})}function changeStudentStatus(clazzitem){$log.debug("about changeStudentStatus ",clazzitem),vmclass.changestatus="status",updateStudentClass(clazzitem)}function changetestfee(clazzitem){$log.debug("about changetestfee ",clazzitem),vmclass.changestatus="testfee",updateStudentClass(clazzitem)}function changeprimaryContact(clazzitem){$log.debug("about changeprimaryContact ",clazzitem),vmclass.changestatus="primaryContact",updateStudentClass(clazzitem)}function changeStudentPayer(clazzitem){$log.debug("about changeStudentPayer ",clazzitem),vmclass.changestatus="payer",updateStudentClass(clazzitem)}function updateStudentClass(clazzitem){var path="../v1/studentclass/"+$routeParams.id;return clazzitem.contactID=$routeParams.id,clazzitem.changestatus=vmclass.changestatus,clazzitem.payerid=clazzitem.payerList.payerid,clazzitem.payerName=clazzitem.payerList.payerName,clazzitem.primaryContact=clazzitem.primaryContact,$log.debug("about updateStudentClass ",clazzitem),ClassServices.updateStudentClass(path,clazzitem).then(function(data){return $log.debug("updateStudentClass returned data"),$log.debug(data),$log.debug(data.message),"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:data.message,delay:5e3}),void getStudentClazzList()):(Notification.error({message:data.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("updateStudentClass ",error),Notification.error({message:error,delay:5e3}),error})}function addStudentRegistration(){var path="../v1/studentregistration",thedata={studentid:$routeParams.id,classseq:vmclass.studentclass.classseq,pgmseq:vmclass.studentclass.pgmseq,payerName:vmclass.studentclass.payerName.payerName,payerid:vmclass.studentclass.payerName.payerid,studentclassstatus:vmclass.studentclass.studentclassstatus};return $log.debug("about addStudentRegistration ",path,thedata,vmclass.studentclass),ClassServices.addStudentRegistration(path,thedata).then(function(data){return $log.debug("addStudentRegistration returned data: "),$log.debug(data),"undefined"!=typeof data.message&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:data.message,delay:5e3}),void getStudentClazzList()):(Notification.error({message:data.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("addStudentRegistration ",error),Notification.error({message:error,delay:5e3}),error})}function removeStudentRegistration(classid,pgmid){$log.debug("removeStudentRegistration entered");var path="../v1/studentregistration",thedata={studentid:$routeParams.id,classseq:classid,pgmseq:pgmid};return ClassServices.removeStudentRegistration(path,thedata).then(function(data){return $log.debug("removeStudentRegistration returned data"),$log.debug(data),getStudentClazzList(),data})["catch"](function(e){throw $log.debug("removeStudentRegistration failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function setStudentClass(mystudent,myclassid,mypgmid){var setclasspath="../v1/studentclass/id/"+mystudent+"/myclass/"+myclassid+"/mypgm/"+mypgmid;return $log.debug("studentid: "+mystudent),$log.debug("studentclass: "+myclassid),$log.debug("studentpgm: "+mypgmid),$log.debug("about setStudentClass ",mystudent),$log.debug("for class ",myclassid),ClassServices.setStudentClass(setclasspath,mystudent,myclassid,mypgmid).then(function(data){$log.debug("setStudentClass returned data: "),$log.debug(data)})}var vmclass=this;vmclass.isCollapsed=!0,vmclass.getStudentClass=getStudentClass,vmclass.updateStudentClass=updateStudentClass,vmclass.changeStudentStatus=changeStudentStatus,vmclass.changetestfee=changetestfee,vmclass.changeprimaryContact=changeprimaryContact,vmclass.changeStudentPayer=changeStudentPayer,vmclass.getClassPgm=getClassPgm,vmclass.addStudentRegistration=addStudentRegistration,vmclass.removeStudentRegistration=removeStudentRegistration,vmclass.getPayersPartial=getPayersPartial,vmclass.activate=activate,vmclass.setStudentClass=setStudentClass,vmclass.categorys="",vmclass.ages="",vmclass.pgms="",vmclass.catset=catset,vmclass.ageset=ageset,vmclass.pgmset=pgmset,vmclass.concatset=concatset,vmclass.clearSelect=clearSelect,vmclass.clearCatSelect=clearCatSelect,vmclass.clearAgeSelect=clearAgeSelect,vmclass.clearPgmSelect=clearPgmSelect,vmclass.classcategories=[],vmclass.pgmcategories=[],vmclass.agecategories=[],vmclass.picID="",vmclass.studentclass={},vmclass.studentclass2={},vmclass.studentclazzlist=[],vmclass.classpictureurl=[],vmclass.classpictureurllist=[],vmclass.classstatuses=[],vmclass.payers=[],vmclass.xlistnew=[],vmclass.changestatus=!1,vmclass.getClassSearchResult=getClassSearchResult,vmclass.path="../v1/studentclass/"+$routeParams.id,$log.debug("studentid: "+$routeParams.id),vmclass.classpicpath="../v1/studentclasspicture",vmclass.classlistpath="../v1/studentclasslist",vmclass.classstatuspath="../v1/studentclassstatuses",vmclass.setclasspath="../v1/studentclass/id/"+$routeParams.id+"/myclass/"+$routeParams.myclass,$log.debug("studentid: "+$routeParams.id),$log.debug("studentclass: "+$routeParams.myclass),vmclass.studentclass.contactID=$routeParams.id,activate()}angular.module("ng-admin").controller("StudentClassController",StudentClassController),StudentClassController.$inject=["$scope","$rootScope","$routeParams","$log","$http","$location","$timeout","ClassServices","Notification","$q","$controller"]}(),function(){function ModalSetStudentClassController($log,$uibModal,$controller,$scope,$window,$route,ClassServices){function opensearch(){$log.debug("opensearch entered"),vmsetclassmodal.modalInstance=$uibModal.open({animation:vmsetclassmodal.animationsEnabled,templateUrl:"myClasssearch.html",controller:"ModalInstanceController as vmsearch",size:"lg",resolve:{classname:function(){return $log.debug("modal resolve",vmsetclassmodal.classname),vmsetclassmodal.classname}}}),vmsetclassmodal.modalInstance.result.then(function(result){$log.debug("search modalInstance result class:",result,$scope),$scope.$parent.vmclass.studentclass=result},function(){$log.info("Modal dismissed at: "+new Date)})}var vmsetclassmodal=this;vmsetclassmodal.animationsEnabled=!0,vmsetclassmodal.opensearch=opensearch,vmsetclassmodal.classname="",vmsetclassmodal.modalInstance=void 0,$log.debug("ModalSetStudentClassController entered"),$log.debug($controller("StudentClassController as vmclass",{$scope:$scope})),vmsetclassmodal.vmclass=$controller("StudentClassController as vmclass",{$scope:$scope}),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("student-ModalSetStudentClassController started")}),$scope.$on("$destroy",function(){$log.debug("student-ModalSetStudentClassController dismissed"),$log.debugEnabled(!1)})}function ModalInstanceController($log,$uibModalInstance,classname,$scope,$controller,$route,StudentServices){function closemodal(contactid,classid,pgmid){$log.debug("hit close",contactid,classid,pgmid),$log.debug("got classname for close:",vmsearch.vmclass.studentclass),vmsearch.vmclass.studentclass=vmsearch.vmclass.getClassPgm(classid,pgmid),$log.debug("got class for close:",vmsearch.vmclass.studentclass),$uibModalInstance.close(vmsearch.vmclass.studentclass)}var vmsearch=this;$log.debug("modal class entered"),vmsearch.vmclass=$controller("StudentClassController as vmclass",{$scope:$scope}),$log.debug(vmsearch.vmclass),vmsearch.closemodal=closemodal}angular.module("ng-admin").controller("ModalSetStudentClassController",ModalSetStudentClassController).controller("ModalInstanceController",ModalInstanceController),ModalSetStudentClassController.$inject=["$log","$uibModal","$controller","$scope","$window","$route","$scope","ClassServices"],ModalInstanceController.$inject=["$log","$uibModalInstance","classname","$scope","$controller","$route","StudentServices"]}(),function(){function StudentHistoryController($routeParams,$log,$scope,StudentServices){function activate(){return getStudentHistory().then(function(){$log.debug("activated StudentHistory view")})}function getStudentHistory(){return StudentServices.getStudentHistory(vmHistory.path).then(function(data){return $log.debug("getStudentHistory returned data"),$log.debug(data),vmHistory.gridOptions.data=data.StudentHistoryList,vmHistory.gridOptions.data})}function setGridOptions(){vmHistory.gridOptions={enableFiltering:!0,paginationPageSizes:[5,10,15],paginationPageSize:10,columnDefs:[{field:"contactmgmttype",displayName:"Type",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"contactdate",displayName:"Date",headerCellClass:highlightFilteredHeader,enableCellEdit:!0}]}}function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""}var vmHistory=this;vmHistory.getStudentHistory=getStudentHistory,vmHistory.highlightFilteredHeader=highlightFilteredHeader,vmHistory.path="../v1/studenthistory/"+$routeParams.id,$log.debug("studentid for studenthistory: "+$routeParams.id),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("studenthistory started")}),$scope.$on("$destroy",function(){$log.debug("studenthistory dismissed"),$log.debugEnabled(!1)}),setGridOptions(),activate()}angular.module("ng-admin").controller("StudentHistoryController",StudentHistoryController),StudentHistoryController.$inject=["$routeParams","$log","$scope","StudentServices"]}(),function(){function StudentPaymentController($scope,$rootScope,$routeParams,$log,$http,$location,$timeout,ClassServices,StudentServices,PaymentServices,$q,Notification,_){function getPriceDate(input){$log.debug("getPriceDate",input);var theDate=new Date(input);return theDate}function autoExpand(e){var element="object"===("undefined"==typeof e?"undefined":_typeof(e))?e.target:document.getElementById(e),scrollHeight=element.scrollHeight-60;element.style.height=scrollHeight+"px",$log.debug("autoexpand",scrollHeight),element.style.minHeight="35px"}function payerSet(input){$log.debug("payerSet entered",input),vmpayment.head.payerid=vmpayment.studentpayer,vmpayment.headcoverage.payerid=vmpayment.studentpayer,$q.all([getFamily().then(function(){$log.debug("getPayerList ready")})["catch"](function(e){$log.debug("getFamily error in payerSet",e);
}),getListPrices().then(function(){$log.debug("getListPrices ready")})["catch"](function(e){$log.debug("getListPrices error in payerSet",e)}),getPaymentplan().then(function(){$log.debug("getPaymentplan ready")})["catch"](function(e){$log.debug("getPaymentplan error in payerSet",e)}),getPaymentpays().then(function(){$log.debug("getPaymentpays ready")})["catch"](function(e){$log.debug("getPaymentpays error in payerSet",e)}),getPayerpayments().then(function(){$log.debug("getPayerpayments ready")})["catch"](function(e){$log.debug("getPayerpayments error in payerSet",e)})]).then(function(){$log.debug(" payerSet done")})}function dateopen($event,iter){$log.debug("dateopen:",vmpayment.status),vmpayment.status[iter].opened=!0}function dateheadopen($event){$log.debug("dateheadopen:",vmpayment.statushead),vmpayment.statushead.opened=!0}function activate(){$log.debug("payment activate"),$q.all([getPayerList().then(function(){$log.debug("getPayerList ready")})["catch"](function(e){$log.debug("getPayerList error in activate",e)}),getPaymentplans().then(function(){$log.debug("getPaymentplans ready")})["catch"](function(e){$log.debug("getPayerList error in activate",e)}),getPaymenttypes().then(function(){$log.debug("getPaymenttypes ready")})["catch"](function(e){$log.debug("getPayerList error in activate",e)})]).then(function(){$log.debug("student-payment activation done")})}function getPayerList(){var path="../v1/payers/"+$routeParams.id;return $log.debug("getPayerList entered",path),ClassServices.getPayerList(path).then(function(data){return $log.debug("getPayerList returned data"),$log.debug(data),"undefined"!=typeof data.payerlist&&data.payerlist.error!==!0||"undefined"==typeof data?(vmpayment.payerlist=data.payerlist,data.payerlist.length>0&&(vmpayment.studentpayer=parseInt(data.payerlist[0].payerid,10),payerSet()),vmpayment.payerlist):(vmpayment.payerlist=[],Notification.error({message:data,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getPayerList, going to notify:",error),vmpayment.payerlist=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getFamily(){var familypath="../v1/family/"+vmpayment.studentpayer;return $log.debug("getPayerList entered",familypath),ClassServices.getFamily(familypath).then(function(data){return $log.debug("getFamily returned data"),$log.debug(data),vmpayment.FamilyList=data.FamilyList,"undefined"!=typeof data.FamilyList&&data.FamilyList.error!==!0||"undefined"==typeof data?vmpayment.FamilyList:(vmpayment.FamilyList=[],Notification.error({message:data,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getFamily, going to notify:",error),vmpayment.FamilyList=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getListPrices(){var path="../v1/listprices/"+vmpayment.studentpayer;return $log.debug("getListPrices entered",path),ClassServices.getListPrices(path).then(function(data){if($log.debug("getListPrices returned data"),$log.debug(data),vmpayment.PriceList=data.PriceList,("undefined"==typeof data.PriceList||data.PriceList.error===!0)&&"undefined"!=typeof data)return vmpayment.PriceList=[],Notification.error({message:data,delay:5e3}),$q.reject(data);for(var iter=0,len=vmpayment.PriceList.length;iter<len;iter++)vmpayment.PriceList[iter].d2ndPersonDiscount12=vmpayment.PriceList[iter].p12MonthPrice+Math.round(vmpayment.PriceList[iter].d2ndPersonDiscountrate*vmpayment.PriceList[iter].p12MonthPrice),vmpayment.PriceList[iter].d2ndPersonDiscount6=vmpayment.PriceList[iter].p6MonthPrice+Math.round(vmpayment.PriceList[iter].d2ndPersonDiscountrate*vmpayment.PriceList[iter].p6MonthPrice),vmpayment.PriceList[iter].d2ndPersonDiscount1=vmpayment.PriceList[iter].pMonthlyPrice+Math.round(vmpayment.PriceList[iter].d2ndPersonDiscountrate*vmpayment.PriceList[iter].pMonthlyPrice),vmpayment.PriceList[iter].d3rdPersonDiscount12=vmpayment.PriceList[iter].d2ndPersonDiscount12+Math.round(vmpayment.PriceList[iter].d3rdPersonDiscountrate*vmpayment.PriceList[iter].p12MonthPrice),vmpayment.PriceList[iter].d3rdPersonDiscount6=vmpayment.PriceList[iter].d2ndPersonDiscount6+Math.round(vmpayment.PriceList[iter].d3rdPersonDiscountrate*vmpayment.PriceList[iter].p6MonthPrice),vmpayment.PriceList[iter].d3rdPersonDiscount1=vmpayment.PriceList[iter].d2ndPersonDiscount1+Math.round(vmpayment.PriceList[iter].d3rdPersonDiscountrate*vmpayment.PriceList[iter].pMonthlyPrice),vmpayment.PriceList[iter].d4thPersonDiscount12=vmpayment.PriceList[iter].d3rdPersonDiscount12+Math.round(vmpayment.PriceList[iter].d4thPersonDiscountrate*vmpayment.PriceList[iter].p12MonthPrice),vmpayment.PriceList[iter].d4thPersonDiscount6=vmpayment.PriceList[iter].d3rdPersonDiscount6+Math.round(vmpayment.PriceList[iter].d4thPersonDiscountrate*vmpayment.PriceList[iter].p6MonthPrice),vmpayment.PriceList[iter].d4thPersonDiscount1=vmpayment.PriceList[iter].d3rdPersonDiscount1+Math.round(vmpayment.PriceList[iter].d4thPersonDiscountrate*vmpayment.PriceList[iter].pMonthlyPrice);return vmpayment.PriceList},function(error){return $log.debug("Caught an error getListPrices, going to notify:",error),vmpayment.PriceList=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getPaymentplan(){var path="../v1/paymentplan/"+vmpayment.studentpayer;return $log.debug("getPaymentplan entered",path),ClassServices.getPaymentplan(path).then(function(data){if($log.debug("getPaymentplan returned data"),$log.debug(data),vmpayment.PaymentPlanList=data.PaymentPlanList,("undefined"==typeof data.PaymentPlanList||data.PaymentPlanList.error===!0)&&"undefined"!=typeof data)return vmpayment.PaymentPlanList=[],Notification.error({message:data,delay:5e3}),$q.reject(data);for(var iter=0,len=vmpayment.PaymentPlanList.length;iter<len;iter++)_.isEmpty(vmpayment.PaymentPlanList[iter].Pricesetdate)?vmpayment.PaymentPlanList[iter].Pricesetdate=getPriceDate(new Date):vmpayment.PaymentPlanList[iter].Pricesetdate=getPriceDate(vmpayment.PaymentPlanList[iter].Pricesetdate),vmpayment.status[iter]={opened:!1},vmpayment.PaymentPlanList[iter].paymentidstr=vmpayment.PaymentPlanList[iter].paymentid.toString();return vmpayment.PaymentPlanList},function(error){return $log.debug("Caught an error PaymentPlan, going to notify:",error),vmpayment.PaymentPlanList=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getPaymenttypes(){var path="../v1/paymenttypes";return $log.debug("getPaymenttypes entered",path),ClassServices.getPaymenttypes(path).then(function(data){return $log.debug("getPaymenttypes returned data"),$log.debug(data),vmpayment.PaymentTypes=data.paymenttypes,"undefined"!=typeof data.paymenttypes&&data.paymenttypes.error!==!0||"undefined"==typeof data?vmpayment.PaymentTypes:(vmpayment.PaymentTypes=[],Notification.error({message:data,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error PaymentTypes, going to notify:",error),vmpayment.PaymentTypes=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getPaymentplans(){var path="../v1/paymentplans";return $log.debug("getPaymentplans entered",path),ClassServices.getPaymentplans(path).then(function(data){return $log.debug("getPaymentplans returned data"),$log.debug(data),vmpayment.PaymentPlans=data.paymentplans,"undefined"!=typeof data.paymentplans&&data.paymentplans.error!==!0||"undefined"==typeof data?vmpayment.PaymentPlans:(vmpayment.PaymentPlans=[],Notification.error({message:data,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error PaymentPlans, going to notify:",error),vmpayment.PaymentPlans=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function removePaymentPlan(input){$log.debug("removePaymentPlan entered",input);var path="../v1/paymentplan",thedata={paymentid:input.paymentid,payerid:input.payerid};return ClassServices.removePaymentPlan(path,thedata).then(function(data){return $log.debug("removePaymentPlan returned data"),$log.debug(data),getPaymentplan(),data})["catch"](function(e){throw $log.debug("removePaymentPlan failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function updatePaymentPlan(input,mode){var path="../v1/paymentplan",thedata={studentid:$routeParams.id,payerid:input.payerid,paymenttype:input.paymenttype,PaymentNotes:input.PaymentNotes,PaymentPlan:input.PaymentPlan,PaymentAmount:input.PaymentAmount,Pricesetdate:input.Pricesetdate,payOnDayOfMonth:input.payOnDayOfMonth,paymentid:input.paymentid,mode:mode};return $log.debug("about updatePaymentPlan ",path,thedata,input),ClassServices.updatePaymentPlan(path,thedata).then(function(data){return $log.debug("updatePaymentPlan returned data: "),$log.debug(data),data.error===!0||"undefined"==typeof data?(Notification.error({message:data.error===!0?data.error:"data error",delay:5e3}),$q.reject(data)):void getPaymentplan()},function(error){return $log.debug("updatePaymentPlan ",error),Notification.error({message:error,delay:5e3}),error})}function getPaymentpays(){var path="../v1/paymentpays/"+vmpayment.studentpayer;return $log.debug("getPaymentpays entered",path),ClassServices.getPaymentpays(path).then(function(data){if($log.debug("getPaymentpays returned data"),$log.debug(data),vmpayment.PaymentPaysList=data.PaymentPaysList,("undefined"==typeof data.PaymentPaysList||data.PaymentPaysList.error===!0)&&"undefined"!=typeof data)return vmpayment.PaymentPaysList=[],Notification.error({message:data,delay:5e3}),$q.reject(data);for(var iter=0,len=vmpayment.PaymentPaysList.length;iter<len;iter++)vmpayment.PaymentPaysList[iter].paymentidstr=vmpayment.PaymentPaysList[iter].paymentid.toString(),vmpayment.PaymentPaysList[iter].classpayidstr=vmpayment.PaymentPaysList[iter].classpayid.toString();return vmpayment.PaymentPaysList},function(error){return $log.debug("Caught an error getPaymentpays, going to notify:",error),vmpayment.PaymentPaysList=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function getPayerpayments(){var path="../v1/payerpayments/"+vmpayment.studentpayer;return $log.debug("getPayerpayments entered",path),ClassServices.getPaymentpays(path).then(function(data){if($log.debug("getPayerpayments returned data"),$log.debug(data),vmpayment.PayerPaymentList=data.PayerPaymentList,("undefined"==typeof data.PayerPaymentList||data.PayerPaymentList.error===!0)&&"undefined"!=typeof data)return vmpayment.PayerPaymentList=[],Notification.error({message:data,delay:5e3}),$q.reject(data);for(var iter=0,len=vmpayment.PayerPaymentList.length;iter<len;iter++)vmpayment.PayerPaymentList[iter].classpayidstr=vmpayment.PayerPaymentList[iter].classpayid.toString();return vmpayment.PayerPaymentList},function(error){return $log.debug("Caught an error getPayerpayments, going to notify:",error),vmpayment.PayerPaymentList=[],vmpayment.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vmpayment.loading=!1,vmpayment.loadAttempted=!0})}function removePayer(){$log.debug("removePayer entered",vmpayment.studentpayer);var path="../v1/payer",thedata={payerid:vmpayment.studentpayer};return ClassServices.removePayer(path,thedata).then(function(data){return $log.debug("removePayer returned data"),$log.debug(data),getPayerList(),getPaymentpays(),getListPrices(),data})["catch"](function(e){throw $log.debug("removePayer failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function removePaymentPay(input){$log.debug("removePaymentPay entered",input);var path="../v1/paymentpay",thedata={pcpid:input.pcpid};return ClassServices.removePaymentPay(path,thedata).then(function(data){return $log.debug("removePaymentPay returned data"),$log.debug(data),getPaymentpays(),getListPrices(),data})["catch"](function(e){throw $log.debug("removePaymentPay failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function updatePaymentPay(input,mode){var path="../v1/paymentpay",thedata={paymentid:input.paymentid,classpayid:input.classpayid,pcpid:input.pcpid,mode:mode};return $log.debug("about updatePaymentPay ",path,thedata,input),ClassServices.updatePaymentPay(path,thedata).then(function(data){return $log.debug("updatePaymentPay returned data: "),$log.debug(data),data.error===!0||"undefined"==typeof data?(Notification.error({message:data.error===!0?data.error:"data error",delay:5e3}),$q.reject(data)):(getPaymentpays(),void getListPrices())},function(error){return $log.debug("updatePaymentPay ",error),Notification.error({message:error,delay:5e3}),error})}var vmpayment=this;vmpayment.isCollapsed=!0,vmpayment.isCollapsed2=!0,vmpayment.getFamily=getFamily,vmpayment.getListPrices=getListPrices,vmpayment.getPaymentplan=getPaymentplan,vmpayment.StudentPayment=[],vmpayment.disabled=void 0,vmpayment.ClassPayList=[],vmpayment.FamilyList=[],vmpayment.PriceList=[],vmpayment.payerlist=[],vmpayment.studentpayer,vmpayment.PaymentPlanList=[],vmpayment.PaymentPlans=[],vmpayment.PaymentTypes=[],vmpayment.PaymentPaysList=[],vmpayment.PayerPaymentList=[],vmpayment.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate","MM/dd/yyyy"],vmpayment.bdateformat=vmpayment.formats[4],vmpayment.dateopen=dateopen,vmpayment.dateheadopen=dateheadopen,vmpayment.updatePaymentPlan=updatePaymentPlan,vmpayment.removePaymentPlan=removePaymentPlan,vmpayment.removePaymentPay=removePaymentPay,vmpayment.updatePaymentPay=updatePaymentPay,vmpayment.getPayerList=getPayerList,vmpayment.removePayer=removePayer,vmpayment.payerSet=payerSet,vmpayment.autoExpand=autoExpand,vmpayment.activate=activate,vmpayment.head={},vmpayment.headcoverage={},vmpayment.PriceListcovered={},vmpayment.status={},vmpayment.statushead={opened:!1},$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("student-payment-controller started")}),$scope.$on("$destroy",function(){$log.debug("student-payment-controller dismissed"),$log.debugEnabled(!1)}),activate()}angular.module("ng-admin").controller("StudentPaymentController",StudentPaymentController),StudentPaymentController.$inject=["$scope","$rootScope","$routeParams","$log","$http","$location","$timeout","ClassServices","StudentServices","PaymentServices","$q","Notification","_"]}(),function(){function StudentUploadController($scope,$log,FileUploader,StudentServices){var vmstupicupload=this;vmstupicupload.picfile="",vmstupicupload.uploader=new FileUploader({url:"../v1/upload.php"}),vmstupicupload.uploader.filters.push({name:"imageFilter",fn:function(item,options){var type="|"+item.type.slice(item.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(type)!==-1}}),vmstupicupload.uploader.onSuccessItem=function(fileItem,response,status,headers){console.info("onSuccessItem",fileItem,response,status,headers),vmstupicupload.picfile=fileItem.file.name,StudentServices.setstudentPicFile(vmstupicupload.picfile)},vmstupicupload.uploader.onErrorItem=function(fileItem,response,status,headers){console.info("onErrorItem",fileItem,response,status,headers)},vmstupicupload.uploader.onCancelItem=function(fileItem,response,status,headers){console.info("onCancelItem",fileItem,response,status,headers)},console.info("uploader",vmstupicupload.uploader)}angular.module("ng-admin").controller("StudentUploadController",StudentUploadController),StudentUploadController.$inject=["$scope","$log","FileUploader","StudentServices"]}(),function(window,angular){function AttendanceTableBasicController($routeParams,$log,AttendanceServices,$location,$window,$q,$scope,$route,Notification,moment,Util){function settoday(aDay){vm.todayDOW=aDay,$log.debug("settoday",aDay,vm.todayDOW)}function refreshtheAttendanceClick(){refreshtheAttendance().then(function(){})["catch"](function(err){$log.debug(err)})}function setday(aDay){vm.photos=[],settoday(weekday[aDay]),getSchedule(vm.todayDOW).then(function(){setNowChoice(),$log.debug("nowChoice",vm.nowChoice,"classes",vm.classes),setClass(vm.classes.length>0?vm.classes[vm.nowChoice].Description:"All"),refreshtheAttendance().then(function(){})["catch"](angular.noop),$log.debug("setClass",vm.theclass)},function(error){return vm.photos=[],vm.nowChoice=0,setClass(""),$q.reject(error)})}function setLimit(thelimit){$log.debug("setLimit",thelimit),vm.limit=thelimit}function setGridsize(size){$log.debug("setGridsize",size),vm.gridsize=size,$scope.$emit("iso-method",{name:"arrange",params:null})}function reload(){$route.reload()}function setDOW(theChoice){vm.dowChoice=theChoice,$log.debug("setDOW",vm.dowChoice)}function getDayNum(aDOW){$log.debug("getDayNum",aDOW);for(var i=0,len=weekday.length;i<len;i++)if(weekday[i]==aDOW)return $log.debug("getDayNum returning",i),i}function setClass(aClass){$log.debug("setClass",aClass),vm.theclass=aClass}function requery(){$log.debug("requery entered"),vm.attending=[],refreshtheAttendanceClick()}function setMonday(){vm.MondayOfWeek=getMonday(new Date);var d2=new Date(vm.MondayOfWeek);vm.SundayOfWeek=moment(d2).add(-1,"days").format("YYYY-MM-DD"),vm.TuesdayOfWeek=moment(d2).add(1,"days").format("YYYY-MM-DD"),vm.WednesdayOfWeek=moment(d2).add(2,"days").format("YYYY-MM-DD"),vm.ThursdayOfWeek=moment(d2).add(3,"days").format("YYYY-MM-DD"),vm.FridayOfWeek=moment(d2).add(4,"days").format("YYYY-MM-DD"),vm.SaturdayOfWeek=moment(d2).add(5,"days").format("YYYY-MM-DD")}function getMonday(d){$log.debug("getMonday",d),d=null===d?new Date:new Date(d);var day=d.getDay(),diff=d.getDate()-day+(0===day?-6:1);return new Date(d.setDate(diff))}function getFormattedDate(date){var d3=new Date(date),year=d3.getFullYear(),month=(1+d3.getMonth()).toString();month=month.length>1?month:"0"+month;var day=d3.getDate().toString();return day=day.length>1?day:"0"+day,year+"-"+month+"-"+day}function selectItem(item,indextoggle,card,callrefresh){$log.debug("selectItem",item,indextoggle,callrefresh);var b,found=!1,carddata={},a=moment();checkAttendance(item).then(function(){$log.debug("checkAttendance returns"),b=moment("undefined"==typeof vm.attendancesum[0]||null===vm.attendancesum[0].lastPromoted?"01-01-1900":vm.attendancesum[0].lastPromoted),card.daysSince=a.diff(b,"days"),card.daysAttended="undefined"==typeof vm.attendancesum[0]||null===vm.attendancesum[0].daysAttended?0:vm.attendancesum[0].daysAttended;for(var i=0,len=vm.attending.length;i<len;i++){if($log.debug("is there?",item,vm.attending[i].attended),vm.attending[i].attended==item&&indextoggle===!0){carddata=vm.attending[i],found=!0;break}if(vm.attending[i].attended==item&&indextoggle===!1){carddata=vm.attending[i],carddata.attend=indextoggle,vm.attending.splice(i,1),found=!0;break}}found===!1&&indextoggle===!0&&(carddata={attended:item,attend:indextoggle,"class":vm.theclass,theday:vm.todayDOW,tday:vm.tday,DOW:getFormattedDate(vm.MondayOfWeek),student_id:item,daynum:card.theday,rank:card.rank,classid:card.classid,daysAttended:card.daysAttended,daysSince:card.daysSince},vm.attending.push(carddata)),$log.debug("selectedItem",vm.attending),carddata!={}&&callrefresh&&updateAttendance(carddata).then(function(){$log.debug("updateAttendance returns")},function(error){return $log.debug("updateAttendance",error),$q.reject(error)})})}function hasSelected(item){for(var i=0,len=vm.attending.length;i<len;i++)if(vm.attending[i].attended==item)return!0;return!1}function hasStats(item){for(var i=0,len=vm.photos.length;i<len;i++)if(vm.photos[i].studentID==item&&vm.showStats==item)return!0;return!1}function getAttendingCount(){return vm.attending.length}function activate(){var d=new Date,d2=weekday[d.getDay()];$log.debug("weekday",d2),settoday(d2),vm.radioModel=vm.todayDOW,vm.checkModel={Sunday:weekday[0]==vm.todayDOW,Monday:weekday[1]==vm.todayDOW,Tuesday:weekday[2]==vm.todayDOW,Wednesday:weekday[3]==vm.todayDOW,Thursday:weekday[4]==vm.todayDOW,Friday:weekday[5]==vm.todayDOW,Saturday:weekday[6]==vm.todayDOW},vm.tday=tdays[d.getDay()],$scope.$watchCollection("vm.checkModel",function(){vm.checkResults=[],angular.forEach(vm.checkModel,function(value,key){$log.debug("checkmodal",vm.checkResults),value&&vm.checkResults.push(key)})}),$log.debug("b4 getDOW and schedule",vm.todayDOW),$q.all([getDOW().then(function(){setDOW(vm.getFormattedDate(vm.MondayOfWeek)),setLimit(100)}),getSchedule(vm.todayDOW).then(function(){setNowChoice(),$log.debug("nowChoice",vm.nowChoice,"classes",vm.classes),setClass(vm.classes.length>0?vm.classes[vm.nowChoice].Description:"All"),$log.debug("setClass",vm.theclass)},function(error){return vm.photos=[],vm.nowChoice=0,setClass(""),$q.reject(error)})]).then(function(){return refreshtheAttendance().then(function(zdata){$log.debug("refreshtheAttendance returned",zdata)},function(error){return $q.reject(error)})["catch"](angular.noop)})}function updateAttendance(card){var updpath="../v1/updateattendance";return $log.debug("about updateAttendance ",card,updpath),AttendanceServices.updateAttendance(updpath,card).then(function(data){return $log.debug("updateAttendance returned data"),$log.debug(data),vm.thisattendance=data,$log.debug(vm.thisattendance),$log.debug(vm.thisattendance.message),vm.message=vm.thisattendance.message,"undefined"!=typeof vm.thisattendance&&vm.thisattendance.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),refreshtheAttendance().then(function(zdata){$log.debug("refreshtheAttendance returned",zdata)},function(error){return $log.debug("Caught an error refreshtheAttendance after update:",error),vm.data=[],vm.photos=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["catch"](angular.noop),vm.thisattendance):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateAttendance failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function refreshtheAttendance(){$log.debug("refreshtheAttendance entered with radioModel",vm.radioModel);var pclass=vm.theclass.length>0?vm.theclass:"NULL";$log.debug("pclass:",pclass);var thisdaynum=getDayNum(vm.radioModel),refreshpath=encodeURI("../v1/studentregistration?thedow="+vm.dowChoice+"&thelimit="+vm.limit+"&theclass="+pclass+"&daynum="+thisdaynum);return $log.debug("refreshtheAttendance path:",refreshpath),AttendanceServices.refreshAttendances(refreshpath).then(function(data){if($log.debug("refreshAttendances returned data"),$log.debug(data),vm.data=data,$log.debug(vm.data.message),vm.message=vm.data.message,("undefined"==typeof vm.data||vm.data.error===!0)&&"undefined"!=typeof data)return Notification.warning({message:vm.message,delay:5e3}),vm.data=[],vm.photos=[],$q.reject(data);vm.photos=[],vm.attending=[];for(var i=0,len=vm.data.attendancelist.length;i<len;i++)vm.photos.push({id:"photo-"+i,src:"./images/students/"+vm.data.attendancelist[i].pictureurl,name:vm.data.attendancelist[i].firstname+" "+vm.data.attendancelist[i].lastname,firstname:vm.data.attendancelist[i].firstname,lastname:vm.data.attendancelist[i].lastname,studentID:vm.data.attendancelist[i].ContactId,rank:vm.data.attendancelist[i].rank,"class":vm.data.attendancelist[i]["class"],classid:vm.data.attendancelist[i].classid,theday:vm.data.attendancelist[i].DOWnum,MondayDOW:vm.data.attendancelist[i].MondayOfWeek,attended:vm.data.attendancelist[i].attended,showIndex:1==vm.data.attendancelist[i].attended,readyness:vm.data.attendancelist[i].readyness}),1==vm.data.attendancelist[i].attended&&selectItem(vm.data.attendancelist[i].ContactId,!0,vm.photos[i],!1);return $log.debug("photos",vm.photos),vm.data},function(error){return $log.debug("Caught an error refreshtheAttendance, going to notify:",error),vm.data=[],vm.photos=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getAttendanceHistory(){$log.debug("getAttendanceHistory entered");var pclass=vm.theclass.length>0?vm.theclass:"NULL";$log.debug("pclass:",pclass);var refreshpath=encodeURI("../v1/attendancehistory?thedow="+vm.dowChoice+"&thelimit="+vm.limit+"&theclass="+pclass);return $log.debug("getAttendanceHistory path:",refreshpath),AttendanceServices.getAttendanceHistory(refreshpath).then(function(data){return $log.debug("getAttendanceHistory returned data"),$log.debug(data),vm.data=data,vm.data},function(error){return $log.debug("Caught an error attendancehistory:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getDOW(){return AttendanceServices.getDOW().then(function(data){return $log.debug("getDOW returned data"),$log.debug(data),vm.DOWlist=data.DOWlist,vm.DOWlist})}function fillClassList(){vm.classes=[];for(var i=0;i<vm.Schedulelist.length;i++)vm.classes.push(vm.Schedulelist[i])}function setNowChoice(){vm.nowChoice=0;for(var d=new Date,i=(d.getFullYear(),d.getHours(),d.getMinutes(),0);i<vm.classes.length;i++){var start=vm.classes[i].TimeStart.split(":"),starth=start[0],startmm=(isDST(d)?1:0,start[1]),end=vm.classes[i].TimeEnd.split(":");$log.debug("end",end);var endh=end[0],endmm=end[1],d1=new Date(parseInt(d.getFullYear(),10),parseInt(d.getMonth(),10),parseInt(d.getDate(),10),parseInt(starth,10),parseInt(startmm,10),parseInt(d.getSeconds(),10)),d2=new Date(parseInt(d.getFullYear(),10),parseInt(d.getMonth(),10),parseInt(d.getDate(),10),parseInt(endh,10),parseInt(endmm,10),parseInt(d.getSeconds(),10));$log.debug("startdate",d1),$log.debug("enddate",d2);d1.valueOf(),d2.valueOf();moment().isBefore(moment(d2),"minute")&&moment().isSameOrAfter(moment(d1),"minute")&&(vm.nowChoice=i,$log.debug("nowChoice",vm.nowChoice))}}function isDST(t){var jan=new Date(t.getFullYear(),0,1),jul=new Date(t.getFullYear(),6,1);return Math.min(jan.getTimezoneOffset(),jul.getTimezoneOffset())==t.getTimezoneOffset()}function getSchedule(aDOW){$log.debug("getSchedule",aDOW);var path="../v1/schedule/"+aDOW;return AttendanceServices.getSchedule(path).then(function(data){$log.debug("getSchedule returned data"),$log.debug(data),vm.Schedulelist=data.Schedulelist,fillClassList()},function(error){return $log.debug("Caught an error getSchedule:",error),vm.Schedulelist=[],fillClassList(),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setActiveTab(activeTab){$log.debug("set activetab as:",activeTab),AttendanceServices.setActiveTab(activeTab)}function getActiveTab(){return AttendanceServices.getActiveTab()}function setStudentReadyNextRank(thestudent,readyness){$log.debug("about setStudentReadyNextRank ",thestudent,readyness);var path="../v1/readynextrank/"+thestudent,theclassid=Util.getByValue(vm.classes,vm.theclass,"Description","classid");return AttendanceServices.setStudentReadyNextRank(path,readyness,theclassid).then(function(data){$log.debug("setStudentReadyNextRank returned data",data),$log.debug(data)},function(error){return $log.debug("Caught an error setStudentReadyNextRank:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function checkAttendanceStats(thestudent){vm.showStats=thestudent;var b,a=moment();checkAttendance(thestudent).then(function(){b=moment("undefined"==typeof vm.attendancesum[0]||null===vm.attendancesum[0].lastPromoted?"01-01-1900":vm.attendancesum[0].lastPromoted),vm.daysSince=a.diff(b,"days"),vm.daysAttended=vm.attendancesum[0].daysAttended})}function checkAttendance(thestudent){$log.debug("about checkAttendance ",thestudent);var pclass=vm.theclass.length>0?vm.theclass:"NULL";$log.debug("pclass:",pclass);var path=encodeURI("../v1/Attendancesum?contactid="+thestudent+"&theclass="+pclass);return $log.debug("checkAttendance path:",path),AttendanceServices.getAttendanceSum(path).then(function(data){if($log.debug("getAttendanceSum returned data",data),$log.debug(data),vm.attendancesum=data.attendancesum,$log.debug(vm.data.message),vm.message=vm.data.message,("undefined"==typeof vm.attendancesum||vm.attendancesum.error===!0)&&"undefined"!=typeof data)return Notification.warning({message:vm.message,delay:5e3}),$q.reject(data)},function(error){return $log.debug("Caught an error getAttendanceSum:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}var vm=this,$=angular.element;$.fn.Data.Portlet("table-basic-attendance.js"),vm.refreshtheAttendanceClick=refreshtheAttendanceClick,vm.getAttendanceHistory=getAttendanceHistory,vm.setStudentReadyNextRank=setStudentReadyNextRank,vm.setLimit=setLimit,vm.setClass=setClass,vm.setDOW=setDOW,vm.setGridsize=setGridsize,vm.requery=requery,vm.selectItem=selectItem,vm.hasSelected=hasSelected,vm.getMonday=getMonday,vm.getFormattedDate=getFormattedDate,vm.getAttendingCount=getAttendingCount,vm.checkAttendance=checkAttendance,vm.checkAttendanceStats=checkAttendanceStats,vm.getActiveTab=getActiveTab,vm.setActiveTab=setActiveTab,vm.hasStats=hasStats,vm.reload=reload,vm.setday=setday,vm.DOWlist=[],vm.limit=0,vm.limits=[10,20,50,100,200,500],vm.dowChoice="",vm.theclass="",vm.theclassid="",vm.gridsize,vm.data=[],vm.classes=[],vm.radioModel,vm.attendancesum={},vm.showStats="";var weekday=new Array(7);weekday[0]="Sunday",weekday[1]="Monday",weekday[2]="Tuesday",weekday[3]="Wednesday",weekday[4]="Thursday",weekday[5]="Friday",weekday[6]="Saturday";var tdays=new Array(7);tdays[0]="day1",tdays[1]="day2",tdays[2]="day3",tdays[3]="day4",tdays[4]="day5",tdays[5]="day6",tdays[6]="day7",vm.todayDOW,vm.nowChoice=0,vm.loading=!0,vm.selectedItem=null,vm.checkResults=[],vm.photos=[],vm.attending=[],vm.MondayOfWeek,vm.TuesdayOfWeek,vm.WednesdayOfWeek,vm.ThursdayOfWeek,vm.FridayOfWeek,vm.SaturdayOfWeek,vm.SundayOfWeek,vm.radioModel,vm.checkModel=[],vm.daysSince="",vm.daysAttended="",$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-attendance started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-attendance dismissed"),$log.debugEnabled(!1)}),setMonday(),activate()}angular.module("ng-admin").controller("AttendanceTableBasicController",AttendanceTableBasicController),AttendanceTableBasicController.$inject=["$routeParams","$log","AttendanceServices","$location","$window","$q","$scope","$route","Notification","moment","Util"]}(window,window.angular),function(window,angular){function BasicTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getBasic().then(function(){$log.debug("getBasic activate done")},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeBasic(input){$log.debug("removeBasic entered",input);var path="../v1/basic",thedata={id:input.id},data={};return data.BasicExistsList={},ClassServices.removeBasic(thedata,path).then(function(data){return $log.debug("removeBasic returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getBasic().then(function(zdata){$log.debug("getBasic returned",zdata)},function(error){return $log.debug("Caught an error getBasic after remove:",error),vm.thisBasic=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,
delay:5e3}),vm.BasicFKExists=data.BasicExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeBasic failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addBasic(rowEntity){updateBasic(rowEntity,"Add")}function updateBasic(rowEntity,updatetype){var updpath="../v1/basic",thedata={id:rowEntity.id,listtype:rowEntity.listtype,listkey:rowEntity.listkey,listvalue:rowEntity.listvalue,listorder:rowEntity.listorder};return $log.debug("about updateBasic ",thedata,updpath,updatetype),ClassServices.updateBasic(updpath,thedata).then(function(data){return $log.debug("updateBasic returned data"),$log.debug(data),vm.thisBasic=data,$log.debug(vm.thisBasic),$log.debug(vm.thisBasic.message),vm.message=vm.thisBasic.message,"undefined"!=typeof vm.thisBasic&&vm.thisBasic.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getBasic().then(function(zdata){$log.debug("getBasic returned",zdata)},function(error){return $log.debug("Caught an error getBasic after remove:",error),vm.thisBasic=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisBasic):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateBasic failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getBasic(){$log.debug("getBasic entered");var path="../v1/basic";return ClassServices.getBasics(path).then(function(data){$log.debug("getBasics returned data"),$log.debug(data),vm.gridOptions.data=data.Basiclist},function(error){return $log.debug("Caught an error getBasics:",error),vm.Basiclist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"listtype",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.listTypes,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.listTypes}},{field:"listkey",displayName:"listkey",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"listvalue",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"listorder",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeBasic(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateBasic(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.getBasic=getBasic,vm.removeBasic=removeBasic,vm.addBasic=addBasic,vm.updateBasic=updateBasic,vm.isCollapsed=!0,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Basic={},vm.listTypes=[{id:"beltsize",value:"beltsize",order:1},{id:"ClassStatus",value:"ClassStatus",order:2},{id:"Classtype",value:"Classtype",order:3},{id:"ContactType",value:"ContactType",order:4},{id:"gisize",value:"gisize",order:5},{id:"Instructor Title",value:"Instructor Title",order:6},{id:"PaymentPlan",value:"PaymentPlan",order:7},{id:"PaymentType",value:"PaymentType",order:8},{id:"ranktypelist",value:"ranktypelist",order:9},{id:"pgmcat",value:"pgmcat",order:10},{id:"classcat",value:"classcat",order:11},{id:"agecat",value:"agecat",order:12},{id:"shirtsize",value:"shirtsize",order:13}],vm.thisBasic=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-basic started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-basic dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-basic.js")}angular.module("ng-admin").controller("BasicTableBasicController",BasicTableBasicController),BasicTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(window,angular){function ClassTableBasicController($log,$q,$scope,$interval,ClassServices,Util,uiGridConstants,Notification,moment,iddropdownFilter){function activate(){getClass().then(function(){$log.debug("getClass activate done"),$q.all([getrankTypes().then(function(){$log.debug("getrankTypes activate done",vm.rankTypes),changeRanktype()},function(error){return $q.reject(error)})]).then(function(){$log.debug(" activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeClass(input){$log.debug("removeClass entered",input);var path="../v1/class",thedata={id:input.id},data={};return data.ClassExistsList={},ClassServices.removeClass(thedata,path).then(function(data){return $log.debug("removeClass returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClass().then(function(zdata){$log.debug("getClass returned",zdata)},function(error){return $log.debug("Caught an error getClass after remove:",error),vm.thisClass=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.ClassFKExists=data.ClassExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeClass failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addClass(rowEntity){updateClass(rowEntity,"Add")}function updateClass(rowEntity,updatetype){var updpath="../v1/class",thedata={id:rowEntity.id,"class":rowEntity["class"],registrationType:rowEntity.registrationType,nextClass:rowEntity.nextClass,ranklistForNextClass:rowEntity.ranklistForNextClass,rankForNextClass:rowEntity.rankForNextClass,ageForNextClass:rowEntity.ageForNextClass,sort:rowEntity.sort,pictureurl:rowEntity.pictureurl};return $log.debug("about updateClass ",thedata,updpath,updatetype),ClassServices.updateClass(updpath,thedata).then(function(data){return $log.debug("updateClass returned data"),$log.debug(data),vm.thisClass=data,$log.debug(vm.thisClass),$log.debug(vm.thisClass.message),vm.message=vm.thisClass.message,"undefined"!=typeof vm.thisClass&&vm.thisClass.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClass().then(function(zdata){$log.debug("getClass returned",zdata)},function(error){return $log.debug("Caught an error getClass after remove:",error),vm.thisClass=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisClass):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateClass failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getClass(){$log.debug("getClass entered");var path="../v1/class";return ClassServices.getClasses(path).then(function(data){$log.debug("getClasses returned data"),$log.debug(data),vm.gridOptions.data=data.Classlist,vm.Class.sort=parseInt(Util.maxObjArr(data.Classlist,"sort"),10)+1},function(error){return $log.debug("Caught an error getClasses:",error),vm.Classlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function changeRanktype(){vm.Class.registrationTypeVlu=Util.getByValue(vm.rankTypes,vm.Class.registrationType,"id","value"),getRanks().then(function(){$log.debug("getranks activate done",vm.ranks),vm.gridApi.grid.columns[1].filters[0].term=String(vm.Class.registrationTypeVlu),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $q.reject(error)})}function changeRanklisttype(){}function getrankTypes(){$log.debug("getrankTypes entered");var path="../v1/ranktypes";return ClassServices.getRankTypes(path).then(function(data){return $log.debug("getrankTypes returned data"),$log.debug(data),vm.rankTypes=data.RankTypelist,$log.debug(data.message),vm.message=data.message,"undefined"!=typeof vm.rankTypes&&data.error!==!0||"undefined"==typeof data?(vm.Class.registrationType=String(vm.rankTypes[0].id),vm.Class.registrationTypeVlu=String(vm.rankTypes[0].value),vm.rankTypes):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getrankTypes:",error),vm.rankTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getRanks(mode){$log.debug("getranks entered",vm.Class.registrationTypeVlu);var path;return"All"===mode&&(vm.Class.registrationTypeVlu="AdultKarate"),path=encodeURI("../v1/ranks?ranktype="+vm.Class.registrationTypeVlu),getRanksquery(path).then(function(data){vm.ranks=data,vm.Class.rankForNextClass=String(vm.ranks[0].value),vm.Class.ranklistForNextClass=void 0!==_typeof(vm.Class.registrationType)?vm.Class.registrationType:""},function(error){return $log.debug("Caught an error getranks:",error),vm.ranks=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getRanksquery(path){return $log.debug("getranksquery entered",path),ClassServices.getRanks(path).then(function(data){$log.debug("getranks returned data"),$log.debug(data);var ranks=data.Ranklist;return $log.debug(data.message),vm.message=ranks.message,"undefined"!=typeof ranks&&data.error!==!0||"undefined"==typeof data?ranks:(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getranks:",error),vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function geturl(input){return vm.imgsrc+input}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,showGridFooter:!1,enableColumnResizing:!0,columnDefs:[{field:"class",displayName:"Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"registrationType",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.rankTypes,filterHeaderTemplate:"templates/states/filtercoltemplatevlu.html",filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.rankTypes}},{field:"ranklistForNextClass",displayName:"Type of Next Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!1,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"value",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.rankTypes},{field:"nextClass",displayName:"Next Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"ageForNextClass",displayName:"Age for Next Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"rankForNextClass",displayName:"Rank for Next Class",enableCellEdit:!0,enableFiltering:!1,editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"label",editDropdownValueLabel:"label",editDropdownOptionsFunction:function(rowEntity,colDef){var path;return path=encodeURI("../v1/ranks?ranktype="+rowEntity.ranklistForNextClass),getRanksquery(path).then(function(data){return vm.thisranks=data,data})}},{field:"sort",displayName:"Sort Order",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"pictureurl",minWidth:200,displayName:"Picture",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,cellTemplate:'<zoom ng-src="{{grid.appScope.geturl(grid.getCellValue(row, col))}}" frame="example{{rowRenderIndex}}" img="image{{rowRenderIndex}}"  zoomlvl="2.5" lazy-src></zoom>'},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeClass(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&("ranklistForNextClass"===colDef.name&&(rowEntity.rankForNextClass="NULL"),updateClass(rowEntity,"Update"))})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getClass=getClass,vm.removeClass=removeClass,vm.addClass=addClass,vm.updateClass=updateClass,vm.getRanks=getRanks,vm.changeRanktype=changeRanktype,vm.changeRanklisttype=changeRanklisttype,vm.geturl=geturl,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.imgsrc="./images/classes/",vm.Class={},vm.rankTypes=[],vm.ranks=[],vm.ranks2=[],vm.thisranks=[],vm.thisClass=[],vm.gridLength={},vm.initialLength=5,vm.rowheight=85,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-class started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-class dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-class.js")}angular.module("ng-admin").controller("ClassTableBasicController",ClassTableBasicController),ClassTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","Util","uiGridConstants","Notification","moment","iddropdownFilter"]}(window,window.angular),function(window,angular){function ClassPgmTableBasicController($log,$q,$scope,$interval,ClassServices,Util,uiGridConstants,Notification,moment,iddropdownFilter){function activate(){getClassPgm().then(function(){$log.debug("getClassPgm activate done"),$q.all([getPrograms().then(function(){$log.debug("getPrograms activate done",vm.programs)},function(error){return $q.reject(error)}),getClasscats().then(function(){$log.debug("getClasscats activate done",vm.classcats)},function(error){return $q.reject(error)}),getPgmcats().then(function(){$log.debug("getPgmcats activate done",vm.pgmcats)},function(error){return $q.reject(error)}),getAgecats().then(function(){$log.debug("getAgecats activate done",vm.agecats)},function(error){return $q.reject(error)}),getClasses().then(function(){$log.debug("getClasses activate done",vm.classes)},function(error){return $q.reject(error)})]).then(function(){$log.debug(" activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeClassPgm(input){$log.debug("removeClassPgm entered",input);var path="../v1/ClassPgm",thedata={id:input.id},data={};return data.ClassPgmExistsList={},ClassServices.removeClassPgm(thedata,path).then(function(data){return $log.debug("removeClassPgm returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassPgm().then(function(zdata){$log.debug("getClassPgm returned",zdata)},function(error){return $log.debug("Caught an error getClassPgm after remove:",error),vm.thisClassPgm=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.ClassPgmFKExists=data.ClassPgmExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeClassPgm failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addClassPgm(rowEntity){updateClassPgm(rowEntity,"Add")}function updateClassPgm(rowEntity,updatetype){var updpath="../v1/ClassPgm",thedata={id:rowEntity.id,classid:rowEntity.classid,pgmid:rowEntity.pgmid,classcat:rowEntity.classcat,pgmcat:rowEntity.pgmcat,agecat:rowEntity.agecat,nextClassid:rowEntity.nextClassid,nextPgmid:rowEntity.nextPgmid};return $log.debug("about updateClassPgm ",thedata,updpath,updatetype),ClassServices.updateClassPgm(updpath,thedata).then(function(data){return $log.debug("updateClassPgm returned data"),$log.debug(data),vm.thisClassPgm=data,$log.debug(vm.thisClassPgm),$log.debug(vm.thisClassPgm.message),vm.message=vm.thisClassPgm.message,"undefined"!=typeof vm.thisClassPgm&&vm.thisClassPgm.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassPgm().then(function(zdata){$log.debug("getClassPgm returned",zdata)},function(error){return $log.debug("Caught an error getClassPgm after remove:",error),vm.thisClassPgm=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisClassPgm):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateClassPgm failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getClassPgm(){$log.debug("getClassPgm entered");var path="../v1/ClassPgm";return ClassServices.getClassPgms(path).then(function(data){$log.debug("getClassPgmes returned data"),$log.debug(data),vm.gridOptions.data=data.ClassPgmList},function(error){return $log.debug("Caught an error getClassPgmes:",error),vm.ClassPgmlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getPrograms(){$log.debug("getPrograms entered");var path="../v1/programs";return ClassServices.getPrograms(path).then(function(data){return $log.debug("getPrograms returned data"),$log.debug(data),vm.programs=data.Programlist,$log.debug(data.message),vm.message=data.message,"undefined"!=typeof vm.programs&&data.error!==!0||"undefined"==typeof data?(vm.ClassPgm.pgmid=String(vm.programs[0].id),vm.ClassPgm.pgmVlu=String(vm.programs[0].value),vm.programs):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getPrograms:",error),vm.programs=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getClasses(){$log.debug("getClasses entered");var path="../v1/classes";return ClassServices.getClasses(path).then(function(data){if($log.debug("getClasses returned data"),$log.debug(data),vm.classes=data.ClassList,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.classes||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.classes.length;iter<len;iter++)vm.classes[iter].id=vm.classes[iter].classid,vm.classes[iter].value=vm.classes[iter]["class"];return vm.ClassPgm.classid=String(vm.classes[0].classid),vm.ClassPgm.classVlu=String(vm.classes[0]["class"]),vm.classes},function(error){return $log.debug("Caught an error getClasses:",error),vm.classes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getPgmcats(){return $log.debug("pgmcats entered"),ClassServices.distinctPgm().then(function(data){if($log.debug("getpgmcats returned data"),$log.debug(data),vm.pgmcats=data.pgmcatlist,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.pgmcats||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.pgmcats.length;iter<len;iter++)vm.pgmcats[iter].id=vm.pgmcats[iter].pgmcat,vm.pgmcats[iter].value=vm.pgmcats[iter].pgmcat;return vm.ClassPgm.pgmcat=String(vm.pgmcats[0].id),vm.ClassPgm.pgmcatVlu=String(vm.pgmcats[0].value),vm.pgmcats},function(error){return $log.debug("Caught an error getpgmcats:",error),vm.pgmcats=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getClasscats(){return $log.debug("classcats entered"),ClassServices.distinctCat().then(function(data){if($log.debug("getclasscats returned data"),$log.debug(data),vm.classcats=data.classcatlist,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.classcats||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.classcats.length;iter<len;iter++)vm.classcats[iter].id=vm.classcats[iter].classcat,vm.classcats[iter].value=vm.classcats[iter].classcat;return vm.ClassPgm.classcat=String(vm.classcats[0].id),vm.ClassPgm.classcatVlu=String(vm.classcats[0].value),vm.classcats},function(error){return $log.debug("Caught an error getclasscats:",error),vm.classcats=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getAgecats(){return $log.debug("agecats entered"),ClassServices.distinctAge().then(function(data){if($log.debug("getagecats returned data"),$log.debug(data),vm.agecats=data.agecatlist,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.agecats||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.agecats.length;iter<len;iter++)vm.agecats[iter].value=vm.agecats[iter].agecat,vm.agecats[iter].id=vm.agecats[iter].agecat;return vm.ClassPgm.agecat=String(vm.agecats[0].id),vm.ClassPgm.agecatVlu=String(vm.agecats[0].value),vm.agecats},function(error){return $log.debug("Caught an error getagecats:",error),vm.agecats=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function geturl(input){return vm.imgsrc+input}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,showGridFooter:!1,enableColumnResizing:!0,columnDefs:[{field:"classid",displayName:"Class",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classes,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classes}},{field:"pgmid",displayName:"Program",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.programs,filterHeaderTemplate:"templates/states/filtercoltemplatevlu.html",filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.programs}},{field:"nextClassid",displayName:"Next Class",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classes,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classes}},{field:"nextPgmid",displayName:"Next Program",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.programs,filterHeaderTemplate:"templates/states/filtercoltemplatevlu.html",filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.programs}},{field:"pgmcat",displayName:"Program Category",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.pgmcats,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.pgmcats}},{field:"classcat",displayName:"Class Category",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classcats,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classcats}},{field:"agecat",displayName:"Age Category",headerCellClassPgm:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.agecats,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.agecats}},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeClassPgm(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&("ranklistForNextClassPgm"===colDef.name&&(rowEntity.rankForNextClassPgm="NULL"),updateClassPgm(rowEntity,"Update"))})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getClassPgm=getClassPgm,vm.removeClassPgm=removeClassPgm,vm.addClassPgm=addClassPgm,vm.updateClassPgm=updateClassPgm,vm.ClassPgm=[],vm.ClassPgmlist=[],vm.agecats=[],vm.classcats=[],vm.pgmcats=[],vm.geturl=geturl,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.programs=[],vm.classes=[],vm.thisClassPgm=[],vm.gridLength={},vm.initialLength=5,vm.rowheight=85,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-classpgm started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-classpgm dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-classpgm.js")}angular.module("ng-admin").controller("ClassPgmTableBasicController",ClassPgmTableBasicController),ClassPgmTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","Util","uiGridConstants","Notification","moment","iddropdownFilter"]}(window,window.angular),function(window,angular){function ClassRankTableBasicController($log,$q,$scope,$interval,ClassServices,Util,uiGridConstants,Notification,moment,iddropdownFilter){function activate(){getClassRank().then(function(){$log.debug("getClassRank activate done"),$q.all([getrankTypes().then(function(){$log.debug("getrankTypes activate done",vm.rankTypes)},function(error){return $q.reject(error)}),getRanks().then(function(){$log.debug("getrankTypes activate done",vm.rankTypes)},function(error){return $q.reject(error)}),getClasses().then(function(){$log.debug("getClasses activate done",vm.classes)},function(error){return $q.reject(error)})]).then(function(){$log.debug(" activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function changeRanktype(){$log.debug("changeRanktype return",vm.ClassRank.rankType),vm.ClassRank.rankTypeVlu=Util.getByValue(vm.rankTypes,vm.ClassRank.rankType,"id","value"),getRanks().then(function(){vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $q.reject(error)})}function getrankTypes(){$log.debug("getrankTypes entered");var path="../v1/ranktypes";return ClassServices.getRankTypes(path).then(function(data){return $log.debug("getrankTypes returned data"),$log.debug(data),vm.rankTypes=data.RankTypelist,$log.debug(data.message),vm.message=data.message,"undefined"!=typeof vm.rankTypes&&data.error!==!0||"undefined"==typeof data?vm.rankTypes:(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getrankTypes:",error),vm.rankTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function removeClassRank(input){$log.debug("removeClassRank entered",input);var path="../v1/ClassRank",thedata={id:input.id},data={};return data.ClassRankExistsList={},ClassServices.removeClassRank(thedata,path).then(function(data){return $log.debug("removeClassRank returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassRank().then(function(zdata){$log.debug("getClassRank returned",zdata)},function(error){return $log.debug("Caught an error getClassRank after remove:",error),vm.thisClassRank=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("removeClassRank failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addClassRank(rowEntity){updateClassRank(rowEntity,"Add")}function updateClassRank(rowEntity,updatetype){var updpath="../v1/ClassRank",thedata={id:rowEntity.id,classid:rowEntity.classid,rankid:rowEntity.rankid};return $log.debug("about updateClassRank ",thedata,updpath,updatetype),ClassServices.updateClassRank(updpath,thedata).then(function(data){return $log.debug("updateClassRank returned data"),$log.debug(data),vm.thisClassRank=data,$log.debug(vm.thisClassRank),$log.debug(vm.thisClassRank.message),vm.message=vm.thisClassRank.message,"undefined"!=typeof vm.thisClassRank&&vm.thisClassRank.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassRank().then(function(zdata){$log.debug("getClassRank returned",zdata)},function(error){return $log.debug("Caught an error getClassRank after remove:",error),vm.thisClassRank=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisClassRank):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateClassRank failure:"),
$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getClassRank(){$log.debug("getClassRank entered");var path="../v1/ClassRank";return ClassServices.getClassRanks(path).then(function(data){$log.debug("getClassRanks returned data"),$log.debug(data),vm.gridOptions.data=data.ClassRankList},function(error){return $log.debug("Caught an error getClassRankes:",error),vm.ClassRanklist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getRanks(){$log.debug("getranks entered",vm.ClassRank.rankTypeVlu);var path=encodeURI("../v1/ranks?ranktype="+vm.ClassRank.rankTypeVlu);return ClassServices.getRanks(path).then(function(data){if($log.debug("getRanks returned data"),$log.debug(data),vm.Ranks=data.Ranklist,$log.debug(data.message),vm.message=vm.Ranks.message,("undefined"==typeof vm.Ranks||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.Ranks.length;iter<len;iter++)vm.Ranks[iter].value=String(vm.Ranks[iter].id);return vm.Ranks},function(error){return $log.debug("Caught an error getranks:",error),vm.Ranks=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getClasses(){$log.debug("getClasses entered");var path="../v1/classes";return ClassServices.getClasses(path).then(function(data){if($log.debug("getClasses returned data"),$log.debug(data),vm.classes=data.ClassList,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.classes||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data);for(var iter=0,len=vm.classes.length;iter<len;iter++)vm.classes[iter].id=vm.classes[iter].classid,vm.classes[iter].value=vm.classes[iter]["class"];return vm.ClassRank.classid=String(vm.classes[0].classid),vm.ClassRank.classVlu=String(vm.classes[0]["class"]),vm.classes},function(error){return $log.debug("Caught an error getClasses:",error),vm.classes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function geturl(input){return vm.imgsrc+input}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,showGridFooter:!1,enableColumnResizing:!0,columnDefs:[{field:"classid",displayName:"Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classes,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classes}},{field:"rankid",displayName:"Rank",enableCellEdit:!0,enableFiltering:!1,editDropdownIdLabel:"id",editDropdownValueLabel:"label",editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownOptionsArray:vm.Ranks},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeClassRank(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateClassRank(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getClassRank=getClassRank,vm.removeClassRank=removeClassRank,vm.addClassRank=addClassRank,vm.updateClassRank=updateClassRank,vm.changeRanktype=changeRanktype,vm.ClassRank=[],vm.ClassRanklist=[],vm.rankTypes=[],vm.geturl=geturl,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Ranks=[],vm.thisranks=[],vm.thisClassRank=[],vm.gridLength={},vm.initialLength=5,vm.rowheight=85,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-classrank started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-classrank dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-classrank.js")}angular.module("ng-admin").controller("ClassRankTableBasicController",ClassRankTableBasicController),ClassRankTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","Util","uiGridConstants","Notification","moment","iddropdownFilter"]}(window,window.angular),function(window,angular){function ClassTestTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getClassTest().then(function(){$log.debug("getClassTest activate done"),$q.all([getTesttypes().then(function(){$log.debug("gettestTypes activate done",vm.testTypes)},function(error){return $q.reject(error)}),getClasses().then(function(){$log.debug("getClasses activate done",vm.classes)},function(error){return $q.reject(error)})]).then(function(){$log.debug(" activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)})},function(error){return $q.reject(error)})["finally"](function(){vm.dataLoading=!1})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function getClasses(){$log.debug("getClasses entered");var path="../v1/classes";return ClassServices.getClasses(path).then(function(data){if($log.debug("getClasses returned data"),$log.debug(data),vm.classes=data.ClassList,$log.debug(data.message),vm.message=data.message,("undefined"==typeof vm.classes||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message,delay:5e3}),$q.reject(data)();for(var iter=0,len=vm.classes.length;iter<len;iter++)vm.classes[iter].id=vm.classes[iter].classid,vm.classes[iter].value=vm.classes[iter]["class"];return vm.Classtest.classid=String(vm.classes[0].classid),vm.Classtest.classVlu=String(vm.classes[0]["class"]),vm.classes},function(error){return $log.debug("Caught an error getClasses:",error),vm.classes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getTesttypes(){$log.debug("getTesttypes entered");var path="../v1/testtype";return ClassServices.getTesttypes(path).then(function(data){return $log.debug("getTesttypes returned data"),$log.debug(data),vm.testTypes=data.TesttypeList,data.TesttypeList},function(error){return $log.debug("Caught an error getTesttypes:",error),vm.testTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function removeClassTest(input){$log.debug("removeClassTest entered",input),vm.dataLoading=!0;var path="../v1/classtest",thedata={id:input.id},data={};return data.ClassTestExistsList={},ClassServices.removeClassTest(thedata,path).then(function(data){return $log.debug("removeClassTest returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassTest().then(function(zdata){$log.debug("getClassTest returned",zdata)},function(error){return $log.debug("Caught an error getClassTest after remove:",error),vm.thisClassTest=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("removeClassTest failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})["finally"](function(){vm.dataLoading=!1})}function addClassTest(rowEntity){updateClassTest(rowEntity,"Add")}function updateClassTest(rowEntity,updatetype){var updpath="../v1/classtest";vm.dataLoading=!0;var thedata={id:rowEntity.id,classid:rowEntity.classid,testtypeid:rowEntity.testtypeid,sortorder:rowEntity.sortorder};return $log.debug("about updateClassTest ",thedata,updpath,updatetype),ClassServices.updateClassTest(updpath,thedata).then(function(data){return $log.debug("updateClassTest returned data"),$log.debug(data),vm.thisClassTest=data,$log.debug(vm.thisClassTest),$log.debug(vm.thisClassTest.message),vm.message=vm.thisClassTest.message,"undefined"!=typeof vm.thisClassTest&&vm.thisClassTest.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getClassTest().then(function(zdata){$log.debug("getClassTest returned",zdata)},function(error){return $log.debug("Caught an error getClassTest after add:",error),vm.thisClassTest=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisClassTest):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateClassTest failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})["finally"](function(){vm.dataLoading=!1})}function getClassTest(){$log.debug("getClassTest entered");var path="../v1/classtest";return ClassServices.getClassTests(path).then(function(data){return $log.debug("getClassTests returned data"),$log.debug(data),vm.gridOptions.data=data.ClasstestList,vm.Classtest.sortorder=parseInt(Util.maxObjArr(data.ClasstestList,"sortorder"),10)+1,data.ClasstestList},function(error){return $log.debug("Caught an error getClassTests:",error),vm.ClasstestList=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"classid",displayName:"Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classes,filterHeaderTemplate:"templates/states/filtercoltemplatevlu2id.html",filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.classes}},{field:"testtypeid",displayName:"Test Type",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.testTypes,filterHeaderTemplate:"templates/states/filtercoltemplatevlu2id.html",filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.testTypes}},{field:"sortorder",displayName:"Sort Order",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeClassTest(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateClassTest(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getClassTest=getClassTest,vm.removeClassTest=removeClassTest,vm.addClassTest=addClassTest,vm.updateClassTest=updateClassTest,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Classtest={},vm.classes=[],vm.testTypes=[],vm.thisClassTest=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,vm.dataLoading=!0,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-ClassTest started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-ClassTest dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-classtest.js")}angular.module("ng-admin").controller("ClassTestTableBasicController",ClassTestTableBasicController),ClassTestTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(){function EventTableBasicController($routeParams,$log,EventServices,$location,$window,$q,$scope,$route,Notification,uiGridConstants,uiGridGroupingConstants,$timeout){function dateopen($event){vm.status.opened=!0}function setLimit(thelimit){$log.debug("setLimit",thelimit),vm.limit=thelimit}function setActiveTab(activeTab){$log.debug("set activetab as:",activeTab),EventServices.setActiveTab(activeTab)}function getActiveTab(){return EventServices.getActiveTab()}function activate(){setInitColDefs(),$log.debug("activate setInitColDefs returned"),getColDefList(),setGridHistOptions()}function getFormattedDate(date){var d3=new Date(date),year=d3.getFullYear(),month=(1+d3.getMonth()).toString();month=month.length>1?month:"0"+month;var day=d3.getDate().toString();return day=day.length>1?day:"0"+day,year+"-"+month+"-"+day}function getFormattedTime(date){var d3=new Date(date),hour=addZero(d3.getHours()),min=addZero(d3.getMinutes());return hour+":"+min}function addZero(i){return i<10&&(i="0"+i),i}function createEvent(event){if(vm.selected===!1){var error="no rows selected for event";return void Notification.error({message:error,delay:5e3})}var path="../v1/eventregistration",thedata={Event:event,EventDate:getFormattedDate(vm.EventDate),EventType:vm.EventType,EventStart:getFormattedTime(vm.EventStart),EventEnd:getFormattedTime(vm.EventEnd),Location:vm.Location,selectedStudents:vm.selectedStudents};return $log.debug("about createEvent ",path,thedata),EventServices.createEvent(path,thedata).then(function(data){return $log.debug("createEvent returned data"),$log.debug(data),vm.thisEvent=data,$log.debug(vm.thisEvent),$log.debug(vm.thisEvent.message),vm.message=vm.thisEvent.message,Notification.success({message:vm.message,delay:5e3}),refreshtheEvent().then(function(zdata){$log.debug("refreshtheEvent returned",zdata)},function(error){return $log.debug("Caught an error refreshtheEvent after update:",error),vm.data=[],vm.photos=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisEvent})["catch"](function(e){throw $log.debug("createEvent failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function refreshtheEvent(){$log.debug("refreshtheEvent entered ");var refreshpath=encodeURI("../v1/eventsource?thelimit="+vm.limit);return $log.debug("refreshtheEvent path:",refreshpath),EventServices.getEventSource(refreshpath).then(function(data){return $log.debug("refreshEvents returned data"),$log.debug(data),vm.gridOptions.data=data.EventsourceList,vm.gridOptions.data},function(error){return $log.debug("Caught an error refreshtheEvent, going to notify:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getEventSource(){$log.debug("getEventSource entered");var refreshpath=encodeURI("../v1/eventsource");return $log.debug("getEventSource path:",refreshpath),EventServices.getEventSource(refreshpath).then(function(data){return $log.debug("getEventSource returned data"),$log.debug(data),vm.data=data,vm.data},function(error){return $log.debug("Caught an error eventsource:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getEventDetails(theevent){$log.debug("getEventDetails entered:",theevent.event);var path=encodeURI("../v1/eventdetails?event="+theevent.event);return $log.debug("getEventDetails path:",path),EventServices.getEventDetails(path).then(function(data){$log.debug("getEventDetails returned data"),$log.debug(data),vm.gridHistOptions.data=data.eventdetails,$log.debug("details",data.eventdetails[0]),vm.Event=data.eventdetails[0].Event,vm.EventType=data.eventdetails[0].EventType,vm.EventDate=data.eventdetails[0].EventDate,vm.EventEnd=data.eventdetails[0].EventEnd,vm.EventStart=data.eventdetails[0].EventStart,vm.Location=data.eventdetails[0].Location,vm.ContactID=data.eventdetails[0].ContactID;var messagetxt="EventDetails obtained";Notification.success({message:messagetxt,delay:5e3})},function(error){return $log.debug("Caught an error getEventDetails:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getEventNames(eventpartial){$log.debug("getEventNames entered");var path=encodeURI("../v1/eventnames?eventpartial="+eventpartial);return $log.debug("getEventNames path:",path),EventServices.getEventNames(path).then(function(data){$log.debug("getEventNames returned data"),$log.debug(data),vm.eventlist=data.eventlist},function(error){return $log.debug("Caught an error getEventDetails:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function setColDef(indata){var path="../v1/coldef";return $log.debug("about setColDefs ",indata,path),EventServices.setColDefs(path,indata).then(function(data){$log.debug("setColDefs returned data"),$log.debug(data),vm.thiscoldef=data,$log.debug(vm.thiscoldef),$log.debug(vm.thiscoldef.message),vm.message=vm.thiscoldef.message,getColDefList()})["catch"](function(e){throw $log.debug("setColDefs failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function changeColDef(colsubkey){$log.debug("changeColDef entered"),isNewColDef(colsubkey)&&saveState(),getColDefs(vm.colsubkey).then(function(data){$log.debug(" controller changeColDef returned with:",data,vm.colsubkey),$log.debug(" controller changeColDef vmstate is:",vm.state),vm.state!={}&&restoreState(vm.state)},function(error){$log.debug("cols not stored:",error)})}function getColDefs(colsubkey){$log.debug("getColDefs entered");var refreshpath=encodeURI("../v1/coldefs?colkey="+vm.colkey+"&colsubkey="+colsubkey),holdgcol=vm.gcolumns;return $log.debug("getColDefs path:",refreshpath),null===colsubkey?(error="Nothing selected",$q.reject(error)):EventServices.getColDefs(refreshpath).then(function(data){return $log.debug("EventServices in controller getColDefs returned data"),$log.debug(data),vm.state=JSON.parse(data.gcolumns[0][0]),$log.debug("EventServices in controller set vm.state",vm.state),vm.state},function(error){return $log.debug("Caught an error getColDefs:",error),vm.gcolumns=holdgcol,vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getColDefList(){$log.debug("getColDefList entered");var refreshpath=encodeURI("../v1/coldeflist?colkey="+vm.colkey);return $log.debug("getColDefList path:",refreshpath),EventServices.getColDefList(refreshpath).then(function(data){return $log.debug("getColDefList returned data"),$log.debug(data),vm.colsubkeys=data.colsubkeys,vm.data},function(error){return $log.debug("Caught an error getColDefList:",error),vm.colsubkeys=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function setInitColDefs(){vm.gcolumns=[],vm.colsubkey="Default",getColDefs(vm.colsubkey).then(function(data){$log.debug(" controller getColDefs returned with:",data,vm.colsubkey),$log.debug(" controller getColDefs vmstate is:",vm.state)},function(error){$log.debug("cols not stored:",error)});var coldef={};$log.debug("setGridOptions col count",vm.listA.length);for(var filt=([{condition:uiGridConstants.filter.GREATER_THAN,placeholder:"> than"},{condition:uiGridConstants.filter.LESS_THAN,placeholder:"< than"}],[]),i=0,len=vm.listA.length;i<len;i+=3){var val="true"===vm.listA[i+2].toLowerCase(),agg="number"===vm.listA[i+1]?uiGridConstants.aggregationTypes.avg:"string"===vm.listA[i+1]?uiGridConstants.aggregationTypes.count:"date"===vm.listA[i+1]?uiGridConstants.aggregationTypes.min:"boolean"===vm.listA[i+1]?uiGridConstants.aggregationTypes.count:uiGridConstants.aggregationTypes.count;filt="number"===vm.listA[i+1]?[{condition:uiGridConstants.filter.GREATER_THAN,placeholder:"> than"},{condition:uiGridConstants.filter.LESS_THAN,placeholder:"< than"}]:"string"===vm.listA[i+1]?[{condition:uiGridConstants.filter.STARTS_WITH,placeholder:"Starts with"},{condition:uiGridConstants.filter.ENDS_WITH,placeholder:"Ends with"},{condition:uiGridConstants.filter.CONTAINS,placeholder:"Contains"},{condition:uiGridConstants.filter.EXACT,placeholder:"Exactly"}]:("date"===vm.listA[i+1],""),coldef={field:vm.listA[i],type:vm.listA[i+1],visible:val,enableFiltering:!0,aggregationType:agg,filters:filt,headerCellClass:vm.highlightFilteredHeader,enableCellEdit:!1},vm.gcolumns.push(coldef)}$log.debug("gcolumns in coldefs",vm.gcolumns),setGridOptions(),refreshtheEvent().then(function(zdata){$log.debug("refreshtheEvent returned",zdata),vm.state!={}&&restoreState(vm.state)})}function isNewColDef(theevent){$log.debug("isNewColDef",theevent);for(var isnew=!0,i=0,len=vm.colsubkeys.length;i<len;i++)if(vm.colsubkeys[i]==theevent){$log.debug("isfound"),isnew=!1;break}return isnew}function saveState(){vm.state=vm.gridApi.saveState.save(),$log.debug("state",vm.state);var thedata={colkey:vm.colkey,colsubkey:vm.colsubkey,colcontent:vm.state};setColDef(thedata)}function restoreState(thestate){vm.gridApi.saveState.restore($scope,thestate),$log.debug("state",thestate)}function setGridOptions(){vm.gridOptions={enableFiltering:!0,paginationPageSizes:vm.limits,paginationPageSize:10,columnDefs:vm.gcolumns,showGridFooter:!0,enableColumnResizing:!0,enableGridMenu:!0,showColumnFooter:!0,exporterCsvFilename:"events.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:10,bold:!0},docDefinition},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){var msg="row selected "+row.entity.ContactID;$log.debug(msg);var selectedStudentarr=vm.gridApi.selection.getSelectedRows();$log.debug("selected",selectedStudentarr),setSelectedArray(selectedStudentarr)}),gridApi.selection.on.rowSelectionChangedBatch($scope,function(rows){$log.debug("batch");var selectedStudentarr=vm.gridApi.selection.getSelectedRows();$log.debug("batch selected",selectedStudentarr),setSelectedArray(selectedStudentarr)})}},$log.debug("setGridOptions gcolumns",vm.gcolumns),$log.debug("setGridOptions gridOptions",vm.gridOptions)}function setGridHistOptions(){vm.gridHistOptions={enableFiltering:!0,paginationPageSizes:vm.limits,paginationPageSize:10,columnDefs:[{field:"LastName",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"FirstName",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"ContactID",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1},{field:"Attended",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"Ordered",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"Paid",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"ShirtSize",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"Notes",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"Include",headerCellClass:highlightFilteredHeader,enableCellEdit:!0},{field:"Email",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"Email2",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"Parent",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"StudentSchool",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"Event",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1},{field:"EventType",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1},{field:"EventEnd",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1},{field:"EventStart",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1},{field:"Location",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,visible:!1}],showGridFooter:!0,enableColumnResizing:!0,enableGridMenu:!0,showColumnFooter:!0,exporterCsvFilename:"eventhist.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:10,bold:!0},docDefinition},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,onRegisterApi:function(gridHistApi){$log.debug("vm gridapi onRegisterApi"),vm.gridHistApi=gridHistApi,gridHistApi.selection.on.rowSelectionChanged($scope,function(row){var msg="gridhist row selected "+row.entity;$log.debug(msg)}),gridHistApi.selection.on.rowSelectionChangedBatch($scope,function(rows){$log.debug("gridhist batch")}),gridHistApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){$log.debug("rowEntity"),$log.debug(rowEntity),$log.debug("Column: "+colDef.name+" newValue: "+newValue+" oldValue: "+oldValue),newValue!=oldValue&&updateEvent(colDef,newValue,rowEntity)})}},$log.debug("setGridHistOptions gridOptions",vm.gridHistOptions)}function updateEvent(colDef,newValue,rowEntity){var path="../v1/eventregistration",indata={changedColumn:colDef,newValue:newValue,ContactID:rowEntity.ContactID,Event:vm.Event,EventDate:vm.EventDate,Paid:rowEntity.Paid,ShirtSize:rowEntity.ShirtSize,Notes:rowEntity.Notes,Include:rowEntity.Include,Attended:rowEntity.Attended,ordered:rowEntity.Ordered};return $log.debug("about updateEvent ",indata,path),EventServices.updateEvent(path,indata).then(function(data){$log.debug("updateEvent returned data"),$log.debug(data),vm.thiscoldef=data,$log.debug(vm.thiscoldef),$log.debug(vm.thiscoldef.message),vm.message=vm.thiscoldef.message})["catch"](function(e){throw $log.debug("updateEvent failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function setSelectedArray(inputArray){if($log.debug("setSelectedArray entered",inputArray),vm.selectedStudents=[],!(inputArray.length>0))return void(vm.selected=!1);vm.selected=!0;for(var i=0,len=inputArray.length;i<len;i++){var info={ContactID:inputArray[i].contactID,Paid:"",ShirtSize:"",Notes:"",Include:"",Attended:"",Ordered:""};vm.selectedStudents.push(info)}$log.debug("setarray",vm.selectedStudents)}function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""}var vm=this;vm.refreshtheEvent=refreshtheEvent,vm.getEventSource=getEventSource,vm.getEventDetails=getEventDetails,vm.updateEvent=updateEvent,vm.getEventNames=getEventNames,vm.getColDefList=getColDefList,vm.setColDef=setColDef,vm.dateopen=dateopen,vm.getColDefs=getColDefs,vm.changeColDef=changeColDef,vm.saveState=saveState,vm.restoreState=restoreState,vm.setLimit=setLimit,vm.createEvent=createEvent,vm.getActiveTab=getActiveTab,vm.setActiveTab=setActiveTab,vm.highlightFilteredHeader=highlightFilteredHeader,vm.limit=0,vm.limits=[10,20,50,100,200,500,5e3],vm.data=[],vm.state={},vm.thiscoldef="",vm.colkey="event",vm.colsubkey="",vm.colsubkeys=[],vm.coldeflist=[],vm.eventtmp,vm.gcolumns=[],vm.loading=!0,vm.loadAttempted=!1,vm.gridOptions={},vm.gridHistOptions={},vm.selectedStudents=[],vm.selected=!1,vm.eventSelected="",vm.eventlist=[],vm.Event="",vm.EventType="",vm.EventDate="",vm.EventEnd="",vm.EventStart="",vm.Location="",vm.ContactID="",vm.status={opened:!1},vm.listA=["contactID","number","TRUE","LastName","string","TRUE","FirstName","string","TRUE","Email","string","FALSE","Email2","string","FALSE","Parent","string","FALSE","Phone","string","FALSE","AltPhone","string","FALSE","Address","string","FALSE","City","string","FALSE","State","string","FALSE","ZIP","string","FALSE","Notes","string","FALSE","BeltSize","string","FALSE","InstructorPaymentFree","number","FALSE","ContactType","string","TRUE","include","boolean","FALSE","quickbooklink","string","FALSE","instructorTitle","string","FALSE","bdayinclude","boolean","FALSE","sex","string","FALSE","medicalConcerns","string","FALSE","GuiSize","string","FALSE","ShirtSize","string","FALSE","phoneExt","string","FALSE","altPhoneExt","string","FALSE","StudentSchool","string","FALSE","EmergencyContact","string","FALSE","nextScheduledTest","string","FALSE","contactpictureurl","string","FALSE","nclassid","number","FALSE","nclass","string","FALSE","nclasssort","number","FALSE","nextClass","string","FALSE","rankForNextClass","string","FALSE","ageForNextClass","number","FALSE","pgrmcat","string","TRUE","classcat","string","TRUE","agecat","string","TRUE","classpictureurl","string","FALSE","PaymentClassName","string","FALSE","NumberOfMembers","string","FALSE","paymenttype","string","FALSE","PaymentNotes","string","FALSE","PaymentPlan","string","FALSE","PaymentAmount","number","FALSE","PriceSetby","string","FALSE","Pricesetdate","date","FALSE","rankid","number","FALSE","ranksortkey","number","FALSE","rankGroup","string","FALSE","rankalphasortkey","string","FALSE","age","number","TRUE","birthday","date","FALSE","lastpaymentdate","date","FALSE","nextpaymentdate","date","FALSE"],$scope.$watch("vm.EventStart",function(value){$log.debug("vm.EventStart",value);var defValue="1/1/1900";return value&&"NULL"!=value?void(vm.time=new Date(value.toISOString())):new Date(defValue).toISOString()},!0),$scope.$watch("vm.EventEnd",function(value){$log.debug("vm.EventEnd",value);var defValue="1/1/1900";return value&&"NULL"!=value?void(vm.time=new Date(value.toISOString())):new Date(defValue).toISOString()},!0),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-eventcreation started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-eventcreation dismissed"),$log.debugEnabled(!1)}),activate()}angular.module("ng-admin").controller("EventTableBasicController",EventTableBasicController),EventTableBasicController.$inject=["$routeParams","$log","EventServices","$location","$window","$q","$scope","$route","Notification","uiGridConstants","uiGridGroupingConstants","$timeout"]}(),function(window,angular){function TemplateTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,iddropdownFilter,Util){function messageChange(value){$log.debug("messageChange entered",value);
}function activate(){getTemplate().then(function(){$log.debug("getTemplate activate done")},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeTemplate(input){$log.debug("removeTemplate entered",input);var path="../v1/htmltemplate",thedata={id:input.id},data={};return data.TemplateExistsList={},ClassServices.removeTemplate(thedata,path).then(function(data){return $log.debug("removeTemplate returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getTemplate().then(function(zdata){$log.debug("getTemplate returned",zdata)},function(error){return $log.debug("Caught an error getTemplate after remove:",error),vm.thisTemplate=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.TemplateFKExists=data.TemplateExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeTemplate failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addTemplate(rowEntity){updateTemplate(rowEntity,"Add")}function updateTemplate(rowEntity,updatetype){var updpath="../v1/htmltemplate",thedata={id:rowEntity.id,url:rowEntity.url,title:rowEntity.title,description:rowEntity.description,content:rowEntity.content};return $log.debug("about updateTemplate ",thedata,updpath,updatetype),ClassServices.updateTemplate(updpath,thedata).then(function(data){return $log.debug("updateTemplate returned data"),$log.debug(data),vm.thisTemplate=data,$log.debug(vm.thisTemplate),$log.debug(vm.thisTemplate.message),vm.message=vm.thisTemplate.message,"undefined"!=typeof vm.thisTemplate&&vm.thisTemplate.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getTemplate().then(function(zdata){$log.debug("getTemplate returned",zdata)},function(error){return $log.debug("Caught an error getTemplate after remove:",error),vm.thisTemplate=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisTemplate):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateTemplate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getTemplate(){$log.debug("getTemplate entered");var path="../v1/htmltemplate";return ClassServices.getTemplates(path).then(function(data){$log.debug("getTemplates returned data"),$log.debug(data),vm.gridOptions.data=data.HtmlTemplateList},function(error){return $log.debug("Caught an error getTemplates:",error),vm.Templatelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!1,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"title",displayName:"Title",enableCellEdit:!0,enableFiltering:!1},{field:"description",displayName:"Description",enableCellEdit:!0,enableFiltering:!1},{field:"url",displayName:"Url",enableCellEdit:!0,enableFiltering:!1},{field:"content",displayName:"Content",enableCellEdit:!0,enableFiltering:!1},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeTemplate(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateTemplate(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getTemplate=getTemplate,vm.removeTemplate=removeTemplate,vm.addTemplate=addTemplate,vm.updateTemplate=updateTemplate,vm.messageChange=messageChange,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Template={},vm.thisTemplate=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=200,vm.headerheight=140,vm.getGridLength=getGridLength,vm.tinymceOptions={resize:!0,width:"100%",height:100,selector:"textarea",theme:"modern",plugins:"print preview fullpage  searchreplace autolink directionality  visualblocks visualchars fullscreen image code link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount   imagetools    contextmenu colorpicker textpattern help",toolbar1:"formatselect | bold italic strikethrough forecolor backcolor | link image | code | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat",relative_urls:!1,remove_script_host:!1,content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","//www.tinymce.com/css/codepen.min.css"],image_title:!0,automatic_uploads:!0,images_upload_url:"../v1/imageuploader.php"},setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-htmltemplate started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-htmltemplate dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-htmltemplate.js")}angular.module("ng-admin").controller("TemplateTableBasicController",TemplateTableBasicController),TemplateTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","iddropdownFilter","Util"]}(window,window.angular),function(){angular.module("ng-admin").controller("TableBasicController",function($scope,$routeParams){$.fn.Data.Portlet()})}(),function(window,angular,$,Stripe){function PaymentTrackingController($scope,$log,ClassServices,StudentServices,Notification,Util,uiGridConstants,moment,$q,$uibModal,$routeParams,$rootScope){function formatter(modelValue,filter,defaultValue){return modelValue?filter("currency")(modelValue):defaultValue}function isStripe(){return!0}function dateopen($event){vm.status.opened=!0}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function setpayGridLength(size){vm.paygridLength={height:size*vm.payrowheight+vm.payheaderheight+"px"}}function getpayGridLength(){return vm.paygridLength}function getPayersPartial(theinput){return $log.debug("getPayers entered"),ClassServices.getPayersPartial(theinput).then(function(data){return $log.debug("controller getPayersPartial returned data",theinput),$log.debug(data),"undefined"!=typeof data.payerlist&&data.error!==!0||"undefined"==typeof data?(vm.payers=data.payerlist,vm.payers):(vm.message=data.message,Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})}function refreshStudents(theinput){if(0!==theinput.length&&void 0!==theinput)return StudentServices.refreshStudents(theinput).then(function(data){return $log.debug("controller refreshStudents returned data"),$log.debug(data),"undefined"!=typeof data.refreshstudentlist&&data.error!==!0||"undefined"==typeof data?(vm.refreshstudentlist=data,vm.refreshstudentlist):(vm.message=data.message,Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})}function getPayerStudent(theinput,thetype){var optionalid=$routeParams.id,thisid=void 0!==theinput.ID?theinput.ID:void 0!==theinput.payerid?theinput.payerid:void 0;if(void 0===thisid){if(void 0===optionalid)return;return void(thisid=optionalid)}var thedata={theinput:thisid,thetype:thetype},path="../v1/payerstudent";return StudentServices.getPayerStudent(path,thedata).then(function(data){return $log.debug("controller getPayerStudent returned data"),$log.debug(data),$log.debug(data.message),vm.message=data.message,"undefined"!=typeof data.studentpayerlist&&data.error!==!0||"undefined"==typeof data?(vm.payerstudentlist=data.studentpayerlist,"payer"===data.studentpayerlist[0].thetype?refreshStudents(data.studentpayerlist[0].firstname+" "+data.studentpayerlist[0].lastname).then(function(){vm.studentpick=vm.refreshstudentlist.refreshstudentlist[0],getInvoices(theinput.payerid).then(function(){$log.debug("got invoices")}),getPayments(theinput.payerid).then(function(){$log.debug("got payments")})}):getPayersPartial(data.studentpayerlist[0].payername).then(function(){vm.payerName=vm.payers[0],getInvoices(theinput.payerid).then(function(){$log.debug("got invoices")}),getPayments(theinput.payerid).then(function(){$log.debug("got payments")})}),Notification.success({message:vm.message,delay:5e3}),void 0):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getPayerStudent:",error),vm.payerstudentlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getInvoices(payerid){if(void 0===payerid)return void(vm.thispayer="");vm.thispayer=payerid;var thedata={payerid:payerid},path="../v1/invoices";return StudentServices.getInvoices(path,thedata).then(function(data){if($log.debug("controller getInvoices returned data"),$log.debug(data),$log.debug(data.message),vm.message=data.message,("undefined"==typeof data.invoicelist||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data);vm.gridOptions.data=data.invoicelist;for(var i=0;i<vm.gridOptions.data.length;i++)vm.gridOptions.data[i].studentname=vm.studentpick.FullName,vm.gridOptions.data[i].payername=vm.payerName,vm.gridOptions.data[i].optionalid=vm.thispayer;Notification.success({message:vm.message,delay:5e3})},function(error){return $log.debug("Caught an error getPayerStudent:",error),vm.Invoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function removeInvoice(input){$log.debug("removeInvoice entered",input);var path="../v1/invoice",thedata={id:input.id};return StudentServices.removeInvoice(thedata,path).then(function(data){return $log.debug("removeInvoice returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getInvoices(vm.thispayer).then(function(zdata){$log.debug("getInvoices returned",zdata)},function(error){return $log.debug("Caught an error getInvoices after remove:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("removeInvoice failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addInvoice(rowEntity,mailoption){var updpath="../v1/invoice",thedata={amt:rowEntity.amt,invdate:rowEntity.invdate,status:rowEntity.status,paymentid:vm.payerstudentlist[0].paymentid,invoice:rowEntity.invoice,updatetype:"Add",payername:vm.payerstudentlist[0].payername,payerEmail:vm.payerstudentlist[0].payerEmail,payerid:vm.payerstudentlist[0].payerid,payerfirstname:vm.payerstudentlist[0].firstname,payerlastname:vm.payerstudentlist[0].lastname,mailoption:mailoption,payfor:rowEntity.payfor};return $log.debug("about addInvoice ",thedata,updpath,"Add"),StudentServices.addInvoice(updpath,thedata).then(function(data){return $log.debug("addInvoice returned data"),$log.debug(data),vm.thisInvoice=data,$log.debug(vm.thisInvoice),$log.debug(vm.thisInvoice.message),vm.message=vm.thisInvoice.message,"undefined"!=typeof vm.thisInvoice&&vm.thisInvoice.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getInvoices(vm.thispayer).then(function(zdata){$log.debug("getInvoices returned",zdata)},function(error){return $log.debug("Caught an error getInvoices after remove:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisInvoice):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("addInvoice failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function calcInvoice(){if(""!==vm.thispayer){var thedata={payerid:vm.thispayer},path="../v1/calcinvoice";return StudentServices.calcInvoice(path,thedata).then(function(data){return $log.debug("controller calcInvoice returned data"),$log.debug(data),$log.debug(data.message),vm.message=data.message,"undefined"!=typeof data.InvoiceList&&data.error!==!0||"undefined"==typeof data?(vm.Invoice.status="new",vm.Invoice.amt=1*data.InvoiceList[0].paymentamount,vm.Invoice.lastpaymentdate=data.InvoiceList[0].lastpaymentdate,vm.Invoice.payondayofmonth=data.InvoiceList[0].payondayofmonth,vm.Invoice.paymentplan=data.InvoiceList[0].paymentplan,vm.Invoice.paymenttype=data.InvoiceList[0].paymenttype,vm.Invoice.overduecnt=data.InvoiceList[0].overduecnt,vm.Invoice.invdate=new Date,vm.Invoice.payfor=data.InvoiceList[0].payfor,Notification.success({message:vm.message,delay:5e3}),void 0):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error calcInvoice:",error),vm.calcinvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}}function emailInvoice(rowEntity){var updpath="../v1/invoiceemail",thedata={amt:rowEntity.amt,invdate:rowEntity.invdate,status:rowEntity.status,paymentid:vm.payerstudentlist[0].paymentid,invoice:rowEntity.invoice,updatetype:"Add",payername:vm.payerstudentlist[0].payername,payerEmail:vm.payerstudentlist[0].payerEmail,payerid:vm.payerstudentlist[0].payerid,payerfirstname:vm.payerstudentlist[0].firstname,payerlastname:vm.payerstudentlist[0].lastname,payfor:rowEntity.payfor};return $log.debug("about emailInvoice ",thedata,updpath,"Add"),StudentServices.emailInvoice(updpath,thedata).then(function(data){return $log.debug("emailInvoice returned data"),$log.debug(data),vm.thisInvoice=data,$log.debug(vm.thisInvoice),$log.debug(vm.thisInvoice.message),vm.message=vm.thisInvoice.message,"undefined"!=typeof vm.thisInvoice&&vm.thisInvoice.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getInvoices(vm.thispayer).then(function(zdata){$log.debug("getInvoices returned",zdata)},function(error){return $log.debug("Caught an error getInvoices after remove:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisInvoice):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("emailInvoice failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function updateInvoice(rowEntity){var updpath="../v1/invoice",thedata={id:rowEntity.id,amt:rowEntity.amt,invdate:rowEntity.invdate,status:rowEntity.status,paymentid:vm.payerstudentlist[0].paymentid,invoice:rowEntity.invoice,updatetype:"Update",payerName:vm.payerstudentlist[0].payername,payerEmail:vm.payerstudentlist[0].payerEmail,payerid:vm.payerstudentlist[0].payerid,payerfirstname:vm.payerstudentlist[0].firstname,payerlastname:vm.payerstudentlist[0].lastname,payfor:rowEntity.payfor};return $log.debug("about updateInvoice ",thedata,updpath,"Update"),StudentServices.updateInvoice(updpath,thedata).then(function(data){return $log.debug("updateInvoice returned data"),$log.debug(data),vm.thisInvoice=data,$log.debug(vm.thisInvoice),$log.debug(vm.thisInvoice.message),vm.message=vm.thisInvoice.message,"undefined"!=typeof vm.thisInvoice&&vm.thisInvoice.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getPayments(vm.thispayer).then(function(zdata){$log.debug("getPayments returned",zdata)},function(error){return $log.debug("Caught an error getPayments after updateInvoice:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisInvoice):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateInvoice failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getPayments(payerid){if(void 0===payerid)return void(vm.thispayer="");var thedata={payerid:payerid},path="../v1/payments";return StudentServices.getPayments(path,thedata).then(function(data){return $log.debug("controller getPayments returned data"),$log.debug(data),$log.debug(data.message),vm.message=data.message,"undefined"!=typeof data.paymentlist&&data.error!==!0||"undefined"==typeof data?(vm.paygridOptions.data=data.paymentlist,void Notification.success({message:vm.message,delay:5e3})):(Notification.error({message:vm.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getPayments:",error),vm.Invoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function showPayDetails(row){var modalInstance=$uibModal.open({controller:"PaymentViewInstanceController as vm",templateUrl:"templates/states/paymentView.html",size:"lg",resolve:{selectedRow:function(){return row.entity}}});modalInstance.result.then(function(selectedItem){$log.log("modal selected Row: "+selectedItem)},function(){$log.info("Modal dismissed at: "+new Date)})}function registerElements(elements,exampleName,stripe){function enableInputs(){Array.prototype.forEach.call(form.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(input){input.removeAttribute("disabled")})}function disableInputs(){Array.prototype.forEach.call(form.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(input){input.setAttribute("disabled","true")})}function triggerBrowserValidation(){var submit=document.createElement("input");submit.type="submit",submit.style.display="none",form.appendChild(submit),submit.click(),submit.remove()}var formClass="."+exampleName,example=document.querySelector(formClass),form=example.querySelector("form"),resetButton=example.querySelector("a.reset"),error=form.querySelector(".error"),errorMessage=error.querySelector(".message"),savedErrors={};elements.forEach(function(element,idx){element.on("change",function(event){if(event.error)error.classList.add("visible"),savedErrors[idx]=event.error.message,errorMessage.innerText=event.error.message;else{savedErrors[idx]=null;var nextError=Object.keys(savedErrors).sort().reduce(function(maybeFoundError,key){return maybeFoundError||savedErrors[key]},null);nextError?errorMessage.innerText=nextError:error.classList.remove("visible")}})}),form.addEventListener("submit",function(e){e.preventDefault();var plainInputsValid=!0;if(Array.prototype.forEach.call(form.querySelectorAll("input"),function(input){if(input.checkValidity&&!input.checkValidity())return void(plainInputsValid=!1)}),!plainInputsValid)return void triggerBrowserValidation();example.classList.add("submitting"),disableInputs();var name=form.querySelector("#"+exampleName+"-name"),address1=form.querySelector("#"+exampleName+"-address"),city=form.querySelector("#"+exampleName+"-city"),state=form.querySelector("#"+exampleName+"-state"),zip=form.querySelector("#"+exampleName+"-zip"),additionalData={name:name?name.value:void 0,address_line1:address1?address1.value:void 0,address_city:city?city.value:void 0,address_state:state?state.value:void 0,address_zip:zip?zip.value:void 0};stripe.createToken(elements[0],additionalData).then(function(result){example.classList.remove("submitting"),result.token?(example.querySelector(".token").innerText=result.token.id,example.classList.add("submitted"),vm.payStripeInvoice(result.token,vm.thispayment.amt,vm.thispayment.payfor,vm.thispayment.invoice,additionalData)):enableInputs()})}),resetButton.addEventListener("click",function(e){e.preventDefault(),form.reset(),elements.forEach(function(element){element.clear()}),error.classList.remove("visible"),enableInputs(),example.classList.remove("submitted")})}function showCreditCard(row){var modalInstance=$uibModal.open({controller:"CardViewInstanceController as vm",templateUrl:"templates/states/creditcardView.html",size:"lg",resolve:{selectedRow:function(){return vm.thispayment=row,row}}});modalInstance.opened.then(function(success){$log.debug("showCreditCard ui opened:",success)},function(error){$log.debug("showCreditCard ui failed to open, reason : ",error)}),modalInstance.rendered.then(function(success){$log.debug("showCreditCard ui rendered:",success);var stripe=$rootScope.stripe,elements=stripe.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Source+Code+Pro"}],locale:"auto"}),inputs=document.querySelectorAll(".cell.example.example1 .input");Array.prototype.forEach.call(inputs,function(input){input.addEventListener("focus",function(){input.classList.add("focused")}),input.addEventListener("blur",function(){input.classList.remove("focused")}),input.addEventListener("keyup",function(){0===input.value.length?input.classList.add("empty"):input.classList.remove("empty")})});var elementStyles={iconStyle:"solid",style:{base:{iconColor:"#c4f0ff",color:"#fff",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"#87BBFD"}},invalid:{iconColor:"#FFC7EE",color:"#FFC7EE"}}},elementClasses={focus:"focused",empty:"empty",invalid:"invalid"},cardNumber=elements.create("cardNumber",{style:elementStyles,classes:elementClasses});cardNumber.mount("#example1-card-number");var cardExpiry=elements.create("cardExpiry",{style:elementStyles,classes:elementClasses});cardExpiry.mount("#example1-card-expiry");var cardCvc=elements.create("cardCvc",{style:elementStyles,classes:elementClasses});cardCvc.mount("#example1-card-cvc"),registerElements([cardNumber,cardExpiry,cardCvc],"example1",stripe)},function(error){$log.debug("showCreditCard ui failed to render, reason : ",error)}),modalInstance.result.then(function(selectedItem){$log.log("modal selected Row: "+selectedItem)},function(){$log.info("Modal dismissed at: "+new Date)})}function payStripeInvoice(token,amt,payfor,invoice,additionalData){var updpath="../v1/paystripe",thedata={id:token.id,amt:amt,desc:payfor,invoice:invoice,address_city:additionalData.address_city,address_line1:additionalData.address_line1,address_state:additionalData.address_state,address_zip:additionalData.address_zip,name:additionalData.name};return $log.debug("about payStripeInvoice ",thedata,updpath,"Update"),StudentServices.payStripeInvoice(updpath,thedata).then(function(data){return $log.debug("payStripeInvoice returned data"),$log.debug(data),vm.stripe=data,$log.debug(vm.stripe),$log.debug(vm.stripe.message),vm.message=vm.stripe.message,"undefined"!=typeof vm.stripe&&vm.stripe.error!==!0||"undefined"==typeof data?(getInvoices(vm.thispayer).then(function(zdata){$log.debug("getInvoices returned",zdata),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $log.debug("Caught an error getPayments after remove:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),getPayments(vm.thispayer).then(function(zdata){$log.debug("getPayments returned",zdata),vm.paygridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $log.debug("Caught an error getPayments after payStripeInvoice:",error),vm.thisInvoice=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),Notification.success({message:vm.message,delay:5e3}),vm.stripe):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("payStripeInvoice failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function setgridOptions(){var paytbl="",payviewtbl="";paytbl='<div class="ui-grid-cell-contents">',paytbl+="<span>  ",paytbl+='<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">',paytbl+='<input type="hidden" name="cmd" value="_cart">',paytbl+='<input type="hidden" name="add" value="1">',paytbl+='  <input type="hidden" name="business" value="mark@natickmartialarts.com">',paytbl+='  <input type="hidden" name="custom" value="{{row.entity.invoice}}">',paytbl+='  <input type="hidden" name="invoice" value="{{row.entity.invoice}}">',paytbl+='    <input type="hidden" name="item_name"',paytbl+='        value="{{row.entity.payfor}} - for {{row.entity.studentname}}">',paytbl+='   <input type="hidden" name="no_shipping" value="1">',paytbl+='   <input type="hidden" name="amount" value="{{row.entity.amt}}">',paytbl+='   <input type="hidden" name="quantity" value="1">',paytbl+='    <input type="hidden" name="item_name_1"',paytbl+='        value="{{row.entity.payfor}} - for {{row.entity.studentname}}">',paytbl+='   <input type="hidden" name="currency_code" value="USD">',paytbl+='    <input type="hidden" name="shopping_url"',paytbl+='        value="http://vdojotest.villaris.us/#/table-basic-paymenttracking/id/{{row.entity.optionalid}}">        ',paytbl+='     <input type="image" name="submit"',paytbl+='           src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_SM.gif" style="width:50%;"  alt="Add to Cart">',paytbl+='       <img alt="" width="1" height="1"  src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" >',paytbl+="    </form>",paytbl+="</span></div>",payviewtbl='<div class="ui-grid-cell-contents">',payviewtbl+="<span>  ",payviewtbl+='<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">',payviewtbl+='<input type="hidden" name="cmd" value="_cart">',payviewtbl+='<input type="hidden" name="display" value="1">',payviewtbl+='  <input type="hidden" name="business" value="mark@natickmartialarts.com">',payviewtbl+='     <input type="image" name="submit"',payviewtbl+='           src="https://www.paypalobjects.com/en_US/i/btn/btn_viewcart_SM.gif" style="width:50%;"  alt="View Cart">',payviewtbl+='       <img alt="" width="1" height="1"  src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" >',payviewtbl+="    </form>",payviewtbl+="</span></div>";var ctpl='<div class="ui-grid-cell-contents">';ctpl+='<span> <a ng-click="grid.appScope.removeInvoice(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  >',ctpl+='<i class="far fa-trash-alt"></i>&nbsp;</a></span>',ctpl+='<span> <a ng-click="grid.appScope.emailInvoice(row.entity)" role="button" class="btn btn-green" style="padding:  0px 14px;"  >',ctpl+='<i class="far fa-envelope"></i>&nbsp;</a></span>',ctpl+='<span> <a ng-click="grid.appScope.showCreditCard(row.entity)" role="button" class="btn btn-blue " style="padding:  0px 14px;"  >',ctpl+='<i class="fab fa-cc-stripe fa-2x"></i></a></span>',ctpl+="</div>",vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,enableGridMenu:!0,enableColumnResizing:!0,enableRowSelection:!0,showGridFooter:!0,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"invoice",displayName:"Invoice"},{field:"payfor",displayName:"Description",enableCellEdit:!0},{field:"paymentid"},{field:"amt",displayName:"Amount",enableCellEdit:!0,cellClass:"currency",cellFilter:"currencyFilter:this",cellEditableCondition:function($scope){return"closed"!==$scope.row.entity.status}},{field:"invdate",displayName:"Date",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,type:"date",cellEditableCondition:function($scope){return"closed"!==$scope.row.entity.status},cellFilter:'textDate:"MM/dd/yyyy"',editableCellTemplate:'<div><form name="inputForm"><div ui-grid-edit-datepicker ng-class="\'colt\' + col.uid"></div></form></div>'},{field:"status",displayName:"Status",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.invStatuses,filter:{options:vm.invStatuses}},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:ctpl},{field:"id",displayName:"Payment",enableCellEdit:!1,visible:!isStripe(),cellTemplate:paytbl},{field:"id",displayName:"View Cart",visible:!isStripe(),enableCellEdit:!1,cellTemplate:payviewtbl}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateInvoice(rowEntity,"Update")})}}}function setpaygridOptions(){vm.paygridOptions={enableFiltering:!0,enableCellEditOnFocus:!1,enableGridMenu:!0,enableColumnResizing:!0,showGridFooter:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.payinitialLength,rowHeight:vm.payrowheight,enableRowSelection:!0,appScopeProvider:vm,columnDefs:[{field:"invoice",displayName:"Invoice"},{field:"paymentid"},{field:"inv_amt",displayName:" Inv Amount",enableCellEdit:!1,cellClass:"currency",cellFilter:"currencyFilter:this"},{field:"invdate",displayName:"Inv Date",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,type:"date",cellFilter:'date:"MM/dd/yyyy"'},{field:"payment_gross",displayName:" Pay Amount",enableCellEdit:!1,cellClass:"currency",cellFilter:"currencyFilter:this"},{field:"npdate",displayName:"Pay Date",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1,type:"date",cellFilter:'date:"MM/dd/yyyy"'},{field:"inv_status",displayName:"Inv Status",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1},{field:"npstatus",displayName:"Pay Status",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!1},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.showPayDetails(row)" role="button" class="btn btn-green" style="padding:  0px 14px;"  ><i class="fas fa-book"></i>&nbsp;Details</a></span></div>'}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.paygridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setpayGridLength(pageSize),vm.paygridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){})}}}var vm=this;vm.isCollapsed=!0,vm.getPayersPartial=getPayersPartial,vm.refreshStudents=refreshStudents,vm.getPayerStudent=getPayerStudent,vm.getInvoices=getInvoices,vm.getPayments=getPayments,vm.removeInvoice=removeInvoice,vm.showPayDetails=showPayDetails,vm.showCreditCard=showCreditCard,vm.calcInvoice=calcInvoice,vm.addInvoice=addInvoice,vm.emailInvoice=emailInvoice,vm.payStripeInvoice=payStripeInvoice,vm.dateopen=dateopen,vm.formatter=formatter,vm.payers=[],vm.refreshstudentlist=[],vm.invoicelist=[],vm.studentpick,vm.thisInvoice=[],vm.Invoice={},vm.payerName,vm.thispayer="",vm.calcinvoice=[],vm.gridOptions={},vm.gridApi,vm.paygridOptions={},vm.paygridApi,
vm.limits=[3,5,10,20,50,100,200],vm.gridLength={},vm.paygridLength={},vm.initialLength=3,vm.payinitialLength=3,vm.rowheight=50,vm.headerheight=140,vm.payrowheight=25,vm.payheaderheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),vm.getpayGridLength=getpayGridLength,setpayGridLength(vm.payinitialLength),vm.invStatuses=[{id:"closed",value:"closed",order:1},{id:"succeeded:paid",value:"succeeded:paid",order:2},{id:"new",value:"new",order:3}],vm.status={opened:!1},vm.thispayment={},vm.Invoice.status=vm.invStatuses[0].value,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-paymenttracking started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-paymenttracking dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("table-basic-paymenttracking.js"),setgridOptions(),setpaygridOptions()}angular.module("ng-admin").controller("PaymentTrackingController",PaymentTrackingController),PaymentTrackingController.$inject=["$scope","$log","ClassServices","StudentServices","Notification","Util","uiGridConstants","moment","$q","$uibModal","$routeParams","$rootScope"]}(window,window.angular,window.$,window.Stripe),function(window,angular){function ProgramTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getProgram().then(function(){$log.debug("getProgram activate done"),getClassTypes().then(function(){$log.debug("getClassTypes activate done",vm.classTypes),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $q.reject(error)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeProgram(input){$log.debug("removeProgram entered",input);var path="../v1/program",thedata={id:input.id},data={};return data.ProgramExistsList={},ClassServices.removeProgram(thedata,path).then(function(data){return $log.debug("removeProgram returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getProgram().then(function(zdata){$log.debug("getProgram returned",zdata)},function(error){return $log.debug("Caught an error getProgram after remove:",error),vm.thisProgram=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.programFKExists=data.ProgramExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeProgram failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addProgram(rowEntity){updateProgram(rowEntity,"Add")}function updateProgram(rowEntity,updatetype){var updpath="../v1/program",thedata={id:rowEntity.id,"class":rowEntity["class"],classType:rowEntity.classType,_12MonthPrice:rowEntity._12MonthPrice,_6MonthPrice:rowEntity._6MonthPrice,_2ndPersonDiscount:rowEntity._2ndPersonDiscount,_3rdPersonDiscount:rowEntity._3rdPersonDiscount,_4thPersonDiscount:rowEntity._4thPersonDiscount,MonthlyPrice:rowEntity.MonthlyPrice,WeeklyPrice:rowEntity.WeeklyPrice,SpecialPrice:rowEntity.SpecialPrice,sortKey:rowEntity.sortKey};return $log.debug("about updateProgram ",thedata,updpath,updatetype),ClassServices.updateProgram(updpath,thedata).then(function(data){return $log.debug("updateProgram returned data"),$log.debug(data),vm.thisProgram=data,$log.debug(vm.thisProgram),$log.debug(vm.thisProgram.message),vm.message=vm.thisProgram.message,"undefined"!=typeof vm.thisProgram&&vm.thisProgram.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getProgram().then(function(zdata){$log.debug("getProgram returned",zdata)},function(error){return $log.debug("Caught an error getProgram after remove:",error),vm.thisProgram=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisProgram):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateProgram failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getProgram(){$log.debug("getProgram entered");var path="../v1/program";return ClassServices.getPrograms(path).then(function(data){$log.debug("getPrograms returned data"),$log.debug(data),vm.gridOptions.data=data.Programlist,vm.program.sortKey=parseInt(Util.maxObjArr(data.Programlist,"sortKey"),10)+1},function(error){return $log.debug("Caught an error getPrograms:",error),vm.Programlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getClassTypes(){$log.debug("getClassTypes entered");var path="../v1/classtypes";return ClassServices.getClassTypes(path).then(function(data){return $log.debug("getClassTypes returned data"),$log.debug(data),vm.classTypes=data.ClassTypelist,vm.program.classType=vm.classTypes[0].value,vm.classTypes},function(error){return $log.debug("Caught an error getClassTypes:",error),vm.classTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"class",displayName:"Program",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"classType",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classTypes,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classTypes}},{field:"WeeklyPrice",displayName:"WeeklyPrice",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"MonthlyPrice",displayName:"MonthlyPrice",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"_6MonthPrice",displayName:"6Month Factor",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"_12MonthPrice",displayName:"12Month Factor",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"_2ndPersonDiscount",displayName:"2nd person discount",enableCellEdit:!0},{field:"_3rdPersonDiscount",displayName:"3rd person discount",enableCellEdit:!0},{field:"_4thPersonDiscount",displayName:"4th person discount",enableCellEdit:!0},{field:"SpecialPrice",displayName:"SpecialPrice",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"sortKey",displayName:"Sort Order",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeProgram(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateProgram(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getProgram=getProgram,vm.removeProgram=removeProgram,vm.addProgram=addProgram,vm.updateProgram=updateProgram,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.program={},vm.classTypes=[],vm.thisProgram=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-program started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-program dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-program.js")}angular.module("ng-admin").controller("ProgramTableBasicController",ProgramTableBasicController),ProgramTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(window,angular){function RankTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getRank().then(function(){$log.debug("getClass activate done"),$q.all([getRankGroups().then(function(){$log.debug("getRankGroups activate done",vm.ranks)},function(error){return $q.reject(error)}),getRankTypes().then(function(){$log.debug("getrankTypes activate done",vm.rankTypes)},function(error){return $q.reject(error)})]).then(function(){$log.debug(" activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeRank(input){$log.debug("removeRank entered",input);var path="../v1/rrank",thedata={rankid:input.rankid},data={};return data.RankExistsList={},ClassServices.removeRank(thedata,path).then(function(data){return $log.debug("removeRank returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getRank().then(function(zdata){$log.debug("getRank returned",zdata)},function(error){return $log.debug("Caught an error getRank after remove:",error),vm.thisRank=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),vm.RankFKExists=data.RankExistsList,$q.reject(data))})["catch"](function(e){throw $log.debug("removeRank failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addRank(rowEntity){updateRank(rowEntity,"Add")}function updateRank(rowEntity,updatetype){var updpath="../v1/rrank",thedata={rankid:rowEntity.rankid,ranklist:rowEntity.ranklist,ranktype:rowEntity.ranktype,rankGroup:rowEntity.rankGroup,sortkey:rowEntity.sortkey,alphasortkey:rowEntity.alphasortkey,AttendPromoteTarget:rowEntity.AttendPromoteTarget,DurationPromoteTarget:rowEntity.DurationPromoteTarget,nextsortkey:rowEntity.nextsortkey};return $log.debug("about updateRank ",thedata,updpath,updatetype),ClassServices.updateRank(updpath,thedata).then(function(data){return $log.debug("updateRank returned data"),$log.debug(data),vm.thisRank=data,$log.debug(vm.thisRank),$log.debug(vm.thisRank.message),vm.message=vm.thisRank.message,"undefined"!=typeof vm.thisRank&&vm.thisRank.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getRank().then(function(zdata){$log.debug("getRank returned",zdata)},function(error){return $log.debug("Caught an error getRank after remove:",error),vm.thisRank=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisRank):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateRank failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getRank(){$log.debug("getRank entered");var path="../v1/rrank";return ClassServices.getAllRanks(path).then(function(data){$log.debug("getAllRanks returned data"),$log.debug(data),vm.gridOptions.data=data.Ranklist,vm.Rank.sortkey=parseInt(Util.maxObjArr(data.Ranklist,"sortKey"),10)+1},function(error){return $log.debug("Caught an error getRanks:",error),vm.Rank=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getRankGroups(){$log.debug("getRankGroups entered");var path="../v1/rankgroups";return ClassServices.getRankGroups(path).then(function(data){return $log.debug("getRankGroups returned data"),$log.debug(data),vm.rankGroups=data.RankGrouplist,vm.Rank.rankgroup=vm.rankGroups[0].value,vm.rankGroups},function(error){return $log.debug("Caught an error getRankGroups:",error),vm.rankGroups=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getRankTypes(){$log.debug("getRankTypes entered");var path="../v1/ranktypes";return ClassServices.getRankTypes(path).then(function(data){return $log.debug("getRankTypes returned data"),$log.debug(data),vm.rankTypes=data.RankTypelist,vm.Rank.ranktype=String(vm.rankTypes[0].value),vm.rankTypes},function(error){return $log.debug("Caught an error getRankTypes:",error),vm.rankTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"ranklist",displayName:"Rank",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"ranktype",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"value",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.rankTypes,filter:{options:vm.rankTypes}},{field:"rankGroup",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.rankGroups,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.rankGroups}},{field:"sortkey",displayName:"sortkey",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"nextsortkey",displayName:"nextsortkey",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"alphasortkey",displayName:"alphasortkey Factor",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"AttendPromoteTarget",displayName:"AttendPromoteTarget",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"DurationPromoteTarget",displayName:"Duration Promote Target",enableCellEdit:!0},{field:"rankid",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeRank(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateRank(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getRank=getRank,vm.removeRank=removeRank,vm.addRank=addRank,vm.updateRank=updateRank,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Rank={},vm.rankGroups=[],vm.rankTypes=[],vm.thisRank=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-rank started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-rank dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-rank.js")}angular.module("ng-admin").controller("RankTableBasicController",RankTableBasicController),RankTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(window,angular){function ScheduleTableBasicController($log,$q,$scope,$interval,AttendanceServices,CalendarServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getSchedule().then(function(){$log.debug("getSchedule activate done"),getClasses().then(function(){$log.debug("getClasses activate done"),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL),vm.schedule.TakeAttendance="Yes",vm.schedule.dow="Monday",vm.schedule.startT=moment().format("HH:mm"),vm.schedule.endT=moment().add(1,"hours").format("HH:mm"),vm.schedule.classid=String(vm.classhashlist[0].id),changeclass()},function(error){return $q.reject(error)})},function(error){return $q.reject(error)}),getAgeRangeList().then(function(){$log.debug("returned from getAgeRangeList")})}function changeclass(){vm.schedule.description=Util.getByValue(vm.classhashlist,vm.schedule.classid,"id","value")}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function getAgeRangeList(){var path="../v1/ageranges";return CalendarServices.getAgeRangeList(path).then(function(data){if($log.debug("getAgeRangeList returned data"),$log.debug(data.agerangelist),("undefined"==typeof vm.agerangelist||data.error===!0)&&"undefined"!=typeof data)return Notification.error({message:data.message,delay:5e3}),$q.reject(data);vm.agerangelist=data.agerangelist;for(var iter=0,len=vm.agerangelist.length;iter<len;iter++)vm.agerangelist[iter].value=String(vm.agerangelist[iter].agerange),vm.agerangelist[iter].id=String(vm.agerangelist[iter].agerange);return vm.agerangelist})}function changetime(){vm.schedule.timerange=vm.schedule.startT+" to "+vm.schedule.endT}function removeSchedule(input){$log.debug("removeSchedule entered",input);var path="../v1/schedule",thedata={ID:input.ID};return AttendanceServices.removeSchedule(thedata,path).then(function(data){return $log.debug("removeSchedule returned data"),$log.debug(data),getSchedule().then(function(zdata){$log.debug("getSchedule returned",zdata)},function(error){return $log.debug("Caught an error getSchedule after remove:",error),vm.thisschedule=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data})["catch"](function(e){throw $log.debug("removeSchedule failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addSchedule(rowEntity){updSchedule(rowEntity,"Add")}function updSchedule(input,type){$log.debug("updSchedule entered",input);var output={ID:input.ID,DayOfWeek:input.dow,TimeRange:input.timerange,AgeRange:input.agerange,Description:input.description,TakeAttendance:input.TakeAttendance?"Yes":"No",TimeStart:input.startT,TimeEnd:input.endT,sortorder:input.sortorder,classid:input.classid};updateSchedule(output,type)}function updateSchedule(rowEntity,updatetype){var updpath="../v1/schedule",thedata={ID:rowEntity.ID,DayOfWeek:rowEntity.DayOfWeek,TimeRange:rowEntity.TimeRange,AgeRange:rowEntity.AgeRange,Description:rowEntity.Description,TakeAttendance:rowEntity.TakeAttendance,TimeStart:rowEntity.TimeStart,TimeEnd:rowEntity.TimeEnd,sortorder:rowEntity.sortorder,classid:rowEntity.classid};return $log.debug("about updateSchedule ",rowEntity,updpath,updatetype),AttendanceServices.updateSchedule(updpath,thedata).then(function(data){return $log.debug("updateSchedule returned data"),$log.debug(data),vm.thisschedule=data,$log.debug(vm.thisschedule),$log.debug(vm.thisschedule.message),vm.message=vm.thisschedule.message,"undefined"!=typeof vm.thisschedule&&vm.thisschedule.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getSchedule().then(function(zdata){$log.debug("getSchedule returned",zdata)},function(error){return $log.debug("Caught an error getSchedule after update:",error),vm.thisschedule=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisschedule):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateSchedule failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getSchedule(){$log.debug("getSchedule entered");var path="../v1/schedule",myDatea=new Date,myDateb=new Date;return AttendanceServices.getSchedules(path).then(function(data){$log.debug("getSchedules returned data"),$log.debug(data);for(var iter=0,len=data.Schedulelist.length;iter<len;iter++)myDatea=new Date,myDatea.setHours(parseInt(data.Schedulelist[iter].TimeStart.split(":")[0],10)),myDatea.setMinutes(parseInt(data.Schedulelist[iter].TimeStart.split(":")[1],10)),data.Schedulelist[iter].startT=moment(myDatea).format("hh:mm").toString(),myDateb=new Date,myDateb.setHours(parseInt(data.Schedulelist[iter].TimeEnd.split(":")[0],10)),myDateb.setMinutes(parseInt(data.Schedulelist[iter].TimeEnd.split(":")[1],10)),data.Schedulelist[iter].endT=moment(myDateb).format("hh:mm").toString();vm.schedule.sortorder=parseInt(Util.maxObjArr(data.Schedulelist,"sortorder"),10)+1,vm.gridOptions.data=data.Schedulelist},function(error){return $log.debug("Caught an error getSchedules:",error),vm.Schedulelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getClasses(){$log.debug("getClasses entered");var path="../v1/classes";return AttendanceServices.getClasses(path).then(function(data){$log.debug("getClasses returned data"),$log.debug(data),vm.classlist=data.ClassList,vm.classhashlist.push({value:"No Scheduled Classes",id:0});for(var iter=0,len=data.ClassList.length;iter<len;iter++)vm.classhashlist.push({value:data.ClassList[iter]["class"],id:data.ClassList[iter].classid});return vm.classlist},function(error){return $log.debug("Caught an error getClasses:",error),vm.classlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,appScopeProvider:vm,rowHeight:vm.rowheight,showGridFooter:!1,enableColumnResizing:!0,columnDefs:[{field:"DayOfWeek",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"label",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.weekschedule,filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.weekschedule}},{field:"TimeRange",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"AgeRange",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editDropdownIdLabel:"id",editDropdownValueLabel:"value",editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownOptionsArray:vm.agerangelist},{field:"classid",displayName:"Class",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.classhashlist,filterHeaderTemplate:"templates/states/filtercoltemplate.html",filter:{options:vm.classhashlist}},{field:"Description",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"TimeStart",displayName:"StartTime",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,type:"string",cellFilter:"date:'HH:mm'"},{field:"TimeEnd",displayName:"EndTime",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,cellFilter:"date:'HH:mm'"},{field:"TakeAttendance",displayName:"TakeAttendance",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"label",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.yesno,filter:{type:uiGridConstants.filter.SELECT,selectOptions:vm.yesno}},{field:"sortorder",enableCellEdit:!0,enableFiltering:!0},{field:"ID",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeSchedule(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateSchedule(rowEntity,"Update")})}}}var $=angular.element,vm=this;vm.isCollapsed=!0,vm.getSchedule=getSchedule,vm.addSchedule=addSchedule,vm.removeSchedule=removeSchedule,vm.updSchedule=updSchedule,vm.changeclass=changeclass,vm.changetime=changetime,vm.agerangelist={},vm.gridOptions={},vm.gridApi,vm.limits=[1,3,5,10,20,50,100,200],vm.weekschedule=[{value:"Sunday",label:"Sunday"},{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"}],vm.yesno=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],vm.classlist=[],vm.classhashlist=[],vm.schedule={},vm.thisschedule=[],vm.gridLength={},vm.initialLength=3,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-schedule started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-schedule dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-schedule.js"),$scope.$watch("vm.schedule.startT",function(value){value&&changetime()},!0),$scope.$watch("vm.schedule.endT",function(value){value&&changetime()},!0)}angular.module("ng-admin").controller("ScheduleTableBasicController",ScheduleTableBasicController),ScheduleTableBasicController.$inject=["$log","$q","$scope","$interval","AttendanceServices","CalendarServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(){function StudentsTableBasicController($scope,$log,StudentServices,$q){function setLimit(thelimit){$log.debug("setLimit",thelimit),vm.limit=thelimit}function setContactType(thetype){$log.debug("thetype",thetype),vm.thecontacttype=thetype}function setRank(therank){$log.debug("setRank",therank),vm.Rank=therank}function setStatus(thestatus){vm.status=thestatus}function getStatus(){return vm.status}function getRank(){return $log.debug("getRank"),vm.Rank}function getContactType(){return $log.debug("getContactType"),vm.thecontacttype}function getLimit(){return $log.debug("getLimit"),vm.limit}function activate(){$q.all([getStudentLists().then(function(){$log.debug("getStudentLists ContactTypeList",vm.StudentList.ContactTypeList),$log.debug("getStudentLists ClassStatusList",vm.StudentList.ClassStatusList),setContactType(vm.StudentList.ContactTypeList[0].listvalue),setStatus(vm.StudentList.ClassStatusList[0].listvalue),setLimit(vm.limits[1])}),getRankList().then(function(){$log.debug("getRankList",vm.RankList),setRank("All"),$log.debug("setRank",vm.Rank)})]).then(function(){$log.debug("getAllStudents activate returned"),vm.doneActivate=!0})}function getRankList(){var path="../v1/ranklist";return StudentServices.getRankList(path).then(function(data){return $log.debug("getRankList returned data"),$log.debug(data),vm.RankList=data,vm.RankList})}function getStudentLists(){var path="../v1/studentlists";return StudentServices.getStudentLists(path).then(function(data){return $log.debug("getStudentLists returned data"),$log.debug(data),vm.StudentList=data,vm.StudentList})}function refreshStudents(theinput){return StudentServices.refreshStudents(theinput).then(function(data){return $log.debug("controller refreshStudents returned data"),$log.debug(data),vm.refreshstudentlist=data,$log.debug("controller refreshstudentlist service data",vm.refreshstudentlist),vm.refreshstudentlist})}function editStudentFromPick(item){vm.eventResult={item:item},$log.debug("editStudentFromPick",vm.eventResult)}var vm=this;vm.setLimit=setLimit,vm.setRank=setRank,vm.getRank=getRank,vm.activate=activate,vm.getContactType=getContactType,vm.getLimit=getLimit,vm.getStatus=getStatus,vm.setStatus=setStatus,vm.refreshStudents=refreshStudents,vm.editStudentFromPick=editStudentFromPick,vm.disable=void 0,vm.Rank="",vm.limit=20,vm.status="Active",vm.limits=[10,20,50,100,200,500],vm.statuses=[],vm.contacttypes,vm.RankList=[],vm.StudentList=[],vm.thecontacttype="Student",vm.doneActivate=!1,vm.refreshstudentlist=[],vm.studentpick,vm.eventResult,vm.isCollapsed=!0,vm.doneActivate||activate()}function ctrlDualList($scope,$log,StudentServices,$routeParams,uiGridConstants,$window,Notification,$controller,$timeout){function toggleFiltering(){$log.debug("toggleFiltering"),vmDual.gridOptions.enableFiltering=!vmDual.gridOptions.enableFiltering}function dualactivate(){$log.debug("activate"),vmDual.vm.activate(),getAllStudents().then(function(){$log.debug("activated StudentsTableBasic view")})}function requery(){$log.debug("requery entered"),getAllStudents().then(function(){$log.debug("refreshed students")})}function getUserPrefCols(){return $log.debug("getUserPrefCols entered"),StudentServices.getUserPrefCols(vmDual.userprefpath).then(function(data){$log.debug("getUserPrefCols returned data"),vmDual.userprefcols=data.userprefcols,$log.debug(vmDual.userprefcols);for(var foundit,j=0,lenu=vmDual.userData.length;j<lenu;j++){foundit=!1;for(var i=0,len=vmDual.userprefcols.length;i<len;i++)if(vmDual.userData[j].colname==vmDual.userprefcols[i].prefcolumn){vmDual.listA.push(vmDual.userData.slice(j,j+1)[0]),foundit=!0;break}foundit||vmDual.listB.push(vmDual.userData.slice(j,j+1)[0])}return $log.debug("listA",vmDual.listA),$log.debug("listB",vmDual.listB),setGridOptions(),dualactivate(),vmDual.userprefcols})}function submit(){$log.debug("hit submit"),createUserPrefCols().then(function(){$log.debug("createUserPrefCols ready to close")})["catch"](function(e){alert("try again",e)})}function colreset(){$log.debug("hit reset"),vmDual.listA=[],vmDual.listB=[];var thisdta,foundit;$log.debug("dta:",vmDual.userData);for(var j=0,lenu=vmDual.userData.length;j<lenu;j++)$log.debug("loop entered",vmDual.userData[j]["default"]),foundit=!1,"true"!==vmDual.userData[j]["default"]?foundit||(thisdta=vmDual.userData.slice(j,j+1)[0],vmDual.listB.push(thisdta)):(thisdta=vmDual.userData.slice(j,j+1)[0],$log.debug("thisdta listA",thisdta),vmDual.listA.push(thisdta),foundit=!0);$log.debug("listA",vmDual.listA),createUserPrefCols().then(function(){$log.debug("createUserPrefCols ready to close")})["catch"](function(e){alert("try again",e)})}function createUserPrefCols(){return $log.debug("about createUserPrefCols ",vmDual.listA),StudentServices.createUserPrefCols(vmDual.userprefpath,vmDual.listA).then(function(data){return $log.debug("createUserPrefCols returned data"),$log.debug(data),vmDual.thecolumns=data,$log.debug(vmDual.thecolumns),$log.debug(vmDual.thecolumns.message),vmDual.message=vmDual.thecolumns.message,$window.location.reload(),
vmDual.thecolumns})["catch"](function(e){throw $log.debug("createUserPrefCols failure:"),$log.debug("error",e),vmDual.message=e,Notification.error({message:e,delay:5e3}),e})}function getAllStudents(){$log.debug("getAllStudents tb");var refreshpath=encodeURI(vmDual.path+"?contacttype="+vmDual.vm.getContactType()+"&thelimit="+vmDual.vm.getLimit()+"&status="+vmDual.vm.getStatus()+"&therank="+vmDual.vm.getRank());return $log.debug("refreshtheAttendance path:",refreshpath),StudentServices.getAllStudents(refreshpath).then(function(data){return vmDual.gridOptions.data=data.students,vmDual.gridOptions.data})}function setGridOptions(){vmDual.gcolumns=[],$log.debug("setGridOptions col count",vmDual.listA.length);for(var i=0,len=vmDual.listA.length;i<len;i++)"ID"!=vmDual.listA[i].colname&&vmDual.gcolumns.push({field:vmDual.listA[i].colname,enableFiltering:!0,headerCellClass:vmDual.highlightFilteredHeader,enableCellEdit:!1});vmDual.gcolumns.push({name:"ID",displayName:"Edit",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a role="button" class="btn btn-blue" style="padding:  0px 14px;" href="./#/form-layouts-editstudent/id/{{COL_FIELD}}" ><i class="fa fa-edit"></i>&nbsp; Edit</a></span></div>'}),vmDual.gridOptions={enableFiltering:!0,paginationPageSizes:[25,50,75],paginationPageSize:25,columnDefs:vmDual.gcolumns,rowHeight:15,showGridFooter:!0,onRegisterApi:function(gridApi){$log.debug("vmDual gridapi onRegisterApi"),vmDual.gridApi=gridApi}},$log.debug("gcolumns",vmDual.gcolumns),$log.debug("gridOptions",vmDual.gridOptions)}function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return $log.debug("highlightFilteredHeader"),col.filters[0].term?"header-filtered":""}function arrayObjectIndexOf(myArray,searchTerm,property){$log.debug("arrayObjectIndexOf");for(var i=0,len=myArray.length;i<len;i++)if(myArray[i][property]===searchTerm)return i;return-1}function aToB(){$log.debug("aToB");var i;for(i in vmDual.selectedA)if(vmDual.selectedA.hasOwnProperty(i)){var moveId=arrayObjectIndexOf(vmDual.items,vmDual.selectedA[i],"id");vmDual.listB.push(vmDual.items[moveId]);var delId=arrayObjectIndexOf(vmDual.listA,vmDual.selectedA[i],"id");vmDual.listA.splice(delId,1)}reset()}function bToA(){$log.debug("bToA");var i;for(i in vmDual.selectedB)if(vmDual.selectedB.hasOwnProperty(i)){var moveId=arrayObjectIndexOf(vmDual.items,vmDual.selectedB[i],"id");vmDual.listA.push(vmDual.items[moveId]);var delId=arrayObjectIndexOf(vmDual.listB,vmDual.selectedB[i],"id");vmDual.listB.splice(delId,1)}reset()}function reset(){vmDual.selectedA=[],vmDual.selectedB=[],vmDual.toggle=0}function toggleA(){var i;if(vmDual.selectedA.length>0)vmDual.selectedA=[];else for(i in vmDual.listA)vmDual.listA.hasOwnProperty(i)&&vmDual.selectedA.push(vmDual.listA[i].id)}function toggleB(){var i;if(vmDual.selectedB.length>0)vmDual.selectedB=[];else for(i in vmDual.listB)vmDual.listB.hasOwnProperty(i)&&vmDual.selectedB.push(vmDual.listB[i].id)}function drop(dragEl,dropEl,direction){var drag=angular.element(dragEl),ela=(angular.element(dropEl),drag.attr("id"),document.getElementById(dragEl)),el=ela.getElementsByTagName("input");angular.element(el).attr("checked")||angular.element(el).triggerHandler("click"),direction(),$scope.$digest()}var vmDual=this;vmDual.arrayObjectIndexOf=arrayObjectIndexOf,vmDual.getUserPrefCols=getUserPrefCols,vmDual.highlightFilteredHeader=highlightFilteredHeader,vmDual.getAllStudents=getAllStudents,vmDual.createUserPrefCols=createUserPrefCols,vmDual.toggleFiltering=toggleFiltering,vmDual.submit=submit,vmDual.requery=requery,vmDual.colreset=colreset,vmDual.aToB=aToB,vmDual.bToA=bToA,vmDual.reset=reset,vmDual.toggleA=toggleA,vmDual.toggleB=toggleB,vmDual.drop=drop,vmDual.userprefpath="../v1/userprefcols/allstudents",vmDual.path="../v1/students",vmDual.gcolumns=[],vmDual.thecolumns=[],vmDual.selectedA=[],vmDual.selectedB=[],vmDual.userprefcols=[],vmDual.listA=[],vmDual.listB=[],vmDual.checkedA=!1,vmDual.checkedB=!1,vmDual.gridOptions={},vmDual.gridApi=void 0,vmDual.userData=[{id:1,colname:"FirstName","default":"true"},{id:2,colname:"ID","default":"true"},{id:3,colname:"LastName","default":"true"},{id:4,colname:"Email","default":"true"},{id:5,colname:"Email2","default":"false"},{id:6,colname:"Parent","default":"false"},{id:7,colname:"Phone","default":"true"},{id:8,colname:"AltPhone","default":"false"},{id:9,colname:"Address","default":"false"},{id:10,colname:"City","default":"false"},{id:11,colname:"State","default":"false"},{id:12,colname:"ZIP","default":"false"},{id:13,colname:"Notes","default":"false"},{id:14,colname:"Birthday","default":"false"},{id:15,colname:"BeltSize","default":"false"},{id:16,colname:"InstructorPaymentFree","default":"false"},{id:17,colname:"ContactType","default":"false"},{id:18,colname:"InstructorFlag","default":"false"},{id:19,colname:"quickbooklink","default":"false"},{id:20,colname:"instructorTitle","default":"false"},{id:21,colname:"sex","default":"false"},{id:22,colname:"medicalConcerns","default":"false"},{id:23,colname:"GuiSize","default":"false"},{id:24,colname:"studentclassstatus","default":"false"},{id:25,colname:"LastPromoted","default":"false"},{id:26,colname:"currentrank","default":"false"},{id:27,colname:"ranktype","default":"false"}],vmDual.items=vmDual.userData,vmDual.vm=$controller("StudentsTableBasicController as vm",{$scope:$scope}),$log.debug("vmDual"),getUserPrefCols()}angular.module("ng-admin").controller("StudentsTableBasicController",StudentsTableBasicController).controller("ctrlDualList",ctrlDualList),StudentsTableBasicController.$inject=["$scope","$log","StudentServices","$q"],ctrlDualList.$inject=["$scope","$log","StudentServices","$routeParams","uiGridConstants","$window","Notification","$controller","$timeout"]}(),function(window,angular,pdfMake){function TestCandidateTableBasicController($routeParams,$log,TestingServices,CalendarServices,$location,$window,$q,$scope,$route,Notification,uiGridConstants,uiGridGroupingConstants,$timeout,moment,UserServices,TemplateServices,AttendanceServices,textAngularManager,$uibModal,_){function setSlide(direction){"left"==direction&&(vm.styleright="770px",vm.styleleft="0px",vm.gridright=10,vm.gridleft=0,vm.showright=!0,vm.showleft=!1),"right"==direction&&(vm.styleright="0px",vm.styleleft="770px",vm.gridright=0,vm.gridleft=10,vm.showright=!1,vm.showleft=!0),"center"==direction&&(vm.showright=!0,vm.showleft=!0)}function createTestChecklist(){if(vm.selected===!1){var error="no rows selected for test candidate";return void Notification.error({message:error,delay:5e3})}getGeneralColDefs("test","checklist").then(function(){function myexporterPdfFooter(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}}function myexporterPdfCustomFormatter(docDefinition){return docDefinition.styles.headerStyle={fontSize:18,bold:!0,margin:5},docDefinition.styles.footerStyle={fontSize:10,bold:!0,margin:15},docDefinition.content[0].layout={fillColor:function(i,node){return i%2===0?"#CCCCCC":null}},docDefinition}$log.debug("getGeneralColDefs ready");var saveResgridOptions=angular.copy(vm.resgridOptions),vmTestRptmodal=vm,testDate=vmTestRptmodal.TestCandidateSelected.name,testTime=vmTestRptmodal.testdatelist.starttime,rptGridOptions={};rptGridOptions=saveResgridOptions,rptGridOptions.data=vm.selectedStudents,rptGridOptions.enableGridMenu=!0,rptGridOptions.columnDefs=vm.checklistcoldef.columns,rptGridOptions.exporterPdfDefaultStyle={fontSize:7},rptGridOptions.exporterPdfTableStyle={margin:[15,15,15,15]},rptGridOptions.exporterPdfTableHeaderStyle={fontSize:9,bold:!0,italics:!0,color:"blue"},rptGridOptions.exporterPdfHeader={text:"Student/Belt Test Checklist for testing on: "+testDate,style:"headerStyle"},rptGridOptions.exporterPdfFooter=myexporterPdfFooter,rptGridOptions.exporterPdfCustomFormatter=myexporterPdfCustomFormatter,rptGridOptions.exporterPdfOrientation="landscape",rptGridOptions.exporterPdfPageSize="LETTER",rptGridOptions.exporterPdfMaxGridWidth=600,TestingServices.setGrid(rptGridOptions,vm.resgridApi,testDate,testTime),vmTestRptmodal.animationsEnabled=!0,vmTestRptmodal.modalInstance=void 0,vmTestRptmodal.retvlu="",vmTestRptmodal.modalInstance=$uibModal.open({animation:vmTestRptmodal.animationsEnabled,templateUrl:"templates/states/testRpt.html",controller:"ModalTestRptInstanceController as vmnew",size:"lg",resolve:{classname:function(){return $log.debug("return from open"),vmTestRptmodal.retvlu}}}),vmTestRptmodal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),vmTestRptmodal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})})["catch"](function(e){$log.debug("createTestChecklist error in activate",e)})}function createPromoPostcards(){if(vm.selected===!1){var error="no rows selected for createPromoPostcards";return void Notification.error({message:error,delay:5e3})}getGeneralColDefs("test","promopostcard").then(function(){function myexporterPdfFooter(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}}function myexporterPdfCustomFormatter(docDefinition){return docDefinition.styles.headerStyle={fontSize:18,bold:!0,margin:5},docDefinition.styles.footerStyle={fontSize:10,bold:!0,margin:15},docDefinition.content[0].layout={fillColor:function(i,node){return i%2===0?"#CCCCCC":null}},docDefinition}$log.debug("getGeneralColDefs ready createPromoPostcards");var saveResgridOptions=angular.copy(vm.resgridOptions),vmTestRptmodal=vm,testDate=vmTestRptmodal.TestCandidateSelected.name,testTime=vmTestRptmodal.testdatelist.starttime,rptGridOptions={};rptGridOptions=saveResgridOptions,rptGridOptions.data=vm.selectedStudents,rptGridOptions.enableGridMenu=!0,rptGridOptions.columnDefs=vm.promopostcard.columns,rptGridOptions.exporterPdfDefaultStyle={fontSize:7},rptGridOptions.exporterPdfTableStyle={margin:[15,15,15,15]},rptGridOptions.exporterPdfTableHeaderStyle={fontSize:9,bold:!0,italics:!0,color:"blue"},rptGridOptions.exporterPdfHeader={text:"Promotion Postcards for test on: "+testDate,style:"headerStyle"},rptGridOptions.exporterPdfFooter=myexporterPdfFooter,rptGridOptions.exporterPdfCustomFormatter=myexporterPdfCustomFormatter,rptGridOptions.exporterPdfOrientation="landscape",rptGridOptions.exporterPdfPageSize="LETTER",rptGridOptions.exporterPdfMaxGridWidth=600,TestingServices.setGrid(rptGridOptions,vm.resgridApi,testDate,testTime),vmTestRptmodal.animationsEnabled=!0,vmTestRptmodal.modalInstance=void 0,vmTestRptmodal.retvlu="",vmTestRptmodal.modalInstance=$uibModal.open({animation:vmTestRptmodal.animationsEnabled,templateUrl:"templates/states/testRpt.html",controller:"ModalTestRptInstanceController as vmnew",size:"lg",resolve:{classname:function(){return $log.debug("return from open"),vmTestRptmodal.retvlu}}}),vmTestRptmodal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),vmTestRptmodal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})})["catch"](function(e){$log.debug("getPayerList error in activate",e)})}function convertDataToColumns(thedata,fields,fieldlabels,numOfCols){var rowstr,convertedData=[],datalen=thedata.length,fieldlen=fields.length,colarr=[],colcounter=0;numOfCols=datalen<numOfCols?datalen:numOfCols;for(var i=0;i<datalen;i++){var fieldstr=[];colcounter+=1,colcounter>numOfCols&&(colarr=[],colcounter=1);for(var j=0;j<fieldlen;j++)fieldstr[j]=fieldlabels[j]+" "+thedata[i][fields[j]];if(colarr.push(fieldstr),colcounter===numOfCols)for(var m=0;m<fieldlen;m++){rowstr="{";for(var k=0;k<numOfCols-1;k++){var c=k+1;rowstr=rowstr+'"column'+c+'" : "'+colarr[k][m]+'",'}rowstr=rowstr+'"column'+numOfCols+'" : "'+colarr[numOfCols-1][m]+'" }',convertedData.push(JSON.parse(rowstr))}}return convertedData}function createBeltLabels(){if(vm.selected===!1){var error="no rows selected for createBeltLabels";return void Notification.error({message:error,delay:5e3})}getGeneralColDefs("test","beltlabels").then(function(){function myexpHeaderFilter(displayName){return""}function myexporterPdfCustomFormatter(docDefinition){return docDefinition.content[0].layout={paddingBottom:function(i,node){return i%3===0?10:0},hLineWidth:function(i,node){return 0},vLineWidth:function(i,node){return 0}},docDefinition.content[0].table.widths=["*","*"],docDefinition.pageMargins=[10,0,0,0],docDefinition}$log.debug("getGeneralColDefs ready createBeltLabels");var saveResgridOptions=angular.copy(vm.resgridOptions),vmTestRptmodal=vm,rptlayout="testRpt",testDate=vmTestRptmodal.TestCandidateSelected.name,testTime=vmTestRptmodal.testdatelist.starttime,rptGridOptions={};rptGridOptions=saveResgridOptions,rptGridOptions.data=convertDataToColumns(vm.selectedStudents,["FullName","RankAchievedInTest","BeltSize"],["Name:","Rank:","Size:"],2),rptGridOptions.exporterHeaderFilter=myexpHeaderFilter,rptGridOptions.enableGridMenu=!0,rptGridOptions.columnDefs=vm.beltlabelcoldef.columns,rptGridOptions.exporterPdfDefaultStyle={fontSize:7},rptGridOptions.exporterPdfCustomFormatter=myexporterPdfCustomFormatter,rptGridOptions.exporterPdfOrientation="portrait",rptGridOptions.exporterPdfPageSize="LETTER",rptGridOptions.exporterPdfMaxGridWidth=400,TestingServices.setGrid(rptGridOptions,vm.resgridApi,testDate,testTime,rptlayout),vmTestRptmodal.animationsEnabled=!0,vmTestRptmodal.modalInstance=void 0,vmTestRptmodal.retvlu="",vmTestRptmodal.modalInstance=$uibModal.open({animation:vmTestRptmodal.animationsEnabled,templateUrl:"templates/states/testRpt.html",controller:"ModalTestRptInstanceController as vmnew",size:"lg",resolve:{classname:function(){return $log.debug("return from open"),vmTestRptmodal.retvlu}}}),vmTestRptmodal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),vmTestRptmodal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})})["catch"](function(e){$log.debug("getPayerList error in activate",e)})}function calcsizes(){var shortside,longside;switch(vm.pagewidthpx=0,vm.pageheightpx=0,vm.pageSize){case"LETTER":shortside=8.5*vm.dpi,longside=11*vm.dpi;break;case"EXECUTIVE":shortside=7.25*vm.dpi,longside=10.5*vm.dpi;break;case"FOLIO":shortside=8*vm.dpi,longside=13*vm.dpi;break;case"LEGAL":shortside=8.5*vm.dpi,longside=14*vm.dpi;break;case"TABLOID":shortside=11*vm.dpi,longside=17*vm.dpi}switch(vm.pageOrientation){case"landscape":vm.pagewidthpx=longside,vm.pageheightpx=shortside;break;case"portrait":vm.pagewidthpx=shortside,vm.pageheightpx=longside}}function setLimit(thelimit){$log.debug("setLimit",thelimit),vm.limit=thelimit}function addToTest(testingid){$log.debug("addToTest entered",testingid),createtestcandidate(testingid)}function removeFromTest(testingid){$log.debug("removeFromTest entered"),removetestcandidate(testingid)}function activate(){getTestDates(),initGridOptions(),initResGridOptions(),getUserDetails(),getTemplateNames("").then(function(){$log.debug("activate eventdetails fetched")}),$q.all([getGeneralColDefs("test","checklist").then(function(){$log.debug("getGeneralColDefs ready")})["catch"](function(e){$log.debug("getPayerList error in activate",e)}),getGeneralColDefs("test","Testcandidatesource").then(function(){$log.debug("getGeneralColDefs ready"),setGridOptions()})["catch"](function(e){$log.debug("getPayerList error in activate",e)}),getGeneralColDefs("test","Testcandidatelist").then(function(){$log.debug("getGeneralColDefs ready"),setResGridOptions()})["catch"](function(e){$log.debug("testcandidates error in activate",e)}),getInstructorList().then(function(){$log.debug("getInstructorList ready")})["catch"](function(e){$log.debug("testcandidates error in activate",e)})]).then(function(){$log.debug("testcandidates activation done")})}function changeTab(tabname){"tab-test"===tabname||"tab-testmanage"===tabname||"tab-testmaterial"===tabname||$log.debug("dont know tab",tabname)}function getUserDetails(){return $log.debug("getUserDetails entered"),UserServices.getUserDetails().then(function(data){return $log.debug("testcandidate getuserdetails returned:",data),vm.userdta=data,vm.userdta},function(error){return $log.debug("Caught an error getUserDetails, going to notify:",error),vm.userdta=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getGeneralColDefs(colkey,colsubkey){$log.debug("getGeneralColDefs entered",colkey,colsubkey);var path=encodeURI("../v1/gencoldefs?colkey="+colkey+"&colsubkey="+colsubkey);return TestingServices.getGeneralColDefs(path).then(function(data){$log.debug("getGeneralColDefs returned:",data);var retdata=JSON.parse(data.gcolumns[0][0]);return"checklist"===colsubkey&&(vm.checklistcoldef=retdata),"promopostcard"===colsubkey&&(vm.promopostcard=retdata),"promotion"===colsubkey&&(vm.promotioncoldef=retdata),"beltlabels"===colsubkey&&(vm.beltlabelcoldef=retdata),"Testcandidatesource"===colsubkey&&(vm.tcsrccoldef=retdata),"Testcandidatelist"===colsubkey&&(vm.tclistcoldef=retdata),retdata},function(error){return $log.debug("Caught an error getGeneralColDefs, going to notify:",error),vm.userdta=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function updateTest(){$log.debug("updateTest entered");var path="../v1/testing",indata={ID:vm.testdatelist.testingid,Tester1:vm.testdatelist.tester1,Tester2:vm.testdatelist.tester2,Tester3:vm.testdatelist.tester3,Tester4:vm.testdatelist.tester4};return $log.debug("about updateTesting ",indata,path),TestingServices.updateTesting(path,indata).then(function(data){$log.debug("updateTesting returned data"),$log.debug(data),vm.message=data.message})["catch"](function(e){throw $log.debug("updateTesting failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getInstructorList(){$log.debug("getInstructorList entered");var refreshpath="../v1/instructorlist",witnessdefault={firstname:"Witness",lastname:"",instructortitle:"",name:"Witness"};return CalendarServices.getinstructorlist(refreshpath).then(function(data){if($log.debug(" calservices getinstructorlist returned data"),$log.debug(data),vm.instructorlist=data.instructorlist,"undefined"!=typeof data.instructorlist)for(var i=0;i<data.instructorlist.length;i++)vm.instructorlist[i].name=data.instructorlist[i].firstname+" "+data.instructorlist[i].lastname;return vm.instructorlist.unshift(witnessdefault),vm.instructorlist},function(error){return $log.debug("Caught an error getinstructorlist, going to notify:",error),vm.instructorlist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function convertTime(thetime){if("undefined"!=typeof thetime){var m=moment(thetime,"MM/DD/YYYY hh:mm A z");return $log.debug("convertTime: passed in: ",thetime,"isvalid?",m.isValid(),"where invalid",m.invalidAt()),moment(thetime,"MM/DD/YYYY hh:mm A z").tz("America/New_York").format("MM/DD/YYYY hh:mm A z")}}function getTestDates(testname){if("undefined"==typeof testname)return{};$log.debug("getTestDates entered",testname);var error,refreshpath=encodeURI("../v1/testdates?testname="+testname.name);return vm.testname=testname.name,vm.testtype=testname.eventtype,TestingServices.getTestDates(refreshpath).then(function(data){return $log.debug("getTestDates returned data"),$log.debug(data),data.testdatelist.length>1?(error="too many testdates found:"+data.testdatelist.length,vm.message=error,Notification.error({message:error,delay:5e3}),vm.testdatelist=[],$q.reject(error)):1!==data.testdatelist.length?(error="No testdates found in calendar for:"+testname.name,vm.message=error,Notification.error({message:error,delay:5e3}),vm.testdatelist=[],$q.reject(error)):(vm.testdatelist=data.testdatelist[0],vm.testdatelist.starttime=convertTime(data.testdatelist[0].startdate),vm.testdatelist.endtime=convertTime(data.testdatelist[0].enddate),gettestcandidateList(vm.testname,vm.testtype).then(function(zdata){$log.debug("gettestcandidateList returned",zdata)},function(error){return $log.debug("Caught an error gettestcandidateList after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),gettestcandidateDetails(vm.testdatelist.testtype).then(function(zdata){$log.debug("gettestcandidateDetails returned",zdata)},function(error){return $log.debug("Caught an error gettestcandidateDetails after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.testdatelist)},function(error){return $log.debug("Caught an error getTestDates, going to notify:",error),vm.testdatelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function testdateshow(){var show=!1;return void 0!==vm.testdatelist&&(show="object"===_typeof(vm.testdatelist)),show}function removetestcandidate(testingid){if(vm.selected===!1){var error="no rows selected for testcandidate";return void Notification.error({message:error,delay:5e3})}var path="../v1/testcandidateregistration",thedata={testingid:testingid,selectedStudents:vm.selectedStudents};return $log.debug("about removetestcandidate ",path,thedata,vm.testname),TestingServices.removetestcandidate(path,thedata).then(function(data){return $log.debug("removetestcandidate returned data"),$log.debug(data),vm.thistestcandidate=data,$log.debug(vm.thistestcandidate),$log.debug(vm.thistestcandidate.message),vm.message=vm.thistestcandidate.message,Notification.success({message:vm.message,delay:5e3}),gettestcandidateList(vm.testname,vm.testtype).then(function(zdata){$log.debug("gettestcandidateList returned",zdata)},function(error){return $log.debug("Caught an error gettestcandidateList after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thistestcandidate})["catch"](function(e){throw $log.debug("removetestcandidate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function createtestcandidate(testingid){if(vm.selected===!1){var error="no rows selected for testcandidate";return void Notification.error({message:error,delay:5e3})}var path="../v1/testcandidateregistration",thedata={testingid:testingid,selectedStudents:vm.selectedStudents};return $log.debug("about createtestcandidate ",path,thedata,vm.testname),TestingServices.createtestcandidate(path,thedata).then(function(data){$log.debug("createtestcandidate returned data"),$log.debug(data),"undefined"!=typeof data?(vm.thistestcandidate=data,$log.debug(vm.thistestcandidate),$log.debug(vm.thistestcandidate.message),vm.message=vm.thistestcandidate.message,Notification.success({message:vm.message,delay:5e3})):Notification.success({message:"Not created",delay:5e3}),gettestcandidateList(vm.testname,vm.testtype).then(function(zdata){$log.debug("gettestcandidateList returned",zdata)},function(error){return $log.debug("Caught an error gettestcandidateList after update:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})})["catch"](function(e){throw $log.debug("createtestcandidate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function gettestcandidateList(thetestname,thetesttype){$log.debug("gettestcandidateList entered",thetestname,thetesttype);var mom,refreshpath=encodeURI("../v1/testcandidatelist?testname="+thetestname+"&testtype="+thetesttype),now=moment();return $log.debug("gettestcandidateList path:",refreshpath),TestingServices.gettestcandidateList(refreshpath).then(function(data){if($log.debug("gettestcandidateList returned data"),$log.debug(data),"undefined"!=typeof data&&data.testcandidateList.error!==!1){for(var iter=0;iter<data.testcandidateList.length;iter++)mom=moment(data.testcandidateList[iter].lastpromoted),data.testcandidateList[iter].daysSinceLastTest=now.diff(mom,"days"),data.testcandidateList[iter].age>=data.testcandidateList[iter].ageForNextClass&&data.testcandidateList[iter].RankAchievedInTest==data.testcandidateList[iter].rankForNextClass&&(data.testcandidateList[iter].recommendedClassid=data.testcandidateList[iter].nextClassid,data.testcandidateList[iter].recommendedPgmid=data.testcandidateList[iter].nextPgmid,data.testcandidateList[iter].recommendedClassnm=data.testcandidateList[iter].nextClassnm,data.testcandidateList[iter].recommendedPgmnm=data.testcandidateList[iter].nextPgmnm,data.testcandidateList[iter].changeClass=!0),data.testcandidateList[iter].promote=!0;setResGridOptions(),vm.resgridOptions.data=data.testcandidateList}},function(error){return $log.debug("Caught an error gettestcandidateList:",error),vm.resgridOptions.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function gettestcandidateDetails(thetesttype){$log.debug("gettestcandidateDetails entered:",thetesttype);var path=encodeURI("../v1/testcandidatedetails?testtype="+thetesttype);void 0!==vm.restricted&&(path=path+"&supplement="+vm.restricted);var messagetxt;return $log.debug("gettestcandidateDetails path:",path),TestingServices.gettestcandidateDetails(path).then(function(data){$log.debug("gettestcandidateDetails returned data"),$log.debug(data),"undefined"!=typeof data.testcandidatedetails&&data.testcandidatedetails.length>0?(vm.gridOptions.data=data.testcandidatedetails,$log.debug("details",data.testcandidatedetails[0]),vm.ContactID=data.testcandidatedetails[0].contactID,messagetxt="testcandidateDetails obtained",Notification.success({message:messagetxt,delay:5e3})):(messagetxt="No test candidates found",Notification.warning({message:messagetxt,delay:5e3}))},function(error){return $log.debug("Caught an error gettestcandidateDetails:",error),vm.data=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function gettestcandidateNames(testcandidatepartial){$log.debug("gettestcandidateNames entered");var path=encodeURI("../v1/testcandidatenames?testcandidatepartial="+testcandidatepartial);return $log.debug("gettestcandidateNames path:",path),TestingServices.gettestcandidateNames(path).then(function(data){$log.debug("gettestcandidateNames returned data"),$log.debug(data),vm.testcandidatenames=data.testcandidatenames},function(error){return $log.debug("Caught an error gettestcandidateDetails:",error),vm.data.testcandidatelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function initGridOptions(){vm.gridOptions={enableFiltering:!0,paginationPageSizes:vm.limits,paginationPageSize:10,rowHeight:100,showGridFooter:!0,enableColumnResizing:!0,enableGridMenu:!0,showColumnFooter:!0,appScopeProvider:vm,exporterCsvFilename:"testcandidate.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:10,bold:!0},docDefinition},onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){var msg="grid row selected "+row.entity;$log.debug(msg);var selectedStudentarr=this.grid.api.selection.getSelectedRows();vm.gridleftcnt=selectedStudentarr.length,$log.debug("selected",selectedStudentarr),setSelectedArray(selectedStudentarr)}),gridApi.selection.on.rowSelectionChangedBatch($scope,function(rows){$log.debug("grid batch");var selectedStudentarr=this.grid.api.selection.getSelectedRows();vm.gridleftcnt=selectedStudentarr.length,$log.debug("batch selected",selectedStudentarr),setSelectedArray(selectedStudentarr)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){$log.debug("rowEntity"),$log.debug(rowEntity),$log.debug("Column: "+colDef.name+" newValue: "+newValue+" oldValue: "+oldValue),newValue!=oldValue&&updatetestcandidate(colDef,newValue,rowEntity)})}},$log.debug("setGridOptions gridOptions",vm.gridOptions)}function setGridOptions(){vm.gridOptions={columnDefs:vm.tcsrccoldef.columns},$log.debug("setGridOptions gridOptions",vm.gridOptions)}function initResGridOptions(){vm.resgridOptions={enableFiltering:!0,paginationPageSizes:vm.limits,paginationPageSize:10,rowHeight:100,showGridFooter:!0,enableColumnResizing:!0,enableGridMenu:!0,enableHorizontalScrollbar:2,showColumnFooter:!0,exporterCsvFilename:"testcandidate.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:10,bold:!0},docDefinition},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,onRegisterApi:function(gridApi){$log.debug("resgridapi onRegisterApi"),vm.resgridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){var msg="grid row selected "+row.entity;$log.debug(msg);var selectedStudentarr=this.grid.api.selection.getSelectedRows();vm.gridrightcnt=selectedStudentarr.length,$log.debug("selected",selectedStudentarr),setresSelectedArray(selectedStudentarr)}),gridApi.selection.on.rowSelectionChangedBatch($scope,function(rows){$log.debug("grid batch");var selectedStudentarr=this.grid.api.selection.getSelectedRows();vm.gridrightcnt=selectedStudentarr.length,$log.debug("batch selected",selectedStudentarr),setresSelectedArray(selectedStudentarr)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){$log.debug("rowEntity"),$log.debug(rowEntity),$log.debug("Column: "+colDef.name+" newValue: "+newValue+" oldValue: "+oldValue),newValue!=oldValue&&updatetestcandidate(colDef,newValue,rowEntity)})}},$log.debug("setResGridOptions ",vm.resgridOptions)}function setResGridOptions(){vm.resgridOptions={columnDefs:vm.tclistcoldef.columns},$log.debug("setResGridOptions ",vm.resgridOptions)}function updatetestcandidate(colDef,newValue,rowEntity){var path="../v1/testcandidateregistration",indata={changedColumn:colDef,newValue:newValue,ContactID:rowEntity.ContactID,testcandidate:vm.testcandidate};return $log.debug("about updatetestcandidate ",indata,path),TestingServices.updatetestcandidate(path,indata).then(function(data){$log.debug("updatetestcandidate returned data"),$log.debug(data),vm.thiscoldef=data,$log.debug(vm.thiscoldef),$log.debug(vm.thiscoldef.message),vm.message=vm.thiscoldef.message})["catch"](function(e){throw $log.debug("updatetestcandidate failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function promotetestcandidate(){getGeneralColDefs("test","promotion").then(function(){function myexporterPdfFooter(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}}function myexporterPdfCustomFormatter(docDefinition){return docDefinition.styles.headerStyle={fontSize:18,bold:!0,margin:5},docDefinition.styles.footerStyle={fontSize:10,bold:!0,margin:15},
docDefinition.content[0].layout={fillColor:function(i,node){return i%2===0?"#CCCCCC":null}},docDefinition}$log.debug("getGeneralColDefs ready");var saveResgridOptions=angular.copy(vm.resgridOptions),vmTestRptmodal=vm,testDate=vmTestRptmodal.TestCandidateSelected.name,testTime=vmTestRptmodal.testdatelist.starttime,rptGridOptions={};rptGridOptions=saveResgridOptions,rptGridOptions.data=vm.selectedStudents,rptGridOptions.enableGridMenu=!0,rptGridOptions.columnDefs=vm.promotioncoldef.columns,rptGridOptions.exporterPdfDefaultStyle={fontSize:7},rptGridOptions.exporterPdfTableStyle={margin:[15,15,15,15]},rptGridOptions.exporterPdfTableHeaderStyle={fontSize:9,bold:!0,italics:!0,color:"blue"},rptGridOptions.exporterPdfHeader={text:"Student/Belt Test Checklist for testing on: "+testDate,style:"headerStyle"},rptGridOptions.exporterPdfFooter=myexporterPdfFooter,rptGridOptions.enableCellEditOnFocus=!0,rptGridOptions.paginationPageSizes=vm.limits,rptGridOptions.paginationPageSize=vm.initialLength,rptGridOptions.rowHeight=vm.rowheight,rptGridOptions.exporterPdfCustomFormatter=myexporterPdfCustomFormatter,rptGridOptions.exporterPdfOrientation="landscape",rptGridOptions.exporterPdfPageSize="LETTER",rptGridOptions.exporterPdfMaxGridWidth=600,TestingServices.setGrid(rptGridOptions,vm.resgridApi,testDate,testTime),vmTestRptmodal.animationsEnabled=!0,vmTestRptmodal.modalInstance=void 0,vmTestRptmodal.retvlu="",vmTestRptmodal.modalInstance=$uibModal.open({animation:vmTestRptmodal.animationsEnabled,templateUrl:"templates/states/promotion.html",controller:"ModalPromotionInstanceController as vm",size:"lg",windowClass:"my-modal-popup",resolve:{classname:function(){return $log.debug("return from open"),vmTestRptmodal.retvlu}}}),vmTestRptmodal.modalInstance.result.then(function(retvlu){$log.debug("search modalInstance result :",retvlu),vmTestRptmodal.retvlu=retvlu},function(){$log.info("Modal dismissed at: "+new Date)})})["catch"](function(e){$log.debug("createTestChecklist error in activate",e)})}function setSelectedArray(inputArray){if($log.debug("setSelectedArray entered",inputArray),vm.selectedStudents=[],!(inputArray.length>0))return void(vm.selected=!1);vm.selected=!0;for(var i=0,len=inputArray.length;i<len;i++){var info={ContactID:inputArray[i].contactID,studentname:inputArray[i].FirstName+" "+inputArray[i].LastName,FirstName:inputArray[i].FirstName,LastName:inputArray[i].LastName,rankType:inputArray[i].ranktype,pgrmcat:inputArray[i].pgrmcat,nextClass:inputArray[i].nextClass,nclassid:inputArray[i].nclassid,nclass:inputArray[i].nclass,classcat:inputArray[i].classcat,agecat:inputArray[i].agecat,pgmWas:inputArray[i].pgmid,classWas:inputArray[i].classid,BeltSize:inputArray[i].BeltSize,ContactType:inputArray[i].ContactType,CurrentRank:inputArray[i].ranklist,RankAchievedInTest:inputArray[i].nextrank,ReadyForNextRank:inputArray[i].ReadyForNextRank,address:inputArray[i].address,age:inputArray[i].age,birthday:inputArray[i].birthday,city:inputArray[i].city,contactpictureurl:inputArray[i].contactpictureurl,daysAttended:inputArray[i].daysAttended,daysSinceLastTest:inputArray[i].daysSinceLastTest,email:inputArray[i].email,lastpromoted:inputArray[i].lastpromoted,parent:inputArray[i].parent,phone:inputArray[i].phone,state:inputArray[i].state,zip:inputArray[i].zip};vm.selectedStudents.push(info)}$log.debug("setarray",vm.selectedStudents)}function setresSelectedArray(inputArray){if($log.debug("setresSelectedArray entered",inputArray),vm.selectedStudents=[],!(inputArray.length>0))return void(vm.selected=!1);vm.selected=!0;for(var i=0,len=inputArray.length;i<len;i++){var info={ContactID:inputArray[i].contactID,studentname:inputArray[i].FirstName+" "+inputArray[i].LastName,FullName:inputArray[i].FullName,FirstName:inputArray[i].FirstName,LastName:inputArray[i].LastName,rankType:inputArray[i].ranktype,pgrmcat:inputArray[i].pgrmcat,nextClass:inputArray[i].nextClass,nclassid:inputArray[i].nclassid,nclass:inputArray[i].nclass,classcat:inputArray[i].classcat,agecat:inputArray[i].agecat,pgmWas:inputArray[i].pgmWas,classWas:inputArray[i].classWas,BeltSize:inputArray[i].BeltSize,ContactType:inputArray[i].ContactType,CurrentRank:inputArray[i].CurrentRank,RankAchievedInTest:inputArray[i].RankAchievedInTest,ReadyForNextRank:inputArray[i].ReadyForNextRank,address:inputArray[i].address,age:inputArray[i].age,birthday:inputArray[i].birthday,city:inputArray[i].city,contactpictureurl:inputArray[i].contactpictureurl,daysAttended:inputArray[i].daysAttended,daysSinceLastTest:inputArray[i].daysSinceLastTest,email:inputArray[i].email,lastpromoted:inputArray[i].lastpromoted,parent:inputArray[i].parent,phone:inputArray[i].phone,state:inputArray[i].state,zip:inputArray[i].zip,AttendPromoteTarget:inputArray[i].AttendPromoteTarget,DurationPromoteTarget:inputArray[i].DurationPromoteTarget,"class":inputArray[i]["class"],rankForNextClass:inputArray[i].rankForNextClass,ranklistForNextClass:inputArray[i].ranklistForNextClass,ageForNextClass:inputArray[i].ageForNextClass,nextClassid:inputArray[i].nextClassid,nextPgmid:inputArray[i].nextPgmid,crid:inputArray[i].crid,cpid:inputArray[i].cpid};vm.selectedStudents.push(info)}$log.debug("setarray",vm.selectedStudents)}function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""}function getTemplateNames(templatepartial){$log.debug("getTemplateNames entered");var path=encodeURI("../v1/templatenames?templatepartial="+templatepartial);return $log.debug("gettemplateNames path:",path),TemplateServices.gettemplateNames(path).then(function(data){$log.debug("gettemplateNames returned data"),$log.debug(data),vm.templatelist=data.templatelist},function(error){return $log.debug("Caught an error getTemplateNames:",error),vm.templatelist=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function gettemplateDetails(templateSelected){$log.debug("gettemplateDetails entered:",templateSelected.templatename);var messagetxt,path=encodeURI("../v1/templatedetails?templatename="+templateSelected.templatename);return $log.debug("gettemplateDetails path:",path),TemplateServices.gettemplateDetails(path).then(function(data){$log.debug("gettemplateDetails returned data"),$log.debug(data),"undefined"!=typeof data.templatedetails&&data.templatedetails.length>0?(vm.templatedetails=data.templatedetails[0],$log.debug("details",data.templatedetails[0]),vm.htmlcontentdata.htmlcontentheader="NULL"===vm.templatedetails.htmlheader?"":vm.templatedetails.htmlheader,vm.htmlcontentdata.htmlcontent="NULL"===vm.templatedetails.htmlbody?"":vm.templatedetails.htmlbody,vm.htmlcontentdata.htmlcontentfooter="NULL"===vm.templatedetails.htmlfooter?"":vm.templatedetails.htmlfooter,vm.mycontentheader=vm.templatedetails.parsedheader,vm.mycontent=vm.templatedetails.parsedbody,vm.mycontentfooter=vm.templatedetails.parsedfooter,vm.headerimages[0]="NULL"===vm.templatedetails.headerimage?"":vm.templatedetails.headerimage,vm.footerimages[0]="NULL"===vm.templatedetails.footerimage?"":vm.templatedetails.footerimage,vm.backgroundimages[0]="NULL"===vm.templatedetails.backgroundimage?"":vm.templatedetails.backgroundimage,vm.maxHeaderHeight=vm.templatedetails.maxHeaderHeight,vm.maxFooterHeight=vm.templatedetails.maxFooterHeight,vm.pageMarginL=vm.templatedetails.pageMarginLeft,vm.pageMarginR=vm.templatedetails.pageMarginRight,vm.pageMarginT=vm.templatedetails.pageMarginTop,vm.pageMarginB=vm.templatedetails.pageMarginBottom,vm.pageSize=vm.templatedetails.pageSize,vm.pageOrientation=vm.templatedetails.pageOrientation,vm.templatename=vm.templatedetails.templatename,vm.pagebreak=vm.templatedetails.pagebreak,messagetxt="templateDetails obtained",Notification.success({message:messagetxt,delay:5e3})):(messagetxt="No templates found",Notification.warning({message:messagetxt,delay:5e3}))},function(error){return $log.debug("Caught an error gettemplateDetails:",error),vm.templatedetails=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){vm.loading=!1,vm.loadAttempted=!0})}function getStyles(){var styles={tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:13,color:"black"},dashed:{dash:{length:5}},bigtop:{margin:[0,0,0,0]},topfiller:{margin:[0,40]},botfiller:{margin:[0,5]},ymcabotfiller:{margin:[0,12]},spread:{margin:[0,5]},signature:{width:150,fontSize:12},smalllines:{fontSize:18,alignment:"center",width:vm.pagewidthpx,lineHeight:1.5},extrasmalllines:{fontSize:10,alignment:"center",width:vm.pagewidthpx},mediumlines:{fontSize:35,bold:!0,alignment:"center",width:vm.pagewidthpx},ymcaheader:{fontSize:25,bold:!0,margin:[270,45,0,20],width:vm.pagewidthpx},biglines:{fontSize:23,bold:!0,alignment:"center",width:vm.pagewidthpx},header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]}};return styles}function substitute(content,students,pagebreak,certdata){var tmp,obj,contentdtl=[];if("undefined"!=typeof students&&students.length>0)for(var i=0;i<students.length;i++){$log.debug("process student:",students[i]),pagebreak=i<students.length-1&&"student"==vm.pagebreak?{pageBreak:"before",text:""}:{},$log.debug("types",content.length,"undefined"==typeof pagebreak?"undefined":_typeof(pagebreak)),tmp=content,tmp=tmp.replace(/{agecat}/g,students[i].agecat),tmp=tmp.replace(/{classcat}/g,students[i].classcat),tmp=tmp.replace(/{nclass}/g,students[i].nclass),tmp=tmp.replace(/{pgrmcat}/g,students[i].pgrmcat),tmp=tmp.replace(/{nextClass}/g,students[i].nextClass),tmp=tmp.replace(/{age}/g,students[i].age),tmp=tmp.replace(/{birthday}/g,students[i].birthday),tmp=tmp.replace(/{phone}/g,students[i].phone),tmp=tmp.replace(/{parent}/g,students[i].parent),tmp=tmp.replace(/{zip}/g,students[i].zip),tmp=tmp.replace(/{city}/g,students[i].city),tmp=tmp.replace(/{state}/g,students[i].state),tmp=tmp.replace(/{address}/g,students[i].address),tmp=tmp.replace(/{email}/g,students[i].email),tmp=tmp.replace(/{beltsize}/g,students[i].BeltSize),tmp=tmp.replace(/{daysAttended}/g,students[i].daysAttended),tmp=tmp.replace(/{daysSinceLastTest}/g,students[i].daysSinceLastTest),tmp=tmp.replace(/{lastPromoted}/g,students[i].lastpromoted),tmp=tmp.replace(/{FirstName}/g,students[i].FirstName),tmp=tmp.replace(/{LastName}/g,students[i].LastName),tmp=tmp.replace(/{classwas}/g,students[i].classWas),tmp=tmp.replace(/{pgmwas}/g,students[i].pgmWas),tmp=tmp.replace(/{studentname}/g,students[i].studentname),tmp=tmp.replace(/{nextRank}/g,students[i].RankAchievedInTest),tmp=tmp.replace(/{certDate}/g,moment(certdata.certDate).format("MMM DD, YYYY")),tmp=tmp.replace(/{teststarttime}/g,moment(certdata.teststarttime).format("hh:mm A")),tmp=tmp.replace(/{testfee}/g,certdata.testfee),tmp=tmp.replace(/{school}/g,certdata.school),tmp=tmp.replace(/{program}/g,certdata.program),tmp=tmp.replace(/{instructor1}/g,certdata.instructor1),tmp=tmp.replace(/{instructor2}/g,certdata.instructor2),tmp=tmp.replace(/{instructor3}/g,certdata.instructor3),tmp=tmp.replace(/{instructor4}/g,certdata.instructor4),tmp=tmp.replace(/{title1}/g,certdata.title1),tmp=tmp.replace(/{title2}/g,certdata.title2),tmp=tmp.replace(/{title3}/g,certdata.title3),tmp=tmp.replace(/{title4}/g,certdata.title4);try{obj=JSON.parse("["+tmp+"]")}catch(e){$log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack)}contentdtl.push([obj,pagebreak])}else contentdtl=[content];return contentdtl}function genPDF(templatename){var mycontent=vm.mycontent,mycontentheader=vm.mycontentheader,mycontentfooter=vm.mycontentfooter,students=vm.selectedStudents,program="and is therefore awarded the rank of",testfee=25,certdata={certDate:vm.testdatelist.testdate,teststarttime:vm.testdatelist.starttime,testendtime:vm.testdatelist.endtime,school:vm.userdta.school,program:program,testfee:testfee,instructor1:vm.testdatelist.tester1,instructor2:vm.testdatelist.tester2,instructor3:vm.testdatelist.tester3,instructor4:vm.testdatelist.tester4,title1:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester1}).instructortitle,title2:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester2}).instructortitle,title3:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester3}).instructortitle,title4:_.findWhere(vm.instructorlist,{name:vm.testdatelist.tester4}).instructortitle};$log.debug("after parsehmtl",mycontent,students,"undefined"==typeof students?"undefined":_typeof(students),students.length);var tmp,obj,pagebreak,contentdtl=[];contentdtl=substitute(mycontent,students,pagebreak,certdata);try{tmp=mycontentheader,obj=JSON.parse("["+tmp+"]"),mycontentheader=obj,tmp=mycontentfooter,obj=JSON.parse("["+tmp+"]"),mycontentfooter=obj}catch(e){$log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack)}var background;if(void 0!==_typeof(vm.backgroundimages[0])&&""!==vm.backgroundimages[0]){calcsizes();var rptwidth=vm.pagewidthpx,rptheight=vm.pageheightpx;background={image:vm.backgroundimages[0],width:rptwidth,height:rptheight}}else background="";var docDefinition={pageOrientation:vm.pageOrientation,pageMargins:[vm.pageMarginL,vm.pageMarginT,vm.pageMarginR,vm.pageMarginB],pageSize:vm.pageSize,header:mycontentheader,content:contentdtl,footer:mycontentfooter,styles:getStyles()};docDefinition.background=background;var myJsonString=JSON.stringify(docDefinition);$log.debug("doc json",myJsonString),window.pdfMake.createPdf(docDefinition).open()}var vm=this;vm.gettestcandidateList=gettestcandidateList,vm.gettestcandidateDetails=gettestcandidateDetails,vm.updatetestcandidate=updatetestcandidate,vm.promotetestcandidate=promotetestcandidate,vm.gettestcandidateNames=gettestcandidateNames,vm.getInstructorList=getInstructorList,vm.getTestDates=getTestDates,vm.updateTest=updateTest,vm.addToTest=addToTest,vm.removeFromTest=removeFromTest,vm.setSlide=setSlide,vm.setLimit=setLimit,vm.createtestcandidate=createtestcandidate,vm.highlightFilteredHeader=highlightFilteredHeader,vm.createTestChecklist=createTestChecklist,vm.createPromoPostcards=createPromoPostcards,vm.createBeltLabels=createBeltLabels,vm.genPDF=genPDF,vm.limit=0,vm.limits=[10,20,50,100,200,500,5e3],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.data=[],vm.state={},vm.thiscoldef="",vm.colkey="testcandidate",vm.colsubkey="",vm.colsubkeys=[],vm.coldeflist=[],vm.testcandidatetmp,vm.gcolumns=[],vm.loading=!0,vm.loadAttempted=!1,vm.gridOptions={},vm.gridOptions.data=[{}],vm.resgridApi,vm.gridApi,vm.resgridOptions={},vm.resgridOptions.data=[{}],vm.selectedStudents=[],vm.TestCandidateSelected="",vm.testcandidatenames=[],vm.instructorlist=[],vm.testcandidate="",vm.ContactID="",vm.selected=!1,vm.testname,vm.testtype,vm.userdta,vm.htmlcontentdisabled=!1,vm.htmlcontentcanEdit=!0,vm.gettemplateDetails=gettemplateDetails,vm.templatenameSelected="",vm.testdateshow=testdateshow,vm.changeTab=changeTab,vm.templatedetails="",vm.templatename="",vm.templatelist=[],vm.htmlcontentname="",vm.htmlcontentwebsite="",vm.bodyimages=[],vm.headerimages=[],vm.footerimages=[],vm.backgroundimages=[],vm.htmlbackground=[],vm.pageSizes=["EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID"],vm.pageSize="LETTER",vm.pageOrientations=["landscape","portrait"],vm.pageOrientation="portrait",vm.pagebreaks=["none","student"],vm.pagebreak,vm.pageMarginL=10,vm.pageMarginT=10,vm.pageMarginR=10,vm.pageMarginB=10,vm.pageMargins=[vm.pageMarginL,vm.pageMarginT,vm.pageMarginR,vm.pageMarginB],vm.pagewidthpx=0,vm.pageheightpx=0,vm.dpi=72,vm.maxHeaderHeight=200,vm.maxFooterHeight=200,vm.mycontentheader,vm.mycontent,vm.mycontentfooter,vm.checklistcoldef,vm.promopostcard,vm.beltlabelcoldef,vm.tcsrccoldef,vm.tclistcoldef,vm.tempres,vm.htmlcontentdata={},vm.htmlcontentdata.htmlcontentheader,vm.htmlcontentdata.htmlcontent,vm.htmlcontentdata.htmlcontentfooter,vm.styleleft="400px",vm.styleright="400px",vm.gridright=10,vm.gridleft=10,vm.gridleftcnt=0,vm.gridrightcnt=0,vm.restricted=!0,$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-testcandidates started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-testcandidates dismissed"),$log.debugEnabled(!1)}),activate()}angular.module("ng-admin").controller("TestCandidateTableBasicController",TestCandidateTableBasicController),TestCandidateTableBasicController.$inject=["$routeParams","$log","TestingServices","CalendarServices","$location","$window","$q","$scope","$route","Notification","uiGridConstants","uiGridGroupingConstants","$timeout","moment","UserServices","TemplateServices","AttendanceServices","textAngularManager","$uibModal","_"]}(window,window.angular,window.pdfMake),function(window,angular){function TesttypeTableBasicController($log,$q,$scope,$interval,ClassServices,uiGridConstants,Notification,moment,iddropdownFilter,Util){function activate(){getTesttype().then(function(){$log.debug("getTesttype activate done"),getrankTypes().then(function(){$log.debug("getrankTypes activate done",vm.rankTypes),setgridOptions(),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)},function(error){return $q.reject(error)})},function(error){return $q.reject(error)})}function setGridLength(size){vm.gridLength={height:size*vm.rowheight+vm.headerheight+"px"}}function getGridLength(){return vm.gridLength}function removeTesttype(input){$log.debug("removeTesttype entered",input);var path="../v1/testtype",thedata={id:input.id},data={};return data.TesttypeExistsList={},ClassServices.removeTesttype(thedata,path).then(function(data){return $log.debug("removeTesttype returned data"),$log.debug(data),vm.message=data.message,"undefined"!=typeof data&&data.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),getTesttype().then(function(zdata){$log.debug("getTesttype returned",zdata)},function(error){return $log.debug("Caught an error getTesttype after remove:",error),vm.thisTesttype=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),data):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("removeTesttype failure:"),$log.debug("error",e),Notification.error({message:e,delay:5e3}),e})}function addTesttype(rowEntity){updateTesttype(rowEntity,"Add")}function updateTesttype(rowEntity,updatetype){var updpath="../v1/testtype",thedata={id:rowEntity.id,testtype:rowEntity.testtype,ranktype:rowEntity.ranktype,testdescription:rowEntity.testdescription};return $log.debug("about updateTesttype ",thedata,updpath,updatetype),ClassServices.updateTesttype(updpath,thedata).then(function(data){return $log.debug("updateTesttype returned data"),$log.debug(data),vm.thisTesttype=data,$log.debug(vm.thisTesttype),$log.debug(vm.thisTesttype.message),vm.message=vm.thisTesttype.message,"undefined"!=typeof vm.thisTesttype&&vm.thisTesttype.error!==!0||"undefined"==typeof data?(Notification.success({message:vm.message,delay:5e3}),"Add"===updatetype&&getTesttype().then(function(zdata){$log.debug("getTesttype returned",zdata)},function(error){return $log.debug("Caught an error getTesttype after add:",error),vm.thisTesttype=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)}),vm.thisTesttype):(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))})["catch"](function(e){throw $log.debug("updateTesttype failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function getTesttype(){$log.debug("getTesttype entered");var path="../v1/testtype";return ClassServices.getTesttypes(path).then(function(data){return $log.debug("getTesttypes returned data"),$log.debug(data),vm.gridOptions.data=data.TesttypeList,data.TesttypeList},function(error){return $log.debug("Caught an error getTesttypes:",error),vm.TesttypeList=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function getrankTypes(){$log.debug("getrankTypes entered");var path="../v1/ranktypes";return ClassServices.getRankTypes(path).then(function(data){return $log.debug("getrankTypes returned data"),$log.debug(data),vm.rankTypes=data.RankTypelist,$log.debug(data.message),vm.message=data.message,"undefined"!=typeof vm.rankTypes&&data.error!==!0||"undefined"==typeof data?vm.rankTypes:(Notification.error({message:vm.message,delay:5e3}),$q.reject(data))},function(error){return $log.debug("Caught an error getrankTypes:",error),vm.rankTypes=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})}function setgridOptions(){vm.gridOptions={enableFiltering:!0,enableCellEditOnFocus:!0,paginationPageSizes:vm.limits,paginationPageSize:vm.initialLength,rowHeight:vm.rowheight,appScopeProvider:vm,columnDefs:[{field:"testtype",displayName:"Test Type",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0},{field:"testdescription",displayName:"Test Description",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0},{field:"ranktype",headerCellClass:Util.highlightFilteredHeader,enableCellEdit:!0,enableFiltering:!0,editableCellTemplate:"ui-grid/dropdownEditor",cellFilter:"iddropdown:this",editDropdownIdLabel:"id",editDropdownValueLabel:"value",editDropdownOptionsArray:vm.rankTypes,filter:{options:vm.rankTypes}},{field:"id",displayName:"Action",enableFiltering:!1,enableSorting:!1,enableHiding:!1,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <a ng-click="grid.appScope.removeTesttype(row.entity)" role="button" class="btn btn-red" style="padding:  0px 14px;"  ><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></div>'}],showGridFooter:!1,enableColumnResizing:!0,onRegisterApi:function(gridApi){$log.debug("vm gridapi onRegisterApi"),vm.gridApi=gridApi,gridApi.pagination.on.paginationChanged($scope,function(newPage,pageSize){$log.debug("pagination changed"),setGridLength(pageSize),vm.gridApi.core.notifyDataChange(uiGridConstants.dataChange.ALL)}),gridApi.edit.on.afterCellEdit($scope,function(rowEntity,colDef,newValue,oldValue){newValue!=oldValue&&updateTesttype(rowEntity,"Update")})}}}var vm=this,$=angular.element;vm.isCollapsed=!0,vm.getTesttype=getTesttype,vm.removeTesttype=removeTesttype,vm.addTesttype=addTesttype,vm.updateTesttype=updateTesttype,vm.gridOptions={},vm.gridApi,vm.limits=[5,10,20,50,100,200],vm.Testtype={},vm.rankTypes=[],vm.thisTesttype=[],vm.gridLength={},vm.initialLength=10,vm.rowheight=25,vm.headerheight=140,vm.getGridLength=getGridLength,setGridLength(vm.initialLength),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("table-basic-testtype started")}),$scope.$on("$destroy",function(){$log.debug("table-basic-testtype dismissed"),$log.debugEnabled(!1)}),setgridOptions(),activate(),$.fn.Data.Portlet("table-basic-testtype.js")}angular.module("ng-admin").controller("TesttypeTableBasicController",TesttypeTableBasicController),TesttypeTableBasicController.$inject=["$log","$q","$scope","$interval","ClassServices","uiGridConstants","Notification","moment","iddropdownFilter","Util"]}(window,window.angular),function(window,angular){function ModalTestRptInstanceController($log,$uibModalInstance,TestingServices,$window,Notification,uiGridConstants,$scope){function printAll(){$log.debug("hit print"),$log.debug("ModalTestRptInstanceController ready to close"),vm.rptgridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),vm.rptgridApi.grid.api.exporter.pdfExport("visible","visible")}function printSelected(){$log.debug("hit print sel"),$log.debug("ModalTestRptInstanceController ready to close"),vm.rptgridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),vm.rptgridApi.grid.api.exporter.pdfExport("selected","visible")}function cancel(){$uibModalInstance.dismiss("cancel")}var vm=this;vm.rptLayout=TestingServices.getRptLayout(),vm.path="../v1/"+vm.rptLayout,vm.printAll=printAll,vm.printSelected=printSelected,vm.cancel=cancel,vm.message="",vm.rptgridOptionsnew=TestingServices.getGrid(),vm.rptgridApi=TestingServices.getGridApi(),vm.testDate=TestingServices.getTestDate(),vm.testTime=TestingServices.getTestTime(),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalTestRptInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalTestRptInstanceController dismissed"),$log.debugEnabled(!1)}),vm.rptgridOptionsnew.onRegisterApi=function(gridApi){vm.rptgridApi=gridApi}}angular.module("ng-admin").controller("ModalTestRptInstanceController",ModalTestRptInstanceController),ModalTestRptInstanceController.$inject=["$log","$uibModalInstance","TestingServices","$window","Notification","uiGridConstants","$scope"]}(window,window.angular),function(window,angular,$){function ModalUserSettingsInstanceController($log,$uibModalInstance,UserServices,$window,Notification,$scope,Util,$q,$sce,moment,$uibModal,Idle,Title){function getUserOptions(){$log.debug("getUserOptions entered");var path="../v1/useroptions";return UserServices.getUserOptions(path).then(function(data){if($log.debug("main controller service getUserOptions returned:",data),("undefined"==typeof data.options||data.options.error===!0)&&"undefined"!=typeof data){var themsg={message:data.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3};return Notification.error(themsg),$q.reject(data)}try{vm.userOptions=JSON.parse(data.options),vm.okNotify=!!vm.userOptions.notify&&vm.userOptions.notify,vm.mydelay=vm.userOptions.delay?vm.userOptions.delay:30,$scope.idle=vm.userOptions.idle?vm.userOptions.idle:1200,$scope.timeout=vm.userOptions.timeout?vm.userOptions.timeout:300,Title.setAsIdle($scope.idle),Idle.setIdle($scope.idle),Idle.setTimeout($scope.timeout),Idle.watch()}catch(e){return $log.debug(e instanceof SyntaxError),$log.debug(e.message),$log.debug(e.name),$log.debug(e.fileName),$log.debug(e.lineNumber),$log.debug(e.columnNumber),$log.debug(e.stack),Notification.error(e.message),$q.reject(data)}return vm.userOptions},function(error){return $log.debug("Caught an error getUserOptions, going to notify:",error),vm.userOptions=[],vm.message=error,Notification.error({message:error,delay:5e3}),$q.reject(error)})["finally"](function(){})}function setUserOptions(){var updpath="../v1/useroptions",thedata={options:{delay:vm.mydelay,notify:vm.okNotify,idle:$scope.idle,timeout:$scope.timeout}};return $log.debug("about setUserOptions ",thedata,updpath),UserServices.setUserOptions(updpath,thedata).then(function(data){if($log.debug("setUserOptions returned data"),$log.debug(data),("undefined"==typeof data.message||data.error===!0)&&"undefined"!=typeof data){var themsg={message:data.message+": "+("string"==typeof data.extra.sqlerror?data.extra.sqlerror:""),delay:5e3};return Notification.error(themsg),$q.reject(data)}return Notification.success({message:data.message,delay:5e3}),getUserOptions(),data})["catch"](function(e){throw $log.debug("setUserOptions failure:"),$log.debug("error",e),vm.message=e,Notification.error({message:e,delay:5e3}),e})}function cancel(){$uibModalInstance.dismiss("cancel")}var vm=this;vm.cancel=cancel,vm.getUserOptions=getUserOptions,vm.setUserOptions=setUserOptions,vm.userOptions={},vm.okoptions=[!0,!1],vm.okNotify=!0,vm.mydelay=10,getUserOptions(),$scope.$watch("idle",function(value){Boolean(value)&&Idle.setIdle(value)}),$scope.$watch("timeout",function(value){Boolean(value)&&Idle.setTimeout(value)}),$scope.$on("$routeChangeSuccess",function(event,current,previous){$log.debugEnabled(!0),$log.debug("ModalUserSettingsInstanceController started")}),$scope.$on("$destroy",function(){$log.debug("ModalUserSettingsInstanceController dismissed"),$log.debugEnabled(!1)}),$.fn.Data.Portlet("usersettings-controller.js")}angular.module("ng-admin").controller("ModalUserSettingsInstanceController",ModalUserSettingsInstanceController),ModalUserSettingsInstanceController.$inject=["$log","$uibModalInstance","UserServices","$window","Notification","$scope","Util","$q","$sce","moment","$uibModal","Idle","Title"]}(window,window.angular,window.$,window.Title),function(window,angular,$,moment){function CalUtil($log){function getColorByBgColor(bgColor){return $log.debug("getColorByBgColor",bgColor),bgColor?parseInt(bgColor.replace("#",""),16)>8388607.5?"#000":"#fff":""}function hexToComplimentary(hex){var rgb="rgb("+(hex=hex.replace("#","")).match(new RegExp("(.{"+hex.length/3+"})","g")).map(function(l){return parseInt(hex.length%2?l+l:l,16)}).join(",")+")";rgb=rgb.replace(/[^\d,]/g,"").split(",");var r=rgb[0],g=rgb[1],b=rgb[2];r/=255,g/=255,b/=255;var h,s,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;s=l>.5?d/(2-max-min):d/(max+min),max==r&&g>=b?h=1.0472*(g-b)/d:max==r&&g<b?h=1.0472*(g-b)/d+6.2832:max==g?h=1.0472*(b-r)/d+2.0944:max==b&&(h=1.0472*(r-g)/d+4.1888)}if(h=h/6.2832*360+0,h+=180,h>360&&(h-=360),h/=360,0===s)r=g=b=l;else{var hue2rgb=function(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return r=Math.round(255*r),g=Math.round(255*g),b=Math.round(255*b),rgb=b|g<<8|r<<16,"#"+(16777216|rgb).toString(16).substring(1)}function setEventOpen(calEvent,studentpick,vm){$log.debug("seteventopen enter",studentpick,$("#calEventDialogpick")[0],$("#reminderCheckbox").val(calEvent.reminderCheckbox)),$("#eventpick").val(studentpick.FullName),calEvent.start||(calEvent.start=moment()),calEvent.end||(calEvent.end=moment()),$("#eventStartd").val(moment(calEvent.startd).tz("America/New_York").format("MM/DD/YYYY")),$("#eventStart").val(moment(new Date(calEvent.start.toString())).tz("America/New_York").format("hh:mm A z")),$("#eventStarttz").val(moment(new Date(calEvent.start.toString())).tz("America/New_York").format("z")),$("#eventEnd").val(moment(new Date(calEvent.end.toString())).tz("America/New_York").format("hh:mm A z")),$("#eventEndtz").val(moment(new Date(calEvent.end.toString())).tz("America/New_York").format("z")),$("#eventStart").timepicker("setTime",new Date(calEvent.start.toString())),$("#eventEnd").timepicker("setTime",new Date(calEvent.end.toString())),$("#typepick").val(calEvent.eventtype),"ClassSchedule"===calEvent.eventtype?($("#reminderCheckboxDiv").hide(),$("#userPickDiv").hide(),$("#classPickDiv").show(),$("#agerPickDiv").show(),$("#eventPickDiv").hide()):"event"===calEvent.eventtype?($("#reminderCheckboxDiv").show(),$("#userPickDiv").show(),$("#classPickDiv").hide(),$("#agerPickDiv").hide(),$("#eventPickDiv").show()):($("#reminderCheckboxDiv").hide(),$("#userPickDiv").hide(),$("#classPickDiv").hide(),$("#agerPickDiv").hide(),$("#eventPickDiv").hide()),1===calEvent.reminderCheckbox||calEvent.reminderCheckbox===!0?$("#reminderCheckbox").val(calEvent.reminderCheckbox).prop("checked",!0):$("#reminderCheckbox").val(calEvent.reminderCheckbox).prop("checked",!1),$("#reminderInterval").val(calEvent.reminderInterval),$("#userpick").val(calEvent.userpick),$("#classpick").val(calEvent.classid),$("#agerpick").val(calEvent.agerange),$("#eventid").val(calEvent.eventid),$("#calEventDialog #eventTitle").val(calEvent.title),$("#calEventDialog #allday").val(["gbcs-partialday-event"==calEvent.className?"1":"2"]).prop("checked",!0)}function initCalendar(vm,studentpick){$log.debug("callendar ready"),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventLimit:3,views:{agenda:{eventLimit:3}},events:vm.events,timezone:"local",timeFormat:"hh:mm A z",selectable:!0,selectHelper:!0,dayClick:onCalendarDayClick,editable:!0,droppable:!0,drop:function(date,jsEvent,ui,resourceId){$log.debug("drop entered",date,jsEvent,ui,resourceId);var originalEventObject=$(this).data("eventObject"),copiedEventObject=$.extend({},originalEventObject);date._ambigTime===!0?(copiedEventObject.start=moment(date).tz("America/New_York").add(11,"hours"),
copiedEventObject.startd=moment(date).tz("America/New_York").add(11,"hours").format("MM/DD/YYYY")):(copiedEventObject.start=moment(date).tz("America/New_York"),copiedEventObject.startd=moment(date).tz("America/New_York").format("MM/DD/YYYY")),copiedEventObject.end=moment(copiedEventObject.start).add(2,"hours"),$log.debug("copied end",copiedEventObject.end),copiedEventObject.backgroundColor=jsEvent.target.style.backgroundColor,copiedEventObject.textColor=jsEvent.target.style.color,copiedEventObject.eventtype=jsEvent.target.id;var innerJ,desc,inner=jsEvent.target.innerText;try{innerJ=JSON.parse(inner),desc=innerJ.details.name}catch(e){innerJ=inner,desc=inner}copiedEventObject.title=desc,copiedEventObject.description=innerJ,vm.saveCalendarEvent(copiedEventObject).then(function(){$log.debug("test looking for new eventid",vm.neweventid),copiedEventObject.id=vm.neweventid,copiedEventObject.eventid=vm.neweventid,$("#calendar").fullCalendar("renderEvent",copiedEventObject,!0),$("#drop-remove").is(":checked")&&$(this).remove()})},select:function(start,end){$log.debug("select entered",start,end),$("#eventStartd").val(moment(start).tz("America/New_York").format("MM/DD/YYYY")),$("#eventStart").val(moment(start).tz("America/New_York").format("hh:mm A z")),$("#eventEnd").val(moment(end).tz("America/New_York").format("hh:mm A z")),$log.debug("start",$("#eventStart"),"end",$("#eventEnd"))},eventClick:function(calEvent,jsEvent,view){if($log.debug("eventClick entered",calEvent,jsEvent,view),vm.agerpick=calEvent.agerange,vm.userpick=calEvent.userpick,vm.typepick=calEvent.eventtype,vm.classpick=calEvent.classid,""!==calEvent.contactid&&"NULL"!==calEvent.contactid){var path="../v1/students/"+calEvent.contactid;vm.getStudent(path).then(function(data){$log.debug("eventclick get studentname returned",data);var fullname=data.FirstName+" "+data.LastName;vm.setstudent({ID:data.ID,FirstName:data.FirstName,LastName:data.LastName,FullName:fullname}),$log.debug("student exit in eventclick",studentpick),vm.eventopen(calEvent)})}else vm.setstudent({}),vm.eventopen(calEvent)},eventDrop:function(event,delta,revertFunc){$log.debug("eventdrop",event,event.title+" was dropped on "+event.startd,delta);var title=event.title,startd=window.moment(event.start).add(delta).tz("America/New_York").format("MM/DD/YYYY"),start=moment(event.start).tz("America/New_York").format("hh:mm A z"),end=moment(event.end).tz("America/New_York").format("hh:mm A z"),reminderInterval=event.reminderInterval,userpick=event.userpick,eventpick=event.eventpick,typepick=event.typepick,agerpick=event.agerpick,classpick=event.classpick,reminderCheckbox=event.reminderCheckbox,contactid=event.contactid,eventid=event.eventid,eventclass=event.className,color=event.backgroundColor,textcolor=event.textColor,eventtype=event.eventtype,screen=$(this);confirm("Are you sure about this change?")?($log.debug("save in eventdrop"),$log.debug("before save in eventdrop",screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,!0,event,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick),vm.calsave(screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,!0,event,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick)):revertFunc()}});var addEvent=function(name){var thecolor=vm.mycolor,thetextcolor=vm.textcolor;name=0===name.length?"Untitled Event":name;var html=$('<div class="external-event label label-default" style="background-color: '+thecolor+"!important; color:"+thetextcolor+' !important;">'+name+"</div>");$("#event-block").append(html),vm.eventDrag(html),$log.debug("after addEvent drag",html)};$("#event-add").on("click",function(){var name=$("#event-name").val();addEvent(name),$log.debug("after addEvent click",name)})}function eventopen(calEvent,studentpick,vm,CalendarServices){$log.debug("eventopen enter",studentpick,$("#calEventDialogpick")[0],$("#reminderCheckbox").val(calEvent.reminderCheckbox)),setEventOpen(calEvent,studentpick,vm),CalendarServices.setCurrentEvent(calEvent),$("#calEventDialog").dialog("option","buttons",[{text:"Update",click:function(){$log.debug("save in edit. note need to update",$("#eventpick"),$("#contactpicklist"),studentpick,$("#studentpick"));var title=$("#eventTitle").val(),startd=$("#eventStartd").val(),start=$("#eventStart").val(),end=$("#eventEnd").val(),contactid=studentpick.ID,eventid=$("#eventid").val(),eventclass=calEvent.className,color=calEvent.backgroundColor,textcolor=calEvent.textColor,eventtype=calEvent.eventtype,reminderInterval=$("#reminderInterval").val(),userpick=$("#userpick").val(),eventpick=$("#eventpick").val(),typepick=$("#typepick").val(),agerpick=$("#agerpick").val(),classpick=$("#classpick").val(),reminderCheckbox=$("#reminderCheckbox"),screen=$(this);$log.debug("before calsave",screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,!0,calEvent,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick),vm.calsave(screen,title,startd,start,end,reminderCheckbox,reminderInterval,userpick,!0,calEvent,contactid,eventid,eventclass,color,textcolor,eventtype,eventpick,typepick,agerpick,classpick),$("#calendar").fullCalendar("unselect"),$(this).dialog("close")}},{text:"Delete",click:function(){$log.debug("delete event entered",calEvent),vm.removeCalendarEvent(calEvent.id),$("#calendar").fullCalendar("removeEvents",calEvent._id),$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}]),$("#calEventDialog").dialog("option","title","Edit Event"),$("#calEventDialog").dialog("open")}function uid(){$log.debug("uid");var id=0;return function(){return 0===arguments[0]&&(id=0),id++}}function EventDrag(){return function(el){$log.debug("eventdrag entered",el);var eventObject={title:$.trim(el.text()),id:uid()};el.data("eventObject",eventObject),$log.debug("drag after EventObject",el),el.draggable({zIndex:999,revert:!0,revertDuration:0})}}function aDialog(vm){return $("#adialog").dialog({resizable:!1,autoOpen:!1,title:"Select Student",width:400,modal:!0,buttons:{Close:function(){$log.debug("picked is",vm.studentpick2),$(this).dialog("close")}}})}function onCalendarDayClick(date,jsEvent,view){$log.debug("onCalendarDayClick entered",date,jsEvent,view),$(jsEvent.target).is("td")&&($("#calendar").fullCalendar("changeView","agendaDay"),$("#calendar").fullCalendar("gotoDate",date))}function convertToMoment(thetime){if("undefined"!=typeof thetime){moment(thetime,"MM/DD/YYYY hh:mm A z");return moment(thetime,"MM/DD/YYYY hh:mm A z").tz("America/New_York").format("MM/DD/YYYY hh:mm A z")}}function convertToMomentDST(thetime){if("undefined"!=typeof thetime)return moment(thetime).tz("America/New_York").format("z")}function calActivate(){$("#calEventDialog").dialog({resizable:!1,autoOpen:!1,title:"Add Event",width:400,buttons:{}}),$("#eventStart").timepicker({minuteStep:15,template:"dropdown",modalBackdrop:"false",showSeconds:!1,showMeridian:!0,defaultTime:!1}),$("#eventEnd").timepicker({minuteStep:15,template:"dropdown",modalBackdrop:"false",showSeconds:!1,showMeridian:!0,defaultTime:!1}),$(window).scroll(function(){$(this).scrollTop()<20?$("#totop").fadeOut():$("#totop").fadeIn()}),$("#totop").on("click",function(){return $("html, body").animate({scrollTop:0},"fast"),!1})}var utility={calActivate:calActivate,EventDrag:EventDrag,aDialog:aDialog,setEventOpen:setEventOpen,eventopen:eventopen,uid:uid,onCalendarDayClick:onCalendarDayClick,initCalendar:initCalendar,convertToMoment:convertToMoment,convertToMomentDST:convertToMomentDST,getColorByBgColor:getColorByBgColor,hexToComplimentary:hexToComplimentary};return utility}angular.module("ng-admin").factory("CalUtil",CalUtil),CalUtil.$inject=["$log"]}(window,window.angular,window.$,window.moment),function(window,angular,crypto,Uint8Array){function Util($log){function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""}function uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(c){return(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)})}function maxObjArr(arr,attr){$log.debug("maxObjArr entered",arr,attr);var res=Math.max.apply(Math,arr.map(function(o){return o[attr]}));return res}function getByValue(arr,value,attr,resvlu){$log.debug("getByValue entered",arr,value,attr,resvlu);var result=arr.filter(function(o){return o[attr]==value});return result?result[0][resvlu]:null}var utility={maxObjArr:maxObjArr,getByValue:getByValue,uuidv4:uuidv4,highlightFilteredHeader:highlightFilteredHeader};return utility}angular.module("ng-admin").factory("Util",Util),Util.$inject=["$log"]}(window,window.angular,window.crypto,window.Uint8Array),function(window,angular){angular.module("ng-admin").filter("iddropdown",function(){return function(input,context){try{var map=context.col.colDef.editDropdownOptionsArray,idField=context.col.colDef.editDropdownIdLabel,valueField=context.col.colDef.editDropdownValueLabel,initial=context.row.entity[context.col.field];if("undefined"!=typeof map){for(var i=0;i<map.length;i++)if(map[i][idField]==input)return map[i][valueField]}else if(initial)return initial;return input}catch(e){console.log("error: "+e)}}}).filter("textDate",["$filter",function($filter){return function(input,format){var date=new Date(input);return $filter("date")(date,format)}}]).filter("fractionFilter",function(){return function(value){return Number(value).toFixed(0)}}).filter("currencyFilter",function(){var currencyMap={dollar:"$",pound:"",euro:""};return function(value,scope){var curlookup=void 0===scope.row.entity.currency?"dollar":scope.row.entity.currency;return currencyMap[curlookup]+Number(value).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}})}(window,window.angular),function(){function ModalPicUploadController($scope,$log,$uibModalInstance,$uibModal,$document,$window,StudentServices,Notification,dataToPass){function cancel(){$uibModalInstance.dismiss("cancel")}function openCamera(){$log.debug("openCamera"),angular.forEach(angular.element(document).find("div"),function(node){"my_camera"==node.id&&($log.debug("mycam",node),vmpicmodal.camera_on(),vmpicmodal.Webcam.attach(node))})}function pretakon(){vmpicmodal.pre_take_buttons=!0,vmpicmodal.post_take_buttons=!1}function posttakeon(){vmpicmodal.pre_take_buttons=!1,vmpicmodal.post_take_buttons=!0}function preview_snapshot(){vmpicmodal.Webcam.freeze(),posttakeon()}function cancel_preview(){vmpicmodal.Webcam.unfreeze(),pretakon()}function camera_off(){vmpicmodal.cameraIsOn="off",vmpicmodal.Webcam.reset(),$log.debug("Camera_off"),pretakon()}function checkCameraIsOn(){return"on"===vmpicmodal.cameraIsOn}function camera_on(){vmpicmodal.cameraIsOn="on",vmpicmodal.Webcam.set({width:320,height:240}),vmpicmodal.Webcam.attach("#my_camera"),posttakeon()}function saveStudentPic(student,picnm){StudentServices.saveStudentPic(student,picnm).then(function(data){$log.debug("saveStudentPic returned data:"),$log.debug(data),vmpicmodal.dataToPass.pictureurldecache=picnm+"?decache="+Math.random()},function(error){return $log.debug("saveStudentPic",error),Notification.error({message:error,delay:5e3}),error})}function save_photo(picnm,student){picnm=encodeURI(picnm),$log.debug("save_photo",picnm,student),vmpicmodal.Webcam.snap(function(data_uri){vmpicmodal.data_uri=data_uri;var ur="../v1/picupload?picnm="+picnm;$log.debug("picnm",ur),vmpicmodal.Webcam.reset(),vmpicmodal.cameraIsOn="off",vmpicmodal.Webcam.upload(data_uri,ur,function(code,text){$log.debug("upload called",code,text)}),vmpicmodal.Webcam.on("error",function(err){$log.debug("webcam err",err)}),vmpicmodal.Webcam.on("uploadComplete",function(code,text){$log.debug("uploaded",code,text),saveStudentPic(student,picnm)}),document.getElementById("results").style.display=""})}function openpick(){vmpicmodal.modalInstance=$uibModal.open({animation:vmpicmodal.animationsEnabled,templateUrl:"myPickupload.html",controller:"ModalPicInstanceController as vmpicselect",size:"lg",resolve:{picfile:function(){return vmpicmodal.picFile}}}),vmpicmodal.modalInstance.result.then(function(selectedpic){$log.debug("pick upload modalInstance result picfile:",selectedpic),vmpicmodal.picfile=selectedpic,vmpicmodal.dataToPass.picfile=selectedpic},function(){$log.info("Modal dismissed at: "+new Date)})}function opensearch(){vmpicmodal.modalInstance=$uibModal.open({animation:vmpicmodal.animationsEnabled,templateUrl:"myPicksearch.html",controller:"ModalPicInstance2Controller as vmpicsearch",size:"lg",resolve:{picfile:function(){return vmpicmodal.picFile}}}),vmpicmodal.modalInstance.result.then(function(selectedpic){$log.debug("picsearch modalInstance result picfile:",selectedpic),vmpicmodal.dataToPass.picfile=selectedpic},function(error){$log.info("Modal dismissed at: "+new Date,error)})}$log.debug("thisvm",dataToPass);var vmpicmodal=this;vmpicmodal.dataToPass=dataToPass,vmpicmodal.picfile=vmpicmodal.dataToPass.pictureurl,vmpicmodal.animationsEnabled=!0,vmpicmodal.openpick=openpick,vmpicmodal.opensearch=opensearch,vmpicmodal.openCamera=openCamera,vmpicmodal.cancel=cancel,vmpicmodal.preview_snapshot=preview_snapshot,vmpicmodal.cancel_preview=cancel_preview,vmpicmodal.cameraIsOn="off",vmpicmodal.checkCameraIsOn=checkCameraIsOn,vmpicmodal.camera_on=camera_on,vmpicmodal.camera_off=camera_off,vmpicmodal.save_photo=save_photo,vmpicmodal.saveStudentPic=saveStudentPic,vmpicmodal.pic="",vmpicmodal.student=StudentServices.setTheStudent(vmpicmodal.dataToPass),vmpicmodal.shutter=new Audio,vmpicmodal.shutter.autoplay=!1,vmpicmodal.shutter.src=navigator.userAgent.match(/Firefox/)?"../images/shutter.ogg":"../images/shutter.mp3",vmpicmodal.pre_take_buttons,vmpicmodal.post_take_buttons,vmpicmodal.Webcam=$window.Webcam,vmpicmodal.data_uri,vmpicmodal.post_take_buttons=!1,vmpicmodal.pre_take_buttons=!0}function ModalPicInstanceController($scope,$log,$uibModalInstance,picfile,StudentServices,$route){function activate(){$log.debug("picselect student"),$log.debug(vmpicselect.student)}function renameFile(student,currentpicfile){return $log.debug("renameFile"),$log.debug(" student:"),$log.debug(student),$log.debug("pic"),$log.debug(currentpicfile),StudentServices.renameStudentPicFile(vmpicselect.renamepath,student,currentpicfile).then(function(data){return $log.debug("renameFile returned data"),$log.debug(data),vmpicselect.newpicfile=data.newpicfile,vmpicselect.newpicfile})}function ok(){$log.debug("hit ok");var thisstudent=StudentServices.getTheStudent();vmpicselect.okpicFile=StudentServices.getstudentPicFile(),vmpicselect.okpicFile=renameFile(thisstudent,vmpicselect.okpicFile),$log.debug("got file for ok:",vmpicselect.okpicFile),$log.debug("for student:",thisstudent),$uibModalInstance.close(vmpicselect.okpicFile)}function cancel(){$uibModalInstance.dismiss("cancel")}var vmpicselect=this;vmpicselect.ok=ok,vmpicselect.cancel=cancel,vmpicselect.picfile=picfile,vmpicselect.picfilelist=[],vmpicselect.renameFile=renameFile,vmpicselect.picpath="../v1/studentfiles",vmpicselect.renamepath="../v1/renamefile",vmpicselect.student=StudentServices.getTheStudent(),vmpicselect.newpicfile="",vmpicselect.okpicFile="",activate()}function ModalPicInstance2Controller($scope,$log,$uibModalInstance,picfile,StudentServices,uiGridConstants,$timeout,$route){function activate(){$log.debug("picselect student"),$log.debug(vmpicsearch.student),getFiles()}function getFiles(){return $log.debug("getfiles"),StudentServices.getstudentPicFiles(vmpicsearch.picpath).then(function(data){return $log.debug("getstudentPicFiles returned data"),$log.debug(data),vmpicsearch.picfileList=data,vmpicsearch.gridOptions.data=data.files,$timeout(function(){$log.debug("getfiles timeout"),vmpicsearch.gridApi.selection.selectRow&&($log.debug("selectRow"),vmpicsearch.gridApi.selection.selectRow(vmpicsearch.gridOptions.data[0]))}),vmpicsearch.picfileList})}function renameFile(student,currentpicfile){return $log.debug("renameFile"),$log.debug(" student:"),$log.debug(student),$log.debug("pic"),$log.debug(currentpicfile),StudentServices.renameStudentPicFile(vmpicsearch.renamepath,student,currentpicfile).then(function(data){return $log.debug("renameFile returned data"),$log.debug(data),vmpicsearch.newpicfile=data.newpicfile,vmpicsearch.newpicfile})}function setGridOptions(){vmpicsearch.gridOptions={enableFiltering:!0,enableRowSelection:!0,enableSelectAll:!1,multiSelect:!1,rowHeight:128,showGridFooter:!0,onRegisterApi:function(gridApi){vmpicsearch.gridApi=gridApi,$log.debug("gridApi onRegisterApi",vmpicsearch.gridApi),$log.debug($scope),gridApi.selection.on.rowSelectionChanged($scope,function(row){var msg="row selected "+row.entity.name;$log.debug(msg),StudentServices.setstudentPicFile(row.entity.name)})},paginationPageSizes:[3,50,100],paginationPageSize:3,columnDefs:[{field:"name",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"size",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{field:"modtime",headerCellClass:highlightFilteredHeader,enableCellEdit:!1},{name:"picture",field:"name",headerCellClass:highlightFilteredHeader,enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span> <img width="80px" ng-src="./images/students/{{grid.getCellValue(row, col)}}"/></span></div>'}]}}function highlightFilteredHeader(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""}function ok(){$log.debug("hit ok");var thisstudent=StudentServices.getTheStudent();vmpicsearch.okpicFile=StudentServices.getstudentPicFile(),vmpicsearch.okpicFile=renameFile(thisstudent,vmpicsearch.okpicFile),$log.debug("got file for ok:",vmpicsearch.okpicFile),$log.debug("for student:",thisstudent),$uibModalInstance.close(vmpicsearch.okpicFile)}function cancel(){$uibModalInstance.dismiss("cancel")}var vmpicsearch=this;vmpicsearch.ok=ok,vmpicsearch.cancel=cancel,vmpicsearch.picfile=picfile,vmpicsearch.picfilelist=[],vmpicsearch.getFiles=getFiles,vmpicsearch.renameFile=renameFile,vmpicsearch.picpath="../v1/studentfiles",vmpicsearch.renamepath="../v1/renamefile",vmpicsearch.student=StudentServices.getTheStudent(),vmpicsearch.newpicfile="",vmpicsearch.okpicFile="",vmpicsearch.highlightFilteredHeader=highlightFilteredHeader,vmpicsearch.gridApi=void 0,activate(),setGridOptions()}angular.module("ng-admin").controller("ModalPicUploadController",ModalPicUploadController).controller("ModalPicInstanceController",ModalPicInstanceController).controller("ModalPicInstance2Controller",ModalPicInstance2Controller),ModalPicUploadController.$inject=["$scope","$log","$uibModalInstance","$uibModal","$document","$window","StudentServices","Notification","dataToPass"],ModalPicInstanceController.$inject=["$scope","$log","$uibModalInstance","picfile","StudentServices","$route"],ModalPicInstance2Controller.$inject=["$scope","$log","$uibModalInstance","picfile","StudentServices","uiGridConstants","$timeout","$route"]}(),angular.module("ng-admin.core").run(["$templateCache",function($templateCache){$templateCache.put("templates/states/attendance-card.html",'<!DOCTYPE html><div class=col-md-12><div class=photo style="min-height: 300px;"><a href data-ng-click="card.showIndex = !card.showIndex;mother.vm.selectItem(card.studentID,card.showIndex, card, true)"><div class="mls photo-index" data-ng-if=card.showIndex style="text-align: left; font-size: small;"><p class=mls data-ng-if=mother.vm.hasSelected(card.studentID)>{{card.firstname}}</p><p class=mls data-ng-if=mother.vm.hasSelected(card.studentID)>{{card.rank}}</p><p class=balloon-wrapper><span ng-style="(card.readyness === true ) && {\'background\':\'lightgreen\',\'color\':\'black\'} || (card.readyness === false ) && {\'background\':\'yellow\',\'color\':\'black\'}" class=balloon>{{mother.vm.getAttendingCount()}}</span></p><p class=mls data-ng-if=mother.vm.hasSelected(card.studentID)>Time In?: {{card.daysSince}}</p><p class=mls data-ng-if=mother.vm.hasSelected(card.studentID)>Attend: {{card.daysAttended}}</p><p class=mls data-ng-if=mother.vm.hasSelected(card.studentID)>As of: {{card.MondayDOW}}</p></div><div class="mls photo-wrapper"><img src style="min-height:200px; max-width:100%;" data-ng-src={{card.src}} class=animation-fade data-imageloaded data-loadedclass=animation-faded></div><div class=photo-description style="text-align: center; font-size: large;">{{card.firstname}}<br>{{card.lastname}}</div></a></div><div style="text-align: center;"><button type=button data-ng-click="mother.vm.setStudentReadyNextRank(card.studentID,card.readyness = !card.readyness)" class="mbm btn btn-green btn-sm">Ready?</button> <button type=button data-ng-click=mother.vm.checkAttendanceStats(card.studentID) class="mbm btn btn-green btn-sm">Stats?</button><div ng-show=mother.vm.hasStats(card.studentID)><p class=mls data-ng-if=mother.vm.hasStats(card.studentID)>Time In?: {{mother.vm.daysSince}}</p><p class=mls data-ng-if=mother.vm.hasStats(card.studentID)>Attend: {{mother.vm.daysAttended}}</p><p class=mls data-ng-if=mother.vm.hasStats(card.studentID)>Ready?: {{card.readyness}}</p></div></div></div>'),$templateCache.put("templates/states/change-pwd.html",'<!DOCTYPE html><div class="animated bounceInDown col-md-3 col-md-offset-3"><div id=signup-page-content ng-controller="ChangepwdController as vm"><form name=form ng-submit=vm.changepwd() role=form><h1 class=block-heading>Change Password</h1><div class="form-group input-icon mbl" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><i class="fa fa-key"></i> <input type=password name=oldpassword id=oldpassword value placeholder="Old Password" class=form-control ng-model=vm.oldpassword ng-pattern=vm.re required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span> <span ng-show=form.password.$error.pattern class=help-block>Not a valid password.</span></div><div class="form-group input-icon mbl" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><i class="fa fa-key"></i> <input type=password name=newpassword id=newpassword value placeholder="New Password" class=form-control ng-model=vm.password ng-pattern=vm.re required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span> <span ng-show=form.password.$error.pattern class=help-block>Not a valid password.</span></div><div class=mbl><input type=password name=confirm_password value ng-keyup=vm.compare(vm.confirm_password) ng-pattern=re placeholder="Confirm Password" class=form-control ng-model=vm.confirm_password required> <span ng-show="vm.isconfirm || form.confirm_password.$dirty" ng-class="{true:\'green\',false:\'red\'}[vm.isconfirm]">Password does {{vm.isconfirm==true?\'\':\'not\'}} match</span></div><div class=form-actions><button type=submit ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-lg btn-primary btn-block">Submit</button> <img ng-if=vm.dataLoading src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="> <a href=#/login class="btn btn-link">Cancel</a></div></form></div></div>'),$templateCache.put("templates/states/creditcardView.html",'<!DOCTYPE html><html lang-"en"><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Roboto" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Quicksand" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel=stylesheet><style>\n* {\n  box-sizing: border-box;\n}\n\nblockquote,\nbody,\nbutton,\ndd,\ndl,\nfigure,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nol,\np,\npre,\nul {\n  margin: 0;\n  padding: 0;\n}\n\nol,\nul {\n  list-style: none;\n}\n\na {\n  text-decoration: none;\n}\n\nbutton,\nselect {\n  border: none;\n  outline: none;\n  background: none;\n  font-family: inherit;\n}\n\na,\nbutton,\ninput,\nselect,\ntextarea {\n  -webkit-tap-highlight-color: transparent;\n}\n\n:root {\n  overflow-x: hidden;\n  height: 100%;\n}\n\nbody {\n  background: #fff;\n  min-height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n/*  font-size: 62.5%;*/\n  font-family: Roboto, Open Sans, Segoe UI, sans-serif;\n  font-weight: 400;\n  font-style: normal;\n  -webkit-text-size-adjust: 100%;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizeLegibility;\n  font-feature-settings: "pnum";\n  font-variant-numeric: proportional-nums;\n}\n\n.globalContent {\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n}\n\n@font-face {\n  font-family: StripeIcons;\n  src: url(data:application/octet-stream;base64,d09GRk9UVE8AAAZUAAoAAAAAB6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAADKAAAAx8AAAOKkWuAp0dTVUIAAAZIAAAACgAAAAoAAQAAT1MvMgAAAXAAAABJAAAAYGcdjVZjbWFwAAACvAAAAFYAAACUKEhKfWhlYWQAAAD8AAAAMAAAADYJAklYaGhlYQAAAVAAAAAgAAAAJAYoAa5obXR4AAABLAAAACQAAAAoEOAAWW1heHAAAAD0AAAABgAAAAYAClAAbmFtZQAAAbwAAAD%2FAAABuXejDuxwb3N0AAADFAAAABMAAAAg%2F7gAMgAAUAAACgAAeNpjYGRgYABifeaSpHh%2Bm68MzMwHgCIMl08yqyDo%2F95Mkcy8QC4zAxNIFAD8tAiweNpjfMAQyfiAgYEpgoGBcQmQlmFgYPgAZOtAcQZEDgCHaQVGeNpjYGRgYD7z34eBgSmCgeH%2Ff6ZIBqAICuACAHpYBNp42mNgZtzAOIGBlYGDqYDJgYGBwQNCMwYwGDEcA%2FKBUthBqHe4H4MDg4L6Imae%2Fz4MB5jPMGwBCjOC5Bi9mKYAKQUGBgAFHgteAAAAeNplkMFqwkAURU9itBVKF6XLLrLsxiGKMYH0B4IgoqjdRokajAmNUfolhX5Df7IvZhBt5zHMeffduQwDPPCFQbWM81mzyZ3uocEz95qtK0%2BTN140t2jzLk7DaotiEmk2eWSlucErH5otnvjW3OSTH82tSg8n8eaYRkVXOY4TzIaLURB2tDaPi0OSZ3Y9G09tx6lxm5erPDtVA%2BX7wT7axXm5Vmmy7ClXDfqe515CCJkQs%2BFIKk8t6KJwzhUwY8iCkVBI54%2FvvzKXruBAQk6GfZM0ZipKxdfqVpylfErlP11uKHypgL2k7iSz8qxFTSV5SU%2FIlT2gjyfl%2FgKN9EDsAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAHEEACj8QNOBhYGOyDNAYRMQFpBcZL6ov%2F%2Foaw5%2F%2F%2F%2Ff3kvH8iD2McCxExAO1kYWIE2cjCwAwAgUQwvAAB42mNgZgCD%2F1sZjBiwAAAswgHqAHjaNVFbbxNHGN2JMmtlNnIoZFFx1F2nDoTWgJLIhRQqWlRowyXiUkqE1IZLVW0dJzHYjpAhxnbYi8HXdWxsEKCIi0DdqjxVyhOKkBBS%2FdAX%2FkJfmiCe0Gz4orbjLNFo5uj79B19Z85BXGsLhxAiB7ef%2BFmZGj8XaVb9dgdn%2B5Dd02J%2F2JqFIXtpeQ5Lc6h1YzKbXcN2F%2F2qg373wZ3ly%2Bs5gpCwfpO3d8dnXwyfOheJhC9FgsovsanJ4MCuzw84sN%2BBb1Zh34ADfU7za6fq%2Fyl8Ib7K9E4Eo9HgpHLQu6aL45CB8ug6yqAbKIeyqMAhjjD1nM49596hbqQgHf2B%2Fm5xt3S8sqXlORFe%2FHuSvuD3vesUQ4eVxjgEfm08PWK5%2FoF14lBjDAJvXI0xMRS0%2BMVjbGLIbzV%2BP2y5aOC46IfAb7TzT5cFbSJwEKCc9eXifGgqtOBahN3vWy7aOS76f1zkrVNiaNw1NIpfhyBg8X%2FN428t3v2KJl6KtVqxWpXpCD2Bq5XZW3XPrWv1dMVHEmZy9pr8dhsGdQuhKt%2FTh9Mz6nTCE34Yeyy56byfUHMzqaWrEpRpHldmrpqJrosXPyV0N%2BzAsMJYKzwMwjacTmtXGe9%2B7InkrtPz3aRoaIWPSUEtGjL1wUcYFnoJXeChG7qwpmfUHkI30XsvRdMsmKZMs9TwEsjR67ik6%2Fk14hk4jVcGe4k9yMMojGDNyKiqRy1opi5phUrG7HLDnkfdxOHktZIu072wB9jFhpHReoj3UXNF3lmReb%2FC0eaMx%2BESO1NY1w2myfuMuXW7VKvJ9CQ9im9Wy3XmllpLVX0kWUzNpmW6E%2FrY8ePkjLaV%2FPCMWVTeTJidTYtyuJpuWhSOMYsuwBhMgNK0dCtxS3O7%2Fmtvy7YL9lKn7RfvbODaEerw%2BXfuPfT92WDkiopLpaJZ9pQNUy9JAlNdyjVVH6PDTDV7saB2TadSCVWQYIQeZ2F8QgTVM30zdZtFlcOVSmU1WYFXolFFeRB9Kgt8PJmMx2vJu7IwvZoOS9XRFwsLsXCylKjMyGxXrV5kXxb%2BBxsddR0AAAEAAAAAAAAAAAAA)\n    format("woff");\n}\n\n.container,\n.container-fluid,\n.container-lg,\n.container-wide,\n.container-xl {\n  margin: 0 auto;\n  padding: 0 20px;\n  width: 100%;\n}\n\n.container,\n.container-lg {\n  max-width: 1040px;\n}\n\n.container-wide,\n.container-xl {\n  max-width: 1160px;\n}\n\n.common-SuperTitle {\n  font-weight: 300;\n  font-size: 45px;\n  line-height: 60px;\n  color: #32325d;\n  letter-spacing: -.01em;\n}\n\n@media (min-width: 670px) {\n  .common-SuperTitle {\n    font-size: 50px;\n    line-height: 70px;\n  }\n}\n\n.common-IntroText {\n  font-weight: 400;\n  font-size: 21px;\n  line-height: 31px;\n  color: #525f7f;\n}\n\n@media (min-width: 670px) {\n  .common-IntroText {\n    font-size: 24px;\n    line-height: 36px;\n  }\n}\n\n.common-BodyText {\n  font-weight: 400;\n  font-size: 17px;\n  line-height: 26px;\n  color: #6b7c93;\n}\n\n.common-Link {\n  color: #6772e5;\n  font-weight: 500;\n  transition: color 0.1s ease;\n  cursor: pointer;\n}\n\n.common-Link:hover {\n  color: #32325d;\n}\n\n.common-Link:active {\n  color: #000;\n}\n\n.common-Link--arrow:after {\n  font: normal 16px StripeIcons;\n  content: "\\2192";\n  padding-left: 5px;\n}\n\n.common-Button {\n  white-space: nowrap;\n  display: inline-block;\n  height: 40px;\n  line-height: 40px;\n  padding: 0 14px;\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n  background: #fff;\n  border-radius: 4px;\n  font-size: 15px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n  color: #6772e5;\n  text-decoration: none;\n  transition: all 0.15s ease;\n}\n\n.common-Button:hover {\n  color: #7795f8;\n  transform: translateY(-1px);\n  box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);\n}\n\n.common-Button:active {\n  color: #555abf;\n  background-color: #f6f9fc;\n  transform: translateY(1px);\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n}\n\n.common-Button--default {\n  color: #fff;\n  background: #6772e5;\n}\n\n.common-Button--default:hover {\n  color: #fff;\n  background-color: #7795f8;\n}\n\n.common-Button--default:active {\n  color: #e6ebf1;\n  background-color: #555abf;\n}\n\n.common-Button--dark {\n  color: #fff;\n  background: #32325d;\n}\n\n.common-Button--dark:hover {\n  color: #fff;\n  background-color: #43458b;\n}\n\n.common-Button--dark:active {\n  color: #e6ebf1;\n  background-color: #32325d;\n}\n\n.common-Button--disabled {\n  color: #fff;\n  background: #aab7c4;\n  pointer-events: none;\n}\n\n.common-ButtonIcon {\n  display: inline;\n  margin: 0 5px 0 0;\n  position: relative;\n}\n\n.common-ButtonGroup {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  margin: -10px;\n}\n\n.common-ButtonGroup .common-Button {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin: 10px;\n}\n\n/** Page-specific styles */\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n@keyframes void-animation-out {\n  0%,\n  to {\n    opacity: 1;\n  }\n}\n\nbody {\n  overflow-x: hidden;\n  background-color: #f6f9fc;\n}\n\nmain {\n  position: relative;\n  display: block;\n  z-index: 1;\n}\n\n.stripes {\n  position: absolute;\n  width: 100%;\n  transform: skewY(-12deg);\n  height: 950px;\n  top: -350px;\n  background: linear-gradient(180deg, #e6ebf1 350px, rgba(230, 235, 241, 0));\n}\n\n.stripes .stripe {\n  position: absolute;\n  height: 190px;\n}\n\n.stripes .s1 {\n  height: 380px;\n  top: 0;\n  left: 0;\n  width: 24%;\n  background: linear-gradient(90deg, #e6ebf1, rgba(230, 235, 241, 0));\n}\n\n.stripes .s2 {\n  top: 380px;\n  left: 4%;\n  width: 35%;\n  background: linear-gradient(\n    90deg,\n    hsla(0, 0%, 100%, 0.65),\n    hsla(0, 0%, 100%, 0)\n  );\n}\n\n.stripes .s3 {\n  top: 380px;\n  right: 0;\n  width: 38%;\n  background: linear-gradient(90deg, #e4e9f0, rgba(228, 233, 240, 0));\n}\n\nmain > .container-lg {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  position: relative;\n  max-width: 750px;\n  padding: 110px 20px 110px;\n}\n\nmain > .container-lg .cell {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-pack: center;\n  justify-content: center;\n  position: relative;\n  -ms-flex: auto;\n  flex: auto;\n  min-width: 100%;\n  min-height: 500px;\n  padding: 0 40px;\n}\n\nmain > .container-lg .cell + .cell {\n  margin-top: 70px;\n}\n\nmain > .container-lg .cell.intro {\n  padding: 0;\n}\n\n@media (min-width: 670px) {\n  main > .container-lg .cell.intro {\n    -ms-flex-align: center;\n    align-items: center;\n    text-align: center;\n  }\n\n  .optionList {\n    margin-left: 13px;\n  }\n}\n\nmain > .container-lg .cell.intro > * {\n  width: 100%;\n  max-width: 700px;\n}\n\nmain > .container-lg .cell.intro .common-IntroText {\n  margin-top: 10px;\n}\n\nmain > .container-lg .cell.intro .common-BodyText {\n  margin-top: 15px;\n}\n\nmain > .container-lg .cell.intro .common-ButtonGroup {\n  width: auto;\n  margin-top: 20px;\n}\n\nmain > .container-lg .example {\n  -ms-flex-align: center;\n  align-items: center;\n  border-radius: 4px;\n  box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);\n  padding: 80px 0px;\n  margin-left: -20px;\n  margin-right: -20px;\n}\n\n@media (min-width: 670px) {\n  main > .container-lg .example {\n    padding: 40px;\n  }\n}\n\nmain > .container-lg .example.submitted form,\nmain > .container-lg .example.submitting form {\n  opacity: 0;\n  transform: scale(0.9);\n  pointer-events: none;\n}\n\nmain > .container-lg .example.submitted .success,\nmain > .container-lg .example.submitting .success {\n  pointer-events: all;\n}\n\nmain > .container-lg .example.submitting .success .icon {\n  opacity: 1;\n}\n\nmain > .container-lg .example.submitted .success > * {\n  opacity: 1;\n  transform: none !important;\n}\n\nmain > .container-lg .example.submitted .success > :nth-child(2) {\n  transition-delay: 0.1s;\n}\n\nmain > .container-lg .example.submitted .success > :nth-child(3) {\n  transition-delay: 0.2s;\n}\n\nmain > .container-lg .example.submitted .success > :nth-child(4) {\n  transition-delay: 0.3s;\n}\n\nmain > .container-lg .example.submitted .success .icon .border,\nmain > .container-lg .example.submitted .success .icon .checkmark {\n  opacity: 1;\n  stroke-dashoffset: 0 !important;\n}\n\nmain > .container-lg .example * {\n  margin: 0;\n  padding: 0;\n}\n\nmain > .container-lg .example .caption {\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  width: 100%;\n  top: 100%;\n  left: 0;\n  padding: 15px 10px 0;\n  color: #aab7c4;\n  font-family: Roboto, "Open Sans", "Segoe UI", sans-serif;\n  font-size: 15px;\n  font-weight: 500;\n}\n\nmain > .container-lg .example .caption * {\n  font-family: inherit;\n  font-size: inherit;\n  font-weight: inherit;\n}\n\nmain > .container-lg .example .caption .no-charge {\n  color: #cfd7df;\n  margin-right: 10px;\n}\n\nmain > .container-lg .example .caption a.source {\n  text-align: right;\n  color: inherit;\n  transition: color 0.1s ease-in-out;\n  margin-left: 10px;\n}\n\nmain > .container-lg .example .caption a.source:hover {\n  color: #6772e5;\n}\n\nmain > .container-lg .example .caption a.source:active {\n  color: #43458b;\n}\n\nmain > .container-lg .example .caption a.source  svg {\n  margin-right: 10px;\n}\n\nmain > .container-lg .example .caption a.source svg path {\n  fill: currentColor;\n}\n\nmain > .container-lg .example form {\n  position: relative;\n  width: 100%;\n  max-width: 500px;\n  transition-property: opacity, transform;\n  transition-duration: 0.35s;\n  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n\nmain > .container-lg .example form input::-webkit-input-placeholder {\n  opacity: 1;\n}\n\nmain > .container-lg .example form input::-moz-placeholder {\n  opacity: 1;\n}\n\nmain > .container-lg .example form input:-ms-input-placeholder {\n  opacity: 1;\n}\n\nmain > .container-lg .example .error {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n  justify-content: center;\n  position: absolute;\n  width: 100%;\n  top: 100%;\n  margin-top: 20px;\n  left: 0;\n  padding: 0 15px;\n  font-size: 13px !important;\n  opacity: 0;\n  transform: translateY(10px);\n  transition-property: opacity, transform;\n  transition-duration: 0.35s;\n  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);\n}\n\nmain > .container-lg .example .error.visible {\n  opacity: 1;\n  transform: none;\n}\n\nmain > .container-lg .example .error .message {\n  font-size: inherit;\n}\n\nmain > .container-lg .example .error svg {\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  margin-top: -1px;\n  margin-right: 10px;\n}\n\nmain > .container-lg .example .success {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  padding: 10px;\n  text-align: center;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n@media (min-width: 670px) {\n  main > .container-lg .example .success {\n    padding: 40px;\n  }\n}\n\nmain > .container-lg .example .success > * {\n  transition-property: opacity, transform;\n  transition-duration: 0.35s;\n  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);\n  opacity: 0;\n  transform: translateY(50px);\n}\n\nmain > .container-lg .example .success .icon {\n  margin: 15px 0 30px;\n  transform: translateY(70px) scale(0.75);\n}\n\nmain > .container-lg .example .success .icon svg {\n  will-change: transform;\n}\n\nmain > .container-lg .example .success .icon .border {\n  stroke-dasharray: 251;\n  stroke-dashoffset: 62.75;\n  transform-origin: 50% 50%;\n  transition: stroke-dashoffset 0.35s cubic-bezier(0.165, 0.84, 0.44, 1);\n  animation: spin 1s linear infinite;\n}\n\nmain > .container-lg .example .success .icon .checkmark {\n  stroke-dasharray: 60;\n  stroke-dashoffset: 60;\n  transition: stroke-dashoffset 0.35s cubic-bezier(0.165, 0.84, 0.44, 1) 0.35s;\n}\n\nmain > .container-lg .example .success .title {\n  font-size: 17px;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\nmain > .container-lg .example .success .message {\n  font-size: 14px;\n  font-weight: 400;\n  margin-bottom: 25px;\n  line-height: 1.6em;\n}\n\nmain > .container-lg .example .success .message span {\n  font-size: inherit;\n}\n\nmain > .container-lg .example .success .reset:active {\n  transition-duration: 0.15s;\n  transition-delay: 0s;\n  opacity: 0.65;\n}\n\nmain > .container-lg .example .success .reset svg {\n  will-change: transform;\n}\n\nfooter {\n  position: relative;\n  max-width: 750px;\n  padding: 50px 20px;\n  margin: 0 auto;\n}\n\n.optionList {\n  margin: 6px 0;\n}\n\n.optionList li {\n  display: inline-block;\n  margin-right: 13px;\n}\n\n.optionList a {\n  color: #aab7c4;\n  transition: color 0.1s ease-in-out;\n  cursor: pointer;\n  font-size: 15px;\n  line-height: 26px;\n}\n\n.optionList a.selected {\n  color: #6772e5;\n  font-weight: 600;\n}\n\n.optionList a:hover {\n  color: #32325d;\n}\n\n.optionList a.selected:hover {\n  cursor: default;\n  color: #6772e5;\n}  \n  \n\n.example.example1 {\n  background-color: #6772e5;\n}\n\n.example.example1 * {\n  font-family: Roboto, Open Sans, Segoe UI, sans-serif;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.example.example1 fieldset {\n  margin: 0 15px 20px;\n  padding: 0;\n  border-style: none;\n  background-color: #7795f8;\n  box-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 #829fff;\n  border-radius: 4px;\n}\n\n.example.example1 .row {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  margin-left: 15px;\n}\n\n.example.example1 .row + .row {\n  border-top: 1px solid #819efc;\n}\n\n.example.example1 label {\n  width: 33%;\n  min-width: 70px;\n  padding: 11px 0;\n  color: #c4f0ff;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.example.example1 input, .example.example1 button {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  outline: none;\n  border-style: none;\n}\n\n.example.example1 input:-webkit-autofill {\n  -webkit-text-fill-color: #fce883;\n  transition: background-color 100000000s;\n  -webkit-animation: 1ms void-animation-out;\n}\n\n.example.example1 .StripeElement--webkit-autofill {\n  background: transparent !important;\n}\n\n.example.example1 .StripeElement {\n  width: 100%;\n  padding: 11px 15px 11px 0;\n}\n\n.example.example1 input {\n  width: 100%;\n  padding: 11px 15px 11px 0;\n  color: #fff;\n  background-color: transparent;\n  -webkit-animation: 1ms void-animation-out;\n}\n\n.example.example1 input::-webkit-input-placeholder {\n  color: #87bbfd;\n}\n\n.example.example1 input::-moz-placeholder {\n  color: #87bbfd;\n}\n\n.example.example1 input:-ms-input-placeholder {\n  color: #87bbfd;\n}\n\n.example.example1 button {\n  display: block;\n  width: calc(100% - 30px);\n  height: 40px;\n  margin: 40px 15px 0;\n  background-color: #f6a4eb;\n  box-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 #ffb9f6;\n  border-radius: 4px;\n  color: #fff;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.example.example1 button:active {\n  background-color: #d782d9;\n  box-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 #e298d8;\n}\n\n.example.example1 .field {\n  position: relative;\n  width: 100%;\n  height: 50px;\n  margin: 0 10px;\n}\n\n.example.example1 .field.full-width label {\n  width: 100%;\n}\n\n.example.example1 .field.half-width {\n  width: 50%;\n}\n\n.example.example1 .field.quarter-width {\n  width: calc(25% - 10px);\n}\n\n\n.example.example1 .error svg .base {\n  fill: #fff;\n}\n\n.example.example1 .error svg .glyph {\n  fill: #6772e5;\n}\n\n.example.example1 .error .message {\n  color: #fff;\n}\n\n.example.example1 .success .icon .border {\n  stroke: #87bbfd;\n}\n\n.example.example1 .success .icon .checkmark {\n  stroke: #fff;\n}\n\n.example.example1 .success .title {\n  color: #fff;\n}\n\n.example.example1 .success .message {\n  color: #9cdbff;\n}\n\n.example.example1 .success .reset path {\n  fill: #fff;\n}\n    </style></head><body><div class=globalContent><main><section class=container-lg><div class="cell example example1"><form><fieldset><div class=row><label for=example1-name data-tid=elements_examples.form.name_label>Name</label> <input id=example1-name data-tid=elements_examples.form.name_placeholder type=text placeholder="John Doe" required></div><div class=row><label for=example1-address data-tid=elements_examples.form.address_label>Address</label> <input id=example1-address data-tid=elements_examples.form.address_placeholder type=text placeholder="185 Berry St" required></div><div class=row><label data-tid=elements_examples.form.city_label>City/State/Zip</label><div class="field half-width"><input id=example1-city data-tid=elements_examples.form.city_placeholder type=text placeholder=Natick required></div><div class="field quarter-width"><input id=example1-state data-tid=elements_examples.form.state_placeholder type=text placeholder=MA required></div><div class="field quarter-width"><input id=example1-zip data-tid=elements_examples.form.postal_code_placeholder type=text placeholder=01760 required></div></div></fieldset><fieldset><div class=row><label for=example1-card-number data-tid=elements_examples.form.card_number_label>Card number</label><div id=example1-card-number></div></div><div class=row><label for=example1-card-expiry data-tid=elements_examples.form.card_expiry_label>Expiration</label><div id=example1-card-expiry></div></div><div class=row><label for=example1-card-cvc data-tid=elements_examples.form.card_cvc_label>CVC</label><div id=example1-card-cvc></div></div></fieldset><button type=submit data-tid=elements_examples.form.pay_button>Pay ${{vm.amt}} for {{vm.desc}}</button><div class=error role=alert><svg xmlns=http://www.w3.org/2000/svg width=17 height=17 viewbox="0 0 17 17"><path class=base fill=#000 d="M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z"></path><path class=glyph fill=#FFF d="M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z"></path></svg><span class=message></span></div></form><div class=success><div class=icon><svg width=84px height=84px viewbox="0 0 84 84" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><circle class=border cx=42 cy=42 r=40 stroke-linecap=round stroke-width=4 stroke=#000 fill=none></circle><path class=checkmark stroke-linecap=round stroke-linejoin=round d="M23.375 42.5488281 36.8840688 56.0578969 64.891932 28.0500338" stroke-width=4 stroke=#000 fill=none></path></svg></div><h3 class=title data-tid=elements_examples.success.title>Payment successful</h3><p class=message><span data-tid=elements_examples.success.message>Thanks for paying with Stripe</span><span class=token>tok_189gMN2eZvKYlo2CwTBv9KKh</span></p><a class=reset href=#><svg width=32px height=32px viewbox="0 0 32 32" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path fill=#000000 d="M15,7.05492878 C10.5000495,7.55237307 7,11.3674463 7,16 C7,20.9705627 11.0294373,25 16,25 C20.9705627,25 25,20.9705627 25,16 C25,15.3627484 24.4834055,14.8461538 23.8461538,14.8461538 C23.2089022,14.8461538 22.6923077,15.3627484 22.6923077,16 C22.6923077,19.6960595 19.6960595,22.6923077 16,22.6923077 C12.3039405,22.6923077 9.30769231,19.6960595 9.30769231,16 C9.30769231,12.3039405 12.3039405,9.30769231 16,9.30769231 L16,12.0841673 C16,12.1800431 16.0275652,12.2738974 16.0794108,12.354546 C16.2287368,12.5868311 16.5380938,12.6540826 16.7703788,12.5047565 L22.3457501,8.92058924 L22.3457501,8.92058924 C22.4060014,8.88185624 22.4572275,8.83063012 22.4959605,8.7703788 C22.6452866,8.53809377 22.5780351,8.22873685 22.3457501,8.07941076 L22.3457501,8.07941076 L16.7703788,4.49524351 C16.6897301,4.44339794 16.5958758,4.41583275 16.5,4.41583275 C16.2238576,4.41583275 16,4.63969037 16,4.91583275 L16,7 L15,7 L15,7.05492878 Z M16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 Z"></path></svg></a></div></div></section><section><h4>Information to paste into credit card fields</h4><div class=result><ul id=properties></ul><p>Status: <span id=status></span></p></div><form><label>Place cursor here and then scan <input type=text name=field1></label></form></section></main></div></body><script type=text/javascript>\n  // Simple localization\nconst isGithubPages = window.location.hostname === \'stripe.github.io\';\nconst localeIndex = isGithubPages ? 2 : 1;\nwindow.__exampleLocale = window.location.pathname.split(\'/\')[localeIndex] || \'en\';\nconst urlPrefix = isGithubPages ? \'/elements-examples/\' : \'/\';\n\ndocument.querySelectorAll(\'.optionList a\').forEach(function(langNode) {\n  const langValue = langNode.getAttribute(\'data-lang\');\n  const langUrl = langValue === \'en\' ? urlPrefix : (urlPrefix + langValue + \'/\');\n\n  if (langUrl === window.location.pathname || langUrl === window.location.pathname + \'/\') {\n    langNode.className += \' selected\';\n    langNode.parentNode.setAttribute(\'aria-selected\', \'true\');\n  } else {\n    langNode.setAttribute(\'href\', langUrl);\n    langNode.parentNode.setAttribute(\'aria-selected\', \'false\');\n  }\n});\n\n</script></html>'),
$templateCache.put("templates/states/email.html",'<div class=modal-content><form name=form.contactform novalidate><div class=modal-header><h1>Email Form</h1></div><div class=modal-body><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Mail</h2></div><div class=panel-body><div class=row><div class=col-md-12 style="height: 120px;"><div class=col-md-8><div class=select-box><ui-select ng-model=emailpick theme=bootstrap multiple tagging=tagTransform reset-search-input=true style="width: 300px;" on-select=setEmailFromPick($select.selected) title="Choose an email" append-to-body=false><ui-select-match placeholder="Filter the emails...">{{$item.email}}</ui-select-match><ui-select-choices repeat="e in refreshemaillist.refreshemaillist | filter: $select.search track by e.ID" refresh=refreshemails($select.search) refresh-delay=0><small>{{e.FirstName}}&nbsp; <span ng-bind-html="e.email | highlight: $select.search"></span></small></ui-select-choices></ui-select></div></div><div class=col-md-4><button type=button ng-click=addTo() class="btn btn-primary">Add To List</button> <button type=button ng-click=addCC() class="btn btn-primary">Add CC List</button> <button type=button ng-click=addBCC() class="btn btn-primary">Add BCC List</button></div></div></div><div ng-show=eventResult><div class=col-lg-12><label for=inputEmail class=control-label>To</label><div ng-repeat="e in inputEmail.item">{{e.email}}</div></div><div class=col-lg-12><label for=inputCC class=control-label>Cc</label><div ng-repeat="e in inputCC.item">{{e.email}}</div></div><div class=col-lg-12><label for=inputBCC class=control-label>Bcc</label><div ng-repeat="e in inputBCC.item">{{e.email}}</div></div><div class=col-lg-12><div class=form-group ng-class="{\'has-error\': form.contactform.inputSubject.$invalid, \'has-success\': !form.contactform.inputSubject.$invalid}"><label for=inputSubject class=control-label>Subject</label><div class="input-icon right"><i data-hover=tooltip ng-show=form.contactform.inputSubject.$dirty ng-class="form.contactform.inputSubject.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input ng-model=input.Subject type=text class=form-control id=inputSubject name=inputSubject placeholder="Subject Message" required></div></div><div style=color:maroon role=alert ng-messages=form.contactform.inputSubject.$error class=has-error><div ng-message=required>You did not enter a field</div></div></div><div class=col-lg-12><div class=form-group><label for=inputMessage class=control-label>Message</label> <textarea ui-tinymce=tinymceOptions ng-change=messageChange(input) ng-model=input.Message class=form-control name=inputMessage placeholder="Your Message..."></textarea></div></div><div class="col-lg-offset-2 col-lg-10"><div class=form-group><button type=button ng-click=submitForm() ng-disabled=submitButtonDisabled class="btn btn-green">Send Message</button></div></div></div><p ng-class=result style="padding: 15px; margin: 0;">{{ resultMessage }}</p></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-green" ng-click=cancel()>Close</button></div></form></div>'),$templateCache.put("templates/states/emaillist.html",'<div class=modal-content><div class=modal-header><h1>Email List</h1></div><div class=modal-body><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Mail</h2></div><div class=panel-body><div ui-grid=vm.gridOptions ui-if="vm.gridOptions.data.length>0" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()><div class=watermark ng-show=!vm.gridOptions.data.length>No email available</div></div></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-blue" ng-click=vm.cancel()>Close</button></div></div>'),$templateCache.put("templates/states/emailview.html",'<div class=modal-content><form name=form.read novalidate><div class=modal-header><h1>Email Form</h1></div><div class=modal-body><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Mail Box</h2></div><div class=panel-body><div class=col-lg-12><div class=form-group><button type=button ng-click=vm.ereply() class="btn btn-green">Reply</button> <button type=button ng-click=vm.eforward() class="btn btn-green">Forward</button> <button type=button ng-click=vm.removeEmailView() class="btn btn-red">Delete</button> <button type=button ng-click=vm.markRead() class="btn btn-green">Mark Read</button> <button type=button ng-click=vm.markUnread() class="btn btn-green">Mark Unread</button></div></div><div><div class=col-lg-12><h2>{{vm.data.subject}}</h2><hr></div><div class="row col-lg-12"><div class=col-lg-10><div><b></b>{{vm.data.from}}</div></div><div class=col-lg-2><div ng-show=vm.data.datef>{{vm.data.datef }}</div></div><hr></div><div class="col-lg-offset-1 col-lg-11"><div ng-bind-html=vm.data.body></div><hr></div></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-blue" ng-click=vm.cancel()>Close</button></div></form></div>'),$templateCache.put("templates/states/filtercoltemplate.html",'<div class=ui-grid-filter-container ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><select class="ui-grid-filter-select ui-grid-filter-input-0" ng-model=colFilter.term ng-options="option.id as option.value for option in colFilter.options track by option.id"></select><div role=button class=ui-grid-filter-button-select ng-click="removeFilter(colFilter, $index)" ng-if=!colFilter.disableCancelFilterButton ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term=== \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class=ui-grid-icon-cancel ui-grid-one-bind-aria-label=aria.removeFilter aria-label="Remove Filter">&nbsp;</i></div></div>'),$templateCache.put("templates/states/filtercoltemplaterank.html",'<div class=ui-grid-filter-container ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><select class="ui-grid-filter-select ui-grid-filter-input-0" ng-model=colFilter.term ng-options="option.value as option.value for option in colFilter.options track by option.value">ng-options="state.id as state.dep for state in ((countries | filter:{\'id\':selectedCountry})[0].states) track by state.id"></select><div role=button class=ui-grid-filter-button-select ng-click="removeFilter(colFilter, $index)" ng-if=!colFilter.disableCancelFilterButton ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term=== \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class=ui-grid-icon-cancel ui-grid-one-bind-aria-label=aria.removeFilter aria-label="Remove Filter">&nbsp;</i></div></div>'),$templateCache.put("templates/states/filtercoltemplatevlu.html",'<div ui-grid-filter><div class="ui-grid-filter-container ng-scope" ng-style=col.extraStyle ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type === \'select\'" class=ng-scope><select class="ui-grid-filter-select ui-grid-filter-input-0" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label ng-model=colFilter.term ng-options="option.value as option.value for option in colFilter.selectOptions" placeholder="Filter for column"></select><div role=button class=ui-grid-filter-button-select ng-click="removeFilter(colFilter, $index)" ng-if=!colFilter.disableCancelFilterButton ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class=ui-grid-icon-cancel ui-grid-one-bind-aria-label=aria.removeFilter aria-label="Remove Filter">&nbsp;</i></div></div></div></div>'),$templateCache.put("templates/states/filtercoltemplatevlu2.html",'<div ui-grid-filter><div class="ui-grid-filter-container ng-scope" ng-style=col.extraStyle ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type === \'select\'" class=ng-scope><select class="ui-grid-filter-select ui-grid-filter-input-0" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label ng-model=colFilter.term ng-options="option.value as option.label for option in colFilter.selectOptions" placeholder="Filter for column"></select><div role=button class=ui-grid-filter-button-select ng-click="removeFilter(colFilter, $index)" ng-if=!colFilter.disableCancelFilterButton ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class=ui-grid-icon-cancel ui-grid-one-bind-aria-label=aria.removeFilter aria-label="Remove Filter">&nbsp;</i></div></div></div></div>'),$templateCache.put("templates/states/filtercoltemplatevlu2id.html",'<div ui-grid-filter><div class="ui-grid-filter-container ng-scope" ng-style=col.extraStyle ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type === \'select\'" class=ng-scope><select class="ui-grid-filter-select ui-grid-filter-input-0" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label ng-model=colFilter.term ng-options="option.id as option.value for option in colFilter.selectOptions track by option.id" placeholder="Filter for column"></select><div role=button class=ui-grid-filter-button-select ng-click="removeFilter(colFilter, $index)" ng-if=!colFilter.disableCancelFilterButton ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class=ui-grid-icon-cancel ui-grid-one-bind-aria-label=aria.removeFilter aria-label="Remove Filter">&nbsp;</i></div></div></div></div>'),$templateCache.put("templates/states/forgot-pwd.html",'<!DOCTYPE html><div class="animated bounceInDown col-md-3 col-md-offset-3"><div id=signin-page-content ng-controller="ForgotpwdController as pagevm"><form name=form ng-submit="form.$valid && pagevm.forgotpwd()" class=form role=form novalidate><h1 class=block-heading>Forgot Password</h1><p>Dear user, enter your username and we will send an email to what we have on record to reset your passsword!</p><div class=form-group ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><div class=input-icon><i class="fa fa-user"></i> <input type=text placeholder=Username name=username autocomplete=on required id=username ng-model=pagevm.username class=form-control> <span ng-show="form.username.$dirty && form.username.$error.required" class=help-block>Username is required</span></div></div><div class=form-actions><button type=submit ng-disabled="form.$invalid || pagevm.dataLoading" class="btn btn-primary">Reset &nbsp;<i class="fa fa-chevron-circle-right"></i></button> <img ng-if=pagevm.dataLoading src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="></div><hr><div class=create-account><p>Don\'t have an account yet? &nbsp;<a id=btn-register href=/#/page-signup>Create an account</a></p></div></form></div></div>'),$templateCache.put("templates/states/form-layouts-editstudent.html",'<!DOCTYPE html><div id=form-layouts-editstudent class=row ng-controller="FormLayoutsControllerEditStudent as vmstudent"><div class=col-lg-12><uib-tabset type=pills active=vmstudent.active><uib-tab index=1 id=tab-studentinfo heading="Student Information" select="vmstudent.setActiveTab(1,\'studentinfoselect\');infotabShown = !infotabShown" deselect="infotabShown = !infotabShown"><div class=row><div><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>Student</div><div class="panel-body pan"><form action novalidate name=editstudent class=form-horizontal><div class="form-body pal"><h3 class=block-heading>Student Information</h3><div id=studentid ng-model=vmstudent.students.ID>{{vmstudent.students.ID}}</div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.FirstName.$invalid, \'has-success\': !editstudent.FirstName.$invalid}" class=form-group><label for=inputFirstName class=control-label>First Name</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.FirstName.$dirty ng-class="editstudent.FirstName.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputFirstName autocomplete=given-name type=text placeholder="First Name" name=FirstName ng-model=vmstudent.students.FirstName ng-change=vmstudent.updateStudent() required minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.FirstName.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.LastName.$invalid, \'has-success\': !editstudent.LastName.$invalid}" class=form-group><label for=inputLastName class=control-label>LastName</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.LastName.$dirty ng-class="editstudent.LastName.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputLastName autocomplete=family-name type=text placeholder="Last Name" name=LastName ng-model=vmstudent.students.LastName ng-change=vmstudent.updateStudent() required minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.LastName.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-3><div class=row><div class=col-md-12><span class=thumbnail ng-switch on=vmstudent.students.pictureurldecache><img ng-switch-when=missing ng-src=../images/students/missingstudentpicture.png> <img ng-switch-default ng-src=../images/students/{{vmstudent.students.pictureurldecache}}></span></div></div><div class=row><div class="col-md-12 col-xs-12"><a ng-click=vmstudent.openPhoto() class="btn btn-sm btn-green">Manage Photo</a></div></div></div><div class=col-md-9><div class=col-md-6><div class=form-group ng-class="{\'has-error\': editstudent.Email.$invalid, \'has-success\': !editstudent.Email.$invalid}"><label class=control-label for=inputEmail>Email</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editstudent.Email.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show=editstudent.Email.$dirty></i> <input class=form-control id=inputEmail autocomplete=email maxlength=120 name=Email ng-change=vmstudent.updateStudent() ng-model=vmstudent.students.Email ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder="Email Address" type=email></div><div class=has-error ng-messages=editstudent.Email.$error role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div class=form-group ng-class="{\'has-error\': editstudent.Email2.$invalid, \'has-success\': !editstudent.Email2.$invalid}"><label class=control-label for=inputEmail2>Email2</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editstudent.Email2.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show=editstudent.Email2.$dirty></i> <input class=form-control id=inputEmail2 autocomplete=email maxlength=120 name=Email2 ng-change=vmstudent.updateStudent() ng-model=vmstudent.students.Email2 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder="Alternate Email" type=email></div><div class=has-error ng-messages=editstudent.Email2.$error role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div class=form-group ng-class="{\'has-error\': editstudent.Phone.$invalid, \'has-success\': !editstudent.Phone.$invalid}"><label class=control-label for=inputPhone>Phone</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editstudent.Phone.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show=editstudent.Phone.$dirty></i> <input class=form-control id=inputPhone name=Phone autocomplete=tel-national ng-change=vmstudent.updateStudent() ng-model=vmstudent.students.Phone ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder type=text required ui-mask="(999) 999-9999"></div><div class=has-error ng-messages=editstudent.Phone.$error role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div class=form-group ng-class="{\'has-error\': editstudent.AltPhone.$invalid, \'has-success\': !editstudent.AltPhone.$invalid}"><label class=control-label for=inputAltPhone>AltPhone</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editstudent.AltPhone.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show=editstudent.AltPhone.$dirty></i> <input class=form-control id=inputAltPhone autocomplete=tel-national name=AltPhone ng-change=vmstudent.updateStudent() ng-model=vmstudent.students.AltPhone ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder type=text ui-mask="(999) 999-9999"></div><div class=has-error ng-messages=editstudent.AltPhone.$error role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=col-md-3></div><div class=col-md-9><div class=row><div class=col-md-6><label for=inputBirthday class=control-label>Birthday</label><div ng-class="{\'has-error\': editstudent.Birthday.$invalid, \'has-success\': !editstudent.Birthday.$invalid}" class=form-group><div class=col-md-11 style="padding-right: 0px;"><div class="input-icon right"><i ng-click=vmstudent.dateopen($event) data-hover=tooltip data-original-title=Correct ng-show=editstudent.Birthday.$dirty ng-class="editstudent.Birthday.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputBirthday autocomplete=bday type=text placeholder=mm/dd/yyyy name=Birthday required ng-model=vmstudent.students.Birthday ng-change=vmstudent.updateStudent() is-open=vmstudent.status.opened uib-datepicker-popup={{vmstudent.bdateformat}} ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div></div><div class=col-md-1 style="padding-right: 0px; padding-left: 0px;"><button type=button class="btn btn-default" ng-click=vmstudent.dateopen($event)><i class="glyphicon glyphicon-calendar"></i></button></div><div style=color:maroon role=alert ng-messages=editstudent.Birthday.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.sex.$invalid, \'has-success\': !editstudent.sex.$invalid}" class=form-group><label for=inputsex class=control-label>Gender</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.sex.$dirty ng-class="editstudent.sex.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputsex autocomplete=sex type=text name=sex ng-model=vmstudent.students.sex ng-change=vmstudent.updateStudent() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="g in vmstudent.genders" ng-selected="{{g==vmstudent.students.sex}}" placeholder=Select value={{g}}>{{g}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.sex.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.Parent.$invalid, \'has-success\': !editstudent.Parent.$invalid}" class=form-group><label for=inputParent class=control-label>Parent</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.Parent.$dirty ng-class="editstudent.Parent.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputParent type=text placeholder="Parent Name" name=Parent ng-model=vmstudent.students.Parent ng-change=vmstudent.updateStudent() minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.Parent.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.EmergencyContact.$invalid, \'has-success\': !editstudent.EmergencyContact.$invalid}" class=form-group><label for=inputEmergencyContact class=control-label>Emergency Contact</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.EmergencyContact.$dirty ng-class="editstudent.EmergencyContact.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputEmergencyContact type=text placeholder="Emergency Contact Name" name=EmergencyContact ng-model=vmstudent.students.EmergencyContact ng-change=vmstudent.updateStudent() minlength=2 maxlength=80 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.EmergencyContact.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.Notes.$invalid, \'has-success\': !editstudent.Notes.$invalid}" class=form-group><label for=inputNotes class=control-label>Notes</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.Notes.$dirty ng-class="editstudent.Notes.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <textarea id=inputNotes type=text placeholder="Enter notes" name=Notes ng-model=vmstudent.students.Notes ng-change=vmstudent.updateStudent() ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></textarea></div><div style=color:maroon role=alert ng-messages=editstudent.Notes.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.medicalConcerns.$invalid, \'has-success\': !editstudent.medicalConcerns.$invalid}" class=form-group><label for=inputmedicalConcerns class=control-label>Medical Concerns</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.medicalConcerns.$dirty ng-class="editstudent.medicalConcerns.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <textarea id=inputmedicalConcerns type=text placeholder="Enter Medical concerns" name=medicalConcerns ng-model=vmstudent.students.medicalConcerns ng-change=vmstudent.updateStudent() ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></textarea></div><div style=color:maroon role=alert ng-messages=editstudent.medicalConcerns.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div></div></div><h3 class=block-heading>Address Information</h3><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.Address.$invalid, \'has-success\': !editstudent.Address.$invalid}" class=form-group><label for=inputAddress class=control-label>Address</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.Address.$dirty ng-class="editstudent.Address.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputAddress autocomplete=street-address type=text placeholder="999 Street Address" name=Address ng-model=vmstudent.students.Address ng-change=vmstudent.updateStudent() minlength=5 maxlength=120 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.Address.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.City.$invalid, \'has-success\': !editstudent.City.$invalid}" class=form-group><label for=inputCity class=control-label>City</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.City.$dirty ng-class="editstudent.City.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputCity type=text autocomplete=address-level2 placeholder=City name=City ng-model=vmstudent.students.City ng-change=vmstudent.updateStudent() minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.City.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.ZIP.$invalid, \'has-success\': !editstudent.ZIP.$invalid}" class=form-group><label for=inputZIP class=control-label>Zip/Postal Code</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.ZIP.$dirty ng-class="editstudent.ZIP.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputZIP type=text autocomplete=postal-code name=ZIP ng-model=vmstudent.students.ZIP ng-change=vmstudent.updateStudent() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="z in vmstudent.zipList.zips" ng-selected="{{z==vmstudent.students.ZIP}}" placeholder=Select value={{z.zip}}>{{z.zip}} - {{z.city}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.ZIP.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6></div></div><h3 class=block-heading>Dojo Information</h3><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.ContactType.$invalid, \'has-success\': !editstudent.ContactType.$invalid}" class=form-group><label for=inputContactType class=control-label>Contact Type</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.ContactType.$dirty ng-class="editstudent.ContactType.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputContactType type=text name=ContactType ng-model=vmstudent.students.ContactType ng-change=vmstudent.updateStudent() minlength=3 maxlength=20 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.ContactTypeList" ng-selected="{{iter.listkey==vmstudent.students.ContactType}}" placeholder=Select value={{iter.listkey}}>{{iter.listvalue}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.ContactType.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.quickbooklink.$invalid, \'has-success\': !editstudent.quickbooklink.$invalid}" class=form-group><label for=inputquickbooklink class=control-label>Accounting System Link</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.quickbooklink.$dirty ng-class="editstudent.quickbooklink.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputquickbooklink type=text placeholder="Account id" name=quickbooklink ng-model=vmstudent.students.quickbooklink ng-change=vmstudent.updateStudent() minlength maxlength ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editstudent.quickbooklink.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class="portlet portlet-primary col-md-6"><div class=portlet-header><div class=caption>Ranks</div></div><div class=portlet-body><div class=table-tools><div class="row col-md-offset-11 mbs"><button type=button class="btn btn-blue mrs" ng-click="vmstudent.isCollapsed = !vmstudent.isCollapsed">New</button></div></div><div class="row col-md-12"><div uib-collapse=vmstudent.isCollapsed><div class="well well-lg"><div class=container-fluid><div class="container col-md-12"><div class=row><div class=col-md-4><div ng-class="{\'has-error\': editstudent.pRankType.$invalid, \'has-success\': !editstudent.pRankType.$invalid}" class=form-group><label for=inputpRankType class=control-label>Rank Type</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.pRankType.$dirty ng-class="editstudent.pRankType.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputpRankType type=text name=pRankType ng-model=vmstudent.ranktypepick ng-change=vmstudent.getRank() minlength=3 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.RankTypeList" placeholder=Select value={{iter.ranktype}}>{{iter.ranktype}}</option></select><div style=color:maroon role=alert ng-messages=editstudent.pRankType.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></div></div><div class=col-md-5><div ng-class="{\'has-error\': editstudent.pRank.$invalid, \'has-success\': !editstudent.pRank.$invalid}" class=form-group><label for=inputpRank class=control-label>Rank</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.pRank.$dirty ng-class="editstudent.pRank.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputpRank type=text name=pRank ng-disabled=editstudent.pRankType.$invalid ng-model=vmstudent.rankpick minlength=3 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="r in vmstudent.ranklist.ranklist track by r.rankid" placeholder=Select value={{r.ranklist}}>{{r.ranklist}}</option></select><div style=color:maroon role=alert ng-messages=editstudent.pRank.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></div></div><div class="actions col-md-3 form-group"><label for=rankbtn class=control-label>&nbsp;</label> <a role=button ng-disabled="editstudent.pRankType.$invalid || editstudent.pRank.$invalid" class="btn btn-green form-control" ng-click=vmstudent.addStudentRank()><i class="fa fa-plus"></i>&nbsp; Add</a></div></div></div></div></div></div><div class><table class="col-md-12 table-striped table-hover table-bordered"><thead><tr><th>Type</th><th>Rank</th><th>Action</th></tr></thead><tbody><tr ng-repeat="item in vmstudent.studentranks track by $index"><td class=col-md-4>{{item.ranktype}}</td><td class=col-md-4>{{item.currentrank}}</td><td class=col-md-4><span><a ng-click=vmstudent.rankremove(item.ranktype) role=button class="btn btn-red" style="padding: 0px 14px;"><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></td></tr></tbody></table></div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.StudentSchool.$invalid, \'has-success\': !editstudent.StudentSchool.$invalid}" class=form-group><label for=inputStudentSchool class=control-label>School</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.StudentSchool.$dirty ng-class="editstudent.StudentSchool.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputStudentSchool type=text name=StudentSchool ng-model=vmstudent.students.StudentSchool ng-change=vmstudent.updateStudent() minlength=3 maxlength=80 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.StudentSchoolList" ng-selected="{{iter.listkey==vmstudent.students.StudentSchool}}" placeholder=Select value={{iter.listkey}}>{{iter.listvalue}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.StudentSchool.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.GuiSize.$invalid, \'has-success\': !editstudent.GuiSize.$invalid}" class=form-group><label for=inputGuiSize class=control-label>Gi Size</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.GuiSize.$dirty ng-class="editstudent.GuiSize.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputGuiSize type=text name=GuiSize ng-model=vmstudent.students.GuiSize ng-change=vmstudent.updateStudent() minlength maxlength ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.GuiSizeList" ng-selected="{{iter.listkey==vmstudent.students.GuiSize}}" placeholder=Size value={{iter.listkey}}>{{iter.listvalue}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.GuiSize.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.ShirtSize.$invalid, \'has-success\': !editstudent.ShirtSize.$invalid}" class=form-group><label for=inputShirtSize class=control-label>Shirt Size</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.ShirtSize.$dirty ng-class="editstudent.ShirtSize.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputShirtSize type=text name=ShirtSize ng-model=vmstudent.students.ShirtSize ng-change=vmstudent.updateStudent() minlength maxlength ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.ShirtSizeList" ng-selected="{{iter.listkey==vmstudent.students.ShirtSize}}" placeholder=Size value={{iter.listkey}}>{{iter.listvalue}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.ShirtSize.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-6><div ng-class="{\'has-error\': editstudent.BeltSize.$invalid, \'has-success\': !editstudent.BeltSize.$invalid}" class=form-group><label for=inputBeltSize class=control-label>Belt Size</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.BeltSize.$dirty ng-class="editstudent.BeltSize.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputBeltSize type=text name=BeltSize ng-model=vmstudent.students.BeltSize ng-change=vmstudent.updateStudent() minlength maxlength ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.BeltSizeList" ng-selected="{{iter.listkey==vmstudent.students.BeltSize}}" placeholder=Size value={{iter.listkey}}>{{iter.listvalue}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.BeltSize.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><div ng-class="{\'has-error\': editstudent.instructorTitle.$invalid, \'has-success\': !editstudent.instructorTitle.$invalid}" class=form-group><label for=inputinstructorTitle class=control-label>Title</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudent.instructorTitle.$dirty ng-class="editstudent.instructorTitle.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputinstructorTitle type=text name=instructorTitle ng-model=vmstudent.students.instructorTitle ng-change=vmstudent.updateStudent() minlength maxlength ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmstudent.StudentList.instructorTitleList" ng-selected="{{iter.listkey==vmstudent.students.instructorTitle}}" placeholder=Select value={{iter.listkey}}>{{iter.listkey}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudent.instructorTitle.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div></div></form></div></div></div></div></div></uib-tab><uib-tab index=2 id=tab-studentclass heading=Class select="vmstudent.setActiveTab(2,\'studentclassselect\');classtabShown = !classtabShown" deselect="classtabShown = !classtabShown"><div class=row ng-controller="StudentClassController as vmclass"><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>Programs</div><div class="panel-body pan"><div><form action novalidate name=editstudentclass class=form-horizontal><div class="form-body pal"><h3 class=block-heading>Class Information</h3><div class=row><div class="portlet portlet-primary col-md-12"><div class=portlet-header><div class=caption>Student Class Registration</div></div><div class=portlet-body><div class=table-tools><div class="row col-md-offset-11 mbs"><button type=button class="btn btn-blue mrs" ng-click="vmclass.isCollapsed = !vmclass.isCollapsed">New</button></div></div><div class="row col-md-12"><div uib-collapse=vmclass.isCollapsed><div class="well well-lg"><div class=container-fluid><div class="container col-md-12"><div class=row><div class="col-md-2 btn" style="margin-top: 10px;"><div ng-controller="ModalSetStudentClassController as vmsetclassmodal"><script id=myClasssearch.html type=text/ng-template><div class="modal-header"> <h3 class="modal-title">Select Student Class</h3> </div> <div class="modal-body"> <div class="col-md-12"> <div class="row"> <div opt-kind="" ok-key="filter" class="btn-group col-md-12 filters-button-group"> <button ok-sel="*" ng-click="vmsearch.vmclass.clearSelect()" class="btn btn-green">Show All</button> </div> </div> <div class="row"> <div opt-kind="" ok-key="filter" class="btn-group col-md-12 filters-button-groupcat"> <div class="col-md-1"> <button ng-click="vmsearch.vmclass.clearCatSelect()" class="btn btn-sm btn-green active">Show All</button> </div> <div ng-repeat="category in vmsearch.vmclass.classcategories" class=""> <div class="col-md-1"> <button ok-sel="{{vmsearch.vmclass.concat}}" ng-click="vmsearch.vmclass.catset(category.classcat)" ng-model="classcategories" class="btn btn-sm btn-green">{{category.classcat}}</button> </div> </div> </div> </div> <div class="row"> <div opt-kind="" ok-key="filter" class="btn-group col-md-12 filters-button-groupage"> <div class="col-md-1"> <button ng-click="vmsearch.vmclass.clearAgeSelect()" class="btn btn-sm btn-orange active">Show All</button> </div> <div ng-repeat="age in vmsearch.vmclass.agecategories" class=""> <div class="col-md-1"> <button ok-sel="{{vmsearch.vmclass.concat}}" ng-click="vmsearch.vmclass.ageset(age.agecat)" ng-model="agecategories" class="btn btn-sm btn-orange">{{age.agecat}}</button> </div> </div> </div> </div> <div class="row"> <div opt-kind="" ok-key="filter" class="btn-group col-md-12 filters-button-grouppgm"> <div class="col-md-1"> <button ng-click="vmsearch.vmclass.clearPgmSelect()" class="btn btn-sm btn-violet active">Show All</button> </div> <div ng-repeat="pgm in vmsearch.vmclass.pgmcategories" class=""> <div class="col-md-1"> <button ok-sel="{{vmsearch.vmclass.concat}}" ng-click="vmsearch.vmclass.pgmset(pgm.pgmcat)" ng-model="pgmcategories" class="btn btn-sm btn-violet">{{pgm.pgmcat}}</button> </div> </div> </div> </div> <div class="row"> <div id="isotopeContainer" isotope-container ng-cloak class="mix-grid ng-cloak"> <div ng-repeat="x in vmsearch.vmclass.xlistnew.studentclasslist track by $index" isotope-item="" class="col-md-3 mix {{x.classcat[0][0]}} {{x.agecat[0][0]}} {{x.pgmcat[0][0]}}"> <div class="hover-effect"> <div class="img"> <img ng-src="images/classes/{{x.pictureurl}}" alt="" class="img-responsive" /> </div> <div class="info"> <div class="form-control">{{x.class}} - {{x.pgm}}</div> <div> <button type="button" ng-click="vmsearch.closemodal(vmsearch.vmclass.studentclass.contactID,x.classid,x.pgmid);" class="btn btn-blue btn-sm mix-link">Select {{x.class}} - {{x.pgm}}</button> </div> </div> </div> </div> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="vmsearch.closemodal();">Cancel</button> </div></script><div class=btn><a role=button href class="btn btn-green form-control" ng-click=vmsetclassmodal.opensearch()><i class="fa fa-search"></i>&nbsp; Search</a></div></div></div><div class=col-md-8><div class=col-md-3><div class=form-group><label for=inputsc_Class class=control-label>Student Class</label><div><input id=inputsc_Class type=text placeholder="Student Class" name=sc_Class ng-model=vmclass.studentclass.class ng-disabled=true required class=form-control></div></div></div><div class=col-md-3><div class=form-group><label for=inputsc_pgmclass class=control-label>Student Program</label><div><input id=inputsc_pgmclass type=text placeholder="Student Program" name=pgmclass ng-model=vmclass.studentclass.pgmclass ng-disabled=true required class=form-control></div></div></div><div class=col-md-3><div ng-class="{\'has-error\': editstudentclass.studentclassstatus.$invalid, \'has-success\': !editstudentclass.studentclassstatus.$invalid}" class=form-group><label for=inputsc_Classstatus class=control-label>Student Status</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudentclass.studentclassstatus.$dirty ng-class="editstudentclass.studentclassstatus.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputsc_Classstatus type=text name=studentclassstatus ng-model=vmclass.studentclass.studentclassstatus ng-change minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmclass.classstatuses.studentclassstatuses" ng-selected="{{iter.status==vmclass.studentclass.studentclassstatus}}" placeholder=Select value={{iter.status}}>{{iter.status}}</option></select></div><div style=color:maroon role=alert ng-messages=editstudentclass.studentclassstatus.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-3><div ng-class="{\'has-error\': editstudentclass.payerName.$invalid, \'has-success\': !editstudentclass.payerName.$invalid}" class=form-group><label for=inputsc_payerName class=control-label>Payer Name</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editstudentclass.payerName.$dirty ng-class="editstudentclass.payerName.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><ui-select ng-model=vmclass.studentclass.payerName theme=bootstrap reset-search-input=false style="width: 300px;" title="Pick Payer" append-to-body=false><ui-select-match placeholder=Choose...>{{$select.selected.payerName}}</ui-select-match><ui-select-choices repeat="item in vmclass.payers | filter: $select.search track by $index" refresh=vmclass.getPayersPartial($select.search) refresh-delay=0><div id=payerpicklist ng-bind-html="item.payerName | highlight: $select.search"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn\'t find any choices...</ui-select-no-choice></ui-select></div><div style=color:maroon role=alert ng-messages=editstudentclass.payerName.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=col-md-2><div class=gallery-pages><div class=mix-grid><div class=mix><div class=hover-effect><div class=img ng-if=vmclass.studentclass.pictureurl><img ng-src=images/classes/{{vmclass.studentclass.pictureurl}} alt class=img-responsive></div><div class=info><h3>{{vmclass.studentclass.class}} - {{vmclass.studentclass.pgmclass}}</h3></div></div></div></div></div></div></div><div class=row><div class="col-md-2 btn" style="margin-top: 18px;"><div class=table-tools><div class=row><div ng-controller="ModalNewPayerController as vmpmodal"><div class="col-lg-12 mbs"><button type=button class="btn btn-blue mrs" ng-click=vmpmodal.openmodal()><i class="fa fa-plus"></i>&nbsp; New Payer</button></div><script id=newPayer.html type=text/ng-template><div class="modal-header"> <h3 class="modal-title">Create New Payer</h3> </div> <div class="modal-body"> <pre>{{vmnew.message}}</pre> <form action="" novalidate name="newPayer" class="form-horizontal"> <div class="form-body pal"> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label for="inputPayerName" class="control-label">Payer Name </label> <input id="inputPayerName" type="text" placeholder="Payer Name" name="PayerName" ng-model="vmnew.payerName" minLength="2" maxLength="30" class="form-control"> </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="vmnew.submit()">Submit</button> <button class="btn btn-warning" type="button" ng-click="vmnew.cancel()">Cancel</button> </div></script></div></div></div></div><div class="col-md-2 btn" style="margin-top: 18px;"><label for=rankbtn class=control-label>&nbsp;</label> <a role=button ng-disabled="editstudentclass.studentclassstatus.$invalid || editstudentclass.pgmclass.$invalid" class="btn btn-green form-control" ng-click=vmclass.addStudentRegistration()><i class="fa fa-plus"></i>&nbsp; Register</a></div></div></div></div></div></div><div class><table class="col-md-12 table-striped table-hover table-bordered"><thead><tr><th>Class</th><th>Program</th><th>Status</th><th>Payer</th><th>Waive Test Fee?</th><th>Primary Acct?</th><th>Picture</th><th>Action</th></tr></thead><tbody><tr ng-repeat="classlist in vmclass.studentclazzlist track by $index" style="z-index: {{200 - $index}}"><td class=col-md-2>{{classlist.class}}</td><td class=col-md-2>{{classlist.pgmclass}}</td><td class=col-md-1><div ng-class="{\'has-error\': editstudentclass[\'lstudentclassstatus\' + $index].$invalid, \'has-success\': !editstudentclass[\'lstudentclassstatus\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editstudentclass[\'lstudentclassstatus\' + $index].$dirty" ng-class="editstudentclass[\'lstudentclassstatus\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=lstudentclassstatus{{$index}} type=text name=lstudentclassstatus{{$index}} ng-model=classlist.studentclassstatus ng-change=vmclass.changeStudentStatus(classlist) minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmclass.classstatuses.studentclassstatuses" ng-selected="{{iter.status==classlist.studentclassstatus}}" placeholder=Select value={{iter.status}}>{{iter.status}}</option></select></div><div style=color:maroon role=alert ng-messages="editstudentclass[\'lstudentclassstatus\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></td><td class=col-md-2 style="position: relative; top:-17px;"><div class=form-group><div class=select-box><ui-select ng-model=classlist.payerList theme=bootstrap reset-search-input=false on-select=vmclass.changeStudentPayer(classlist) style="width: 180px;" title="Pick Payer" append-to-body=false><ui-select-match placeholder=Choose...>{{$select.selected.payerName}}</ui-select-match><ui-select-choices repeat="item in vmclass.payers | filter: $select.search" refresh=vmclass.getPayersPartial($select.search) refresh-delay=0><div id=payerpicklist ng-bind-html="item.payerName | highlight: $select.search"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn\'t find any choices...</ui-select-no-choice></ui-select></div></div></td><td class=col-md-2><div><div ng-class="{\'has-error\': editstudentclass[\'isTestfeewaived\' + $index].$invalid, \'has-success\': !editstudentclass[\'isTestfeewaived\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editstudentclass[\'isTestfeewaived\' + $index].$dirty" ng-class="editstudentclass[\'isTestfeewaived\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><toggle-switch on-label=Waive off-label=Charge id=isTestfeewaived{{$index}} type=checkbox name=isTestfeewaived{{$index}} ng-model=classlist.isTestfeewaived ng-change=vmclass.changetestfee(classlist) ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=switch-primary></toggle-switch></div><div style=color:maroon role=alert ng-messages="editstudentclass[\'isTestfeewaived\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div></div></div></div></td><td class=col-md-2><div><div ng-class="{\'has-error\': editstudentclass[\'primaryContact\' + $index].$invalid, \'has-success\': !editstudentclass[\'primaryContact\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editstudentclass[\'primaryContact\' + $index].$dirty" ng-class="editstudentclass[\'primaryContact\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><toggle-switch on-label=Primary off-label=Not id=primaryContact{{$index}} type=checkbox name=primaryContact{{$index}} ng-model=classlist.primaryContact ng-change=vmclass.changeprimaryContact(classlist) ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=switch-primary></toggle-switch></div><div style=color:maroon role=alert ng-messages="editstudentclass[\'primaryContact\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div></div></div></div></td><td class=col-md-2><div class=gallery-pages><div class=mix-grid><div class=mix><div class=hover-effect><div class=img ng-if=classlist.pictureurl><img ng-src=images/classes/{{classlist.pictureurl}} alt class=img-responsive></div><div class=info><h3>{{classlist.class}} - {{classlist.pgmclass}}</h3></div></div></div></div></div></td><td class=col-md-1><span><a ng-click="vmclass.removeStudentRegistration(classlist.classseq, classlist.pgmseq)" role=button class="btn btn-red" style="padding: 0px 14px;"><i class="far fa-trash-alt"></i>&nbsp;</a></span></td></tr></tbody></table></div></div></div></div></div></div></form></div><hr></div></div></div></div></uib-tab><uib-tab index=3 id=tab-studentpayment heading=Payment select="vmstudent.setActiveTab(3,\'studentpaymentselect\'); paymenttabShown = !paymenttabShown" deselect="paymenttabShown = !paymenttabShown"><div class=row ng-controller="StudentPaymentController as vmpayment"><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>Payment</div><div class="panel-body pan"><div class="col-md-12 form-body pal"><form action novalidate name=editPaymentPlan class=form-horizontal><div class=row><div class=row><h3 class=block-heading>Payer</h3><div class=col-md-2><div class="mlm form-group"><div class="input-icon right"><select id=inputsc_payer type=text name=studentpayer ng-model=vmpayment.studentpayer ng-change=vmpayment.payerSet(vmpayment.studentpayer); class=form-control ng-options="iter.payerid as iter.payername for iter in vmpayment.payerlist"></select></div></div></div><div class=col-md-2><a role=button class="btn btn-red form-control" ng-click=vmpayment.removePayer()><i class="fa fa-minus"></i>&nbsp; Remove {{vmpayment.studentpayer.payername}}</a></div><div class=col-md-2><a role=button class="btn btn-blue form-control" ng-click=vmpayment.activate()><i class="fa fa-refresh"></i>&nbsp; Refresh</a></div><div class=col-md-6></div></div><div class="row col-md-12"><div><div class="form-body pal"><div class=row><div class="portlet portlet-primary col-md-12"><div class=portlet-header><div class=caption>Payment Plan</div></div><div class=portlet-body><div class=table-tools><div class="row col-md-offset-11 mbs"><button type=button class="btn btn-blue mrs" ng-click="vmpayment.isCollapsed = !vmpayment.isCollapsed">New</button></div></div><div class="row col-md-12"><div uib-collapse=vmpayment.isCollapsed><div class="well well-lg"><div class=container-fluid><div class="container col-md-12"><div class=row><div class=col-md-2><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentPlanHead\'].$invalid, \'has-success\': !editPaymentPlan[\'PaymentPlanHead\'].$invalid}" class=form-group><label for=PaymentPlanHead class=control-label>Plan</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentPlanHead\'].$dirty" ng-class="editPaymentPlan[\'PaymentPlanHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentPlanHead type=text name=PaymentPlanHead ng-model=vmpayment.head.PaymentPlan ng-change minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PaymentPlans" ng-selected="{{iter.paymentplan==vmpayment.head.PaymentPlan}}" placeholder=Select value={{iter.paymentplan}}>{{iter.paymentplan}}</option></select></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentPlanHead\'].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentTypeHead\'].$invalid, \'has-success\': !editPaymentPlan[\'PaymentTypeHead\'].$invalid}" class=form-group><label for=PaymentTypeHead class=control-label>Type</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentTypeHead\'].$dirty" ng-class="editPaymentPlan[\'PaymentTypeHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentTypeHead type=text name=PaymentTypeHead ng-model=vmpayment.head.paymenttype ng-change minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PaymentTypes" ng-selected="{{iter.paymenttype==vmpayment.head.paymenttype}}" placeholder=Select value={{iter.paymenttype}}>{{iter.paymenttype}}</option></select></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentTypeHead\'].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div><div class=col-md-2><label for=PricesetdateHead class=control-label>Date Set</label><div ng-class="{\'has-error\': editPaymentPlan[\'PricesetdateHead\'].$invalid, \'has-success\': !editPaymentPlan[\'PricesetdateHead\'].$invalid}" class=form-group><div class=col-md-9 style="padding-right: 0px;"><div class="input-icon right"><i ng-click="vmpayment.dateopen($event, \'head\')" data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PricesetdateHead\'].$dirty" ng-class="editPaymentPlan[\'PricesetdateHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=PricesetdateHead type=text placeholder=mm/dd/yyyy name=PricesetdateHead required ng-model=vmpayment.head.Pricesetdate ng-change is-open=vmpayment.statushead.opened uib-datepicker-popup={{vmpayment.bdateformat}} ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div></div><div class=col-md-1 style="padding-right: 0px; padding-left: 0px;"><button type=button class="btn btn-default" ng-click=vmpayment.dateheadopen($event)><i class="glyphicon glyphicon-calendar"></i></button></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PricesetdateHead\'].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div><div class=col-md-1><div class=form-group ng-class="{\'has-error\': editPaymentPlan[\'PaymentAmountHead\'].$invalid, \'has-success\': !editPaymentPlan[\'PaymentAmountHead\'].$invalid}"><label for=PaymentAmountHead class=control-label>Amount</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editPaymentPlan[\'PaymentAmountHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show="editPaymentPlan[\'PaymentAmountHead\'].$dirty"></i> <input class=form-control id=PaymentAmountHead maxlength=20 name=PaymentAmountHead ng-change min=0 ng-model=vmpayment.head.PaymentAmount ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder=99 type=number></div></div><div class=has-error ng-messages="editPaymentPlan[\'PaymentAmountHead\'].$error" role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=maxlength>Your field is too long</div><div ng-message=min>Your field value is less than minimum value 1</div></div></div><div class=col-md-1><div class=form-group ng-class="{\'has-error\': editPaymentPlan[\'payOnDayOfMonthHead\'].$invalid, \'has-success\': !editPaymentPlan[\'payOnDayOfMonthHead\'].$invalid}"><label for=payOnDayOfMonthHead class=control-label>Pay on</label><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editPaymentPlan[\'payOnDayOfMonthHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show="editPaymentPlan[\'payOnDayOfMonthHead\'].$dirty"></i> <input class=form-control id=payOnDayOfMonthHead minlength=1 maxlength=2 name=payOnDayOfMonthHead min=1 max=31 ng-model=vmpayment.head.payOnDayOfMonth ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder=99 type=number></div></div><div class=has-error ng-messages="editPaymentPlan[\'payOnDayOfMonthHead\'].$error" role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=min>Your field value is less than minimum value 1</div><div ng-message=max>Your field value is greater than max value 31</div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentNotesHead\'].$invalid, \'has-success\': !editPaymentPlan[\'PaymentNotesHead\'].$invalid}" class=form-group><label for=PaymentNotesHead class=control-label>Notes</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentNotesHead\'].$dirty" ng-class="editPaymentPlan[\'PaymentNotesHead\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <textarea id=PaymentNotesHead type=text placeholder="Enter Payment Notes" name=PaymentNotesHead ng-model=vmpayment.head.PaymentNotes ng-change ng-keyup=vmpayment.autoExpand($event) ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control>\n                                          </textarea></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentNotesHead\'].$error" class=has-error></div></div><div class="col-md-1 btn"><div class=row><label for=PaymentBtnHead class=control-label>Action</label></div><div class=row><a role=button class="btn btn-green form-control" ng-click="vmpayment.updatePaymentPlan(vmpayment.head,\'insert\')"><i class="fa fa-plus"></i>&nbsp; Add</a></div></div></div></div></div></div></div><div class><table class="col-md-12 table-striped table-hover table-bordered"><thead><tr><th>Plan</th><th>Type</th><th>Date Set</th><th>Set by?</th><th>Amount</th><th>Pay on<br>DayOfMonth</th><th>Notes</th><th>Action</th></tr></thead><tbody><tr ng-repeat="rowiter in vmpayment.PaymentPlanList track by $index"><td class=col-md-1><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentPlan\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'PaymentPlan\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentPlan\' + $index].$dirty" ng-class="editPaymentPlan[\'PaymentPlan\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentPlan{{$index}} type=text name=PaymentPlan{{$index}} ng-model=rowiter.PaymentPlan ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PaymentPlans" ng-selected="{{iter.paymentplan==rowiter.PaymentPlan}}" placeholder=Select value={{iter.paymentplan}}>{{iter.paymentplan}}</option></select></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentPlan\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></td><td class=col-md-1><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentType\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'PaymentType\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentType\' + $index].$dirty" ng-class="editPaymentPlan[\'PaymentType\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentType{{$index}} type=text name=PaymentType{{$index}} ng-model=rowiter.paymenttype ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" minlength=2 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PaymentTypes" ng-selected="{{iter.paymenttype==rowiter.paymenttype}}" placeholder=Select value={{iter.paymenttype}}>{{iter.paymenttype}}</option></select></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentType\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></td><td class=col-md-2><div ng-class="{\'has-error\': editPaymentPlan[\'Pricesetdate\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'Pricesetdate\' + $index].$invalid}" class=form-group><div class=col-md-9 style="padding-right: 0px;"><div class="input-icon right"><i ng-click="vmpayment.dateopen($event, $index)" data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'Pricesetdate\' + $index].$dirty" ng-class="editPaymentPlan[\'Pricesetdate\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=Pricesetdate{{$index}} type=text placeholder=mm/dd/yyyy name=Pricesetdate{{$index}} required ng-model=rowiter.Pricesetdate ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" is-open=vmpayment.status[$index].opened uib-datepicker-popup={{vmpayment.bdateformat}} ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div></div><div class=col-md-1 style="padding-right: 0px; padding-left: 0px;"><button type=button class="btn btn-default" ng-click=vmpayment.dateopen($event,$index)><i class="glyphicon glyphicon-calendar"></i></button></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'Pricesetdate\' + $index].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></td><td class=col-md-1>{{rowiter.PriceSetby}}</td><td class=col-md-1><div class=form-group ng-class="{\'has-error\': editPaymentPlan[\'PaymentAmount\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'PaymentAmount\' + $index].$invalid}"><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editPaymentPlan[\'PaymentAmount\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show="editPaymentPlan[\'PaymentAmount\' + $index].$dirty"></i> <input class=form-control id=PaymentAmount{{$index}} maxlength=20 name=PaymentAmount{{$index}} ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" min=0 ng-model=rowiter.PaymentAmount ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder=99 type=number></div><div class=has-error ng-messages="editPaymentPlan[\'PaymentAmount\' + $index].$error" role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=maxlength>Your field is too long</div><div ng-message=min>Your field value is less than minimum value 1</div></div></div></td><td class=col-md-1><div class=form-group ng-class="{\'has-error\': editPaymentPlan[\'payOnDayOfMonth\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'payOnDayOfMonth\' + $index].$invalid}"><div class="input-icon right"><i class="glyphicon tooltips" data-hover=tooltip data-original-title=Correct ng-class="editPaymentPlan[\'payOnDayOfMonth\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" ng-show="editPaymentPlan[\'payOnDayOfMonth\' + $index].$dirty"></i> <input class=form-control id=payOnDayOfMonth{{$index}} minlength=1 maxlength=2 name=payOnDayOfMonth{{$index}} min=1 max=31 ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" ng-model=rowiter.payOnDayOfMonth ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" placeholder=99 type=number></div><div class=has-error ng-messages="editPaymentPlan[\'payOnDayOfMonth\' + $index].$error" role=alert style=color:maroon><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=min>Your field value is less than minimum value 1</div><div ng-message=max>Your field value is greater than max value 31</div></div></div></td><td class=col-md-2><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentNotes\' + $index].$invalid, \'has-success\': !editPaymentPlan[\'PaymentNotes\' + $index].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentNotes\' + $index].$dirty" ng-class="editPaymentPlan[\'PaymentNotes\' + $index].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <textarea id=PaymentNotes{{$index}} type=text placeholder="Enter Payment Notes" name=PaymentNotes{{$index}} ng-model=rowiter.PaymentNotes ng-change="vmpayment.updatePaymentPlan(rowiter,\'update\')" ng-keyup=vmpayment.autoExpand($event) ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control>\n                                        </textarea></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentNotes\' + $index].$error" class=has-error></div></div></td><td class=col-md-1><span><a ng-click=vmpayment.removePaymentPlan(rowiter) role=button class="btn btn-red" style="padding: 0px 14px;"><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></td></tr></tbody></table></div></div></div></div></div></div></div></div><div class=row><div class=col-md-3><div class="panel panel-blue"><div class="panel-body pan"><div class="form-body pal"><h3 class=block-heading>Family Members</h3><div class=row ng-repeat="family in vmpayment.FamilyList"><div class=col-md-6>Name: {{ family.firstname }} {{family.lastname}}</div><div class=col-md-6><div class=fixheight100 ng-show=family.pictureurl><img height=100px ng-src="{{ \'./images/students/\' + family.pictureurl || \'\' }}"></div></div></div></div></div></div></div><div class=col-md-9><div class="panel panel-blue"><div class="panel-body pan"><div class="col-md-12 form-body pal"><h3 class=block-heading>List Prices</h3><table class="col-md-12 table table-striped table-hover table-bordered"><thead><tr><th>Name</th><th>Class/Program/Type</th><th>12/6/1 Month</th><th>Weekly</th><th>Special</th><th>Discount 2nd/3rd/4th</th><th>Match?</th></tr></thead><tbody><tr ng-repeat="item in vmpayment.PriceList track by $index"><td class=col-md-2>{{ item.firstname }} {{item.lastname}}</td><td class=col-md-2>{{ item.classname}}<br>{{ item.classlistclass}}<br>{{ item.classType}}</td><td class=col-md-1>{{ item.p12MonthPrice}}<br>{{ item.p6MonthPrice}}<br>{{ item.pMonthlyPrice}}</td><td class=col-md-1>{{ item.pWeeklyPrice}}</td><td class=col-md-1>{{ item.pSpecialPrice}}</td><td class=col-md-2 style="font-size: smaller;">12( {{ item.d2ndPersonDiscount12 }} / {{ item.d3rdPersonDiscount12 }} / {{ item.d4thPersonDiscount12 }})<br>6( {{ item.d2ndPersonDiscount6 }} / {{ item.d3rdPersonDiscount6 }} / {{ item.d4thPersonDiscount6 }})<br>1( {{ item.d2ndPersonDiscount1 }} / {{ item.d3rdPersonDiscount1 }} / {{ item.d4thPersonDiscount1 }})</td><td class=col-md-1><div ng-class="{\'has-error\': item.covered == 0, \'has-success\': item.covered != 0 }" class=form-group><div class=input-icon><i data-hover=tooltip data-original-title=Correct ng-class="(item.covered == \'0\') ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i></div></div></td></tr></tbody></table></div></div></div></div></div><div class=row><div class=col-md-12><div><div class="form-body pal"><div class=row><div class="portlet portlet-primary col-md-12"><div class=portlet-header><div class=caption>Payment Plan Coverage</div></div><div class=portlet-body><div class=table-tools><div class="row col-md-offset-11 mbs"><button type=button class="btn btn-blue mrs" ng-click="vmpayment.isCollapsed2 = !vmpayment.isCollapsed2">New</button></div></div><div class="row col-md-12"><div uib-collapse=vmpayment.isCollapsed2><div class="well well-lg"><div class=container-fluid><div class="container col-md-12"><div class=row><div class=col-md-5><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentidHeadCoverage\'].$invalid, \'has-success\': !editPaymentPlan[\'PaymentidHeadCoverage\'].$invalid}" class=form-group><label for=PaymentidHeadCoverage class=control-label>Payment Plan</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentidHeadCoverage\'].$dirty" ng-class="editPaymentPlan[\'PaymentidHeadCoverage\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentidHeadCoverage type=text name=PaymentidHeadCoverage ng-model=vmpayment.headcoverage.paymentid ng-change minlength=1 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PaymentPlanList" ng-selected="{{iter.paymentid==vmpayment.headcoverage.paymentid}}" placeholder=Select value={{iter.paymentid}}>Plan: {{iter.PaymentPlan}} Type: {{iter.paymenttype}} Amount: {{iter.PaymentAmount}}</option></select></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentidHeadCoverage\'].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div><div class=col-md-5><div ng-class="{\'has-error\': editPaymentPlan[\'ClasspayidHeadCoverage\'].$invalid, \'has-success\': !editPaymentPlan[\'ClasspayidHeadCoverage\'].$invalid}" class=form-group><label for=ClasspayidHeadCoverage class=control-label>Coverage</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'ClasspayidHeadCoverage\'].$dirty" ng-class="editPaymentPlan[\'ClasspayidHeadCoverage\'].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=ClasspayidHeadCoverage type=text name=ClasspayidHeadCoverage ng-model=vmpayment.headcoverage.classpayid ng-change minlength=1 maxlength=30 required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vmpayment.PayerPaymentList" ng-selected="{{iter.classpayid==vmpayment.headcoverage.classpayid}}" placeholder=Select value={{iter.classpayid}}>Class: {{iter.classname}} Program: {{iter.pgmclass}} Status: {{iter.studentClassStatus}}</option></select></div></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'ClasspayidHeadCoverage\'].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div><div class="col-md-2 btn"><div class=row><label for=PayerPaymentBtnHead class=control-label>Action</label></div><div class=row><a role=button class="btn btn-green form-control" ng-click="vmpayment.updatePaymentPay(vmpayment.headcoverage,\'insert\')"><i class="fa fa-plus"></i>&nbsp; Add</a></div></div></div></div></div></div></div><div class><table class="col-md-12 table-striped table-hover table-bordered"><thead><tr><th>Payment Plan</th><th>Coverage</th><th>Action</th></tr></thead><tbody><tr ng-repeat="rowiterpcp in vmpayment.PaymentPaysList track by rowiterpcp.pcpid"><td class=col-md-5><div ng-class="{\'has-error\': editPaymentPlan[\'PaymentID\' + rowiterpcp.pcpid].$invalid, \'has-success\': !editPaymentPlan[\'PaymentID\' + rowiterpcp.pcpid].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'PaymentID\' + rowiterpcp.pcpid].$dirty" ng-class="editPaymentPlan[\'PaymentID\' + rowiterpcp.pcpid].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=PaymentID{{rowiterpcp.pcpid}} type=text name=PaymentID{{rowiterpcp.pcpid}} ng-model=rowiterpcp.paymentidstr ng-change="vmpayment.updatePaymentPays(rowiterpcp,\'update\')" required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter1 in vmpayment.PaymentPlanList" value="{{ iter1.paymentid-0 }}" ng-selected="{{(iter1.paymentidstr == rowiterpcp.paymentidstr) && \'true\' || \'false\' }}" placeholder=Select>Plan: {{iter1.PaymentPlan}} Type: {{iter1.paymenttype}} Amount: {{iter1.PaymentAmount}}</option></select></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'PaymentID\' + rowiterpcp.pcpid].$error" class=has-error><div ng-message=required>You did not enter a fieldYour field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></td><td class=col-md-5><div ng-class="{\'has-error\': editPaymentPlan[\'ClassPayID\' + rowiterpcp.pcpid].$invalid, \'has-success\': !editPaymentPlan[\'ClassPayID\' + rowiterpcp.pcpid].$invalid}" class=form-group><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show="editPaymentPlan[\'ClassPayID\' + rowiterpcp.pcpid].$dirty" ng-class="editPaymentPlan[\'ClassPayID\' + rowiterpcp.pcpid].$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=ClassPayID{{rowiterpcp.pcpid}} type=text name=ClassPayID{{rowiterpcp.pcpid}} ng-model=rowiterpcp.classpayidstr ng-change="vmpayment.updatePaymentPays(rowiterpcp,\'update\')" required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter2 in vmpayment.PayerPaymentList" ng-selected="{{iter2.classpayidstr==rowiterpcp.classpayidstr}}" placeholder=Select value={{iter2.classpayid}}>Class: {{iter2.classname}} Program: {{iter2.pgmclass}} Status: {{iter2.studentClassStatus}}</option></select></div><div style=color:maroon role=alert ng-messages="editPaymentPlan[\'ClassPayID\' + rowiterpcp.pcpid].$error" class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></td><td class=col-md-2><span><a ng-click=vmpayment.removePaymentPay(rowiterpcp) role=button class="btn btn-red" style="padding: 0px 14px;"><i class="far fa-trash-alt"></i>&nbsp; Remove</a></span></td></tr></tbody></table></div></div></div></div></div></div></div></div></div></div></form></div></div></div></div></div></uib-tab><uib-tab index=4 id=tab-studenthist heading="Student History" select="vmstudent.setActiveTab(4,\'studenthistselect\'); histtabShown = !histtabShown" deselect="histtabShown = !histtabShown"><div class=row ng-controller="StudentHistoryController as vmhistory"><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>History</div><div class="panel-body pan"><div ui-grid=vmhistory.gridOptions ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize class=mygrid ng-if=histtabShown></div></div></div></div></div></uib-tab></uib-tabset></div></div>'),
$templateCache.put("templates/states/form-layouts-newstudent.html",'<div id=form-layouts-newstudent class=row><div ng-tab class=col-lg-12><ul class="nav nav-pills"><li class=active><a href=#tab-two-columns data-toggle=tab>Student Information</a></li><li><a href=#tab-form-actions data-toggle=tab>Class</a></li><li><a href=#tab-form-seperated data-toggle=tab>Payment</a></li><li><a href=#tab-form-bordered data-toggle=tab>Student History</a></li></ul><div style="background: transparent; border: 0;" class="tab-content pan mtl mbn"><div id=tab-two-columns class="tab-pane fade in active"><div class=row><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>Student</div><div class="panel-body pan"><form action class=horizontal-form><div class="form-body pal"><h3 class=block-heading>Personal</h3><div class=row><div class=col-md-6><div class="form-group has-success"><label for=inputFirstName class=control-label>First Name <span class=require>*</span></label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct class="glyphicon glyphicon-ok tooltips"></i> <input id=inputFirstName type=text placeholder="First Name" class=form-control></div></div></div><div class=col-md-6><div class="form-group has-error"><label for=inputLastName class=control-label>Last Name <span class=require>*</span></label><div class="input-icon right"><i data-hover=tooltip data-original-title="Last Name is empty" class="glyphicon glyphicon-remove tooltips"></i> <input id=inputLastName type=text placeholder="Last Name" class=form-control></div></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputEmail class=control-label>Email <span class=require>*</span></label><div class=input-icon><i class="fa fa-envelope"></i> <input type=text placeholder="Email Address" class=form-control></div></div></div><div class=col-md-6><div class=form-group><label for=selGender class=control-label>Gender <span class=require>*</span></label><select id=selGender class=form-control><option value>Male</option><option value>Female</option></select></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputBirthday class=control-label>Birthday</label> <input id=inputBirthday type=text placeholder=dd/mm/yyyy class=form-control></div></div><div class=col-md-6><div class=form-group><label for=inputPhone class=control-label>Phone</label> <input id=inputPhone type=text placeholder class=form-control></div></div></div><h3 class=block-heading>Address</h3><div class=row><div class=col-md-12><div class=form-group><label for=inputStreet class=control-label>Street <span class=require>*</span></label> <input id=inputStreet type=text placeholder class=form-control></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputFirstName class=control-label>District</label> <input id=inputDistrict type=text placeholder class=form-control></div></div><div class=col-md-6><div class=form-group><label for=inputCity class=control-label>City <span class=require>*</span></label> <input id=inputCity type=text placeholder class=form-control></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputPostCode class=control-label>Post Code</label> <input id=inputPostCode type=text placeholder class=form-control></div></div><div class=col-md-6><div class=form-group><label for=selCountry class=control-label>Country</label><select id=selCountry class=form-control><option value>Select a Country</option><option value>United States</option><option value>England</option><option value>France</option><option value>Spain</option></select></div></div></div></div><div class="form-actions text-right pal"><button type=submit class="btn btn-primary btn-outlined">Submit</button>&nbsp; <button type=button class="btn btn-green btn-outlined">Cancel</button></div></form></div></div></div><div class=col-lg-12><div class="panel panel-orange"><div class=panel-heading>Class</div><div class="panel-body pan"><form action class=form-horizontal><div class="form-body pal"><h3 class=block-heading>Class Name</h3><div class=row><div class=col-md-6><div class=form-group><label for=selClass class="col-md-3 control-label">Class</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Class</option><option value>Basic</option><option value>BBT1</option><option value>BBT2</option><option value>Black Belt</option></select></div></div></div><div class=col-md-6><div class=form-group><label for=selClass class="col-md-3 control-label">Class Type</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Class Type</option><option value>a</option><option value>bb</option><option value>ccc</option><option value>dd</option></select></div></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=selGender class="col-md-3 control-label">Gender <span class=require>*</span></label><div class=col-md-9><select id=selGender class=form-control><option value>Male</option><option value>Female</option></select></div></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputBirthday class="col-md-3 control-label">Birthday</label><div class=col-md-9><input id=inputBirthday type=text placeholder=dd/mm/yyyy class=form-control></div></div></div><div class=col-md-6><div class=form-group><label for=inputPhone class="col-md-3 control-label">Phone</label><div class=col-md-9><input id=inputPhone type=text placeholder class=form-control></div></div></div></div><h3 class=block-heading>Address</h3><div class=row><div class=col-md-6><div class=form-group><label for=inputAddress1 class="col-md-3 control-label">Address 1 <span class=require>*</span></label><div class=col-md-9><input id=inputAddress1 type=text placeholder class=form-control></div></div></div><div class=col-md-6><div class=form-group><label for=inputAddress2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input id=inputAddress2 type=text placeholder class=form-control></div></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputStates class="col-md-3 control-label">States</label><div class=col-md-9><input id=inputStates type=text placeholder class=form-control></div></div></div><div class=col-md-6><div class=form-group><label for=inputCity class="col-md-3 control-label">City <span class=require>*</span></label><div class=col-md-9><input id=inputCity type=text placeholder class=form-control></div></div></div></div><div class=row><div class=col-md-6><div class=form-group><label for=inputPostCode class="col-md-3 control-label">Post Code</label><div class=col-md-9><input id=inputPostCode type=text placeholder class=form-control></div></div></div><div class=col-md-6><div class=form-group><label for=selCountry class="col-md-3 control-label">Country</label><div class=col-md-9><select id=selCountry class=form-control><option value>Select a Country</option><option value>United States</option><option value>England</option><option value>France</option><option value>Spain</option></select></div></div></div></div></div><div class="form-actions text-right pal"><button type=submit class="btn btn-primary btn-outlined">Submit</button>&nbsp; <button type=button class="btn btn-green btn-outlined">Cancel</button></div></form></div></div></div></div></div><div id=tab-form-actions class="tab-pane fade"><div class=row><div class=col-lg-6><div class="panel panel-violet"><div class=panel-heading>Class Information</div><div class="panel-body pan"><form action class=form-horizontal><div class="form-actions top"><div class="col-md-offset-3 col-md-9"><button type=submit class="btn btn-primary btn-outlined">Send</button>&nbsp; <button type=button class="btn btn-green btn-outlined">Cancel</button></div></div><div class="form-body pal"><div class=form-group><label for=selClass class="col-md-3 control-label">Class</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Class</option><option value>Basic</option><option value>BBT1</option><option value>BBT2</option><option value>Black Belt</option></select></div></div><div class=form-group><label for=selClass class="col-md-3 control-label">Class Type</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Class Type</option><option value>a</option><option value>bb</option><option value>ccc</option><option value>dd</option></select></div></div><div class=form-group><label for=inputAddress class="col-md-3 control-label">Address <span class=require>*</span></label><div class=col-md-9><div class="input-icon right"><i class="fa fa-location-arrow"></i> <input type=text placeholder=Address class=form-control></div></div></div><div class="form-group mbn"><label for=inputContent class="col-md-3 control-label">Content</label><div class=col-md-9><textarea id=inputContent rows=3 class=form-control></textarea></div></div></div></form></div></div></div></div></div><div id=tab-form-seperated class="tab-pane fade"><div class=row><div class=col-lg-12><div class="panel panel-yellow"><div class=panel-heading>Payment Information</div><div class="panel-body pan"><form action class="form-horizontal form-seperated"><div class=form-body><div class=form-group><label for=inputFirstName class="col-md-3 control-label">First Name <span class=require>*</span></label><div class=col-md-4><input id=inputFirstName type=text placeholder="First Name" class=form-control><span class=help-block>This is help text</span></div></div><div class="form-group has-error"><label for=inputLastName class="col-md-3 control-label">Last Name <span class=require>*</span></label><div class=col-md-4><div class="input-icon right"><i class="glyphicon glyphicon-remove"></i> <input id=inputLastName type=text placeholder="Last Name" class=form-control></div><span class="help-block text-danger">Please enter your Last Name!</span></div></div><div class=form-group><label for=inputEmail class="col-md-3 control-label">Email <span class=require>*</span></label><div class=col-md-4><div class=input-icon><i class="fa fa-envelope"></i> <input type=text placeholder="Email Address" class=form-control></div></div></div><div class=form-group><label for=selGender class="col-md-3 control-label">Gender <span class=require>*</span></label><div class=col-md-9><div class=radio-list><label class=radio-inline><input type=radio value=0 name=gender>&nbsp; Male</label> <label class=radio-inline><input type=radio value=1 name=gender>&nbsp; Female</label></div></div></div><div class=form-group><label for=inputBirthday class="col-md-3 control-label">Birthday</label><div class=col-md-6><div class=row><div class="col-md-2 col-xs-4"><input id=inputDay type=text placeholder=dd class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputMonth type=text placeholder=mm class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputYear type=text placeholder=yyyy class=form-control></div></div></div></div><div class=form-group><label for=inputPhone class="col-md-3 control-label">Phone</label><div class=col-md-4><div class="input-icon right"><i class="fa fa-mobile-phone"></i> <input id=inputPhone type=text placeholder class=form-control></div></div></div><div class=form-group><label for=inputAddress1 class="col-md-3 control-label">Address 1 <span class=require>*</span></label><div class=col-md-9><input id=inputAddress1 type=text placeholder class=form-control></div></div><div class=form-group><label for=inputAddress2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input id=inputAddress2 type=text placeholder class=form-control></div></div><div class=form-group><label for=inputFirstName class="col-md-3 control-label">District</label><div class=col-md-4><input id=inputDistrict type=text placeholder class=form-control></div></div><div class=form-group><label for=inputCity class="col-md-3 control-label">City <span class=require>*</span></label><div class=col-md-4><div class="input-icon right"><i class="fa fa-map-marker"></i> <input id=inputCity type=text placeholder class=form-control></div></div></div><div class=form-group><label for=inputPostCode class="col-md-3 control-label">Post Code <span class=require>*</span></label><div class=col-md-6><div class=row><div class="col-md-2 col-xs-4"><input id=inputPostCode type=text placeholder class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputPostCode type=text placeholder class=form-control></div></div></div></div><div class=form-group><label for=selCountry class="col-md-3 control-label">Country</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Country</option><option value>United States</option><option value>England</option><option value>France</option><option value>Spain</option></select></div></div></div><div class="form-actions text-right pal"><button type=submit class="btn btn-primary btn-outlined">Submit</button>&nbsp; <button type=button class="btn btn-green btn-outlined">Cancel</button></div></form></div></div></div></div></div><div id=tab-form-bordered class="tab-pane fade"><div class=row><div class=col-lg-12><div class="panel panel-blue"><div class=panel-heading>Student History</div><div class="panel-body pan"><form action class="form-horizontal form-bordered"><div class=form-body><div class=form-group><label for=inputFirstName class="col-md-3 control-label">First Name <span class=require>*</span></label><div class=col-md-4><input id=inputFirstName type=text placeholder="First Name" class=form-control><span class=help-block>This is help text</span></div></div><div class="form-group has-error"><label for=inputLastName class="col-md-3 control-label">Last Name <span class=require>*</span></label><div class=col-md-4><div class="input-icon right"><i class="glyphicon glyphicon-ok"></i> <input id=inputLastName type=text placeholder="Last Name" class=form-control></div><span class="help-block text-danger">Please enter your Last Name!</span></div></div><div class=form-group><label for=inputEmail class="col-md-3 control-label">Email <span class=require>*</span></label><div class=col-md-4><div class=input-icon><i class="fa fa-envelope"></i> <input type=text placeholder="Email Address" class=form-control></div></div></div><div class=form-group><label for=selGender class="col-md-3 control-label">Gender <span class=require>*</span></label><div class=col-md-9><div class=radio-list><label class=radio-inline><input type=radio value=0 name=gender>&nbsp; Male</label> <label class=radio-inline><input type=radio value=1 name=gender>&nbsp; Female</label></div></div></div><div class=form-group><label for=inputBirthday class="col-md-3 control-label">Birthday</label><div class=col-md-6><div class=row><div class="col-md-2 col-xs-4"><input id=inputDay type=text placeholder=dd class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputMonth type=text placeholder=mm class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputYear type=text placeholder=yyyy class=form-control></div></div></div></div><div class=form-group><label for=inputPhone class="col-md-3 control-label">Phone</label><div class=col-md-4><div class="input-icon right"><i class="fa fa-mobile-phone"></i> <input id=inputPhone type=text placeholder class=form-control></div></div></div><div class=form-group><label for=inputAddress1 class="col-md-3 control-label">Address 1 <span class=require>*</span></label><div class=col-md-9><input id=inputAddress1 type=text placeholder class=form-control></div></div><div class=form-group><label for=inputAddress2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input id=inputAddress2 type=text placeholder class=form-control></div></div><div class=form-group><label for=inputFirstName class="col-md-3 control-label">District</label><div class=col-md-4><input id=inputDistrict type=text placeholder class=form-control></div></div><div class=form-group><label for=inputCity class="col-md-3 control-label">City <span class=require>*</span></label><div class=col-md-4><div class="input-icon right"><i class="fa fa-map-marker"></i> <input id=inputCity type=text placeholder class=form-control></div></div></div><div class=form-group><label for=inputPostCode class="col-md-3 control-label">Post Code <span class=require>*</span></label><div class=col-md-6><div class=row><div class="col-md-2 col-xs-4"><input id=inputPostCode type=text placeholder class=form-control></div><div class="col-md-2 col-xs-4"><input id=inputPostCode type=text placeholder class=form-control></div></div></div></div><div class=form-group><label for=selCountry class="col-md-3 control-label">Country</label><div class=col-md-4><select id=selCountry class=form-control><option value>Select a Country</option><option value>United States</option><option value>England</option><option value>France</option><option value>Spain</option></select></div></div></div><div class="form-actions text-right pal"><button type=submit class="btn btn-primary btn-outlined">Submit</button>&nbsp; <button type=button class="btn btn-green btn-outlined">Cancel</button></div></form></div></div></div></div></div></div></div></div>'),$templateCache.put("templates/states/layout-boxed.html","<div class=row><div class=col-lg-12><h4>Content...</h4></div></div>"),$templateCache.put("templates/states/layout-right-sidebar.html","<div class=row><div class=col-lg-12><h4>Content...</h4></div></div>"),$templateCache.put("templates/states/mailtemplate.html","<div class=mceTmpl>hi</div>"),$templateCache.put("templates/states/main.html",'<!DOCTYPE html><div ng-controller="AppController as vm"><div id=adialog title="Student Picker" style="display: none"><form novalidate class=simple-form><div class="select-box pal" id=calEventDialogpick><ui-select ng-model=vm.studentpick2 theme=bootstrap reset-search-input=true style="width: 300px;" on-select=vm.setStudentFromPick($item) title="Choose a student" append-to-body=true><ui-select-match placeholder="Filter the student...">{{$select.selected.FullName}}</ui-select-match><ui-select-choices repeat="stu in vm.refreshstudentlist.refreshstudentlist | filter: $select.search track by stu.ID" refresh=vm.refreshStudents($select.search) refresh-delay=0><div id=contactpicklist ng-bind-html="stu.FullName | highlight: $select.search"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn\'t find any choices...</ui-select-no-choice></ui-select></div></form></div><div id=calEventDialog style="display: none"><form novalidate class=simple-form><div class=pal><div class=form-group><label for=eventTitle class="control-label col-md-3">Title</label><div class=col-md-9><input type=text name=eventTitle id=eventTitle class=form-control></div></div><div class=form-group id=eventPickDiv><label for=eventpick class="control-label col-md-3">Student</label><div class=col-md-9><div class=input-group><input id=eventpick type=text class=form-control> <span class=input-group-addon><i class="glyphicon glyphicon-search"></i></span></div></div></div><div class=form-group id=typePickDiv><label for=typepick class="control-label col-md-3">Type</label><div class=col-md-9><select id=typepick type=text name=typepick ng-model=vm.typepick ng-options="t for t in vm.eventtypeOptions track by t" class=form-control><option value>-- Pick Type --</option></select></div></div><div class=form-group id=classPickDiv><label for=classpick class="control-label col-md-3">Class</label><div class=col-md-9><select id=classpick type=text name=classpick ng-model=vm.classpick ng-options="u.id as u.class for u in vm.classList track by u.id" class=form-control><option value>-- Pick class --</option></select></div></div><div class=form-group id=agerPickDiv><label for=agerpick class="control-label col-md-3">Ages</label><div class=col-md-9><select id=agerpick type=text name=agerpick ng-model=vm.agerpick ng-options="a.agerange as a.agerange for a in vm.agerangelist track by a.agerange" class=form-control><option value>-- Pick Age Range --</option></select></div></div><div class=form-group id=userPickDiv><label for=userpick class="control-label col-md-3">Assign</label><div class=col-md-9><select id=userpick type=text name=userpick ng-model=vm.userpick ng-options="u.user as u.fullname for u in vm.thisUserlist track by u.user" class=form-control><option value>-- Assign user --</option></select></div></div><div class=form-group><label for=eventStartd class="control-label col-md-3">Date</label><div class=col-md-9><input type=text name=eventStartd id=eventStartd class=form-control></div></div><div class=form-group id=eventStartDiv><label for=eventStart class="control-label col-md-3">Start</label><div class=col-md-9><div class="input-group bootstrap-timepicker timepicker"><input id=eventStart type=text class="form-control input-small"> <span class=input-group-addon><i class="glyphicon glyphicon-time"></i></span> <input id=eventStarttz type=text class=form-control readonly style="border: 0px; font-size: smaller;"></div></div></div><div class=form-group id=eventEndDiv><label for=eventEnd class="control-label col-md-3">End</label><div class=col-md-9><div class="input-group bootstrap-timepicker timepicker"><input id=eventEnd type=text class="form-control input-small"> <span class=input-group-addon><i class="glyphicon glyphicon-time"></i></span> <input id=eventEndtz type=text class=form-control readonly style="border: 0px; font-size: smaller;"></div></div></div><div class=form-group id=reminderCheckboxDiv><label for=reminderCheckbox class="control-label col-md-3">Reminder<div class=col-md-3><input id=reminderCheckbox type=checkbox>&nbsp;</div></label><div class=col-md-9><select id=reminderInterval type=text name=reminderInterval ng-model=vm.reminderInterval ng-options="r for r in vm.reminderOptions track by r" class=form-control></select></div></div><input id=eventid type=hidden> <input id=studentpick type=hidden></div></form></div><div id=tab-general ng-show=vm.isok><div class=col-lg-12><button type=button class="btn btn-green" ng-hide=vm.close ng-click=vm.openSchedule()>Open Calendar <i class="glyphicon glyphicon-calendar"></i></button> <button type=button class="btn btn-green" ng-hide=vm.open ng-click=vm.closeSchedule()>Close Calendar <i class="glyphicon glyphicon-calendar"></i></button><div class="portlet portlet-blue"><div class=portlet-header><div class=caption>Calendar and Task Lists</div><div class=tools><i class="fa fa-chevron-init fa-chevron-down"></i></div></div><div class="portlet-body pbn ptl" style="display: block; background-color: grey;"><div class=panel style="background-color: grey;"><div class=panel-body><div class=col-md-4 style="background-color: grey;"><div class=panel><div class=panel-body><h4 class=block-heading style=font-family: oswald ";"><i class="icon-exclamation icons mrs"></i>Filter</h4><div class="form-group col-md-12"><label for=inputForUser class="control-label col-md-3">User</label><div class=col-md-9><select id=inputForUser type=text name=forUser ng-model=vm.forUser required placeholder="Schedule/Tasks for?" class=form-control><option ng-repeat="iter in vm.forUsers.userlist" value={{iter.user}}>{{iter.user}}</option></select></div></div></div></div><div class="portlet portlet-green"><div class=portlet-header><div class=caption>Event</div><div class=tools><i class="fa fa-chevron-init fa-chevron-down"></i></div></div><div class="portlet-body pbn ptl" style="display: block; background-color: white;"><div class=panel><div class=panel-body><div id=external-events><h4 class=block-heading style=font-family: oswald ";"><i class="icon-event icons mrs"></i>Event List</h4><div class="col-md-12 input-group"><div class=col-md-2><color-picker ng-model=vm.mycolor color-picker-format="\'hex\'" color-picker-swatch=true color-picker-swatch-pos="\'right\'" color-picker-swatch-only=true color-picker-on-change=vm.settextcolor()></color-picker></div><div class="col-md-9 input-group"><input id=event-name type=text class=form-control value placeholder="Create an Event..." style="background-color: {{vm.mycolor}} !important; color: {{vm.textcolor}} !important"> <span class=input-group-btn><a id=event-add href=javascript:; class="btn btn-primary">Add</a></span></div></div><div class=col-md-12><hr><div id=items><span ng-repeat="item in vm.instructorlist" items-drag class="external-event label label-default" id=event style="position: relative;background-color: {{item.backgroundcolor}} !important; color: {{item.textcolor}} !important">{{item.firstname}} {{item.lastname}}</span></div><hr><div id=testtype><span ng-repeat="item in vm.testtypelist" items-drag class="external-event label label-default" id={{item.testdescription}} style="position: relative;background-color: {{item.backgroundcolor}} !important; color: {{item.textcolor}} !important">{{item.testdescription}}</span></div><hr><div class="external-event label label-default ui-draggable" items-drag id=movie style="position: relative;background-color: cyan !important; color: black;">Movie Night</div><hr><div class="external-event label label-default ui-draggable" items-drag id=ClassSchedule style="position: relative;background-color: orange !important; color: black;">Class Schedule</div></div><div id=event-block></div></div></div></div><div id=eventContent title="Event Details" style="display: none">Start: <span id=startTime></span><br>End: <span id=endTime></span><br><br><div id=eventInfo></div><p><strong><a id=eventLink target=_blank>Read More</a></strong></p></div></div></div><div class="portlet portlet-green"><div class=portlet-header><div class=caption>Tasks</div><div class=tools><i class="fa fa-chevron-down fa-chevron-init"></i></div></div><div class="portlet-body pbn ptl" style="display: block; background-color: white;"><div class=panel><div class=panel-body><h4 class=block-heading style=font-family: oswald ";"><i class="icon-directions mrs"></i>Todo List</h4><div id=todos-list><ul id=todos-list-sort class=list-unstyled><li><div class=input-group><input id=todos-list-input type=text placeholder="New task content" value class=form-control><span class=input-group-btn><button id=todos-list-add type=button class="btn btn-primary">Add</button></span></div></li></ul><ul id=todos-list-gen class=list-unstyled><li class=row ng-repeat="task in vm.thisTasknamelist" style="padding: 0px 10px 0px 20px;"><input type=checkbox id={{task.taskid}} ng-model=task.taskstatus ng-change="vm.updateTasknamelist(task.taskname, task.taskstatus)" ng-true-value=1 ng-false-value=0> <label for={{task.taskid}}>{{task.taskname}}</label><a href ng-click=vm.removeTasknamelist(task.taskname) data-hover=tooltip data-original-title=remove class=delete><span class="far fa-trash-alt"></span></a></li></ul></div></div></div></div></div><div class="portlet portlet-green"><div class=portlet-header><div class=caption>Class Schedule</div><div class=tools><i class="fa fa-chevron-down fa-chevron-init"></i></div></div><div class="portlet-body pbn ptl" style="display: block; background-color: white;"><div class=panel><div class=panel-body><h4 class=block-heading style=font-family: oswald ";"><i class="icon-directions mrs"></i>Schedule to Calendar</h4><div class=col-md-12><label for=inputeventdate class=control-label>Event Date</label><div class=form-group><div class=col-md-9><div class="input-icon right"><i ng-click=vm.conversiondateopen($event) data-hover=tooltip data-original-title=Correct class="glyphicon tooltips"></i> <input id=conversiondate type=text placeholder=mm/dd/yyyy name=conversiondate ng-model=vm.ConversionDate is-open=vm.status.opened uib-datepicker-popup={{vm.bdateformat}} class=form-control></div></div><div class><button type=button class="btn btn-default" ng-click=vm.conversiondateopen($event)><i class="glyphicon glyphicon-calendar"></i></button></div></div></div><div class=col-md-12><button id=sched-to-calendar ng-show=vm.ConversionDate ng-click=vm.schedToCal() type=button class="btn btn-primary">Transfer Schedule to Calendar</button> <button id=clear-calendar ng-show=vm.ConversionDate ng-click=vm.clearCal() type=button class="btn btn-primary">Clear Class on Calendar</button> <button id=transfer-calendar ng-show=vm.ConversionDate ng-click=vm.transferCal() type=button class="btn btn-primary">Transfer Calendar<br>to Schedule</button></div></div></div></div></div></div><div class=col-md-8><div class=panel><div class=panel-body><div id=calendar></div></div></div></div></div></div></div></div></div><div class=row><div class=col-lg-4><div class=panel><div class=panel-body><h4 class=block-heading><i class="icon-cursor mrs"></i>Student Makeup</h4><div ng-repeat="stats in vm.studentstats | orderBy: \'timeint\':true | filter: vm.filterstat"><div ng-repeat="d in stats.details">{{d.details.firstname}} {{d.details.lastname}} became {{d.details.classstatus}} on {{d.details.month}} <a ng-href=./#/form-layouts-editstudent/id/{{d.details.contactid}} class="btn btn-blue">Edit {{d.details.firstname}}</a></div></div><div id=line-chart-spline style=height:300px class=col-lg-12></div><div id=line-chart-spline-legend style="height:35px; padding-top:20px;" class=col-lg-12></div></div></div></div></div></div></div>'),$templateCache.put("templates/states/page-404.html",'<div class="animated bounceInLeft"><div id=error-page-content><h1>404!</h1><h4>The page you are looking for has not been found!</h4><p>The page you are looking for might have been removed or unavailable.</p><p><a href="/#/">Return home</a> or try the search bar below.</p><form action class=mbm><div class=input-group><input type=text placeholder="Enter page" class=form-control><span class=input-group-btn><a href="/#/" class="btn btn-primary">Search</a></span></div></form></div></div>'),$templateCache.put("templates/states/page-500.html",'<div class="animated bounceInLeft"><div id=error-page-content><h1>500!</h1><h4>Internal Server Error</h4><p>The website cannot display the page.</p><p><a href="/#/">Return home</a> or please come back in a while.</p></div></div>'),$templateCache.put("templates/states/page-lock-screen.html",'<!DOCTYPE html><div class="animated slideInLeft"><div id=lock-screen-content><img id=lock-screen-avatar src=images/avatar/128.jpg alt class="img-responsive img-circle" ng-controller="PageLockScreenController as pagevm"><div id=lock-screen-info><form action class=mbm><div class=input-group><span class=input-group-btn><a href="/#/" class="btn btn-primary">Logged out - Return to Default Site?</a></span></div></form></div></div></div>'),$templateCache.put("templates/states/page-signin.html",'<!DOCTYPE html><div class="animated bounceInDown col-md-3 col-md-offset-3"><div id=signin-page-content ng-controller="PageSigninController as pagevm"><form name=form ng-submit="form.$valid && pagevm.login()" class=form role=form novalidate><h1 class=block-heading>Sign In</h1><p>Dear user, log in to access the registration area!</p><div class=form-group ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><div class=input-iconx><i class="fa fa-user"></i> <input type=text placeholder=Username name=username autocomplete=on required id=username ng-model=pagevm.username class=form-control> <span ng-show="form.username.$dirty && form.username.$error.required" class=help-block>Username is required</span></div></div><div class=form-group ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><div class=input-iconx><i class="fa fa-key"></i> <input type=password placeholder=Password name=password autocomplete=on id=password class=form-control ng-model=pagevm.password required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span></div></div><div class=form-actions><button type=submit ng-disabled="form.$invalid || pagevm.dataLoading" class="btn btn-primary">Login &nbsp;<i class="fa fa-chevron-circle-right"></i></button> <a id=btn-forgot-pwd href=#/forgot-pwd class=mlm>Forgot your password?</a> <img ng-if=pagevm.dataLoading src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="></div><hr><div class=create-account><p>Don\'t have an account yet? &nbsp;<a id=btn-register href=#/page-signup>Create an account</a></p></div></form></div></div>'),
$templateCache.put("templates/states/page-signup.html",'<!DOCTYPE html><div class="animated bounceInDown col-md-3 col-md-offset-3"><div id=signup-page-content ng-controller="PageSignupController as vm"><form name=form ng-submit=vm.register() role=form><h1 class=block-heading>Sign Up</h1><div class="row mbl"><div class=col-md-6><div class=form-group ng-class="{ \'has-error\': form.firstName.$dirty && form.firstName.$error.required }"><input type=text name=firstName value id=firstName class=form-control ng-model=vm.firstname required placeholder="First Name"> <span ng-show="form.firstName.$dirty && form.firstName.$error.required" class=help-block>First name is required</span></div></div><div class=col-md-6><div class=form-group ng-class="{ \'has-error\': form.lastName.$dirty && form.lastName.$error.required }"><input type=text name=lastName id=lastName class=form-control ng-model=vm.lastname required placeholder="Last Name"> <span ng-show="form.lastName.$dirty && form.lastName.$error.required" class=help-block>Last name is required</span></div></div></div><div class=form-group ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><input type=text name=username id=username class=form-control ng-model=vm.username required placeholder="User Name"> <span ng-show="form.username.$dirty && form.username.$error.required" class=help-block>Username is required</span></div><div class="form-group input-icon mbl" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><i class="fa fa-key"></i> <input type=password name=password id=password value placeholder=Password class=form-control ng-model=vm.password ng-pattern=re required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span> <span ng-show=form.password.$error.pattern class=help-block>Not a valid password.</span></div><div class=mbl><input type=password name=confirm_password value ng-keyup=vm.compare(vm.confirm_password) ng-pattern=re placeholder="Confirm Password" class=form-control ng-model=vm.confirm_password required> <span ng-show="vm.isconfirm || form.confirm_password.$dirty" ng-class="{true:\'green\',false:\'red\'}[vm.isconfirm]">Password does {{vm.isconfirm==true?\'\':\'not\'}} match</span></div><div class="input-icon mbl" ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }"><i class="fa fa-envelope"></i> <input type=email name=email value placeholder="Your Email" class=form-control ng-model=vm.email required> <span ng-show=form.email.$error.email class=help-block>Not valid email.</span></div><span class="help-block mtm mbl text-muted">By clicking Create my account, you agree to our<a href=/#/terms>Terms and Data Use Policy</a></span><div class=form-actions><button type=submit ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-lg btn-primary btn-block">Create my account</button> <img ng-if=vm.dataLoading src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="> <a href=#/login class="btn btn-link">Cancel</a></div></form></div></div>'),$templateCache.put("templates/states/paymentView.html",'<!DOCTYPE html><html><head><style>\n\n    @media screen {\n      #printSection {\n        display: none;\n      }\n.invoice-title h2,\n.invoice-title h3 {\n  display: inline-block;\n}\n.table > tbody > tr > .no-line {\n  border-top: none;\n}\n.table > thead > tr > .no-line {\n  border-bottom: none;\n}\n.table > tbody > tr > .thick-line {\n  border-top: 2px solid;\n}\n      \n    }\n\n\n    @media print {\n      body * {\n        display: none;\n      }\n\n      #printSection,\n      #printSection * {\n        display: inline-block;\n\n      }\n.pull-right {\n/*\n  float: right!important;\n*/\n}\n.invoice-title h2,\n.invoice-title h3 {\n  display: inline-block;\n}\n.table > tbody > tr > .no-line {\n  border-top: none;\n}\n.table > thead > tr > .no-line {\n  border-bottom: none;\n}\n.table > tbody > tr > .thick-line {\n  border-top: 2px solid;\n}\ntable {\n    table-layout: auto;\n}\ntd {\n    width: 160px;\n    height: auto;\n}\nth {\n    width: 160px;\n    height: auto;\n}\nth:nth-child(2) {\n    width: 210px;\n    height: auto;\n}\n/*\ntd:nth-child(2) {\n    border: 1px solid #ccc;\n    width: 210px;\n    height: auto;\n}\n*/\n.col-md-6 {\n/*    width: 50%;\n    position: relative;\n    float: left;    \n*/  \n    min-height: 1px;\n    padding-right: 15px;\n    padding-left: 15px;\n  width: 300px;\n}\n.row {\n    margin-right: -15px;\n    margin-left: -15px;\n}\n.well {\n    min-height: 20px;\n    padding: 19px;\n    margin-bottom: 20px;\n    background-color: #f5f5f5;\n    border: 1px solid #e3e3e3;\n    border-radius: 4px;\n    box-shadow: none;\n}\n      .text-orange {\n        color: orange !important;\n      }\n      .label-success {\n        color: white !important;\n        background-color: green !important;\n      }\n      #printSection {\n        position: absolute;\n        left: 0;\n        top: 0;\n      }\n\n    }\n  </style></head><body><div><div class=modal-content><div id=printInvoice><form name=form.read novalidate><div class=modal-header><h1>Payment Details</h1></div><div class=modal-body style="padding: 0px;"><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Payment</h2></div><div class=panel-body><div class="row invoice-title"><div class=col-md-4><h2 class=text-primary>Invoice</h2></div><div class=col-md-8><h3>Order <span class=text-orange>{{vm.selectedRow.invoice}}</span></h3></div></div><hr><div class=well><div class=row><div class=col-md-6><address><strong>Billed To:</strong><br>{{vm.selectedRow.npfirst_name}} {{vm.selectedRow.nplast_name}}<br>Email: {{vm.selectedRow.payer_email}}</address></div><div class=col-md-6><address><strong>Payment:</strong><br>Payment Date: {{vm.selectedRow.npdate}}<br>Txn id: {{vm.selectedRow.txn_id}}</address></div></div><div class=row><div class=col-md-6><address><strong>Payment Method:</strong><br>Pay type: {{vm.selectedRow.nptype}}<br>Pay Status: {{vm.selectedRow.npstatus}}</address></div><div class=col-md-6><address><strong>Order:</strong><br>Date: {{vm.selectedRow.invdate}}<br>Status:<span class="label label-success">{{vm.selectedRow.inv_status}}</span></address></div></div></div><h4 class=block-heading>Order summary</h4><div class=table-responsive><table class="table table-condensed"><thead><tr><td><strong>Item</strong></td><td class=text-center><strong>Quantity</strong></td><td class=text-right><strong>Totals</strong></td></tr></thead><tbody><tr ng-show="{{vm.selectedRow.num_cart_items}} >= 1"><td>{{vm.selectedRow.item_name1}}</td><td class=text-center>{{vm.selectedRow.quantity1}}</td><td class=text-right>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.mc_gross_1}}</td></tr><tr ng-show="{{vm.selectedRow.num_cart_items}} >= 2"><td>{{vm.selectedRow.item_name2}}</td><td class=text-center>{{vm.selectedRow.quantity2}}</td><td class=text-right>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.mc_gross_2}}</td></tr><tr ng-show="{{vm.selectedRow.num_cart_items}} >= 3"><td>{{vm.selectedRow.item_name3}}</td><td class=text-center>{{vm.selectedRow.quantity3}}</td><td class=text-right>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.mc_gross_3}}</td></tr><tr ng-show="{{vm.selectedRow.num_cart_items}} >= 4"><td>{{vm.selectedRow.item_name4}}</td><td class=text-center>{{vm.selectedRow.quantity4}}</td><td class=text-right>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.mc_gross_4}}</td></tr><tr ng-show="{{vm.selectedRow.num_cart_items}} == 5"><td>{{vm.selectedRow.item_name5}}</td><td class=text-center>{{vm.selectedRow.quantity5}}</td><td class=text-right>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.mc_gross_5}}</td></tr><tr><td class=thick-line>&nbsp;</td><td class="thick-line text-center">&nbsp;</td><td class="thick-line text-right"><strong>Subtotal:</strong>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.inv_amt}}</td></tr><tr ng-show="vm.selectedRow.shipping > 0"><td class=no-line>&nbsp;</td><td class="no-line text-center">&nbsp;</td><td class="no-line text-right"><strong>Shipping:</strong>$15</td></tr><tr><td class=no-line>&nbsp;</td><td class="no-line text-center">&nbsp;</td><td class="no-line text-right"><strong>Total:</strong>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.inv_amt}}</td></tr><tr><td class=no-line>&nbsp;</td><td class="no-line text-center">&nbsp;</td><td class="no-line text-right"><strong>Payment:</strong>{{vm.selectedRow.mc_currency}} {{vm.selectedRow.payment_gross}}</td></tr></tbody></table></div></div></div></div></div><div class=modal-footer></div></form></div><button type=button class="btn btn-blue" ng-click=vm.cancel()>Close</button> <button type=button class="btn btn-blue" ng-click=vm.email()><i class="far fa-share-square"></i> Email</button> <button class="btn btn-primary" ng-print print-element-id=printInvoice><i class="fas fa-print"></i> Print</button></div></div></body></html>'),$templateCache.put("templates/states/promotion.html",'<div class=modal-content><form name=form novalidate><div class=modal-header><h1>Promotion and Class Registration Update</h1></div><div class=modal-body><div class="row col-md-12"><div ui-grid=vm.rptgridOptionsnew id=grid1 ui-if="vm.rptgridOptionsnew.data.length>0" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-selection ui-grid-auto-fit-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()><div class=watermark ng-show=!vm.rptgridOptionsnew.data.length>No data available</div></div></div></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=vm.promote() ng-disabled=form.$invalid>Promote Selected</button> <button type=button class="btn btn-green" ng-click=vm.cancel()>Close</button></div></form></div>'),$templateCache.put("templates/states/reset-pwd.html",'<!DOCTYPE html><div class="animated bounceInDown col-md-3 col-md-offset-3"><div id=signin-page-content ng-controller="ResetpwdController as pagevm"><form name=form ng-submit="form.$valid && pagevm.resetpwd()" class=form role=form novalidate><h1 class=block-heading>Reset Password</h1><p>Dear user, please enter your new password!</p><div class=form-group ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><div class=input-icon><i class="fa fa-user"></i> <input type=text placeholder=Username name=username autocomplete=on required id=username ng-model=pagevm.username class=form-control> <span ng-show="form.username.$dirty && form.username.$error.required" class=help-block>Username is required</span></div></div><div class="form-group input-icon mbl" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><i class="fa fa-key"></i> <input type=password name=password id=password value placeholder=Password class=form-control ng-keyup=pagevm.compare(pagevm.confirm_password) ng-model=pagevm.password ng-pattern=pagevm.re required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span> <span ng-show=form.password.$error.pattern class=help-block>Not a valid password.</span></div><div class=mbl><input type=password name=confirm_password value id=confirm_password ng-keyup=pagevm.compare(pagevm.confirm_password) ng-pattern=pagevm.re placeholder="Confirm Password" class=form-control ng-model=pagevm.confirm_password required> <span ng-show="pagevm.isconfirm || form.confirm_password.$dirty" ng-class="{true:\'green\',false:\'red\'}[pagevm.isconfirm]">Password does {{pagevm.isconfirm==true?\'\':\'not\'}} match</span></div><div class="input-icon mbl" ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }"><i class="fa fa-envelope"></i> <input type=email name=email value placeholder="Your Email" class=form-control ng-model=pagevm.email required> <span ng-show=form.email.$error.email class=help-block>Not valid email.</span></div><div class=form-actions><button type=submit ng-disabled="form.$invalid || pagevm.dataLoading" class="btn btn-primary">Reset &nbsp;<i class="fa fa-chevron-circle-right"></i></button> <a id=btn-forgot-pwd href=/#/forgot-pwd class=mlm>Forgot your password?</a> <img ng-if=pagevm.dataLoading src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="></div><hr><div class=create-account><p>Don\'t have an account yet? &nbsp;<a id=btn-register href=#/page-signup>Create an account</a></p></div></form></div></div>'),$templateCache.put("templates/states/table-basic-attendance.html",'<!DOCTYPE html><div ng-controller="AttendanceTableBasicController as vm" ng-init="active[vm.getActiveTab()]= true"><div class="panel panel-blue"><div class=panel-heading>Attendance Filters</div><div class="panel-body pan"><div class=col-md-12><div class=row><div class=col-md-4><div class=form-group><label for=inputclass class="control-label attendance">Class</label><div class="input-icon right"><select id=inputclass type=text name=class ng-model=vm.theclass ng-change=vm.setClass(vm.theclass);vm.refreshtheAttendanceClick() class="form-control attendance"><option ng-repeat="g in vm.classes" ng-selected="{{(g.Description === vm.classes[vm.nowChoice].Description) && \'selected\' || \'not\' }}" value={{g.Description}}>{{g.Description}} {{g.TimeRange}}</option><option>All</option></select></div></div></div><div class=col-md-4><div class=form-group><label for=inputlimit class="control-label attendance">Limit</label><div class="input-icon right"><select id=inputlimit type=text name=limit ng-model=vm.limit ng-change=vm.setLimit(vm.limit);vm.refreshtheAttendanceClick() class="form-control attendance"><option ng-repeat="lim in vm.limits" ng-selected="lim == vm.limit" value={{lim}}>{{lim}}</option></select></div></div></div><div class=col-md-4><div class=form-group><label for=inputDOW class="control-label attendance">Monday Of Week</label><div class="input-icon right"><select id=inputDOW type=text name=DOW ng-model=vm.dowChoice ng-change=vm.setDOW(vm.dowChoice);vm.refreshtheAttendanceClick();vm.getAttendanceHistory() class="form-control attendance"><option>{{vm.MondayOfWeek | date:\'yyyy-MM-dd\'}}</option><option ng-repeat="iter in vm.DOWlist" ng-selected="iter.MondayOfWeek === vm.dowChoice" value={{iter.MondayOfWeek}}>{{iter.MondayOfWeek}}</option></select></div></div></div></div></div></div><div class=panel-footer></div></div><uib-tabset type=pills><uib-tab id=tab-attend heading="Take Attendance" active=active.attend select="vm.setActiveTab(\'attend\');vm.setDOW(vm.getFormattedDate(vm.MondayOfWeek))"><div class="panel panel-blue"><div class=panel-heading>Class Attendance</div><div class="panel-body pan"><div class="row col-md-12"><div class=col-md-10><label class="btn btn-green btn-primary attendance" ng-click=vm.setday(0); ng-model=vm.radioModel uib-btn-radio="\'Sunday\'">Sunday<br><div style="font-size: small;">{{vm.SundayOfWeek}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(1); ng-model=vm.radioModel uib-btn-radio="\'Monday\'">Monday<br><div style="font-size: small;">{{vm.getFormattedDate(vm.MondayOfWeek)}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(2); ng-model=vm.radioModel uib-btn-radio="\'Tuesday\'">Tuesday<br><div style="font-size: small;">{{vm.TuesdayOfWeek}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(3); ng-model=vm.radioModel uib-btn-radio="\'Wednesday\'">Wednesday<br><div style="font-size: small;">{{vm.WednesdayOfWeek}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(4); ng-model=vm.radioModel uib-btn-radio="\'Thursday\'">Thursday<br><div style="font-size: small;">{{vm.ThursdayOfWeek}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(5); ng-model=vm.radioModel uib-btn-radio="\'Friday\'">Friday<br><div style="font-size: small;">{{vm.FridayOfWeek}}</div></label> <label class="btn btn-green btn-primary attendance" ng-click=vm.setday(6); ng-model=vm.radioModel uib-btn-radio="\'Saturday\'">Saturday<br><div style="font-size: small;">{{vm.SaturdayOfWeek}}</div></label></div><div class=col-md-2><button ng-click=vm.refreshtheAttendanceClick() class="btn btn-blue attendance">Attendee List</button></div></div><div class=row><div class=col-md-12><div class="deckgrid clearfix" deckgrid source=vm.photos cardtemplate=templates/states/attendance-card.html></div></div></div></div><div class=panel-footer></div></div></uib-tab><uib-tab id=tab-attendhist heading="Attendance History" active=active.attendhistory select="vm.setActiveTab(\'attendhistory\');vm.setDOW(vm.DOWlist[0].MondayOfWeek);vm.getAttendanceHistory()"><div class="panel panel-blue"><div class=panel-heading>Attendance History</div><div class="panel-body pan"><div class=col-lg-12><div class=row><button ng-click=vm.getAttendanceHistory() class="btn btn-blue attendance">Refresh List</button></div><div class=row><div class=col-md-12><div class=col-md-1>MondayOfWeek</div><div class=col-md-1>Name</div><div class=col-md-1>Rank</div><div class=col-md-1>Class</div><div class=col-md-1>Monday</div><div class=col-md-1>Tuesday</div><div class=col-md-1>Wednesday</div><div class=col-md-1>Thursday</div><div class=col-md-1>Friday</div><div class=col-md-1>Saturday</div><div class=col-md-1>Sunday</div></div><div class=col-md-12 ng-repeat="student in vm.data.attendancehistory"><div class=col-md-1>{{student.MondayOfWeek}}</div><div class=col-md-1>{{student.firstname}} {{student.lastname}}</div><div class=col-md-1>{{student.rank}}</div><div class=col-md-1>{{student.class}}</div><div class=col-md-1><i ng-class="student.day1 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day2 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day3 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day4 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day5 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day6 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div><div class=col-md-1><i ng-class="student.day7 == 1? \' fa fa-check-square-o fa-2x\' : \'fa fa-square-o fa-2x\'" style=color:green;></i></div></div></div></div></div><div class=panel-footer></div></div></uib-tab></uib-tabset></div>'),$templateCache.put("templates/states/table-basic-eventcreation.html",'<!DOCTYPE html><div ng-controller="EventTableBasicController as vm" ng-init="active[vm.getActiveTab()]= true"><div class="panel panel-orange"><div class=panel-heading>Events</div></div><uib-tabset type=pills><uib-tab id=tab-event heading=Create active=active.event select="vm.setActiveTab(\'event\'); eventtabShown = !eventtabShown" deselect="eventtabShown = !eventtabShown"><div class="panel panel-blue"><div class=panel-heading>Form</div><div class="panel-body pan"><div class=col-md-12><form action novalidate name=editevent class=form-horizontal><div class="form-body pal"><div class=row><div class=col-md-4><div ng-class="{\'has-error\': editevent.inputevent.$invalid, \'has-success\': !editevent.inputevent.$invalid}" class><label for=input_event class=control-label>New Event</label><div class="input-icon right col-md-12"><i data-hover=tooltip data-original-title=Correct ng-show=editevent.inputevent.$dirty ng-class="editevent.inputevent.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=input_event type=text placeholder=Event name=inputevent ng-model=vm.colsubkey ng-change=vm.changeColDef(vm.colsubkey) minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 2500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editevent.inputevent.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></div><div class=col-md-7><div class=col-md-6><label for=query class=control-label>Previous Grid Query</label><ui-select tagging tagging-label="(custom \'new\' label)" ng-model=vm.colsubkey on-select=vm.changeColDef($item) theme=bootstrap ng-disabled=disabled class=col-md-12 title="Choose a query" append-to-body=false><ui-select-match allow-clear placeholder="Select the columns...">{{$select.selected.col}}</ui-select-match><ui-select-choices repeat="colkeyitem.col as colkeyitem in vm.colsubkeys| filter: $select.search"><small>Name: <span ng-bind-html="colkeyitem.col | highlight: $select.search"></span><hr style="margin-top: 0.2em; margin-bottom: 0.2em; border-top-color: #ef6c00"></small></ui-select-choices></ui-select></div><div class=col-md-6><label for="save btn" class=control-label>Save Grid Setting</label> <button type=button ng-click=vm.saveState() class="btn btn-blue col-md-12">For: {{vm.colsubkey}}</button></div></div><div class=col-md-1><label for=inputlimit class=control-label>Limit</label><div class="input-icon right"><select id=inputlimit type=text name=limit ng-model=vm.limit ng-change=vm.setLimit(vm.limit) class="form-control EventCreation"><option ng-repeat="lim in vm.limits" ng-selected="lim == vm.limit" value={{lim}}>{{lim}}</option></select></div></div></div><div class=row><div class=col-md-3><label for=inputeventdate class=control-label>Event Date</label><div ng-class="{\'has-error\': editevent.eventdate.$invalid, \'has-success\': !editevent.eventdate.$invalid}" class=form-group><div class=col-md-9><div class="input-icon right"><i ng-click=vm.dateopen($event) data-hover=tooltip data-original-title=Correct ng-show=editevent.eventdate.$dirty ng-class="editevent.eventdate.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputeventdate type=text placeholder=mm/dd/yyyy name=eventdate ng-model=vm.EventDate is-open=vm.status.opened uib-datepicker-popup={{vm.bdateformat}} ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div></div><div style=color:maroon role=alert ng-messages=editevent.eventdate.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div><div class><button type=button class="btn btn-default" ng-click=vm.dateopen($event)><i class="glyphicon glyphicon-calendar"></i></button></div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editevent.EventType.$invalid, \'has-success\': !editevent.EventType.$invalid}" class=form-group><label for=inputEventType class=control-label>Event Type</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editevent.EventType.$dirty ng-class="editevent.EventType.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputEventType type=text placeholder="Event Type" name=EventType ng-model=vm.EventType ng-change=vm.updateStudent() minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editevent.EventType.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editevent.EventStart.$invalid, \'has-success\': !editevent.EventStart.$invalid}" class=form-group><label for=inputEventStart class=control-label>Event Start</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editevent.EventStart.$dirty ng-class="editevent.EventStart.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputEventStart type=time step=60 placeholder="Event Start" name=EventStart ng-model=vm.EventStart ng-change=vm.updateStudent() minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editevent.EventStart.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editevent.EventEnd.$invalid, \'has-success\': !editevent.EventEnd.$invalid}" class=form-group><label for=inputEventEnd class=control-label>Event End</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editevent.EventEnd.$dirty ng-class="editevent.EventEnd.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputEventEnd type=time step=60 placeholder="Event End" name=EventEnd ng-model=vm.EventEnd ng-change=vm.updateStudent() minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editevent.EventEnd.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-2><div ng-class="{\'has-error\': editevent.Location.$invalid, \'has-success\': !editevent.Location.$invalid}" class=form-group><label for=inputLocation class=control-label>Location</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editevent.Location.$dirty ng-class="editevent.Location.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=inputLocation type=text placeholder=Location name=Location ng-model=vm.Location ng-change=vm.updateStudent() minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=editevent.Location.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div><div class=row><div class=col-md-6><button type=button ng-click="vm.createEvent(vm.colsubkey); active[\'eventhistory\']= true" class="btn btn-blue">Create Event for: {{vm.colsubkey}}</button></div></div></div></form></div><div class=row><div class=col-md-12><div ui-grid=vm.gridOptions ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-selection ui-grid-move-columns ui-grid-exporter ui-grid-grouping ui-grid-save-state class=mygrid ng-if=eventtabShown></div></div></div></div><div class=panel-footer></div></div></uib-tab><uib-tab id=tab-attendhist heading=Manage active=active.eventhistory select="vm.setActiveTab(\'eventhistory\');vm.getEventCreationHistory();eventhistorytabShown = !eventhistorytabShown" deselect="eventhistorytabShown = !eventhistorytabShown"><div class="panel panel-green"><div class=panel-heading>Filters</div><div class="panel-body pan"><div class=col-lg-12><div class=row><div class=col-md-7 style="height: 70px;"><div class=select-box><div class=col-md-6><label for=query class=control-label>Pick Event</label><ui-select ng-model=vm.eventSelected theme=bootstrap reset-search-input=false ng-disabled=vm.disabled on-select=vm.getEventDetails($item) style="width: 300px;" title="Choose an event" append-to-body=false><ui-select-match placeholder="Filter the events...">{{$select.selected.event}}</ui-select-match><ui-select-choices repeat="event in vm.eventlist | filter: $select.search track by $index" refresh=vm.getEventNames($select.search) refresh-delay=0><div ng-bind-html="event.event | highlight: $select.search"></div></ui-select-choices></ui-select></div></div></div><div class=col-md-5><button ng-click=vm.getEventDetails(vm.eventSelected) class="btn btn-green EventCreation">Refresh List</button></div></div><div class=row><div class=col-md-12><div class=row>Event:{{vm.Event}} EventType:{{vm.EventType}} EventStart:{{vm.EventStart}} EventEnd:{{vm.EventEnd}} EventDate:{{vm.EventDate}} Location:{{vm.Location}}</div><div class=row><div ui-grid=vm.gridHistOptions ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-edit ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid ng-if=eventhistorytabShown></div></div></div></div></div></div><div class=panel-footer></div></div></uib-tab></uib-tabset></div>'),$templateCache.put("templates/states/table-basic-rptbuilder.html",'<!DOCTYPE html><div class="panel panel-green" ng-controller="RptBuilderController as vmrpt"><div class=panel-heading>Test Documents</div><div class=panel-body><div class=col-md-12><form action novalidate name=edittemplate class=form-horizontal><div class="form-body pal"><div class="row col-md-12" style="height: 70px;"><div class=col-md-3><div class=select-box><ui-select ng-model=vmrpt.templatenameSelected theme=bootstrap reset-search-input=false on-select=vmrpt.gettemplateDetails($item) style="width: 300px;" title="Choose an existing test document" append-to-body=false><ui-select-match placeholder="Pick existing test document...">{{$select.selected.templatename}}</ui-select-match><ui-select-choices repeat="template in vmrpt.templatelist | filter: $select.search track by $index" refresh=vmrpt.getTemplateNames($select.search) refresh-delay=0><div ng-bind-html="template.templatename | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=col-md-3><button ng-click=vmrpt.updatetemplate(vmrpt.templatename); class="btn btn-green">Save Changes for {{vmrpt.templatename}}</button></div><div class=col-md-3><button ng-click=vmrpt.removetemplate(vmrpt.templatename); class="btn btn-green">Remove {{vmrpt.templatename}}</button></div><div class=col-md-3><button ng-click=vmrpt.gettemplateDetails(vmrpt.templatename) class="btn btn-green">Refresh Display</button></div></div><div class=row><div class=col-md-4><div ng-class="{\'has-error\': edittemplate.inputtemplate.$invalid, \'has-success\': !edittemplate.inputtemplate.$invalid}" class><div class="input-icon right col-md-12"><i data-hover=tooltip data-original-title="New Test Doc" ng-show=edittemplate.inputtemplate.$dirty ng-class="edittemplate.inputtemplate.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i> <input id=input_template type=text placeholder="New Document Name" name=inputtemplate ng-model=vmrpt.templatename minlength=2 maxlength=30 ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 2500, \'blur\': 0 } }" class=form-control></div><div style=color:maroon role=alert ng-messages=edittemplate.inputtemplate.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></div><div class=col-md-6><button type=button ng-click=vmrpt.createtemplate(vmrpt.templatename); class="btn btn-blue">Create template for: {{vmrpt.templatename}}</button></div></div></div></form></div><div class=col-md-12><h1>Editor</h1><div class="col-md-12 row"><div class=col-md-4><h2>Header Logo</h2><form novalidate>Pick an image-file: <input type=file ng-model=vmrpt.headerimages accept=image/* multiple app-filereader><br><img style=max-width:300px; ng-repeat="image in vmrpt.headerimages" ng-src={{image}}><br><button ng-click="vmrpt.headerimages = null" ng-show=!!vmrpt.headerimages>Remove {{vmrpt.headerimages.length}} images</button><br><button ng-click=vmrpt.setHeaderLogo(); ng-show=!!vmrpt.headerimages>Add to Header</button><br></form></div><div class=col-md-4><h2>Footer Logo</h2><form novalidate>Pick an image-file: <input type=file ng-model=vmrpt.footerimages accept=image/* multiple app-filereader><br><img style=max-width:300px; ng-repeat="image in vmrpt.footerimages" ng-src={{image}}><br><button ng-click="vmrpt.footerimages = null" ng-show=!!vmrpt.footerimages>Remove {{vmrpt.footerimages.length}} images</button><br><button ng-click=vmrpt.setFooterLogo(); ng-show=!!vmrpt.footerimages>Add to Footer</button><br></form></div><div class=col-md-4><h2>Background Images</h2><form novalidate>Pick an image-file: <input type=file ng-model=vmrpt.backgroundimages accept=image/* multiple app-filereader><br><img style=max-width:300px; ng-repeat="image in vmrpt.backgroundimages" ng-src={{image}}><br><button ng-click="vmrpt.backgroundimages = null" ng-show=!!vmrpt.backgroundimages>Remove {{vmrpt.backgroundimages.length}} images</button><br><button ng-click=vmrpt.setBackgroundImage(); ng-show=!!vmrpt.backgroundimages>Set as Background</button><br></form></div></div><div class="col-md-12 row"><div class="input-icon right col-md-2"><label for=maxHeaderHeight>Max Header Height</label> <input id=maxHeaderHeight type=number name=maxHeaderHeight ng-model=vmrpt.maxHeaderHeight class=form-control></div><div class="input-icon right col-md-2"><label for=maxFooterHeight>Max Footer Height</label> <input id=maxFooterHeight type=number name=maxFooterHeight ng-model=vmrpt.maxFooterHeight class=form-control></div><div class="input-icon right col-md-2"><label for=pageMarginL>Page Margin Left</label> <input id=pageMarginL type=number name=pageMarginL ng-model=vmrpt.pageMarginL class=form-control></div><div class="input-icon right col-md-2"><label for=pageMarginT>Top</label> <input id=pageMarginT type=number name=pageMarginT ng-model=vmrpt.pageMarginT class=form-control></div><div class="input-icon right col-md-2"><label for=pageMarginR>Right</label> <input id=pageMarginR type=number name=pageMarginR ng-model=vmrpt.pageMarginR class=form-control></div><div class="input-icon right col-md-2"><label for=pageMarginB>Bottom</label> <input id=pageMarginB type=number name=pageMarginB ng-model=vmrpt.pageMarginB class=form-control></div></div><div class="col-md-12 row"><div class="input-icon right col-md-3"><label for=pagesize>Pagesize</label><select id=pagesize type=text name=pagesize ng-model=vmrpt.pageSize required ng-change(vmrpt.calcsizes();) class=form-control><option ng-repeat="iter in vmrpt.pageSizes" ng-selected="{{iter==vmrpt.pageSize}}" placeholder=Select value={{iter}}>{{iter}}</option></select></div><div class="input-icon right col-md-3"><label for=orientation>Orientation</label><select id=orientation type=text name=orientation ng-model=vmrpt.pageOrientation required ng-change(vmrpt.calcsizes();) class=form-control><option ng-repeat="iter in vmrpt.pageOrientations" ng-selected="{{iter==vmrpt.pageOrientation}}" placeholder=Select value={{iter}}>{{iter}}</option></select></div><div class="input-icon right col-md-3"><label for=pagebreak>Page Break?</label><select id=pagebreak type=text name=pagebreak ng-model=vmrpt.pagebreak required class=form-control><option ng-repeat="iter in vmrpt.pagebreaks" ng-selected="{{iter==vmrpt.pagebreak}}" placeholder=Select value={{iter}}>{{iter}}</option></select></div></div><hr><div text-angular-toolbar name=htmlcontenttools></div><div class="col-md-12 row"><div class=col-md-1><button type=button ta-button ng-click=vmrpt.refresHtml()>Refresh</button></div><div class=col-md-1><button type=button ta-button ng-click=vmrpt.htmlcontentreset()>Reset</button></div><div class=col-md-1><button type=button ta-button ng-click=vmrpt.htmlcontentclear()>clear</button></div><div class=col-md-1><button type=button ta-button ng-click=vmrpt.doPDF()>Download PDF</button></div></div><form name=validationForm ng-submit=vmrpt.htmlcontentsubmit()><div id=testValidationHeader><text-angular class=convert name=testValidationHeader ng-model=vmrpt.htmlcontentdata.htmlcontentheader tabindex=3 placeholder="header placeholder" ta-unsafe-sanitizer=true ta-default-wrap=p ta-target-toolbars=htmlcontenttools ng-model-options="{debounce: 10}"></text-angular></div><text-angular class=convert name=testValidation ng-model=vmrpt.htmlcontentdata.htmlcontent tabindex=3 placeholder="Body placeholder" ta-unsafe-sanitizer=true ta-default-wrap=p ta-target-toolbars=htmlcontenttools ng-model-options="{debounce: 10}"></text-angular><div id=testValidationFooter><text-angular class=convert name=testValidationFooter ng-model=vmrpt.htmlcontentdata.htmlcontentfooter tabindex=3 placeholder="footer placeholder" ta-unsafe-sanitizer=true ta-default-wrap=p ta-target-toolbars=htmlcontenttools ng-model-options="{debounce: 10}"></text-angular></div><div id=convertthis class=convert ta-bind name=testValidation ng-model=vmrpt.htmlcontentdata.htmlcontentall placeholder="test placeholder" ng-model-options="{debounce: 10}"></div></form></div></div><div class=panel-footer id=iframeContainer></div></div>'),
$templateCache.put("templates/states/table-basic-schedule.html",'<!DOCTYPE html><div ng-controller="ScheduleTableBasicController as vm"><div class="portlet box portlet-green"><div class=portlet-header><div class=row><div class=caption>XYZ Maintain Schedule</div></div></div><div class=portlet-body><div class=row><?php\n\nrequire_once(\'/v/templates/states/table-basic.php\');\n\nprint strcoltemplate(\n    \'agerange\', \'vm.schedule.agerange\', \'Age Range\', \'All Ages\', true\n    );\n\n?></div><div class=row><form action novalidate name=editschedule class=form-horizontal><div class="row col-md-12" style="height: 88px;"><div class=col-md-2><div ng-class="{\'has-error\': editschedule.dow.$invalid, \'has-success\': !editschedule.dow.$invalid}" class=form-group><label for=Classstatus class=control-label>Day Of Week</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editschedule.dow.$dirty ng-class="editschedule.dow.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=dow type=text name=dow ng-model=vm.schedule.dow required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vm.weekschedule" ng-selected="{{iter.value==vm.schedule.dow}}" placeholder=Select value={{iter.value}}>{{iter.value}}</option></select></div><div style=color:maroon role=alert ng-messages=editschedule.dow.$error class=has-error><div ng-message=required>You did not enter a field</div></div></div></div><div class=col-md-1><div class=form-group><label for=timerange class=control-label>Time Range</label><div><input id=timerange type=text placeholder="0:00PM to 0:00" name=timerange ng-model=vm.schedule.timerange required class=form-control></div></div></div><div class=col-md-1><div class=form-group><label for=agerange class=control-label>Age Range</label><div><input id=agerange type=text placeholder="All Ages" name=agerange ng-model=vm.schedule.agerange required class=form-control></div></div></div><div class=col-md-2><div class=form-group><label for=description class=control-label>Description</label><div><input id=description type=text placeholder="Enter Class Name" name=agerange ng-model=vm.schedule.description required class=form-control></div></div></div><div class=col-md-1><div ng-class="{\'has-error\': editschedule.classid.$invalid, \'has-success\': !editschedule.classid.$invalid}" class=form-group><label for=classid class=control-label>Class</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editschedule.classid.$dirty ng-class="editschedule.classid.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=classid type=text name=classid ng-model=vm.schedule.classid ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="iter in vm.classhashlist" ng-selected="{{iter.id==vm.schedule.classid}}" placeholder=Select value={{iter.id}}>{{iter.value}}</option></select></div><div style=color:maroon role=alert ng-messages=editschedule.classid.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div></div></div></div><div class=col-md-1><div uib-timepicker hour-step=1 minute-step=5 show-meridian=false ng-model=vm.schedule.startT></div></div><div class=col-md-1><div uib-timepicker hour-step=1 minute-step=5 show-meridian=false ng-model=vm.schedule.endT></div></div><div class=col-md-1><div ng-class="{\'has-error\': editschedule.TakeAttendance.$invalid, \'has-success\': !editschedule.TakeAttendance.$invalid}" class=form-group><label for=TakeAttendance class=control-label>Take Attendance?</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=editschedule.TakeAttendance.$dirty ng-class="editschedule.TakeAttendance.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><toggle-switch on-label=Yes off-label=No id=TakeAttendance type=checkbox name=TakeAttendance ng-model=vm.schedule.TakeAttendance ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=switch-primary></toggle-switch></div><div style=color:maroon role=alert ng-messages=editschedule.TakeAttendance.$error class=has-error><div ng-message=required>You did not enter a field</div></div></div></div><div class=col-md-1><div class=form-group><label for=sortorder class=control-label>Sort Order</label><div><input id=sortorder type=number name=sortorder ng-model=vm.schedule.sortorder required class=form-control></div></div></div><div class="col-md-1 btn" style="margin-top: 18px;"><label for=rankbtn class=control-label>&nbsp;</label> <a role=button class="btn btn-green form-control" ng-click=vm.updSchedule(vm.schedule)><i class="fa fa-plus"></i>&nbsp; Add</a></div></div></form></div><div class="panel panel-blue"><div class=panel-heading>Schedule</div><div class="panel-body pan"><div ui-grid=vm.gridOptions ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-selection ui-grid-move-columns ui-grid-exporter ui-grid-edit class=mygrid><div class=watermark ng-show=!vm.gridOptions.data.length>No data available</div></div></div><div class=panel-footer></div></div></div></div></div>'),$templateCache.put("templates/states/table-basic-students.html",'<!DOCTYPE html><div ng-controller="StudentsTableBasicController as vm"><div class=row ng-controller="ctrlDualList as vmDual"><div class=col-lg-12><div class="portlet box portlet-green"><div class=portlet-header><div class=row><div class=caption>Student List</div></div></div><div class=portlet-body><div class=panel><div class=panel-body><div class=table-tools><div class=row><div ng-controller="ModalNewStudentController as vmmodal"><div class="col-lg-12 mbs"><button type=button class="btn btn-red mrs" ng-click=vmmodal.openmodal()><i class="fa fa-plus"></i>&nbsp; Add New</button> <button type=button class="btn btn-red mrs" ng-click="vm.isCollapsed = !vm.isCollapsed">Columns</button></div><script id=newStudent.html type=text/ng-template><div class="modal-header"> <h3 class="modal-title">Create New Student</h3> </div> <div class="modal-body"> <!--<pre>{{vmnew.message}}</pre> --> <form action="" novalidate name="newstudent" class="form-horizontal"> <div class="form-body pal"> <div class="row"> <div class="col-md-6"> <div class="form-group"> <label for="inputFirstName" class="control-label">First Name </label> <input id="inputFirstName" type="text" placeholder="First Name" name="FirstName" ng-model="vmnew.FirstName" minLength="2" maxLength="30" class="form-control"> </div> </div> <div class="col-md-6"> <div class="form-group"> <label for="inputLastName" class="control-label">LastName </label> <input id="inputLastName" type="text" placeholder="Last Name" name="LastName" ng-model="vmnew.LastName" minLength="2" maxLength="30" class="form-control"> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="form-group"> <label for="inputEmail" class="control-label">Email </label> <input id="inputEmail" type="text" placeholder="Email" name="Email" ng-model="vmnew.Email" minLength="2" maxLength="30" class="form-control"> </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="vmnew.submit()">Submit</button> <button class="btn btn-warning" type="button" ng-click="vmnew.cancel()">Cancel</button> </div></script></div></div></div><div uib-collapse=vm.isCollapsed><div class="well well-lg"><div class=container-fluid><div class=container><button class="btn btn-primary" type=button ng-click=vmDual.submit()>Save Preferences</button> <button class="btn btn-warning" type=button ng-click=vmDual.colreset()>Reset Default</button><div class=row><div class="col-md-12 text-center"><h3>Drag &amp; Drop Pick List</h3></div><div class="col-sm-4 col-sm-offset-1"><div class=list-group id=list1 x-lvl-drop-target=true x-on-drop="vmDual.drop(dragEl, dropEl, vmDual.bToA)"><a href=javascript:; class="list-group-item active">Show Columns <input title="Toggle all" ng-click=vmDual.toggleA() ng-model=toggle value={{toggle}} type=checkbox class=pull-right></a> <span ng-repeat="col in vmDual.listA track by col.id"><a href=javascript:; data-id={{col.id}} x-lvl-draggable=true class=list-group-item>{{col.colname}} <small class=text-muted><em>{{col.collabel}}</em></small> <input id={{col.id}} ng-click=vmDual.selectedA.push(col.id) name=selectedA[] value={{col.id}} ng-checked="vmDual.selectedA.indexOf(col.id) > -1" type=checkbox class=pull-right></a></span></div></div><div class="col-md-2 v-center text-center"><div class=btn-group><button title="Send to list 1" class="btn btn-blue" ng-click=vmDual.bToA() id=btnA><i class="glyphicon glyphicon-chevron-left"></i></button> <button title="Send to list 2" class="btn btn-blue" ng-click=vmDual.aToB() id=btnB><i class="glyphicon glyphicon-chevron-right"></i></button></div><h6 class=text-center>move from list-to-list</h6></div><div class=col-sm-4><div class=list-group id=list2 x-lvl-drop-target=true x-on-drop="vmDual.drop(dragEl, dropEl, vmDual.aToB)"><a href=javascript:; class="list-group-item active">Hide Columns <input title="Toggle all" ng-click=vmDual.toggleB() ng-model=toggle value={{toggle}} type=checkbox class=pull-right></a> <span ng-repeat="col in vmDual.listB track by col.id"><a href=javascript:; data-id={{col.id}} class=list-group-item x-lvl-draggable=true>{{col.colname}} <small class=text-muted><em>{{col.collabel}}</em></small> <input id={{col.id}} ng-click=vmDual.selectedB.push(col.id) name=selectedB[] value={{col.id}} ng-checked="vmDual.selectedB.indexOf(col.id) > -1" type=checkbox class=pull-right></a></span></div></div></div></div></div></div></div><div class="row col-md-12"><div class=col-md-5><div class=form-group><label for=inputcontacttype class=control-label>Student Type</label><div class="input-icon right"><select id=inputcontacttype type=text name=contacttype ng-model=vm.thecontacttype ng-change=vm.setContactType(vm.thecontacttype);vmDual.requery() class=form-control><option>All</option><option ng-repeat="g in vm.StudentList.ContactTypeList" ng-selected="{{(g.listvalue === vm.thecontacttype) && \'selected\' || \'not\' }}" value={{g.listkey}}>{{g.listvalue}}</option></select></div></div></div><div class=col-md-3><div class=form-group><label for=inputRank class=control-label>Rank</label><div class="input-icon right"><select id=inputRank type=text name=Rank ng-model=vm.Rank ng-change=vm.setRank(vm.Rank);vmDual.requery() class=form-control><option>All</option><option ng-repeat="iter in vm.RankList.rankList" ng-selected="iter.ranklist === vm.Rank" value={{iter.ranklist}}>{{iter.ranklist}}</option></select></div></div></div><div class=col-md-2><div class=form-group><label for=inputStatus class=control-label>Status</label><div class="input-icon right"><select id=inputStatus type=text name=Status ng-model=vm.status ng-change=vm.setStatus(vm.status) class=form-control><option>All</option><option ng-repeat="g in vm.StudentList.ClassStatusList" ng-selected="{{(g.listvalue === vm.status) && \'selected\' || \'not\' }}" value={{g.listkey}}>{{g.listvalue}}</option></select></div></div></div><div class=col-md-2><div class=form-group><label for=inputlimit class=control-label>Limit</label><div class="input-icon right"><select id=inputlimit type=text name=limit ng-model=vm.limit ng-change=vm.setLimit(vm.limit);vmDual.requery() class=form-control><option>All</option><option ng-repeat="lim in vm.limits" ng-selected="{{(lim == vm.limit) && \'selected\' || \'not\' }}" value={{lim}}>{{lim}}</option></select></div></div></div></div><div class="row col-md-12" style="height: 70px;"><div class=col-md-4><button ng-click=vmDual.requery() class="btn btn-blue">Refresh List</button></div><div class=select-box><div class=col-md-4><ui-select ng-model=vm.studentpick theme=bootstrap reset-search-input=false ng-disabled=vm.disabled on-select=vm.editStudentFromPick($item) style="width: 300px;" title="Choose a student" append-to-body=true><ui-select-match placeholder="Filter the student...">{{$select.selected.FullName}}</ui-select-match><ui-select-choices repeat="stu in vm.refreshstudentlist.refreshstudentlist | filter: $select.search track by stu.ID" refresh=vm.refreshStudents($select.search) refresh-delay=0><div ng-bind-html="stu.FullName | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=col-md-4><a ng-href=./#/form-layouts-editstudent/id/{{vm.eventResult.item.ID}} ng-show=vm.eventResult.item.ID class="btn btn-blue">Edit {{vm.eventResult.item.FirstName}}</a></div></div><div class="row col-md-12"><div ui-grid=vmDual.gridOptions ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ng-style="{height: (30*10)+132+\'px\'}" class=mygrid></div></div></div></div></div></div></div></div></div>'),$templateCache.put("templates/states/table-basic-testcandidates.html",'<!DOCTYPE html><div ng-controller="TestCandidateTableBasicController as vm" ng-init="active[vm.getActiveTab()]= true"><div class="panel panel-orange"><div class=panel-heading>Test Candidates</div></div><uib-tabset type=pills><uib-tab id=tab-test heading="Select Candidates" active=active.TestCandidate select="vm.changeTab(\'tab-test\')"><div class="panel panel-green"><div class=panel-heading>Test Candidates Pick List</div><div class=panel-body><div class="col-md-12 text-left"><h3>Select Test date</h3></div><div class="row col-md-12" style="height: 70px;"><div class=col-md-7><div class=select-box><ui-select ng-model=vm.TestCandidateSelected theme=bootstrap reset-search-input=false on-select="vm.getTestDates($item);vm.setSlide(\'center\')" style="width: 300px;" title="Filter for a Test" append-to-body=false><ui-select-match placeholder="Pick a test...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="TestCandidate in vm.testcandidatenames | filter: $select.search track by $index" refresh=vm.gettestcandidateNames($select.search) refresh-delay=0><div id=candidatepicklist ng-bind-html="TestCandidate.name | highlight: $select.search"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn\'t find any choices...</ui-select-no-choice></ui-select></div></div><div class=col-md-5>Restrict Candidates?<toggle-switch on-label=Restrict off-label=No id=Restrict type=checkbox name=Restrict ng-model=vm.restricted class=switch-primary style="min-width: 200px;"></toggle-switch></div></div></div></div><div class=row><div class=col-md-12 ng-show=vm.testdateshow()><h3 class=block-heading>{{vm.testdatelist.testtype}} Test from: {{vm.testdatelist.starttime |amDateFormat:\'h:mm a\'}} to: {{vm.testdatelist.endtime |amDateFormat:\'h:mm a\'}}</h3></div></div><div class="panel panel-green" ng-show=vm.testdateshow()><div class=panel-heading>Test Candidates</div><div class=panel-body><div class="panel panel-blue" ng-show=vm.testdateshow()><div class=panel-heading>Test Candidate Mover</div><div class=panel-body><div class="row col-md-12 text-left"><h3>Select Candidates to move</h3><div class=btn-group><button ng-show="vm.gridrightcnt > 0" title="Drop from test" class="btn btn-blue" ng-click=vm.removeFromTest(vm.testdatelist.testingid) id=btnA>Drop {{vm.gridrightcnt}} from test<i class="glyphicon glyphicon-chevron-left"></i></button> <button ng-show="vm.gridleftcnt > 0" title="Add to test" class="btn btn-blue" ng-click=vm.addToTest(vm.testdatelist.testingid) id=btnB>Add {{vm.gridleftcnt}} to test<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div><div class=panel-footer></div></div><div class=row><div class=col-md-{{vm.gridleft}} ng-show=vm.showleft><div ui-grid=vm.gridOptions ng-style="{\'height\' : (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-edit ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid><div class=watermark ng-show=!vm.gridOptions.data.length>No data available</div></div></div></div></div></div><div class="panel panel-green" ng-show=vm.testdateshow()><div class=panel-heading>Candidates on test</div><div class=panel-body><div class="panel panel-blue" ng-show=vm.testdateshow()><div class=panel-heading>Test Candidates</div><div class=panel-body><div class="row col-md-12 text-left" ng-show=vm.testdateshow()><h3>Select Candidates to move</h3><div class=btn-group><button ng-show="vm.gridrightcnt > 0" title="Drop from test" class="btn btn-blue" ng-click=vm.removeFromTest(vm.testdatelist.testingid) id=btnA>Drop {{vm.gridrightcnt}} from test<i class="glyphicon glyphicon-chevron-left"></i></button> <button ng-show="vm.gridleftcnt > 0" title="Add to test" class="btn btn-blue" ng-click=vm.addToTest(vm.testdatelist.testingid) id=btnB>Add {{vm.gridleftcnt}} to test<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div><div class="col-md-12 text-left"><h3>Test Candidates Selected List</h3></div><div class="row col-md-{{vm.gridright}}" ng-show=vm.showright><div ui-grid=vm.resgridOptions ng-style="{\'height\' : (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-edit ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid><div class=watermark ng-show=!vm.resgridOptions.data.length>No data available</div></div></div></div><div class=panel-footer></div></div></uib-tab><uib-tab id=tab-testmanage heading="Manage Test" active=active.ManageTest select="vm.changeTab(\'tab-testmanage\')"><div class="panel panel-green"><div class=panel-heading>Test Attendees</div><div class=panel-body><div class=col-md-12><form action novalidate name=edittest class=form-horizontal><div class="form-body pal"><div class=col-lg-12><div class="panel panel-primary" ng-show=vm.testdateshow()><div class=panel-heading>Select the test candidates</div></div><div class="row col-md-12" style="height: 70px;"><div class=col-md-3><div class=select-box><ui-select ng-model=vm.TestCandidateSelected theme=bootstrap reset-search-input=false on-select=vm.getTestDates($item); style="width: 300px;" title="Filter for a Test" append-to-body=false><ui-select-match placeholder="Filter the TestCandidates...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="TestCandidate in vm.testcandidatenames | filter: $select.search track by $index" refresh=vm.gettestcandidateNames($select.search) refresh-delay=0><div id=testerpicklist ng-bind-html="TestCandidate.name | highlight: $select.search"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn\'t find any choices...</ui-select-no-choice></ui-select></div></div><div class=col-md-5 style="height: 70px;" ng-show=!!vm.selected><div class=col-md-7><div class=select-box><ui-select ng-model=vm.templatenameSelected theme=bootstrap reset-search-input=false on-select=vm.gettemplateDetails($item) style="width: 180px;" title="Choose a test doc" append-to-body=false><ui-select-match placeholder="Pick test document...">{{$select.selected.templatename}}</ui-select-match><ui-select-choices repeat="template in vm.templatelist | filter: $select.search track by $index" refresh=vm.getTemplateNames($select.search) refresh-delay=0><div ng-bind-html="template.templatename | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=col-md-5><button type=button class="btn btn-sm btn-green btn-wrap" ng-click=vm.genPDF()>Download {{vm.templatenameSelected.templatename}}</button></div></div><div class=col-md-4><div class=col-md-3 style="height: 70px;" ng-show=!!vm.selected><button type=button class="btn btn-sm btn-green btn-wrap" ng-click=vm.createTestChecklist()>Test Checklist</button></div><div class=col-md-3 style="height: 70px;" ng-show=!!vm.selected><button type=button class="btn btn-sm btn-green btn-wrap" ng-click=vm.createBeltLabels()>Belt Labels</button></div><div class=col-md-3 style="height: 70px;" ng-show=!!vm.selected><button type=button class="btn btn-sm btn-green btn-wrap" ng-click=vm.promotetestcandidate()>Promote Students</button></div><div class=col-md-3 style="height: 70px;" ng-show=!!vm.selected><button type=button class="btn btn-sm btn-green btn-wrap" ng-click=vm.createPromoPostcards()>Promo Postcard</button></div></div></div><div class><h3 class=block-heading ng-show=vm.testdateshow()>{{vm.testdatelist.testtype}} Test from: {{vm.testdatelist.starttime |amDateFormat:\'h:mm a\'}} to: {{vm.testdatelist.endtime |amDateFormat:\'h:mm a\'}}</h3><div class=row><div class=col-md-3><div ng-class="{\'has-error\': edittest.tester1.$invalid, \'has-success\': !edittest.tester1.$invalid}" class=form-group><label for=inputtester1 class=control-label>Tester</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=edittest.tester1.$dirty ng-class="edittest.tester1.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputtester1 type=text name=tester1 ng-model=vm.testdatelist.tester1 ng-change=vm.updateTest() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="instructor in vm.instructorlist" ng-selected="{{instructor.name==vm.testdatelist.tester1}}" placeholder=Select value={{instructor.name}}>{{instructor.name}}</option></select></div><div style=color:maroon role=alert ng-messages=edittest.tester1.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-3><div ng-class="{\'has-error\': edittest.tester2.$invalid, \'has-success\': !edittest.tester2.$invalid}" class=form-group><label for=inputtester2 class=control-label>Tester</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=edittest.tester2.$dirty ng-class="edittest.tester2.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputtester2 type=text name=tester2 ng-model=vm.testdatelist.tester2 ng-change=vm.updateTest() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="instructor in vm.instructorlist" ng-selected="{{instructor.name==vm.testdatelist.tester2}}" placeholder=Select value={{instructor.name}}>{{instructor.name}}</option></select></div><div style=color:maroon role=alert ng-messages=edittest.tester2.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-3><div ng-class="{\'has-error\': edittest.tester3.$invalid, \'has-success\': !edittest.tester3.$invalid}" class=form-group><label for=inputtester3 class=control-label>Tester</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=edittest.tester3.$dirty ng-class="edittest.tester3.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputtester3 type=text name=tester3 ng-model=vm.testdatelist.tester3 ng-change=vm.updateTest() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="instructor in vm.instructorlist" ng-selected="{{instructor.name==vm.testdatelist.tester3}}" placeholder=Select value={{instructor.name}}>{{instructor.name}}</option></select></div><div style=color:maroon role=alert ng-messages=edittest.tester3.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div><div class=col-md-3><div ng-class="{\'has-error\': edittest.tester4.$invalid, \'has-success\': !edittest.tester4.$invalid}" class=form-group><label for=inputtester4 class=control-label>Tester</label><div class="input-icon right"><i data-hover=tooltip data-original-title=Correct ng-show=edittest.tester4.$dirty ng-class="edittest.tester4.$invalid ? \'glyphicon-remove\' : \'glyphicon-ok\'" class="glyphicon tooltips"></i><select id=inputtester4 type=text name=tester4 ng-model=vm.testdatelist.tester4 ng-change=vm.updateTest() required ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 1500, \'blur\': 0 } }" class=form-control><option ng-repeat="instructor in vm.instructorlist" ng-selected="{{instructor.name==vm.testdatelist.tester4}}" placeholder=Select value={{instructor.name}}>{{instructor.name}}</option></select></div><div style=color:maroon role=alert ng-messages=edittest.tester4.$error class=has-error><div ng-message=required>You did not enter a field</div><div ng-message=minlength>Your field is too short</div><div ng-message=maxlength>Your field is too long</div><div ng-message=email>Your email is missing @ and/or a period</div></div></div></div></div></div></div><div class="row col-md-12"><div ui-grid=vm.resgridOptions id=grid1 ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-pinning ui-grid-edit ui-grid-selection ui-grid-move-columns ui-grid-exporter ui-grid-auto-fit-columns class=mygrid><div class=watermark ng-show=!vm.resgridOptions.data.length>No data available</div></div></div></div></form></div></div><div class=panel-footer></div></div></uib-tab></uib-tabset></div>'),$templateCache.put("templates/states/testRpt.html",'<div class=modal-content><div class=modal-header><b>Print or Export the Report</b></div><form name=form novalidate><div class=modal-body><div><h1>{{vmnew.rptgridOptionsnew.exporterPdfHeader.text}}</h1><h3>Test time: {{vmnew.testTime}}</h3></div><div class="row col-md-12"><div ui-grid=vmnew.rptgridOptionsnew id=grid1 ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid><div class=watermark ng-show=!vmnew.rptgridOptionsnew.data.length>No data available</div></div></div></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=vmnew.printAll() ng-disabled=form.$invalid>Print All</button> <button type=submit class="btn btn-primary" ng-click=vmnew.printSelected() ng-disabled=form.$invalid>Print Selected</button> <button type=button class="btn btn-green" ng-click=vmnew.cancel()>Close</button></div></form></div>'),$templateCache.put("templates/states/testRpt2Col.html",'<div class=modal-content><div class=modal-header><b>Print or Export the Report</b></div><form name=form novalidate><div class=modal-body><div><h1>{{vmnew.rptgridOptionsnew.exporterPdfHeader.text}}</h1><h3>Test time: {{vmnew.testTime}}</h3></div><div class="row col-md-6"><div ui-grid=vmnew.rptgridOptionsnew id=grid1 ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid><div class=watermark ng-show=!vmnew.rptgridOptionsnew.data.length>No data available</div></div></div><div class="row col-md-6"><div ui-grid=vmnew.rptgridOptionsnew id=grid1 ng-style="{height: (30*11)+140+\'px\'}" ui-grid-pagination ui-grid-cellnav ui-grid-auto-resize ui-grid-resize-columns ui-grid-selection ui-grid-move-columns ui-grid-exporter class=mygrid><div class=watermark ng-show=!vmnew.rptgridOptionsnew.data.length>No data available</div></div></div></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=vmnew.printAll() ng-disabled=form.$invalid>Print All</button> <button type=submit class="btn btn-primary" ng-click=vmnew.printSelected() ng-disabled=form.$invalid>Print Selected</button> <button type=button class="btn btn-green" ng-click=vmnew.cancel()>Close</button></div></form></div>'),$templateCache.put("templates/states/textblockimage.html",'<div class=modal-content><div class=modal-header><b>Insert Image</b></div><form name=form novalidate><div class=modal-body>Pick an image-file: <input type=file ng-model=vm.bodyimages accept=image/* multiple app-filereader><br><div ng-repeat="image in vm.bodyimages"><img sb-load=imgLoadedCallback($event) ng-style="{ \'height\' : vm.height , \'width\' : vm.width }" ng-src={{image}}><br></div><div class=form-group show-errors><label for=height>Height</label> <input type=number class=form-control ng-model=vm.height name=height required id=height><p class="help-block delete-red" ng-show=form.row.$error.number>Invalid number</p></div><div class=form-group show-errors><label for=width>Width</label> <input type=number class=form-control ng-model=vm.width name=width required id=width><p class="help-block delete-red" ng-show=form.row.$error.number>Invalid number</p></div></div></form><div ng-repeat="image in vm.imagelist"><img style=max-height:300px; ng-src={{image.data}}><br>Natural height: {{image.naturalHeight}} Natural width: {{image.naturalWidth}}<div ng-show="image.naturalHeight > 300">Natural &gt; Max: 300</div></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=tblInsert() ng-disabled=form.$invalid ng-show=!!vm.bodyimages>Insert</button> <button type=button class="btn btn-green" ng-click=tblCancel()>Cancel</button></div></div>'),$templateCache.put("templates/states/textblocktable.html",'<div class=modal-content><div class=modal-header><b>Insert number of table rows and columns</b></div><form name=form novalidate><div class=modal-body><div class=form-group show-errors><label for=numberOfRows>Number of Rows</label> <input type=number class=form-control ng-model=newtable.row placeholder="Row count" name=row required id=numberOfRows><p class="help-block delete-red" ng-show=form.row.$error.number>Invalid number of rows</p></div><div class=form-group show-errors><label for=NumberOfColumns>Number of Columns</label> <input type=number class=form-control ng-model=newtable.col placeholder="Column count" name=col required id=NumberOfColumns><p class="help-block delete-red" ng-show=form.col.$error.number>Invalid number of columns</p></div><div class=form-group><label class=control-label for=BorderStyle>Border Style</label><select class="form-control input-block-level" ng-model=newtable.style ng-options="tablestyle.value as tablestyle.name for tablestyle in tablestyles" id=BorderStyle><option value>No border</option></select></div><div class=form-group><label class=control-label for=Sample>Sample Text option</label><select class="form-control input-block-level" ng-model=newtable.style ng-options="samplestyle.value as samplestyle.name for samplestyle in samplestyles" id=SampleStyle><option value>No sample</option></select></div><div class=form-group><label for=tblMarginL>Margin Left</label> <input id=tblMarginL type=number name=tblMarginL ng-model=newtable.tblMarginL required class=form-control><p class="help-block delete-red" ng-show=form.tblMarginL.$error.number>Invalid number</p></div><div class=form-group><label for=tblMarginT>Top</label> <input id=tblMarginT type=number name=tblMarginT ng-model=newtable.tblMarginT required class=form-control><p class="help-block delete-red" ng-show=form.tblMarginT.$error.number>Invalid number</p></div><div class=form-group><label for=tblMarginR>Right</label> <input id=tblMarginR type=number name=tblMarginR ng-model=newtable.tblMarginR required class=form-control><p class="help-block delete-red" ng-show=form.tblMarginR.$error.number>Invalid number</p></div><div class=form-group><label for=tblMarginB>Bottom</label> <input id=tblMarginB type=number name=tblMarginB ng-model=newtable.tblMarginB required class=form-control><p class="help-block delete-red" ng-show=form.tblMarginB.$error.number>Invalid number</p></div></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=tblInsert() ng-disabled=form.$invalid>Insert</button> <button type=button class="btn btn-green" ng-click=tblCancel()>Cancel</button></div></form></div>'),
$templateCache.put("templates/states/user-settings.html",'<div class=modal-content><form name=form.read novalidate><div class=modal-header><h1>User Settings Form</h1></div><div class=modal-body><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Settings</h2></div><div class=panel-body><div class=col-lg-12><form novalidate class=simple-form><div class=form-group><div class="row col-md-12"><label for=inputokNotify class="col-md-3 control-label">Notify Me?</label><div class=col-md-9><select id=inputokNotify type=text name=okNotify ng-model=vm.okNotify ng-change=vm.setUserOptions() required placeholder=select ng-options="o for o in vm.okoptions track by o" class=form-control></select></div></div><div class="row col-md-12"><label for=mydelay class="col-md-3 control-label">Delay</label><div class=col-md-9><input id=mydelay type=number ng-model=vm.mydelay ng-change=vm.setUserOptions() class=form-control></div></div><div class="row col-md-12"><label for=mydelay class="col-md-3 control-label">Idle</label><div class=col-md-9><input id=myidle type=number ng-model=idle ng-change=vm.setUserOptions() class=form-control></div></div></div><div class="row col-md-12"><label for=mydelay class="col-md-3 control-label">Timeout</label><div class=col-md-9><input id=mytimeout type=number ng-model=timeout ng-change=vm.setUserOptions() class=form-control></div></div></form></div></div></div></div></div></form></div><div class=modal-footer><button type=button class="btn btn-green" ng-click=vm.cancel()>Close</button></div>'),$templateCache.put("templates/states/_includes/header-breadcrumb.html","<div class=page-heading><h1 class=page-title>{{vm.data.title}}</h1><h4 class=page-subtitle>Dojo Central - {{vm.userdta.school}}</h4></div><div class=clearfix></div>"),$templateCache.put("templates/states/_includes/sidebar.html",'<nav id=sidebar role=navigation class="navbar-default navbar-static-side"><div class="sidebar-collapse menu-scroll"><ul id=side-menu ng-menu class=nav><li class=sidebar-heading><h4>Main</h4></li><li><a href=#/main><i class=icon-speedometer></i><span class=menu-title>Student Dashboard</span></a></li><li ng-hide=vm.isokf()><a href=javascript:void(0);><i class=icon-screen-desktop></i><span class=menu-title>Login</span><span class="fa arrow"></span></a><ul class="nav nav-second-level"><li ng-hide=vm.isokf()><a href=#/page-signin>Login</a></li><li ng-hide=vm.isokf()><a href=#/page-signup>Create User</a></li></ul></li><li ng-show=vm.isokf()><a href=javascript:void(0);><i class=icon-screen-desktop></i><span class=menu-title>Students</span><span class="fa arrow"></span></a><ul class="nav nav-second-level"><li><a href=#/table-basic-students>Student List</a></li><li><a href=#/table-basic-attendance>Attendance List</a></li><li><a href=#/table-basic-eventcreation>Create Events</a></li></ul></li><li ng-show=vm.isokf()><a href=javascript:void(0);><i class=icon-screen-desktop></i><span class=menu-title>Testing</span><span class="fa arrow"></span></a><ul class="nav nav-second-level"><li><a href=#/table-basic-testcandidates>Create Test</a></li></ul></li><li ng-show=vm.isokf()><a href=javascript:void(0);><i class=icon-screen-desktop></i><span class=menu-title>Manage Studio</span><span class="fa arrow"></span></a><ul class="nav nav-second-level"><li><a href=#/table-basic-paymenttracking>Payment Tracking</a></li><li ng-show=vm.isokf()><a href=javascript:void(0);><i class=icon-screen-desktop></i><span class=menu-title>Setup Data</span><span class="fa arrow"></span></a><ul class="nav nav-third-level"><li><a href=#/table-basic-basic>Basic Info</a></li><li><a href=#/stripe-onboard>Stripe Onboard</a></li><li><a href=#/table-basic-rank>Ranks</a></li><li><a href=#/table-basic-program>Program</a></li><li><a href=#/table-basic-class>Class</a></li><li><a href=#/table-basic-classpgm>Class Program</a></li><li><a href=#/table-basic-classrank>Class Rank</a></li><li><a href=#/table-basic-schedule>Class Schedule</a></li><li><a href=#/table-basic-testtype>Test Type</a></li><li><a href=#/table-basic-classtest>Class Test</a></li><li><a href=#/table-basic-rptbuilder>Report Builder</a></li><li><a href=#/table-basic-htmltemplate>Email Templates</a></li></ul></li><li role=separator class=divider>&nbsp;</li></ul></li></ul></div></nav>'),$templateCache.put("templates/states/_includes/template-setting.html",'<div id=template-setting><a href=javascript:void(0); data-toggle=dropdown class=btn-template-setting><i class="icon-settings icon-spin"></i></a><div class=content-template-setting><span>Layout</span><select id=layout-setting class=form-control><option value=0>Fluid</option><option value=1>Boxed</option></select><div class=line></div><span>Header</span><select id=header-setting class=form-control><option value=0>Default</option><option value=1 selected>Fixed</option></select><div class=line></div><span>Sidebar</span><select id=sidebar-setting class=form-control><option value=0>Default</option><option value=1 selected>Fixed</option></select><div class=line></div><span>Theme Colors</span><ul class="color-theme list-unstyled list-inline"><li data-style=default data-hover=tooltip title=Dark class=dark-primary></li><li data-style=white data-hover=tooltip title=White class=white-primary></li><li data-style=red data-hover=tooltip title="Red - Green" class=red-green></li><li data-style=orange data-hover=tooltip title="Orange - Yellow" class=orange-yellow></li><li data-style=green data-hover=tooltip title="Green - Pink" class=green-pink></li><li data-style=blue data-hover=tooltip title="Blue - Yellow" class=blue-yellow></li><li data-style=violet data-hover=tooltip title="Violet - Green" class=violet-green></li><li data-style=grey data-hover=tooltip title="Grey - Red" class=grey-red></li></ul></div></div>'),$templateCache.put("templates/states/_includes/topbar.html",'<!DOCTYPE html><head><meta name=viewport content="width=device-width, initial-scale=1"><style type=text/css>\n      /*Dropdown Css*/\n\n      .dropdown:hover>.dropdown-menu {\n         display: block;\n      }\n\n      .dropdown-submenu {\n         position: relative;\n      }\n\n      .dropdown-submenu>.dropdown-menu {\n         top: 0;\n         left: 100%;\n         margin-top: -6px;\n         margin-left: 1px;\n         -webkit-border-radius: 0 6px 6px 6px;\n         -moz-border-radius: 0 6px 6px;\n         border-radius: 0 6px 6px 6px;\n      }\n\n      .dropdown-submenu:hover>.dropdown-menu {\n         display: block;\n      }\n\n      .dropdown-submenu>a:after {\n         display: block;\n         content: " ";\n         float: right;\n         width: 0;\n         height: 0;\n         border-color: transparent;\n         border-style: solid;\n         border-width: 5px 0 5px 5px;\n         border-left-color: #ccc;\n         margin-top: 5px;\n         margin-right: -10px;\n      }\n\n      .dropdown-submenu:hover>a:after {\n         border-left-color: #fff;\n      }\n\n      .dropdown-submenu.pull-left {\n         float: none;\n      }\n\n      .dropdown-submenu.pull-left>.dropdown-menu {\n         left: -100%;\n         margin-left: 10px;\n         -webkit-border-radius: 6px 0 6px 6px;\n         -moz-border-radius: 6px 0 6px 6px;\n         border-radius: 6px 0 6px 6px;\n      }\n\n      /*./Dropdown Css*/\n   </style></head><div ng-class=[vm.header.layout_topbar] class=navbar-header><a id=setting-toggle><i class=icon-wrench></i></a> <button type=button data-toggle=offcanvas class=navbar-toggle><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a id=logo href=#/main class=navbar-brand><span class=icon-social-tumblr></span> <span class=logo-text>V Dojo</span></a></div><div id=top-menu class=topbar-main title><ul class=navbar-top-links style="margin-left: 130px; margin-bottom: 0px;"><li class="navbar-top-links navbar-left"><ul class="nav mtm"><li class="mlxl dropdown" ng-show=vm.isokf()><a data-hover=dropdown href=javascript:void(0); class=dropdown-toggle data-toggle=dropdown><i class="far fa-comments"></i> <span class="visible-xs-inline mlm">Msgs&nbsp;<span class=caret></span></span> <span class="badge badge-yellow">{{vm.alertcount}}</span></a><ul class="dropdown-menu dropdown-alerts"><li class=dropdown-submenu><a class=test ng-hide=!vm.newstudents.length tabindex=-1 href=javascript:void(0);><span class="label label-green"><i class="far fa-handshake fa-fw"></i></span> <span class=menu-title>{{vm.newstudents.length}} New Students Last 2 weeks</span> <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat="stu in vm.newstudents"><a tabindex=-1 href=#/form-layouts-editstudent/id/{{stu.contactid}}><span class="label label-green"><i class="fas fa-user fa-fw"></i></span> <span class>{{stu.firstname}} {{stu.lastname}}</span></a></li><li><a tabindex=-1 ng-click=vm.clearNewStudents()><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=menu-title>Clear Alerts</span></a></li></ul></li><li class=dropdown-submenu><a class=test ng-hide=!vm.teststudents.length tabindex=-1 href=javascript:void(0);><span class="label label-violet"><i class="fas fa-flag-checkered fa-fw"></i></span> <span class=menu-title>{{vm.teststudents.length}} Students ready to test</span> <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat="stu in vm.teststudents"><a tabindex=-1 href=#/table-basic-testcandidate><span class="label label-green"><i class="fas fa-user fa-fw"></i></span> <span class>{{stu.firstname}} {{stu.lastname}}</span></a></li><li><a tabindex=-1 ng-click=vm.clearTestStudents()><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=menu-title>Clear Alerts</span></a></li></ul></li><li class=dropdown-submenu><a class=test ng-hide=!vm.overduestudents.overdue.length tabindex=-1 href=javascript:void(0);><span class="label label-red"><i class="fas fa-fire fa-fw"></i></span><span class=menu-title>{{vm.overduestudents.overdue.length}} Overdue Payments</span> <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat="stu in vm.overduestudents.overdue"><a tabindex=-1 href=#/form-layouts-editstudent/id/{{stu.contactid}}><span class="label label-red"><i class="fas fa-user fa-fw"></i></span> <span class>{{stu.firstname}} {{stu.lastname}}</span></a></li><li><a tabindex=-1 ng-click=vm.clearOverdueStudents()><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=menu-title>Clear Alert</span></a></li></ul></li><li class=dropdown-submenu><a class=test ng-hide=!vm.noshowstudents.noshow.length tabindex=-1 href=javascript:void(0);><span class="label label-blue"><i class="fas fa-coffee fa-fw"></i></span><span class=menu-title>{{vm.noshowstudents.noshow.length}} No show Students +2wk</span> <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat="stu in vm.noshowstudents.noshow"><a tabindex=-1 href=#/form-layouts-editstudent/id/{{stu.contactid}}><span class="label label-blue"><i class="fas fa-user fa-fw"></i></span> <span class>{{stu.firstname}} {{stu.lastname}}</span></a></li><li><a tabindex=-1 ng-click=vm.clearNoshowStudents()><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=menu-title>Clear Alert</span></a></li></ul></li><li class=dropdown-submenu><a class=test ng-hide=!vm.thisTasknamelist.length tabindex=-1 href=javascript:void(0);><span class="label label-orange"><i class="fas fa-tasks fa-fw"></i></span><span class=menu-title>{{vm.thisTasknamelist.length}} Tasks outstanding</span> <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat="task in vm.thisTasknamelist"><a tabindex=-1 href=javascript:void(0);><span class="label label-orange"><i class="fas fa-pencil-alt fa-fw"></i></span> <span class>{{task.taskname}}</span></a></li><li><a tabindex=-1 href=javascript:void(0);><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=menu-title>Clear Alert</span></a></li></ul></li><li><a tabindex=-1 href=javascript:void(0);><span class="label label-grey"><i class="fas fa-eraser fa-fw"></i></span> <span class=text-right>Clear All Alerts</span></a> <span class="pull-right text-muted small">Last upd. 12min ago</span></li></ul></li><li class="mrl dropdown" ng-show=vm.isokf()><a data-hover=dropdown href=javascript:void(0); class=dropdown-toggle data-toggle=dropdown><i ng-class="vm.emailcount > 0 ? \' icon-envelope-open\' : \' icon-envelope \'"></i> <span class="visible-xs-inline mlm">Msgs&nbsp;<span class=caret></span></span> <span class="badge badge-yellow">{{vm.emailcount}}</span></a><ul class="dropdown-menu pull-left" uib-dropdown-menu aria-labelledby=simple-dropdown><li><div class=navbar-content><div class=row><div class="mll mtm col-md-12 col-xs-12"><a ng-click=vm.openEmail() class="btn btn-sm btn-green">Open Email</a></div></div><div class=row><div class="mll mtm col-md-12 col-xs-12"><a ng-click=vm.newEmail() class="btn btn-sm btn-green">New Email</a></div></div><div class=navbar-footer><div class=navbar-footer-content><div class=row><div class="mbm mtm col-md-offset-5 col-xs-offset-5"><a href=javascript:void(0); class="btn btn-green btn-sm">Close</a></div></div></div></div></div></li></ul></li><li class="mrl dropdown" ng-show=vm.isokf()><div class="panel panel-warning" style="margin-top: -18px;"><div class=panel-heading ng-show=vm.showTimeout()>Timeout!</div><div class=pandel-body idle-countdown=countdown ng-show=vm.showTimeout()>You have {{minutes}} minutes and {{seconds}} seconds until your session expires!</div></div></li></ul></li><li class="navbar-top-links navbar-right mrxxl"><ul class="nav mtm"><li class=dropdown uib-dropdown auto-close=disabled on-toggle=toggled(open) ng-show=vm.isokf()><a data-hover=dropdown href=javascript:void(0); class=dropdown-toggle id=simple-dropdown><span class="img-responsive img-circle" ng-switch on=vm.userdta.pictureurl><img ng-switch-when=missing ng-src=../images/students/missingstudentpicture.png> <img ng-switch-default ng-src={{vm.userdta.pictureurl}}></span> <span>&nbsp;{{vm.userdta.username}}&nbsp;</span><span class=caret></span></a><ul class="dropdown-menu dropdown-user pull-right" aria-labelledby=simple-dropdown><li><div class=navbar-content><div class=row><div class="col-md-7 col-xs-5"><span>{{vm.userdta.firstname}} {{vm.userdta.lastname}}</span><p class="text-muted small">{{vm.userdta.email}}</p></div></div></div></li><li><div class=row><div class="mtm mlm mbm col-md-12 col-xs-12"><a ng-click=vm.openSettings() class="btn btn-sm btn-green">Edit Settings</a></div></div></li><li><div class=navbar-footer><div class=navbar-footer-content><div class=row><div class="col-md-6 col-xs-6"><a href=#/change-pwd class="btn btn-green btn-sm">Change Password</a></div><div class="col-md-6 col-xs-6"><a href=#/page-lock-screen class="btn btn-green btn-sm pull-right">Sign Out</a></div></div></div></div></li></ul></li></ul></li></ul></div>'),$templateCache.put("templates/states/photos/photo.html",'<!DOCTYPE html><html lang=en><head></head><body><div class=modal-content><form name=form.read novalidate><div class=modal-header><h1>Photo Form</h1></div><div class=modal-body><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h2 class=panel-title>Photo</h2></div><div class=panel-body><div class=col-lg-12><span class=thumbnail ng-switch on=vmpicmodal.dataToPass.pictureurldecache><img ng-switch-when=missing ng-src=../images/students/missingstudentpicture.png> <img ng-switch-default ng-src=../images/students/{{vmpicmodal.dataToPass.pictureurldecache}}></span><div class="row row-icons"><div>{{vmpicmodal.dataToPass.picfile}}<div class=row><div id=photowrapper><span><div><div id=my_photo_booth><div id=my_camera style=width:320px; ng-style="(vmpicmodal.checkCameraIsOn() === true ) && {\'height\':\'240px\'} || (vmpicmodal.checkCameraIsOn() === false ) && {\'height\':\'0px\'}"></div><form><div id=pre_take_buttons><input type=button value="Take Snapshot" ng-click=vmpicmodal.preview_snapshot()> <input type=button value="Camera On" ng-click=vmpicmodal.camera_on()></div><div id=post_take_buttons ng-show=vmpicmodal.post_take_buttons><input type=button value="&lt; Take Another" ng-click=vmpicmodal.cancel_preview()> <input type=button value="Save Photo &gt;" ng-click="vmpicmodal.save_photo( vmpicmodal.dataToPass.LastName + \'.\' + vmpicmodal.dataToPass.FirstName + \'.\' + vmpicmodal.dataToPass.ID + \'.jpg\',vmpicmodal.dataToPass )" style=font-weight:bold;> <input type=button value="Camera Off" ng-click=vmpicmodal.camera_off()></div></form></div><div id=results style=display:none></div></div></span></div></div><script id=myPickupload.html type=text/ng-template><div class="modal-header"> <h3 class="modal-title">Select Student Picture</h3> </div> <div class="modal-body"> <div class="row" ng-controller="StudentUploadController as vmstupicupload" nv-file-drop="" uploader="vmstupicupload.uploader"> <div class="col-lg-12"> <div> <div class="col-md-3"> <input type="file" nv-file-select="" uploader="vmstupicupload.uploader" single /> <br/> </div> <div class="col-md-9" style="margin-bottom: 40px"> <!-- <pre>{{vmpicselect | json}}</pre> --> <table class="table"> <thead> <tr> <th width="20%">Name</th> <th ng-show="vmstupicupload.uploader.isHTML5">Size</th> <th ng-show="vmstupicupload.uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in vmstupicupload.uploader.queue"> <td> <strong>{{ item.file.name }}</strong> <!-- Image preview --> <!--auto height--> <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--> <!--auto width--> <div ng-show="vmstupicupload.uploader.isHTML5" ng-thumbupload="{ file: item._file, height: 100 }"></div> <!--fixed width and height --> <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--> </td> <td ng-show="vmstupicupload.uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="vmstupicupload.uploader.isHTML5"> <div class="progress" style="margin-bottom: 0;"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"> <span class="glyphicon glyphicon-trash"></span> Remove </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="vmpicselect.ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="vmpicselect.cancel()">Cancel</button> </div></script><script id=myPicksearch.html type=text/ng-template><div class="modal-header"> <h3 class="modal-title">Select Student Picture</h3> </div> {{vmpicsearch.dataToPass.picfile}} <div class="modal-body"> <div ui-grid="vmpicsearch.gridOptions" ui-grid-pagination ui-grid-cellNav ui-grid-selection ui-grid-auto-resize class="mygrid" ng-style="{height: (3*128)+132+\'px\'}"></div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="vmpicsearch.ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="vmpicsearch.cancel()">Cancel</button> </div></script><div class=col-md-8><input class=form-control id=picfile name=picfile ng-show=false ng-model=vmpicmodal.dataToPass.picfile placeholder="File Name" type=text> <button class="btn btn-green" ng-click=vmpicmodal.saveStudentPic(vmpicmodal.dataToPass,vmpicmodal.dataToPass.picfile); ng-show=vmpicmodal.dataToPass.picfile type=button>Save Picture</button><div class=thumbnail ng-show=vmpicmodal.dataToPass.picfile><img ng-src=./images/students/{{vmpicmodal.dataToPass.oldpicfile}}.bkup></div></div><div class=col-md-4><a href ng-click=vmpicmodal.openpick()><i class="glyphicon glyphicon-upload"></i></a><a href ng-click=vmpicmodal.opensearch()><i class="glyphicon glyphicon-search"></i></a> <a href ng-click=vmpicmodal.openCamera()><i class="glyphicon glyphicon-camera"></i></a></div></div></div></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-blue" ng-click=vmpicmodal.cancel()>Close</button></div></form></div></body></html>'),$templateCache.put("templates/states/stripe_onboard.php",'<!DOCTYPE html><div ng-controller="StripeTableBasicController as vm"><div class="portlet box portlet-green"><div class=portlet-header><div class=caption>Onboard with Stripe for Payments</div><div class=tools><i class="fa fa-chevron-up"></i></div></div><div class="portlet-body pbn ptl" style="display: block; background-color: grey;"><div class="panel panel-blue"><div class=panel-heading>Stripe Registration</div><div class="panel-body pan"><p>VDojo uses Stripe to get you paid quickly and keep your personal and payment information secure. Thousands of companies around the world trust Stripe to process payments for their users. Set up a Stripe account to get paid with VDojo.</p><p ng-show="vm.stripedata.length > 0">User {{vm.stripedata[0].user_id}} has registered a stripe account for {{vm.stripedata[0].school}} using {{vm.stripedata[0].user_email}}</p><p ng-show="vm.stripedata.length == 0"><a href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id={{vm.client_id}}&amp;scope=read_write&amp;state={{vm.send_state}}" class=stripe-connect><span>Connect with Stripe</span></a></p><p ng-hide="vm.stripedata.length == 0"><a ng-click=vm.removeStripe() class=stripe-connect><span>Revoke Stripe</span></a></p></div><div class=panel-footer></div></div></div></div></div>'),$templateCache.put("templates/states/table-basic-basic.php","<!DOCTYPE html><div ng-controller=\"BasicTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Basic</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Basic</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 88px;\"><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-3><?php require_once('table-basic.php');\n                                                    print selectColTemplate(\n                                                        array(\n                                                            'field'=>'listtype', 'model'=>'vm.Basic.listtype', 'label'=>'List<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.listTypes', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                                    print strColTemplate(\n                                                        array(\n                                                            'field'=>'listkey', 'model'=>'vm.Basic.listkey', 'label'=>'Key<br>&nbsp;', 'placeholder'=>'Enter Key', 'required'=>true ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                                    print strColTemplate(\n                                                        array(\n                                                            'field'=>'listvalue', 'model'=>'vm.Basic.listvalue', 'label'=>'Value<br>&nbsp;', 'placeholder'=>0, 'required'=>true ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                                    print strColTemplate(\n                                                        array(\n                                                            'field'=>'listorder', 'model'=>'vm.Basic.listorder', 'label'=>'Order<br>&nbsp;', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                                    print btnColTemplate(\n                                                        array(\n                                                            'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addBasic(vm.Basic)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-class.php","<!DOCTYPE html><div ng-controller=\"ClassTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Class</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Class</div><div class=\"control-label attendance\">Filter by Registration Type</div><div class=col-md-6><?php require_once('table-basic.php');\n                        print selectColTemplate(\n                            array(\n                                'field'=>'registrationType', 'model'=>'vm.Class.registrationType', 'label'=>'Registration<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editClass2', 'changefunction'=>'vm.changeRanktype()', 'repeatmodel'=>'vm.rankTypes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 88px;\"><form action novalidate name=editClass2 class=form-horizontal><div class=col-md-2><div class=col-md-12><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'class', 'model'=>'vm.Class.class', 'label'=>'Class<br>&nbsp;', 'placeholder'=>'Enter Name', 'required'=>true ) ); ?></div></div><div class=col-md-6><div class=col-md-3><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'nextclass', 'model'=>'vm.Class.nextclass', 'label'=>'Next<br>Class', 'placeholder'=>'Enter', 'required'=>false ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'ageForNextClass', 'model'=>'vm.Class.ageForNextClass', 'label'=>'Age for<br>Next Class', 'placeholder'=>0, 'required'=>false, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'ranklistForNextClass', 'model'=>'vm.Class.ranklistForNextClass', 'label'=>'Type of<br>Next Class', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClass2', 'changefunction'=>'vm.changeRanklisttype()', 'repeatmodel'=>'vm.rankTypes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'rankForNextClass', 'model'=>'vm.Class.rankForNextClass', 'label'=>'Rank For<br>Next Class', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClass2', 'repeatmodel'=>'vm.ranks', 'repeatvalue'=>'label', 'repeatid'=>'value' ) ); ?></div></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'sort', 'model'=>'vm.Class.sort', 'label'=>'Sort<br>Order', 'placeholder'=>'', 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'pictureurl', 'model'=>'vm.Class.pictureurl', 'label'=>'Class<br>Picture', 'placeholder'=>'', 'required'=>true ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addClass(vm.Class)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-classpgm.php","<!DOCTYPE html><div ng-controller=\"ClassPgmTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Class Program</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Class Program</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 88px;\"><form action novalidate name=editClassPgm2 class=form-horizontal><div class=col-md-1><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'classid', 'model'=>'vm.ClassPgm.classid', 'label'=>'Class<br>&nbsp;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.classes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'pgmid', 'model'=>'vm.ClassPgm.pgmid', 'label'=>'Program<br>&nbsp;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.programs', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'nextClassid', 'model'=>'vm.ClassPgm.nextClassid', 'label'=>'Next<br>Class;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.classes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'nextPgmid', 'model'=>'vm.ClassPgm.nextPgmid', 'label'=>'Next<br>Program;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.programs', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'pgmcat', 'model'=>'vm.ClassPgm.pgmcat', 'label'=>'Program<br>Category', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.pgmcats', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'classcat', 'model'=>'vm.ClassPgm.classcat', 'label'=>'Class<br>Category', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.classcats', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'agecat', 'model'=>'vm.ClassPgm.agecat', 'label'=>'Age<br>Category', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassPgm2', 'repeatmodel'=>'vm.agecats', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addClassPgm(vm.ClassPgm)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div></div>"),
$templateCache.put("templates/states/table-basic-classrank.php","<!DOCTYPE html><div ng-controller=\"ClassRankTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Class Rank</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Class Rank</div><div class=\"control-label attendance\">Select Ranks by Rank Type</div><div class=col-md-6><?php require_once('table-basic.php');\n                        print selectColTemplate(\n                            array(\n                                'field'=>'rankType', 'model'=>'vm.ClassRank.rankType', 'label'=>'Rank<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editClassRank2', 'changefunction'=>'vm.changeRanktype()', 'repeatmodel'=>'vm.rankTypes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 88px;\"><form action novalidate name=editClassRank2 class=form-horizontal><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'classid', 'model'=>'vm.ClassRank.classid', 'label'=>'Class<br>&nbsp;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassRank2', 'repeatmodel'=>'vm.classes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'rankid', 'model'=>'vm.ClassRank.rankid', 'label'=>'Rank<br>&nbsp;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClassRank2', 'repeatmodel'=>'vm.Ranks', 'repeatvalue'=>'label', 'repeatid'=>'id' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addClassRank(vm.ClassRank)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-classtest.php","<!DOCTYPE html><div ng-controller=\"ClassTestTableBasicController as vm\">{{vm.dataLoading}} <img ng-if=vm.dataLoading ng-src=/images/Spinner.gif> <img id=spinner ng-src=/images/Spinner.gif style=display:none;><div class=\"portlet box portlet-green\" ng-hide=vm.dataLoading><div class=portlet-header><div class=caption>Maintain Class Test</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Class Test</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'classid', 'model'=>'vm.Classtest.classid', 'label'=>'Class<br>&nbsp;', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClasstest2', 'repeatmodel'=>'vm.classes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'testtypeid', 'model'=>'vm.Classtest.testtypeid', 'label'=>'Test<br>Type', 'placeholder'=>'Select', 'required'=>false, 'form'=>'editClasstest2', 'repeatmodel'=>'vm.testTypes', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'sortorder', 'model'=>'vm.Classtest.sortorder', 'label'=>'Sort<br>Order', 'placeholder'=>'', 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addClassTest(vm.Classtest)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-htmltemplate.php","<!DOCTYPE html><div ng-controller=\"TemplateTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Template</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Template</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-1><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'title', 'model'=>'vm.Template.title', 'label'=>'Title<br>&nbsp;', 'placeholder'=>'Enter Title', 'required'=>true ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'description', 'model'=>'vm.Template.description', 'label'=>'Description<br>&nbsp;', 'placeholder'=>'Enter Description', 'required'=>false ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'url', 'model'=>'vm.Template.url', 'label'=>'Url<br>&nbsp;', 'placeholder'=>'Enter Url', 'required'=>false ) ); ?></div><div class=col-md-7><?php require_once('table-basic.php');\n                                        print textareaColTemplate(\n                                            array(\n                                                'field'=>'content', 'change'=>'vm.messageChange(vm.Template)', 'model'=>'vm.Template.content', 'label'=>'Content<br>&nbsp;', 'placeholder'=>'Enter Content', 'tinymce'=>true, 'required'=>false ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addTemplate(vm.Template)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-paymenttracking.php","<!DOCTYPE html><div id=table-basic-paymenttracking class=row ng-controller=\"PaymentTrackingController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=row><div class=caption>Payment Tracking</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div></div><div class=portlet-body style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Invoicing</div><div class=\"control-label pam h4\">Payer/Student Selection</div><form action novalidate name=edit class=form-horizontal><div class=form-body><div class=\"col-md-3 mlm\" style=\"height: 80px;\"><div ng-class=\"{'has-error': editclass.payerName.$invalid, 'has-success': !editclass.payerName.$invalid}\" class=form-group><label for=payerName class=control-label>Payer Name</label><div class><i data-hover=tooltip data-original-title=Correct ng-show=editclass.payerName.$dirty ng-class=\"editclass.payerName.$invalid ? 'glyphicon-remove' : 'glyphicon-ok'\" class=\"glyphicon tooltips\"></i><div class=select-box><ui-select ng-model=vm.payerName theme=bootstrap reset-search-input=false style=\"width: 300px;\" on-select=\"vm.getPayerStudent($item,'payer')\" title=\"Pick Payer\" append-to-body=true><ui-select-match placeholder=Choose...>{{$select.selected.payerName}}</ui-select-match><ui-select-choices repeat=\"item in vm.payers | filter: $select.search track by $index\" refresh=vm.getPayersPartial($select.search) refresh-delay=0><div id=payerpicklist ng-bind-html=\"item.payerName | highlight: $select.search\"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn't find any choices...</ui-select-no-choice></ui-select></div></div><div style=color:maroon role=alert ng-messages=editclass.payerName.$error class=has-error><div ng-message=required>You did not enter a field</div></div></div></div><div class=col-md-3 style=\"height: 80px;\"><div ng-class=\"{'has-error': editclass.studentpick.$invalid, 'has-success': !editclass.studentpick.$invalid}\" class=form-group><label for=studentpick class=control-label>Student Name</label><div class><i data-hover=tooltip data-original-title=Correct ng-show=editclass.studentpick.$dirty ng-class=\"editclass.studentpick.$invalid ? 'glyphicon-remove' : 'glyphicon-ok'\" class=\"glyphicon tooltips\"></i><div class=select-box><ui-select ng-model=vm.studentpick theme=bootstrap reset-search-input=false style=\"width: 300px;\" on-select=\"vm.getPayerStudent($item,'student')\" title=\"Choose a student\" append-to-body=false><ui-select-match placeholder=\"Or Choose...\">{{$select.selected.FullName}}</ui-select-match><ui-select-choices repeat=\"stu in vm.refreshstudentlist.refreshstudentlist | filter: $select.search track by stu.ID\" refresh=vm.refreshStudents($select.search) refresh-delay=0><div ng-bind-html=\"stu.FullName | highlight: $select.search\"></div></ui-select-choices><ui-select-no-choice>Dang! We couldn't find any choices...</ui-select-no-choice></ui-select></div></div><div style=color:maroon role=alert ng-messages=editclass.studentpick.$error class=has-error><div ng-message=required>You did not enter a field</div></div></div></div></div></form><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-6\"><button type=button class=\"btn btn-blue mtxl\" ng-click=\"vm.isCollapsed = !vm.isCollapsed;\">{{vm.isCollapsed ? 'New Invoice' : 'Close New Invoice'}}</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 110px;\"><div class=row><div class=col-md-2><button type=button class=\"btn btn-blue\" ng-click=vm.calcInvoice()>Calc Invoice</button></div><div class=col-md-2>Plan: {{vm.Invoice.paymentplan}}</div><div class=col-md-2>Type: {{vm.Invoice.paymenttype}}</div><div class=col-md-2>Last: {{vm.Invoice.lastpaymentdate | date:'yyyy-MM-dd'}}</div><div class=col-md-2>Overdue: {{vm.Invoice.overduecnt}}</div><div class=col-md-2>Pay On: {{vm.Invoice.payondayofmonth}}</div></div><form action novalidate name=editschedule2 class=form-action><div class=col-md-3><?php require_once('table-basic.php');\n                                                    print strColTemplate(\n                                                        array(\n                                                            'field'=>'payfor', 'model'=>'vm.Invoice.payfor', 'label'=>'Description<br>&nbsp;', 'placeholder'=>'Enter Description', 'required'=>true ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n                                                    print dateColTemplate(\n                                                        array(\n                                                            'field'=>'invoiceDate', 'model'=>'vm.Invoice.invdate', 'label'=>'Date<br>&nbsp;', 'placeholder'=>'Enter Date', 'required'=>true, 'isopen'=>'vm.status.opened', 'dateFormat'=>'MM/dd/yyyy', 'dopen'=>'vm.dateopen($event)' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                                    print numtypeColTemplate(\n                                                        array(\n                                                            'field'=>'invoiceAmt', 'model'=>'vm.Invoice.amt', 'label'=>'Amount<br>&nbsp;', 'formatter'=>'\"vm.formatter($modelValue,$filter,\\'$0.00\\');\"', 'modelformat'=>'currency', 'required'=>true ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                                  print selectColTemplate(\n                                                      array(\n                                                          'field'=>'status', 'model'=>'vm.Invoice.status', 'label'=>'Status<br>&nbsp;', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.invStatuses', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div><div class=col-md-2 style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                                    print btnColTemplate(\n                                                        array(\n                                                            'field'=>'invoicebtn', 'label'=>'Add/Email', 'click'=>'vm.addInvoice(vm.Invoice,\\'Email\\')' ) ); ?></div><div class=col-md-2 style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                                    print btnColTemplate(\n                                                        array(\n                                                            'field'=>'invoicebtn', 'label'=>'Add/NoEmail', 'click'=>'vm.addInvoice(vm.Invoice,\\'NoEmail\\')' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer ng-show=vm.studentpick><div class=\"control-label pam h4\">Open Invoices</div><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-selection ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()><div class=watermark ng-show=!vm.gridOptions.data.length>No invoice available</div></div></div><div class=panel-footer ng-show=vm.studentpick><div class=\"control-label pam h4\">Payments</div><div ui-grid=vm.paygridOptions ui-if=\"vm.paygridOptions.data.length>0\" ui-grid-pagination ui-grid-selection ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getpayGridLength()><div class=watermark ng-show=!vm.paygridOptions.data.length>No payments available</div></div></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-program.php","<!DOCTYPE html><div ng-controller=\"ProgramTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Program</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Program</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-2><div class=col-md-6><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'class', 'model'=>'vm.program.class', 'label'=>'Program<br>&nbsp;', 'placeholder'=>'Enter Name', 'required'=>true ) ); ?></div><div class=col-md-6><?php require_once('table-basic.php');\n//    'classtype', 'vm.program.classType', 'Class<br/>Type', 'Select', true, 'editschedule2', 'vm.classTypes', 'value', 'value' print selectColTemplate( array( 'field'=>'classtype', 'model'=>'vm.program.classType', 'label'=>'Class<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.classTypes', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div></div><div class=col-md-4><div class=col-md-3><?php require_once('table-basic.php');\n//                                            'WeeklyPrice', 'vm.program.WeeklyPrice', 'Weekly Price', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'WeeklyPrice', 'model'=>'vm.program.WeeklyPrice', 'label'=>'Weekly<br>Price', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            'MonthlyPrice', 'vm.program.MonthlyPrice', 'Monthly Price', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'MonthlyPrice', 'model'=>'vm.program.MonthlyPrice', 'label'=>'Monthly<br>Price', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            '_6MonthPrice', 'vm.program._6MonthPrice', '6 Month Price', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'_6MonthPrice', 'model'=>'vm.program._6MonthPrice', 'label'=>'6 Month<br>Factor', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            '_12MonthPrice', 'vm.program._12MonthPrice', '12 Month Price', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'_12MonthPrice', 'model'=>'vm.program._12MonthPrice', 'label'=>'12 Month<br>Factor', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div></div><div class=col-md-4><div class=col-md-3><?php require_once('table-basic.php');\n//                                            '_2ndPersonDiscount', 'vm.program._2ndPersonDiscount', '2nd Person Discount', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'_2ndPersonDiscount', 'model'=>'vm.program._2ndPersonDiscount', 'label'=>'2nd Person<br>Discount', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            '_3rdPersonDiscount', 'vm.program._3rdPersonDiscount', '3rd Person Discount', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'_3rdPersonDiscount', 'model'=>'vm.program._3rdPersonDiscount', 'label'=>'3rd Person<br>Discount', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            '_4thPersonDiscount', 'vm.program._4thPersonDiscount', '4th Person Discount', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'_4thPersonDiscount', 'model'=>'vm.program._4thPersonDiscount', 'label'=>'4th Person<br>Discount', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-3><?php require_once('table-basic.php');\n//                                            'SpecialPrice', 'vm.program.SpecialPrice', 'Special Price', '0', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'SpecialPrice', 'model'=>'vm.program.SpecialPrice', 'label'=>'Special<br>Price', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div></div><div class=col-md-1><?php require_once('table-basic.php');\n//                                        'sortKey', 'vm.program.sortKey', 'Sort Order', '', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'sortKey', 'model'=>'vm.program.sortKey', 'label'=>'Sort<br>Order', 'placeholder'=>'', 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n//                                        'rankbtn', 'vm.updateProgram(vm.program)', 'Add', 'green', 'fa-plus'\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addProgram(vm.program)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-ranks.php","<!DOCTYPE html><div ng-controller=\"RankTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Rank</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Rank</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-3><div class=col-md-4><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'ranklist', 'model'=>'vm.Rank.ranklist', 'label'=>'Rank<br>&nbsp;', 'placeholder'=>'Enter Name', 'required'=>true ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'ranktype', 'model'=>'vm.Rank.ranktype', 'label'=>'Rank<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.rankTypes', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'rankGroup', 'model'=>'vm.Rank.rankGroup', 'label'=>'Rank<br>Group', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.rankGroups', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div></div><div class=col-md-8><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'AttendPromoteTarget', 'model'=>'vm.Rank.AttendPromoteTarget', 'label'=>'Attendance<br>Promotion Target', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'DurationPromoteTarget', 'model'=>'vm.Rank.DurationPromoteTarget', 'label'=>'Duration<br>Promotion Target', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'sortkey', 'model'=>'vm.Rank.sortkey', 'label'=>'Sort<br>Key', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'nextsortkey', 'model'=>'vm.Rank.nextsortkey', 'label'=>'Next Sort<br>Key', 'placeholder'=>0, 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=col-md-2><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'alphasortkey', 'model'=>'vm.Rank.alphasortkey', 'label'=>'Alphabetic<br>Sortkey', 'placeholder'=>'text', 'required'=>true ) ); ?></div></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n//                                        'rankbtn', 'vm.updateRank(vm.Rank)', 'Add', 'green', 'fa-plus'\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addRank(vm.Rank)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic-schedule.php","<!DOCTYPE html><div ng-controller=\"ScheduleTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=row><div class=caption>Maintain Schedule</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div></div><div class=portlet-body><div class=\"panel panel-blue\"><div class=panel-heading>Schedule</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><div class=col-md-12 style=\"height: 110px;\"><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-3><div class=col-md-4><?php require_once('table-basic.php');\n//   'dow', 'vm.schedule.dow', 'Day Of Week', 'Select', true, 'editschedule2', 'vm.weekschedule', 'value', 'value'\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'dow', 'model'=>'vm.schedule.dow', 'label'=>'Day of<br>Week', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.weekschedule', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n//'timerange', 'vm.schedule.timerange', 'Time Range', '0:00AM to 0:00', true, 'text'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'timerange', 'model'=>'vm.schedule.timerange', 'label'=>'Time<br>Range', 'placeholder'=>'0:00AM to 0:00', 'required'=>true ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n//'agerange', 'vm.schedule.agerange', 'Age Range', 'All Ages', true, 'text'\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'agerange', 'model'=>'vm.schedule.agerange', 'label'=>'Age<br>Range', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.agerangelist', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div></div><div class=col-md-3><div class=col-md-6><?php require_once('table-basic.php');\n    //'classid', 'vm.schedule.classid', 'Class', 'Select', true, 'editschedule2', 'vm.classhashlist', 'value', 'id'\n                                            print selectColTemplate(\n                                                array(\n                                                    'field'=>'classid', 'model'=>'vm.schedule.classid', 'label'=>'Class<br>&nbsp;', 'placeholder'=>'Select', 'required'=>true, 'changefunction'=>'vm.changeclass()', 'form'=>'editschedule2', 'repeatmodel'=>'vm.classhashlist', 'repeatvalue'=>'value', 'repeatid'=>'id' ) ); ?></div><div class=col-md-6><?php require_once('table-basic.php');\n    //'description', 'vm.schedule.description', 'Description', 'Enter Class Name', true, 'text'\n                                            print strColTemplate(\n                                                array(\n                                                    'field'=>'description', 'model'=>'vm.schedule.description', 'label'=>'Description<br>&nbsp;', 'placeholder'=>'Enter Class Name', 'required'=>true ) ); ?></div></div><div class=col-md-3><div class=col-md-6 style=\"margin-top: 10px;\"><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'startT', 'label'=>'Start<br>&nbsp;', 'model'=>'vm.schedule.startT', 'required'=>true ) ); /* print timepickerColTemplate( array( 'field'=>'startT', 'model'=>'vm.schedule.startT', 'required'=>true ) ); */ ?></div><div class=col-md-6 style=\"margin-top: 10px;\"><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'endT', 'label'=>'End<br>&nbsp;', 'model'=>'vm.schedule.endT', 'required'=>true ) ); /* print timepickerColTemplate( array( 'field'=>'endT', 'model'=>'vm.schedule.endT', 'required'=>true ) ); */ ?></div></div><div class=col-md-1><?php require_once('table-basic.php');\n//                                        'TakeAttendance', 'vm.schedule.TakeAttendance', 'Take Attendance?', false, 'editschedule2', 'Yes', 'No'\n                                    print toggleSwitchColTemplate(\n                                            array(\n                                                'field'=>'TakeAttendance', 'model'=>'vm.schedule.TakeAttendance', 'label'=>'Take<br>Attendance', 'required'=>true, 'form'=>'editschedule2' ) ); ?></div><div class=col-md-1><?php require_once('table-basic.php');\n//'sortorder', 'vm.schedule.sortorder', 'Sort Order', '', true, 'number'\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'sortorder', 'model'=>'vm.schedule.sortorder', 'label'=>'Sort<br>Order', 'placeholder'=>'', 'required'=>true, 'fieldtype'=>'number' ) ); ?></div><div class=\"col-md-1 btn\" style=\"margin-top: 36px;\"><?php require_once('table-basic.php');\n                                    print btnColTemplate(\n                                        array(\n                                            'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.updSchedule(vm.schedule)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div></div>"),
$templateCache.put("templates/states/table-basic-testtype.php","<!DOCTYPE html><div ng-controller=\"TesttypeTableBasicController as vm\"><div class=\"portlet box portlet-green\"><div class=portlet-header><div class=caption>Maintain Test Type</div><div class=tools><i class=\"fa fa-chevron-up\"></i></div></div><div class=\"portlet-body pbn ptl\" style=\"display: block; background-color: grey;\"><div class=\"panel panel-blue\"><div class=panel-heading>Test Type</div><div class=\"panel-body pan\"><div class=table-tools><div class=\"row col-md-offset-11 mbs\"><button type=button class=\"btn btn-blue mrs\" ng-click=\"vm.isCollapsed = !vm.isCollapsed\">New</button></div></div><div uib-collapse=vm.isCollapsed><div class=\"well well-lg\"><div class=container-fluid><div class=container><form action novalidate name=editschedule2 class=form-horizontal><div class=col-md-11><div class=col-md-4><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'testtype', 'model'=>'vm.Testtype.testtype', 'label'=>'Test Type<br>&nbsp;', 'placeholder'=>'Enter Type', 'required'=>true ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n                                        print strColTemplate(\n                                            array(\n                                                'field'=>'testdescription', 'model'=>'vm.Testtype.testdescription', 'label'=>'Test<br>Description', 'placeholder'=>'Enter Description' ) ); ?></div><div class=col-md-4><?php require_once('table-basic.php');\n                                        print selectColTemplate(\n                                            array(\n                                                'field'=>'ranktype', 'model'=>'vm.Testtype.ranktype', 'label'=>'Rank<br>Type', 'placeholder'=>'Select', 'required'=>true, 'form'=>'editschedule2', 'repeatmodel'=>'vm.rankTypes', 'repeatvalue'=>'value', 'repeatid'=>'value' ) ); ?></div></div><div class=\"col-md-1 btn\" style=\"margin-top: 18px;\"><?php require_once('table-basic.php');\n                                        print btnColTemplate(\n                                            array(\n                                                'field'=>'rankbtn', 'label'=>'Add', 'click'=>'vm.addTesttype(vm.Testtype)' ) ); ?></div></form></div></div></div></div></div></div><div class=panel-footer><div ui-grid=vm.gridOptions ui-if=\"vm.gridOptions.data.length>0\" ui-grid-pagination ui-grid-cellnav ui-grid-pinning ui-grid-move-columns ui-grid-exporter ui-grid-auto-resize ui-grid-resize-columns ui-grid-edit class=mygrid ng-style=vm.getGridLength()></div></div></div></div></div>"),$templateCache.put("templates/states/table-basic.php","<?php\nfunction param_default( $def = array(), $parameters= array() ){\n    $parm_diff = array();\n    $ak=array();\n    $va=array();\n    $parm = array();\n    foreach($def as $key=>$values) if(!in_array($key, array_keys($parameters))){ $ak[]=$key; $va[]=$values; } $parm_diff = array_combine($ak,$va); $parm = array_merge($parm_diff,$parameters); unset($parm_diff, $ak,$va); return $parm; } //function strColTemplate($field, $model, $label, $placeholder, $required, $fieldtype) { function strColTemplate( $parameters = array() ) { $def = array( 'required' => false, 'fieldtype' => 'text' ); $param = param_default( $def, $parameters ); ob_start(); ?><div class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div><input id=\"<?=$param['field']?>\" type=\"<?=$param['fieldtype']?>\" placeholder=\"<?=$param['placeholder']?>\" name=\"<?=$param['field']?>\" ng-model=\"<?=$param['model']?>\" <?=\"($param['required']\" ? 'required' : '')?> class=\"form-control\"></div></div><?php return ob_get_clean();\n}\n\nfunction numtypeColTemplate( $parameters = array() ) {\n\n//        <input type=\"text\" ng-model=\"test1\" model-format=\"currency\" formatter=\"formatter($modelValue,$filter,'$0.00');\" />//modelformats: digit, int, float. check https://github.com/greengerong/ngmodel-format/blob/master/demo/demo.html for others $def = array( 'required' => false, 'modelformat' => 'currency', 'placeholder' => '$0.00', 'classformat' => 'form-control currency' ); $param = param_default( $def, $parameters ); ob_start(); ?><div class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div><input id=\"<?=$param['field']?>\" type=text placeholder=\"<?=$param['placeholder']?>\" name=\"<?=$param['field']?>\" model-format=\"<?=$param['modelformat']?>\" <?=\"($param['formatter']\" ? 'formatter=\". $param[\" formatter'] : '')?> ng-model=\"<?=$param['model']?>\"<?=($param['required']  ? 'required' : '')?>class=\"<?=$param['classformat']?>\"></div></div><?php return ob_get_clean();\n}\n\nfunction textareaColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'required' =>false ); $param = param_default( $def, $parameters ); ob_start(); ?><div class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div><textarea placeholder=\"<?=$param['placeholder']?>\" name=\"<?=$param['field']?>\" ng-model=\"<?=$param['model']?>\" ng-change=\"<?=$param['change']?>\" <?=\"($param['required']\" ? 'required' : '')?> \n                    <?=($param['tinymce']  ? 'ui-tinymce=\"tinymceOptions\"' : '')?> \n                    class=\"form-control\"></textarea></div></div><?php return ob_get_clean();\n}\n\n//function timepickerColTemplate($hourStep, $minuteStep, $showMeridian, $model,  $required ) {\nfunction timepickerColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'required' =>false, 'showMeridian' => \"false\", 'hourStep' => 1, 'minuteStep' => 5 ); $param = param_default( $def, $parameters ); ob_start(); ?><div class=form-group><div id=\"<?=$param['field']?>\" uib-timepicker <?=\"($param['required']\" ? 'required' : '')?>hour-step=\"<?=$param['hourStep']?>\" minute-step=\"<?=$param['minuteStep']?>\" show-meridian=\"<?=$param['showMeridian']?>\" ng-model=\"<?=$param['model']?>\"></div></div><?php return ob_get_clean();\n}\n\n//function toggleswitchColTemplate($field, $model, $label, $required, $form, $onLabel, $offLabel) {\nfunction toggleswitchColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'required' =>false, 'onLabel' => 'Yes', 'offLabel' => 'No' ); $param = param_default( $def, $parameters ); ob_start(); ?><div ng-class=\"{'has-error': <?=$param['form']?>.<?=$param['field']?>.$invalid, 'has-success': !<?=$param['form']?>.<?=$param['field']?>.$invalid}\" class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div class=\"input-icon right\"><i data-hover=tooltip data-original-title=Correct ng-show=\"<?=$param['form']?>.<?=$param['field']?>.$dirty\" ng-class=\"<?=$param['form']?>.<?=$param['field']?>.$invalid ? 'glyphicon-remove' : 'glyphicon-ok'\" class=\"glyphicon tooltips\"></i><toggle-switch on-label=\"<?=$param['onLabel']?>\" off-label=\"<?=$param['offLabel']?>\" id=\"<?=$param['field']?>\" type=checkbox name=\"<?=$param['field']?>\" ng-model=\"<?=$param['model']?>\" <?=\"($param['required']\" ? 'required' : '')?>ng-model-options=\"{ updateOn: 'default blur', debounce: { 'default': 1500, 'blur': 0 } }\" class=\"switch-primary\"></toggle-switch></div><div style=color:maroon role=alert ng-messages=\"<?=$param['form']?>.<?=$param['field']?>.$error\" class=has-error><div ng-message=required>You did not enter a field</div></div></div><?php return ob_get_clean();\n}\n\n//function selectColTemplate($field, $model, $label, $placeholder, $required, $form, $repeatmodel, $repeatvalue, $repeatid) {\nfunction selectColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'required' =>false ); $param = param_default( $def, $parameters ); ob_start(); ?><div ng-class=\"{'has-error': <?=$param['form']?>.<?=$param['field']?>.$invalid, 'has-success': !<?=$param['form']?>.<?=$param['field']?>.$invalid}\" class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div class=\"input-icon right\"><i data-hover=tooltip data-original-title=Correct ng-show=\"<?=$param['form']?>.<?=$param['field']?>.$dirty\" ng-class=\"<?=$param['form']?>.<?=$param['field']?>.$invalid ? 'glyphicon-remove' : 'glyphicon-ok'\" class=\"glyphicon tooltips\"></i><select id=\"<?=$param['field']?>\" type=text name=\"<?=$param['field']?>\" ng-model=\"<?=$param['model']?>\" <?=\"(isset($param['changefunction'])\" ? 'ng-change=\"' . $param['changefunction'] . '\" ' : '')?><?=($param['required']  ? 'required' : '')?>ng-model-options=\"{ updateOn: 'default blur', debounce: { 'default': 1500, 'blur': 0 } }\" class=\"form-control\"><option ng-repeat=\"iter in <?=$param['repeatmodel']?>\" ng-selected=\"{{iter.<?=$param['repeatid']?>==<?=$param['model']?>}}\" placeholder=\"<?=$param['placeholder']?>\" value=\"{{ iter.<?=$param['repeatid']?> }}\">{{ iter.<?=$param['repeatvalue']?>}}</option></select></div><div style=color:maroon role=alert ng-messages=\"<?=$param['form']?>.<?=$param['field']?>.$error\" class=has-error><div ng-message=required>You did not enter a field</div></div></div><?php return ob_get_clean();\n}\n\n//function btnColTemplate($field, $click, $label, $color, $style) {\nfunction btnColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'color' =>'green', 'style' => 'fa-plus' ); $param = param_default( $def, $parameters ); ob_start(); ?> <label for=\"<?=$param['field']?>\" class=control-label>&nbsp;</label> <a role=button class=\"btn btn-<?=$param['color']?> form-control\" ng-click=\"<?=$param['click']?>\"><i class=\"fa <?=$param['style']?>\"></i>&nbsp;<?=$param['label']?></a><?php return ob_get_clean();\n}\n\nfunction dateColTemplate( $parameters = array() ) {\n\n    $def = array(\n        'required' =>false, 'fieldtype' => 'text', 'dateFormat' => 'MM/dd/yyyy' ); $param = param_default( $def, $parameters ); ob_start(); ?><div class=form-group><label for=\"<?=$param['field']?>\" class=control-label><?=$param['label']?></label><div class=col-md-11 style=\"padding-right: 0px;\"><div class=\"input-icon right\"><input id=\"<?=$param['field']?>\" type=\"<?=$param['fieldtype']?>\" placeholder=\"<?=$param['placeholder']?>\" is-open=\"<?=$param['isopen']?>\" uib-datepicker-popup=\"<?=$param['dateFormat']?>\" name=\"<?=$param['field']?>\" ng-model=\"<?=$param['model']?>\" <?=\"($param['required']\" ? 'required' : '')?> class=\"form-control\"></div></div><div class=col-md-1 style=\"padding-right: 0px; padding-left: 0px;\"><button type=button class=\"btn btn-green\" ng-click=\"<?=$param['dopen']?>\"><i class=\"glyphicon glyphicon-calendar\"></i></button></div></div><?php return ob_get_clean();\n}\n\n?>")}]);